cscope 15 $HOME/workspace/libnetfilter_queue/mib/liblfds7.1.1               0001668713
	@liblfds711/build/wdk_7.1/driver_entry_renamed_to_avoid_compiler_warning.c

1 
	~"liblfds711_öã∫Æ.h
"

8 
DRIVER_INITIALIZE
 
	gDrivîE¡ry
;

15 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

17 
NTSTATUS
 
	$DrivîE¡ry
–
_DRIVER_OBJECT
 *
DrivîObje˘
, 
PUNICODE_STRING
 
Regi°ryP©h
 )

19  
STATUS_SUCCESS
;

20 
	}
}

22 #¥agm®
w¨nög
(  : 4100 )

	@liblfds711/inc/liblfds711.h

1 #i‚de‡
LIBLFDS711_H


4 
	#LIBLFDS711_H


	)

7 #¥agm®
w¨nög
–
push
 )

8 #¥agm®
w¨nög
–
dißbÀ
 : 4324 )

9 #¥agm®
¥eÁ°
–
dißbÀ
 : 28113 28182 28183, "blah" )

12 
	~"liblfds711/lfds711_p‹tög_ab°ø˘i⁄_œyî_compûî.h
"

13 
	~"liblfds711/lfds711_p‹tög_ab°ø˘i⁄_œyî_›î©ög_sy°em.h
"

14 
	~"liblfds711/lfds711_p‹tög_ab°ø˘i⁄_œyî_¥o˚ss‹.h
"

16 
	~"liblfds711/lfds711_¥ng.h
"

17 
	~"liblfds711/lfds711_misc.h
"

18 
	~"liblfds711/lfds711_båì_add⁄ly_unbÆ™˚d.h
"

19 
	~"liblfds711/lfds711_‰ìli°.h
"

20 
	~"liblfds711/lfds711_hash_add⁄ly.h
"

21 
	~"liblfds711/lfds711_li°_add⁄ly_söglylöked_‹dîed.h
"

22 
	~"liblfds711/lfds711_li°_add⁄ly_söglylöked_un‹dîed.h
"

23 
	~"liblfds711/lfds711_queue_bounded_m™y¥odu˚r_m™yc⁄sumî.h
"

24 
	~"liblfds711/lfds711_queue_bounded_sögÀ¥odu˚r_sögÀc⁄sumî.h
"

25 
	~"liblfds711/lfds711_queue_unbounded_m™y¥odu˚r_m™yc⁄sumî.h
"

26 
	~"liblfds711/lfds711_rögbuf„r.h
"

27 
	~"liblfds711/lfds711_°ack.h
"

30 #¥agm®
w¨nög
–
p›
 )

	@liblfds711/inc/liblfds711/lfds711_btree_addonly_unbalanced.h

2 
	#LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–
båì_au_ñemít
 ) ( 
LFDS711_MISC_BARRIER_LOAD
, (båì_au_ñemít).
vÆue
 )

	)

5 
	#LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LFDS711_PAL_ATOMIC_SET
–&(båì_au_ñemít).
vÆue
,Çew_vÆuê); }

	)

6 
	#LFDS711_BTREE_AU_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elfds711_båì_au_absﬁuã_posôi⁄


11 
	mLFDS711_BTREE_AU_ABSOLUTE_POSITION_ROOT
,

12 
	mLFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elfds711_båì_au_exi°ög_key


18 
	mLFDS711_BTREE_AU_EXISTING_KEY_OVERWRITE
,

19 
	mLFDS711_BTREE_AU_EXISTING_KEY_FAIL


22 
	elfds711_båì_au_ö£π_ªsu…


24 
	mLFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLFDS711_BTREE_AU_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLFDS711_BTREE_AU_INSERT_RESULT_SUCCESS


29 
	elfds711_båì_au_quîy


31 
	mLFDS711_BTREE_AU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
,

32 
	mLFDS711_BTREE_AU_QUERY_SINGLETHREADED_VALIDATE


35 
	elfds711_båì_au_ªœtive_posôi⁄


37 
	mLFDS711_BTREE_AU_RELATIVE_POSITION_UP
,

38 
	mLFDS711_BTREE_AU_RELATIVE_POSITION_LEFT
,

39 
	mLFDS711_BTREE_AU_RELATIVE_POSITION_RIGHT
,

40 
	mLFDS711_BTREE_AU_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

41 
	mLFDS711_BTREE_AU_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

42 
	mLFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

43 
	mLFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


47 
	slfds711_båì_au_ñemít


54 
lfds711_båì_au_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

55 *vﬁ©ûê
	mÀ·
,

56 *vﬁ©ûê
	mright
,

57 *vﬁ©ûê
	mup
;

59 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

60 *vﬁ©ûê
	mvÆue
;

63 *
	mkey
;

66 
	slfds711_båì_au_°©e


68 
lfds711_båì_au_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

69 *vﬁ©ûê
	mroŸ
;

72 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

74 
lfds711_båì_au_exi°ög_key


75 
	mexi°ög_key
;

78 *
	mu£r_°©e
;

80 
lfds711_misc_backoff_°©e


81 
	mö£π_backoff
;

85 
lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_båì_au_°©e
 *
baus
,

86 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

87 
lfds711_båì_au_exi°ög_key
 
exi°ög_key
,

88 *
u£r_°©e
 );

91 
	`lfds711_båì_au_˛ónup
–
lfds711_båì_au_°©e
 *
baus
,

92 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_båì_au_°©e
 *
baus
, 
lfds711_båì_au_ñemít
 *
baue
) );

94 
lfds711_båì_au_ö£π_ªsu…
 
	`lfds711_båì_au_ö£π
–
lfds711_båì_au_°©e
 *
baus
,

95 
lfds711_båì_au_ñemít
 *
baue
,

96 
lfds711_båì_au_ñemít
 **
exi°ög_baue
 );

99 
	`lfds711_båì_au_gë_by_key
–
lfds711_båì_au_°©e
 *
baus
,

100 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

101 *
key
,

102 
lfds711_båì_au_ñemít
 **
baue
 );

104 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
lfds711_båì_au_°©e
 *
baus
,

105 
lfds711_båì_au_ñemít
 **
baue
,

106 
lfds711_båì_au_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

107 
lfds711_båì_au_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

110 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄
–
lfds711_båì_au_°©e
 *
baus
,

111 
lfds711_båì_au_ñemít
 **
baue
,

112 
lfds711_båì_au_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

114 
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
–
lfds711_båì_au_ñemít
 **
baue
,

115 
lfds711_båì_au_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

117 
	`lfds711_båì_au_quîy
–
lfds711_båì_au_°©e
 *
baus
,

118 
lfds711_båì_au_quîy
 
quîy_ty≥
,

119 *
quîy_öput
,

120 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_freelist.h

2 
	#LFDS711_FREELIST_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LFDS711_FREELIST_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LFDS711_FREELIST_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LFDS711_FREELIST_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

8 
	#LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 ( 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 / (
lfds711_‰ìli°_ñemít
 *Ë)

	)

11 
	elfds711_‰ìli°_quîy


13 
	mLFDS711_FREELIST_QUERY_SINGLETHREADED_GET_COUNT
,

14 
	mLFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
,

15 
	mLFDS711_FREELIST_QUERY_GET_ELIMINATION_ARRAY_EXTRA_ELEMENTS_IN_FREELIST_ELEMENTS


19 
	slfds711_‰ìli°_ñemít


21 
lfds711_‰ìli°_ñemít


22 *
	m√xt
;

25 *
	mkey
,

26 *
	mvÆue
;

29 
	slfds711_‰ìli°_°©e


31 
lfds711_‰ìli°_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

32 *vﬁ©ûê
	mt›
[
PAC_SIZE
];

34 
lfds711_∑l_uöt_t
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

35 
	mñimö©i⁄_¨øy_size_ö_ñemíts
;

37 
lfds711_‰ìli°_ñemít
 * volatile

38 (*
	mñimö©i⁄_¨øy
)[
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
];

41 *
	mu£r_°©e
;

43 
lfds711_misc_backoff_°©e


44 
	mp›_backoff
,

45 
	mpush_backoff
;

49 
lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_‰ìli°_°©e
 *
fs
,

50 
lfds711_‰ìli°_ñemít
 * vﬁ©ûê(*
ñimö©i⁄_¨øy
)[
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
],

51 
lfds711_∑l_uöt_t
 
ñimö©i⁄_¨øy_size_ö_ñemíts
,

52 *
u£r_°©e
 );

55 
lfds711_‰ìli°_˛ónup
–
lfds711_‰ìli°_°©e
 *
fs
,

56 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_‰ìli°_°©e
 *
fs
, 
lfds711_‰ìli°_ñemít
 *
„
) );

58 
	`lfds711_‰ìli°_push
–
lfds711_‰ìli°_°©e
 *
fs
,

59 
lfds711_‰ìli°_ñemít
 *
„
,

60 
lfds711_¥ng_°_°©e
 *
p°s
 );

62 
	`lfds711_‰ìli°_p›
–
lfds711_‰ìli°_°©e
 *
fs
,

63 
lfds711_‰ìli°_ñemít
 **
„
,

64 
lfds711_¥ng_°_°©e
 *
p°s
 );

66 
	`lfds711_‰ìli°_quîy
–
lfds711_‰ìli°_°©e
 *
fs
,

67 
lfds711_‰ìli°_quîy
 
quîy_ty≥
,

68 *
quîy_öput
,

69 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_hash_addonly.h

2 
	#LFDS711_HASH_A_GET_KEY_FROM_ELEMENT
–
hash_a_ñemít
 ) ( (hash_a_ñemít).
key
 )

	)

3 
	#LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–
hash_a_ñemít
, 
√w_key
 ) ( (hash_a_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LFDS711_HASH_A_GET_VALUE_FROM_ELEMENT
–
hash_a_ñemít
 ) ( 
LFDS711_MISC_BARRIER_LOAD
, (hash_a_ñemít).
vÆue
 )

	)

5 
	#LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–
hash_a_ñemít
, 
√w_vÆue
 ) { 
	`LFDS711_PAL_ATOMIC_SET
–&(hash_a_ñemít).
vÆue
,Çew_vÆuê); }

	)

6 
	#LFDS711_HASH_A_GET_USER_STATE_FROM_STATE
–
hash_a_°©e
 ) ( (hash_a_°©e).
u£r_°©e
 )

	)

10 #if–
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 4 )

12 
	#LFDS711_HASH_A_HASH_FUNCTION
–
d©a
, 
d©a_Àngth_ö_byãs
, 
hash
 ) { \

13 
lfds711_∑l_uöt_t
 \

14 
lo›
; \

16  
lo›
 = 0 ;Üo› < (
d©a_Àngth_ö_byãs
) ;Üoop++ ) \

18 (
hash
Ë+*–(*Ë(
d©a
Ë+ 
lo›
 ); \

19 (
hash
) = ((hash) ^ ((hash) >> 16)) * 0x85ebca6bUL; \

20 (
hash
) = ((hash) ^ ((hash) >> 13)) * 0xc2b2ae35UL; \

21 (
hash
) = (hash ^ (hash >> 16)); \

23 }

	)

26 #if–
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 8 )

28 
	#LFDS711_HASH_A_HASH_FUNCTION
–
d©a
, 
d©a_Àngth_ö_byãs
, 
hash
 ) { \

29 
lfds711_∑l_uöt_t
 \

30 
lo›
; \

32  
lo›
 = 0 ;Üo› < (
d©a_Àngth_ö_byãs
) ;Üoop++ ) \

34 (
hash
Ë+*–(*Ë(
d©a
Ë+ 
lo›
 ); \

35 (
hash
) = ((hash) ^ ((hash) >> 30)) * 0xBF58476D1CE4E5B9ULL; \

36 (
hash
) = ((hash) ^ ((hash) >> 27)) * 0x94D049BB133111EBULL; \

37 (
hash
) = (hash ^ (hash >> 31)); \

39 }

	)

43 
	elfds711_hash_a_exi°ög_key


45 
	mLFDS711_HASH_A_EXISTING_KEY_OVERWRITE
,

46 
	mLFDS711_HASH_A_EXISTING_KEY_FAIL


49 
	elfds711_hash_a_ö£π_ªsu…


51 
	mLFDS711_HASH_A_PUT_RESULT_FAILURE_EXISTING_KEY
,

52 
	mLFDS711_HASH_A_PUT_RESULT_SUCCESS_OVERWRITE
,

53 
	mLFDS711_HASH_A_PUT_RESULT_SUCCESS


56 
	elfds711_hash_a_quîy


58 
	mLFDS711_HASH_A_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
,

59 
	mLFDS711_HASH_A_QUERY_SINGLETHREADED_VALIDATE


63 
	slfds711_hash_a_ñemít


65 
lfds711_båì_au_ñemít


66 
	mbaue
;

69 *
	mkey
;

71 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

72 *vﬁ©ûê
	mvÆue
;

75 
	slfds711_hash_a_ôî©e


77 
lfds711_båì_au_ñemít


78 *
	mbaue
;

80 
lfds711_båì_au_°©e


81 *
	mbaus
,

82 *
	mbaus_íd
;

85 
	slfds711_hash_a_°©e


87 
lfds711_hash_a_exi°ög_key


88 
	mexi°ög_key
;

91 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

93 
lfds711_∑l_uöt_t


94 
	m¨øy_size
;

96 
lfds711_båì_au_°©e


97 *
	mbaus_¨øy
;

100 (*
	mñemít_˛ónup_ˇŒback
)–
lfds711_hash_a_°©e
 *
	mhas
, 
lfds711_hash_a_ñemít
 *
	mh´
 ),

101 (*
	mkey_hash_fun˘i⁄
)–c⁄° *
	mkey
, 
lfds711_∑l_uöt_t
 *
	mhash
 ),

102 *
	mu£r_°©e
;

106 
lfds711_hash_a_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_hash_a_°©e
 *
has
,

107 
lfds711_båì_au_°©e
 *
baus_¨øy
,

108 
lfds711_∑l_uöt_t
 
¨øy_size
,

109 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

110 (*
key_hash_fun˘i⁄
)(c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
),

111 
lfds711_hash_a_exi°ög_key
 
exi°ög_key
,

112 *
u£r_°©e
 );

115 
	`lfds711_hash_a_˛ónup
–
lfds711_hash_a_°©e
 *
has
,

116 (*
ñemít_˛ónup_fun˘i⁄
)(
lfds711_hash_a_°©e
 *
has
, 
lfds711_hash_a_ñemít
 *
h´
) );

118 
lfds711_hash_a_ö£π_ªsu…
 
	`lfds711_hash_a_ö£π
–
lfds711_hash_a_°©e
 *
has
,

119 
lfds711_hash_a_ñemít
 *
h´
,

120 
lfds711_hash_a_ñemít
 **
exi°ög_h´
 );

123 
	`lfds711_hash_a_gë_by_key
–
lfds711_hash_a_°©e
 *
has
,

124 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

125 (*
key_hash_fun˘i⁄
)(c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
),

126 *
key
,

127 
lfds711_hash_a_ñemít
 **
h´
 );

129 
	`lfds711_hash_a_ôî©e_öô
–
lfds711_hash_a_°©e
 *
has
, 
lfds711_hash_a_ôî©e
 *
hai
 );

130 
	`lfds711_hash_a_ôî©e
–
lfds711_hash_a_ôî©e
 *
hai
, 
lfds711_hash_a_ñemít
 **
h´
 );

132 
	`lfds711_hash_a_quîy
–
lfds711_hash_a_°©e
 *
has
,

133 
lfds711_hash_a_quîy
 
quîy_ty≥
,

134 *
quîy_öput
,

135 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_list_addonly_singlylinked_ordered.h

2 
	#LFDS711_LIST_ASO_GET_START
–
li°_aso_°©e
 ) ( 
LFDS711_MISC_BARRIER_LOAD
, (li°_aso_°©e).
°¨t
->
√xt
 )

	)

3 
	#LFDS711_LIST_ASO_GET_NEXT
–
li°_aso_ñemít
 ) ( 
LFDS711_MISC_BARRIER_LOAD
, (li°_aso_ñemít).
√xt
 )

	)

4 
	#LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
–
li°_aso_°©e
, 
poöãr_to_li°_aso_ñemít
 ) ( (poöãr_to_li°_aso_ñemítË=
NULL
 ? ( (poöãr_to_li°_aso_ñemítË
	`LFDS711_LIST_ASO_GET_START
÷i°_aso_°©eËË: ( (poöãr_to_li°_aso_ñemítË
	`LFDS711_LIST_ASO_GET_NEXT
(*’oöãr_to_li°_aso_ñemít)ËË)

	)

5 
	#LFDS711_LIST_ASO_GET_KEY_FROM_ELEMENT
–
li°_aso_ñemít
 ) ( (li°_aso_ñemít).
key
 )

	)

6 
	#LFDS711_LIST_ASO_SET_KEY_IN_ELEMENT
–
li°_aso_ñemít
, 
√w_key
 ) ( (li°_aso_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

7 
	#LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–
li°_aso_ñemít
 ) ( 
LFDS711_MISC_BARRIER_LOAD
, (li°_aso_ñemít).
vÆue
 )

	)

8 
	#LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–
li°_aso_ñemít
, 
√w_vÆue
 ) { 
	`LFDS711_PAL_ATOMIC_SET
–&÷i°_aso_ñemít).
vÆue
,Çew_vÆuê); }

	)

9 
	#LFDS711_LIST_ASO_GET_USER_STATE_FROM_STATE
–
li°_aso_°©e
 ) ( (li°_aso_°©e).
u£r_°©e
 )

	)

12 
	elfds711_li°_aso_exi°ög_key


14 
	mLFDS711_LIST_ASO_EXISTING_KEY_OVERWRITE
,

15 
	mLFDS711_LIST_ASO_EXISTING_KEY_FAIL


18 
	elfds711_li°_aso_ö£π_ªsu…


20 
	mLFDS711_LIST_ASO_INSERT_RESULT_FAILURE_EXISTING_KEY
,

21 
	mLFDS711_LIST_ASO_INSERT_RESULT_SUCCESS_OVERWRITE
,

22 
	mLFDS711_LIST_ASO_INSERT_RESULT_SUCCESS


25 
	elfds711_li°_aso_quîy


27 
	mLFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
,

28 
	mLFDS711_LIST_ASO_QUERY_SINGLETHREADED_VALIDATE


32 
	slfds711_li°_aso_ñemít


34 
lfds711_li°_aso_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

35 *vﬁ©ûê
	m√xt
;

37 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

38 *vﬁ©ûê
	mvÆue
;

41 *
	mkey
;

44 
	slfds711_li°_aso_°©e


46 
lfds711_li°_aso_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

47 
	mdummy_ñemít
;

49 
lfds711_li°_aso_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

50 *
	m°¨t
;

53 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

55 
lfds711_li°_aso_exi°ög_key


56 
	mexi°ög_key
;

59 *
	mu£r_°©e
;

61 
lfds711_misc_backoff_°©e


62 
	mö£π_backoff
;

66 
lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_li°_aso_°©e
 *
œsos
,

67 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

68 
lfds711_li°_aso_exi°ög_key
 
exi°ög_key
,

69 *
u£r_°©e
 );

72 
	`lfds711_li°_aso_˛ónup
–
lfds711_li°_aso_°©e
 *
œsos
,

73 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_li°_aso_°©e
 *
œsos
, 
lfds711_li°_aso_ñemít
 *
œs€
) );

75 
lfds711_li°_aso_ö£π_ªsu…
 
	`lfds711_li°_aso_ö£π
–
lfds711_li°_aso_°©e
 *
œsos
,

76 
lfds711_li°_aso_ñemít
 *
œs€
,

77 
lfds711_li°_aso_ñemít
 **
exi°ög_œs€
 );

79 
	`lfds711_li°_aso_gë_by_key
–
lfds711_li°_aso_°©e
 *
œsos
,

80 *
key
,

81 
lfds711_li°_aso_ñemít
 **
œs€
 );

83 
	`lfds711_li°_aso_quîy
–
lfds711_li°_aso_°©e
 *
œsos
,

84 
lfds711_li°_aso_quîy
 
quîy_ty≥
,

85 *
quîy_öput
,

86 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_list_addonly_singlylinked_unordered.h

2 
	#LFDS711_LIST_ASU_GET_START
–
li°_asu_°©e
 ) ( 
LFDS711_MISC_BARRIER_LOAD
, (li°_asu_°©e).
°¨t
->
√xt
 )

	)

3 
	#LFDS711_LIST_ASU_GET_NEXT
–
li°_asu_ñemít
 ) ( 
LFDS711_MISC_BARRIER_LOAD
, (li°_asu_ñemít).
√xt
 )

	)

4 
	#LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
–
li°_asu_°©e
, 
poöãr_to_li°_asu_ñemít
 ) ( (poöãr_to_li°_asu_ñemítË=
NULL
 ? ( (poöãr_to_li°_asu_ñemítË
	`LFDS711_LIST_ASU_GET_START
÷i°_asu_°©eËË: ( (poöãr_to_li°_asu_ñemítË
	`LFDS711_LIST_ASU_GET_NEXT
(*’oöãr_to_li°_asu_ñemít)ËË)

	)

5 
	#LFDS711_LIST_ASU_GET_KEY_FROM_ELEMENT
–
li°_asu_ñemít
 ) ( (li°_asu_ñemít).
key
 )

	)

6 
	#LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
li°_asu_ñemít
, 
√w_key
 ) ( (li°_asu_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

7 
	#LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–
li°_asu_ñemít
 ) ( 
LFDS711_MISC_BARRIER_LOAD
, (li°_asu_ñemít).
vÆue
 )

	)

8 
	#LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
li°_asu_ñemít
, 
√w_vÆue
 ) { 
	`LFDS711_PAL_ATOMIC_SET
–&÷i°_asu_ñemít).
vÆue
,Çew_vÆuê); }

	)

9 
	#LFDS711_LIST_ASU_GET_USER_STATE_FROM_STATE
–
li°_asu_°©e
 ) ( (li°_asu_°©e).
u£r_°©e
 )

	)

12 
	elfds711_li°_asu_posôi⁄


14 
	mLFDS711_LIST_ASU_POSITION_START
,

15 
	mLFDS711_LIST_ASU_POSITION_END
,

16 
	mLFDS711_LIST_ASU_POSITION_AFTER


19 
	elfds711_li°_asu_quîy


21 
	mLFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
,

22 
	mLFDS711_LIST_ASU_QUERY_SINGLETHREADED_VALIDATE


26 
	slfds711_li°_asu_ñemít


28 
lfds711_li°_asu_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

29 *vﬁ©ûê
	m√xt
;

31 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

32 *vﬁ©ûê
	mvÆue
;

35 *
	mkey
;

38 
	slfds711_li°_asu_°©e


40 
lfds711_li°_asu_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

41 
	mdummy_ñemít
;

43 
lfds711_li°_asu_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

44 *vﬁ©ûê
	míd
;

46 
lfds711_li°_asu_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

47 *
	m°¨t
;

50 *
	mu£r_°©e
;

52 
lfds711_misc_backoff_°©e


53 
	ma·î_backoff
,

54 
	míd_backoff
,

55 
	m°¨t_backoff
;

59 
lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_li°_asu_°©e
 *
œsus
,

60 *
u£r_°©e
 );

63 
lfds711_li°_asu_˛ónup
–
lfds711_li°_asu_°©e
 *
œsus
,

64 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_li°_asu_°©e
 *
œsus
, 
lfds711_li°_asu_ñemít
 *
œsue
) );

66 
	`lfds711_li°_asu_ö£π_©_posôi⁄
–
lfds711_li°_asu_°©e
 *
œsus
,

67 
lfds711_li°_asu_ñemít
 *
œsue
,

68 
lfds711_li°_asu_ñemít
 *
œsue_¥ede˚ss‹
,

69 
lfds711_li°_asu_posôi⁄
 
posôi⁄
 );

71 
	`lfds711_li°_asu_ö£π_©_°¨t
–
lfds711_li°_asu_°©e
 *
œsus
,

72 
lfds711_li°_asu_ñemít
 *
œsue
 );

74 
	`lfds711_li°_asu_ö£π_©_íd
–
lfds711_li°_asu_°©e
 *
œsus
,

75 
lfds711_li°_asu_ñemít
 *
œsue
 );

77 
	`lfds711_li°_asu_ö£π_a·î_ñemít
–
lfds711_li°_asu_°©e
 *
œsus
,

78 
lfds711_li°_asu_ñemít
 *
œsue
,

79 
lfds711_li°_asu_ñemít
 *
œsue_¥ede˚ss‹
 );

81 
	`lfds711_li°_asu_gë_by_key
–
lfds711_li°_asu_°©e
 *
œsus
,

82 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

83 *
key
,

84 
lfds711_li°_asu_ñemít
 **
œsue
 );

86 
	`lfds711_li°_asu_quîy
–
lfds711_li°_asu_°©e
 *
œsus
,

87 
lfds711_li°_asu_quîy
 
quîy_ty≥
,

88 *
quîy_öput
,

89 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_misc.h

2 
	#LFDS711_MISC_VERSION_STRING
 "7.1.1"

	)

3 
	#LFDS711_MISC_VERSION_INTEGER
 711

	)

5 #i‚de‡
NULL


6 
	#NULL
 ( (*Ë0 )

	)

9 
	#POINTER
 0

	)

10 
	#COUNTER
 1

	)

11 
	#PAC_SIZE
 2

	)

13 
	#LFDS711_MISC_DELIBERATELY_CRASH
 { *
c
 = 0; *¯0; }

	)

15 #if–!
deföed
 
LFDS711_PAL_ATOMIC_ADD
 )

16 
	#LFDS711_PAL_NO_ATOMIC_ADD


	)

17 
	#LFDS711_MISC_ATOMIC_SUPPORT_ADD
 0

	)

18 
	#LFDS711_PAL_ATOMIC_ADD
–
poöãr_to_èrgë
, 
vÆue
, 
ªsu…
, 
ªsu…_ty≥
 ) \

20 
	`LFDS711_PAL_ASSERT
( !"LFDS711_PAL_ATOMIC_ADDÇot implemented forÅhisÖlatform." ); \

21 
LFDS711_MISC_DELIBERATELY_CRASH
; \

22 }

	)

24 
	#LFDS711_MISC_ATOMIC_SUPPORT_ADD
 1

	)

27 #if–!
deföed
 
LFDS711_PAL_ATOMIC_CAS
 )

28 
	#LFDS711_PAL_NO_ATOMIC_CAS


	)

29 
	#LFDS711_MISC_ATOMIC_SUPPORT_CAS
 0

	)

30 
	#LFDS711_PAL_ATOMIC_CAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

32 
	`LFDS711_PAL_ASSERT
( !"LFDS711_PAL_ATOMIC_CASÇot implemented forÅhisÖlatform." ); \

33 (
ªsu…
) = 0; \

34 
LFDS711_MISC_DELIBERATELY_CRASH
; \

35 }

	)

37 
	#LFDS711_MISC_ATOMIC_SUPPORT_CAS
 1

	)

40 #if–!
deföed
 
LFDS711_PAL_ATOMIC_DWCAS
 )

41 
	#LFDS711_PAL_NO_ATOMIC_DWCAS


	)

42 
	#LFDS711_MISC_ATOMIC_SUPPORT_DWCAS
 0

	)

43 
	#LFDS711_PAL_ATOMIC_DWCAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
poöãr_to_√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

45 
	`LFDS711_PAL_ASSERT
( !"LFDS711_PAL_ATOMIC_DWCASÇot implemented forÅhisÖlatform." ); \

46 (
ªsu…
) = 0; \

47 
LFDS711_MISC_DELIBERATELY_CRASH
; \

48 }

	)

50 
	#LFDS711_MISC_ATOMIC_SUPPORT_DWCAS
 1

	)

53 #if–!
deföed
 
LFDS711_PAL_ATOMIC_EXCHANGE
 )

54 
	#LFDS711_PAL_NO_ATOMIC_EXCHANGE


	)

55 
	#LFDS711_MISC_ATOMIC_SUPPORT_EXCHANGE
 0

	)

56 
	#LFDS711_PAL_ATOMIC_EXCHANGE
–
poöãr_to_de°ö©i⁄
, 
√w_vÆue
, 
‹igöÆ_vÆue
, 
vÆue_ty≥
 ) \

58 
	`LFDS711_PAL_ASSERT
( !"LFDS711_PAL_ATOMIC_EXCHANGEÇot implemented forÅhisÖlatform." ); \

59 
LFDS711_MISC_DELIBERATELY_CRASH
; \

60 }

	)

62 
	#LFDS711_MISC_ATOMIC_SUPPORT_EXCHANGE
 1

	)

65 #if–!
deföed
 
LFDS711_PAL_ATOMIC_SET
 )

66 
	#LFDS711_PAL_NO_ATOMIC_SET


	)

67 
	#LFDS711_MISC_ATOMIC_SUPPORT_SET
 0

	)

68 
	#LFDS711_PAL_ATOMIC_SET
–
poöãr_to_de°ö©i⁄
, 
√w_vÆue
 ) \

70 
	`LFDS711_PAL_ASSERT
( !"LFDS711_PAL_ATOMIC_SETÇot implemented forÅhisÖlatform." ); \

71 
LFDS711_MISC_DELIBERATELY_CRASH
; \

72 }

	)

74 
	#LFDS711_MISC_ATOMIC_SUPPORT_SET
 1

	)

77 #if–
deföed
 
LFDS711_PAL_BARRIER_COMPILER_LOAD
 && deföed 
LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 )

78 
	#LFDS711_MISC_BARRIER_LOAD
 ( 
LFDS711_PAL_BARRIER_COMPILER_LOAD
, 
LFDS711_PAL_BARRIER_PROCESSOR_LOAD
, LFDS711_PAL_BARRIER_COMPILER_LOAD )

	)

81 #if–(!
deföed
 
LFDS711_PAL_BARRIER_COMPILER_LOAD
 || deföed 
LFDS711_PAL_COMPILER_BARRIERS_MISSING_PRESUMED_HAVING_A_GOOD_TIME
Ë&& deföed 
LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 )

82 
	#LFDS711_MISC_BARRIER_LOAD
 
LFDS711_PAL_BARRIER_PROCESSOR_LOAD


	)

85 #if–
deföed
 
LFDS711_PAL_BARRIER_COMPILER_LOAD
 && !deföed 
LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 )

86 
	#LFDS711_MISC_BARRIER_LOAD
 
LFDS711_PAL_BARRIER_COMPILER_LOAD


	)

89 #if–!
deföed
 
LFDS711_PAL_BARRIER_COMPILER_LOAD
 && !deföed 
LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 )

90 
	#LFDS711_MISC_BARRIER_LOAD


	)

93 #if–
deföed
 
LFDS711_PAL_BARRIER_COMPILER_STORE
 && deföed 
LFDS711_PAL_BARRIER_PROCESSOR_STORE
 )

94 
	#LFDS711_MISC_BARRIER_STORE
 ( 
LFDS711_PAL_BARRIER_COMPILER_STORE
, 
LFDS711_PAL_BARRIER_PROCESSOR_STORE
, LFDS711_PAL_BARRIER_COMPILER_STORE )

	)

97 #if–(!
deföed
 
LFDS711_PAL_BARRIER_COMPILER_STORE
 || deföed 
LFDS711_PAL_COMPILER_BARRIERS_MISSING_PRESUMED_HAVING_A_GOOD_TIME
Ë&& deföed 
LFDS711_PAL_BARRIER_PROCESSOR_STORE
 )

98 
	#LFDS711_MISC_BARRIER_STORE
 
LFDS711_PAL_BARRIER_PROCESSOR_STORE


	)

101 #if–
deföed
 
LFDS711_PAL_BARRIER_COMPILER_STORE
 && !deföed 
LFDS711_PAL_BARRIER_PROCESSOR_STORE
 )

102 
	#LFDS711_MISC_BARRIER_STORE
 
LFDS711_PAL_BARRIER_COMPILER_STORE


	)

105 #if–!
deföed
 
LFDS711_PAL_BARRIER_COMPILER_STORE
 && !deföed 
LFDS711_PAL_BARRIER_PROCESSOR_STORE
 )

106 
	#LFDS711_MISC_BARRIER_STORE


	)

109 #if–
deföed
 
LFDS711_PAL_BARRIER_COMPILER_FULL
 && deföed 
LFDS711_PAL_BARRIER_PROCESSOR_FULL
 )

110 
	#LFDS711_MISC_BARRIER_FULL
 ( 
LFDS711_PAL_BARRIER_COMPILER_FULL
, 
LFDS711_PAL_BARRIER_PROCESSOR_FULL
, LFDS711_PAL_BARRIER_COMPILER_FULL )

	)

113 #if–(!
deföed
 
LFDS711_PAL_BARRIER_COMPILER_FULL
 || deföed 
LFDS711_PAL_COMPILER_BARRIERS_MISSING_PRESUMED_HAVING_A_GOOD_TIME
Ë&& deföed 
LFDS711_PAL_BARRIER_PROCESSOR_FULL
 )

114 
	#LFDS711_MISC_BARRIER_FULL
 
LFDS711_PAL_BARRIER_PROCESSOR_FULL


	)

117 #if–
deföed
 
LFDS711_PAL_BARRIER_COMPILER_FULL
 && !deföed 
LFDS711_PAL_BARRIER_PROCESSOR_FULL
 )

118 
	#LFDS711_MISC_BARRIER_FULL
 
LFDS711_PAL_BARRIER_COMPILER_FULL


	)

121 #if–!
deföed
 
LFDS711_PAL_BARRIER_COMPILER_FULL
 && !deföed 
LFDS711_PAL_BARRIER_PROCESSOR_FULL
 )

122 
	#LFDS711_MISC_BARRIER_FULL


	)

125 #if–(
deföed
 
LFDS711_PAL_BARRIER_COMPILER_LOAD
 && deföed 
LFDS711_PAL_BARRIER_COMPILER_STORE
 && deföed 
LFDS711_PAL_BARRIER_COMPILER_FULL
Ë|| (deföed 
LFDS711_PAL_COMPILER_BARRIERS_MISSING_PRESUMED_HAVING_A_GOOD_TIME
) )

126 
	#LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 1

	)

128 
	#LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 0

	)

131 #if–
deföed
 
LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 && deföed 
LFDS711_PAL_BARRIER_PROCESSOR_STORE
 && deföed 
LFDS711_PAL_BARRIER_PROCESSOR_FULL
 )

132 
	#LFDS711_MISC_ATOMIC_SUPPORT_PROCESSOR_BARRIERS
 1

	)

134 
	#LFDS711_MISC_ATOMIC_SUPPORT_PROCESSOR_BARRIERS
 0

	)

137 
	#LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
 
LFDS711_MISC_BARRIER_LOAD


	)

138 
	#LFDS711_MISC_FLUSH
 { 
LFDS711_MISC_BARRIER_STORE
; 
	`lfds711_misc_f‹˚_°‹e
(); }

	)

141 
	elfds711_misc_ˇs_°ªngth


144 
	mLFDS711_MISC_CAS_STRENGTH_STRONG
 = 0,

145 
	mLFDS711_MISC_CAS_STRENGTH_WEAK
 = 1,

148 
	elfds711_misc_vÆidôy


150 
	mLFDS711_MISC_VALIDITY_UNKNOWN
,

151 
	mLFDS711_MISC_VALIDITY_VALID
,

152 
	mLFDS711_MISC_VALIDITY_INVALID_LOOP
,

153 
	mLFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
,

154 
	mLFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
,

155 
	mLFDS711_MISC_VALIDITY_INVALID_TEST_DATA
,

156 
	mLFDS711_MISC_VALIDITY_INVALID_ORDER
,

157 
	mLFDS711_MISC_VALIDITY_INVALID_ATOMIC_FAILED
,

158 
	mLFDS711_MISC_VALIDITY_INDETERMINATE_NONATOMIC_PASSED
,

161 
	elfds711_misc_Êag


163 
	mLFDS711_MISC_FLAG_LOWERED
,

164 
	mLFDS711_MISC_FLAG_RAISED


167 
	elfds711_misc_quîy


169 
	mLFDS711_MISC_QUERY_GET_BUILD_AND_VERSION_STRING


172 
	elfds711_misc_d©a_°ru˘uª


174 
	mLFDS711_MISC_DATA_STRUCTURE_BTREE_AU
,

175 
	mLFDS711_MISC_DATA_STRUCTURE_FREELIST
,

176 
	mLFDS711_MISC_DATA_STRUCTURE_HASH_A
,

177 
	mLFDS711_MISC_DATA_STRUCTURE_LIST_AOS
,

178 
	mLFDS711_MISC_DATA_STRUCTURE_LIST_ASU
,

179 
	mLFDS711_MISC_DATA_STRUCTURE_QUEUE_BMM
,

180 
	mLFDS711_MISC_DATA_STRUCTURE_QUEUE_BSS
,

181 
	mLFDS711_MISC_DATA_STRUCTURE_QUEUE_UMM
,

182 
	mLFDS711_MISC_DATA_STRUCTURE_RINGBUFFER
,

183 
	mLFDS711_MISC_DATA_STRUCTURE_STACK
,

184 
	mLFDS711_MISC_DATA_STRUCTURE_COUNT


188 
	slfds711_misc_backoff_°©e


190 
lfds711_∑l_uöt_t
 vﬁ©ûê
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

191 
	mlock
;

193 
lfds711_∑l_uöt_t


194 
	mbackoff_ôî©i⁄_‰equícy_cou¡îs
[2],

195 
	mmëric
,

196 
	mtŸÆ_›î©i⁄s
;

199 
	slfds711_misc_globÆs


201 
lfds711_¥ng_°©e


202 
	mps
;

205 
	slfds711_misc_vÆid©i⁄_öfo


207 
lfds711_∑l_uöt_t


208 
	mmö_ñemíts
,

209 
	mmax_ñemíts
;

213 
lfds711_misc_globÆs


214 
lfds711_misc_globÆs
;

217 
LFDS711_PAL_INLINE
 
lfds711_misc_f‹˚_°‹e
( );

219 
lfds711_misc_quîy
–lfds711_misc_quîy 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 );

222 #¥agm®
¥eÁ°
–
dißbÀ
 : 28112, "blah" )

224 
LFDS711_PAL_INLINE
 
	$lfds711_misc_f‹˚_°‹e
()

226 
lfds711_∑l_uöt_t
 vﬁ©ûê
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

227 
de°ö©i⁄
;

229 
	`LFDS711_PAL_ATOMIC_SET
–&
de°ö©i⁄
, 0 );

232 
	}
}

	@liblfds711/inc/liblfds711/lfds711_porting_abstraction_layer_compiler.h

2 #if–
deföed
 
__GNUC__
 )

4 
	#LFDS711_PAL_GCC_VERSION
 ( 
__GNUC__
 * 100 + 
__GNUC_MINOR__
 * 10 + 
__GNUC_PATCHLEVEL__
 )

	)

12 #if–
deföed
 
_MSC_VER
 && _MSC_VER >= 1400 )

14 #ifde‡
LFDS711_PAL_COMPILER


15 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 
lfds711_p‹tög_ab°ø˘i⁄_œyî_compûî
.
h


18 
	#LFDS711_PAL_COMPILER


	)

20 
	#LFDS711_PAL_COMPILER_STRING
 "MSVC"

	)

22 
	#LFDS711_PAL_ALIGN
(
Æignmít
Ë
	`__de˛•ec
–
	`Æign
◊lignmítË)

	)

23 
	#LFDS711_PAL_INLINE
 
__f‹˚ölöe


	)

25 
	#LFDS711_PAL_BARRIER_COMPILER_LOAD
 
	`_RódB¨rõr
()

	)

26 
	#LFDS711_PAL_BARRIER_COMPILER_STORE
 
	`_WrôeB¨rõr
()

	)

27 
	#LFDS711_PAL_BARRIER_COMPILER_FULL
 
	`_RódWrôeB¨rõr
()

	)

47 #if–
deföed
 
_M_ARM
 )

48 
	#LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 
	`__dmb
–
_ARM_BARRIER_ISH
 )

	)

49 
	#LFDS711_PAL_BARRIER_PROCESSOR_STORE
 
	`__dmb
–
_ARM_BARRIER_ISHST
 )

	)

50 
	#LFDS711_PAL_BARRIER_PROCESSOR_FULL
 
	`__dmb
–
_ARM_BARRIER_ISH
 )

	)

52 
	#LFDS711_PAL_ATOMIC_ADD
–
poöãr_to_èrgë
, 
vÆue
, 
ªsu…
, 
ªsu…_ty≥
 ) \

54 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

55 (
ªsu…
Ë(
ªsu…_ty≥
Ë
	`_I¡îlockedAdd_nf
–(vﬁ©ûê*Ë(
poöãr_to_èrgë
), (Ë(
vÆue
) ); \

56 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

57 }

	)

59 
	#LFDS711_PAL_ATOMIC_CAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

61 
lfds711_∑l_uöt_t
 \

62 
‹igöÆ_com∑ª
; \

64 
‹igöÆ_com∑ª
 = (
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
); \

66 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

67 *(
lfds711_∑l_uöt_t
 *Ë(
poöãr_to_com∑ª
Ë÷fds711_∑l_uöt_tË
	`_I¡îlockedCom∑ªExch™ge_nf
–(vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (Ë(
√w_de°ö©i⁄
), () *(pointer_to_compare) ); \

68 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

70 
ªsu…
 = (Ë–
‹igöÆ_com∑ª
 =(
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
) ); \

71 }

	)

73 
	#LFDS711_PAL_ATOMIC_DWCAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
poöãr_to_√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

75 
__öt64
 \

76 
‹igöÆ_com∑ª
; \

78 
‹igöÆ_com∑ª
 = *(
__öt64
 *Ë(
poöãr_to_com∑ª
); \

80 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

81 *(
__öt64
 *Ë(
poöãr_to_com∑ª
Ë
	`_I¡îlockedCom∑ªExch™ge64_nf
–(__öt64 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), *(__öt64 *Ë(
poöãr_to_√w_de°ö©i⁄
), *(__int64 *) (pointer_to_compare) ); \

82 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

84 (
ªsu…
Ë(Ë–*(
__öt64
 *Ë(
poöãr_to_com∑ª
Ë=
‹igöÆ_com∑ª
 ); \

85 }

	)

87 
	#LFDS711_PAL_ATOMIC_EXCHANGE
–
poöãr_to_de°ö©i⁄
, 
exch™ge
, 
exch™ge_ty≥
 ) \

89 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

90 (
exch™ge
Ë(
exch™ge_ty≥
Ë
	`_I¡îlockedExch™ge_nf
–(vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), () (exchange) ); \

91 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

92 }

	)

94 
	#LFDS711_PAL_ATOMIC_SET
–
poöãr_to_de°ö©i⁄
, 
√w_vÆue
 ) \

96 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

97 (Ë
	`_I¡îlockedExch™ge_nf
–(vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (Ë(
√w_vÆue
) ); \

98 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

99 }

	)

102 #if–
deföed
 
_M_IA64
 )

103 
	#LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 
	`__mf
()

	)

104 
	#LFDS711_PAL_BARRIER_PROCESSOR_STORE
 
	`__mf
()

	)

105 
	#LFDS711_PAL_BARRIER_PROCESSOR_FULL
 
	`__mf
()

	)

107 
	#LFDS711_PAL_ATOMIC_ADD
–
poöãr_to_èrgë
, 
vÆue
, 
ªsu…
, 
ªsu…_ty≥
 ) \

109 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

110 (
ªsu…
Ë(
ªsu…_ty≥
Ë
	`_I¡îlockedAdd64_acq
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_èrgë
), (__öt64Ë(
vÆue
) ); \

111 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

112 }

	)

114 
	#LFDS711_PAL_ATOMIC_CAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

116 
lfds711_∑l_uöt_t
 \

117 
‹igöÆ_com∑ª
; \

119 
‹igöÆ_com∑ª
 = (
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
); \

121 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

122 *(
lfds711_∑l_uöt_t
 *Ë(
poöãr_to_com∑ª
Ë÷fds711_∑l_uöt_tË
	`_I¡îlockedCom∑ªExch™ge64_acq
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (__öt64Ë(
√w_de°ö©i⁄
), (__int64) *(pointer_to_compare) ); \

123 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

125 
ªsu…
 = (Ë–
‹igöÆ_com∑ª
 =(
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
) ); \

126 }

	)

128 
	#LFDS711_PAL_ATOMIC_EXCHANGE
–
poöãr_to_de°ö©i⁄
, 
exch™ge
, 
exch™ge_ty≥
 ) \

130 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

131 (
exch™ge
Ë(
exch™ge_ty≥
Ë
	`_I¡îlockedExch™ge64_acq
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (__int64) (exchange) ); \

132 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

133 }

	)

135 
	#LFDS711_PAL_ATOMIC_SET
–
poöãr_to_de°ö©i⁄
, 
√w_vÆue
 ) \

137 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

138 (Ë
	`_I¡îlockedExch™ge64_acq
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (__öt64Ë(
√w_vÆue
) ); \

139 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

140 }

	)

143 #if–
deföed
 
_M_X64
 || deföed 
_M_AMD64
 )

144 
	#LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 
	`_mm_l„n˚
()

	)

145 
	#LFDS711_PAL_BARRIER_PROCESSOR_STORE
 
	`_mm_s„n˚
()

	)

146 
	#LFDS711_PAL_BARRIER_PROCESSOR_FULL
 
	`_mm_m„n˚
()

	)

149 
	#LFDS711_PAL_ATOMIC_ADD
–
poöãr_to_èrgë
, 
vÆue
, 
ªsu…
, 
ªsu…_ty≥
 ) \

151 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

152 (
ªsu…
Ë(
ªsu…_ty≥
Ë
	`_I¡îlockedExch™geAdd64
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_èrgë
), (__öt64Ë(
vÆue
) ); \

153 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

154 
ªsu…
 +
vÆue
; \

155 }

	)

157 
	#LFDS711_PAL_ATOMIC_CAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

159 
lfds711_∑l_uöt_t
 \

160 
‹igöÆ_com∑ª
; \

162 
‹igöÆ_com∑ª
 = (
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
); \

164 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

165 *(
lfds711_∑l_uöt_t
 *Ë(
poöãr_to_com∑ª
Ë÷fds711_∑l_uöt_tË
	`_I¡îlockedCom∑ªExch™ge64
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (__öt64Ë(
√w_de°ö©i⁄
), (__int64) *(pointer_to_compare) ); \

166 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

168 
ªsu…
 = (Ë–
‹igöÆ_com∑ª
 =(
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
) ); \

169 }

	)

171 #if–
_MSC_VER
 >= 1500 )

172 
	#LFDS711_PAL_ATOMIC_DWCAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
poöãr_to_√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

174 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

175 (
ªsu…
Ë(Ë
	`_I¡îlockedCom∑ªExch™ge128
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (__öt64Ë(
poöãr_to_√w_de°ö©i⁄
[1]), (__öt64Ë’oöãr_to_√w_de°ö©i⁄[0]), (__öt64 *Ë(
poöãr_to_com∑ª
) ); \

176 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

177 }

	)

180 
	#LFDS711_PAL_ATOMIC_EXCHANGE
–
poöãr_to_de°ö©i⁄
, 
exch™ge
, 
exch™ge_ty≥
 ) \

182 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

183 (
exch™ge
Ë(
exch™ge_ty≥
Ë
	`_I¡îlockedExch™ge64
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (__int64) (exchange) ); \

184 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

185 }

	)

187 
	#LFDS711_PAL_ATOMIC_SET
–
poöãr_to_de°ö©i⁄
, 
√w_vÆue
 ) \

189 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

190 (Ë
	`_I¡îlockedExch™ge64
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (__öt64Ë(
√w_vÆue
) ); \

191 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

192 }

	)

195 #if–
deföed
 
_M_IX86
 )

196 
	#LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 
	`lfds711_misc_f‹˚_°‹e
()

	)

197 
	#LFDS711_PAL_BARRIER_PROCESSOR_STORE
 
	`lfds711_misc_f‹˚_°‹e
()

	)

198 
	#LFDS711_PAL_BARRIER_PROCESSOR_FULL
 
	`lfds711_misc_f‹˚_°‹e
()

	)

201 
	#LFDS711_PAL_ATOMIC_ADD
–
poöãr_to_èrgë
, 
vÆue
, 
ªsu…
, 
ªsu…_ty≥
 ) \

203 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

204 (
ªsu…
Ë(
ªsu…_ty≥
Ë
	`_I¡îlockedExch™geAdd
–(
__öt64
 vﬁ©ûê*Ë(
poöãr_to_èrgë
), (__öt64Ë(
vÆue
) ); \

205 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

206 
ªsu…
 +
vÆue
; \

207 }

	)

209 
	#LFDS711_PAL_ATOMIC_CAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

211 
lfds711_∑l_uöt_t
 \

212 
‹igöÆ_com∑ª
; \

220 
‹igöÆ_com∑ª
 = (
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
); \

222 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

223 *(
lfds711_∑l_uöt_t
 *Ë(
poöãr_to_com∑ª
Ë÷fds711_∑l_uöt_tË
	`_I¡îlockedCom∑ªExch™ge
–(vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (Ë(
√w_de°ö©i⁄
), () *(pointer_to_compare) ); \

224 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

226 
ªsu…
 = (Ë–
‹igöÆ_com∑ª
 =(
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
) ); \

227 }

	)

229 
	#LFDS711_PAL_ATOMIC_DWCAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
poöãr_to_√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

231 
__öt64
 \

232 
‹igöÆ_com∑ª
; \

234 
‹igöÆ_com∑ª
 = *(
__öt64
 *Ë(
poöãr_to_com∑ª
); \

236 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

237 *(
__öt64
 *Ë(
poöãr_to_com∑ª
Ë
	`_I¡îlockedCom∑ªExch™ge64
–(__öt64 vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), *(__öt64 *Ë(
poöãr_to_√w_de°ö©i⁄
), *(__int64 *) (pointer_to_compare) ); \

238 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

240 (
ªsu…
Ë(Ë–*(
__öt64
 *Ë(
poöãr_to_com∑ª
Ë=
‹igöÆ_com∑ª
 ); \

241 }

	)

243 
	#LFDS711_PAL_ATOMIC_EXCHANGE
–
poöãr_to_de°ö©i⁄
, 
exch™ge
, 
exch™ge_ty≥
 ) \

248 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

249 (
exch™ge
Ë(
exch™ge_ty≥
Ë
	`_I¡îlockedExch™ge
–(vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), () (exchange) ); \

250 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

251 }

	)

253 
	#LFDS711_PAL_ATOMIC_SET
–
poöãr_to_de°ö©i⁄
, 
√w_vÆue
 ) \

255 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

256 (Ë
	`_I¡îlockedExch™ge
–(vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (Ë(
√w_vÆue
) ); \

257 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

258 }

	)

268 #if–
deföed
 
__GNUC__
 && 
LFDS711_PAL_GCC_VERSION
 >= 412 && LFDS711_PAL_GCC_VERSION < 473 )

270 #ifde‡
LFDS711_PAL_COMPILER


271 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 
lfds711_p‹tög_ab°ø˘i⁄_œyî_compûî
.
h


274 
	#LFDS711_PAL_COMPILER


	)

276 
	#LFDS711_PAL_COMPILER_STRING
 "GCC < 4.7.3"

	)

278 
	#LFDS711_PAL_ALIGN
(
Æignmít
Ë
	`__©åibuã__
–(
	`Æig√d
◊lignmít)Ë)

	)

279 
	#LFDS711_PAL_INLINE
 
ölöe


	)

281 
LFDS711_PAL_INLINE
 
	$lfds711_∑l_b¨rõr_compûî
( )

283 
__asm__
 
	`__vﬁ©ûe__
 ( "" : : : "memory" );

284 
	}
}

286 
	#LFDS711_PAL_BARRIER_COMPILER_LOAD
 
	`lfds711_∑l_b¨rõr_compûî
()

	)

287 
	#LFDS711_PAL_BARRIER_COMPILER_STORE
 
	`lfds711_∑l_b¨rõr_compûî
()

	)

288 
	#LFDS711_PAL_BARRIER_COMPILER_FULL
 
	`lfds711_∑l_b¨rõr_compûî
()

	)

290 
	#LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 
	`__sync_synchr⁄ize
()

	)

291 
	#LFDS711_PAL_BARRIER_PROCESSOR_STORE
 
	`__sync_synchr⁄ize
()

	)

292 
	#LFDS711_PAL_BARRIER_PROCESSOR_FULL
 
	`__sync_synchr⁄ize
()

	)

294 
	#LFDS711_PAL_ATOMIC_ADD
–
poöãr_to_èrgë
, 
vÆue
, 
ªsu…
, 
ªsu…_ty≥
 ) \

296 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

297 (
ªsu…
Ë(
ªsu…_ty≥
Ë
	`__sync_add_™d_„tch
–(
lfds711_∑l_uöt_t
 *Ë(
poöãr_to_èrgë
), (lfds711_∑l_uöt_tË(
vÆue
) ); \

298 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

299 }

	)

301 
	#LFDS711_PAL_ATOMIC_CAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

303 
lfds711_∑l_uöt_t
 \

304 
‹igöÆ_com∑ª
; \

306 
‹igöÆ_com∑ª
 = (
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
); \

308 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

309 *(
poöãr_to_com∑ª
Ë
	`__sync_vÆ_com∑ª_™d_sw≠
–
poöãr_to_de°ö©i⁄
, *’oöãr_to_com∑ª), 
√w_de°ö©i⁄
 ); \

310 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

312 
ªsu…
 = (Ë–
‹igöÆ_com∑ª
 =(
lfds711_∑l_uöt_t
Ë*(
poöãr_to_com∑ª
) ); \

313 }

	)

315 #if–
deföed
 
__x86_64__
 )

322 
	#LFDS711_PAL_ATOMIC_DWCAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
poöãr_to_√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

324 (
ªsu…
) = 0; \

326 
__asm__
 
__vﬁ©ûe__
 \

333 : "+m" ((
poöãr_to_de°ö©i⁄
)[0]), "+m" (’oöãr_to_de°ö©i⁄)[1]), "+a" ((
poöãr_to_com∑ª
)[0]), "+d" (’oöãr_to_com∑ª)[1]), "=q" (
ªsu…
) \

336 : "b" ((
poöãr_to_√w_de°ö©i⁄
)[0]), "c" ((pointer_to_new_destination)[1]) \

341 }

	)

345 #if–
deföed
 
__¨m__
 || deföed 
__i686__
 || deföed 
__i586__
 || deföed 
__i486__
 )

346 
	#LFDS711_PAL_ATOMIC_DWCAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
poöãr_to_√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

349 
‹igöÆ_de°ö©i⁄
; \

351 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

352 
‹igöÆ_de°ö©i⁄
 = 
	`__sync_vÆ_com∑ª_™d_sw≠
–(vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), *(*Ë(
poöãr_to_com∑ª
), *(*Ë(
poöãr_to_√w_de°ö©i⁄
) ); \

353 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

355 (
ªsu…
Ë(Ë–
‹igöÆ_de°ö©i⁄
 =*(*Ë(
poöãr_to_com∑ª
) ); \

357 *(*Ë(
poöãr_to_com∑ª
Ë
‹igöÆ_de°ö©i⁄
; \

358 }

	)

361 
	#LFDS711_PAL_ATOMIC_EXCHANGE
–
poöãr_to_de°ö©i⁄
, 
exch™ge
, 
exch™ge_ty≥
 ) \

367 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

368 (
exch™ge
Ë(
exch™ge_ty≥
Ë
	`__sync_lock_ã°_™d_£t
–
poöãr_to_de°ö©i⁄
, (exchange) ); \

369 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

370 }

	)

372 
	#LFDS711_PAL_ATOMIC_SET
–
poöãr_to_de°ö©i⁄
, 
√w_vÆue
 ) \

374 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

375 (Ë
	`__sync_lock_ã°_™d_£t
–
poöãr_to_de°ö©i⁄
, (
√w_vÆue
) ); \

376 
LFDS711_PAL_BARRIER_COMPILER_FULL
; \

377 }

	)

386 #if–
deföed
 
__GNUC__
 && 
LFDS711_PAL_GCC_VERSION
 >= 473 )

388 #ifde‡
LFDS711_PAL_COMPILER


389 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 
lfds711_p‹tög_ab°ø˘i⁄_œyî_compûî
.
h


392 
	#LFDS711_PAL_COMPILER


	)

394 
	#LFDS711_PAL_COMPILER_STRING
 "GCC >4.7.3"

	)

396 
	#LFDS711_PAL_ALIGN
(
Æignmít
Ë
	`__©åibuã__
–(
	`Æig√d
◊lignmít)Ë)

	)

397 
	#LFDS711_PAL_INLINE
 
ölöe


	)

400 
	#LFDS711_PAL_COMPILER_BARRIERS_MISSING_PRESUMED_HAVING_A_GOOD_TIME


	)

402 
	#LFDS711_PAL_BARRIER_PROCESSOR_LOAD
 
	`__©omic_thªad_„n˚
–
__ATOMIC_ACQUIRE
 )

	)

403 
	#LFDS711_PAL_BARRIER_PROCESSOR_STORE
 
	`__©omic_thªad_„n˚
–
__ATOMIC_RELEASE
 )

	)

404 
	#LFDS711_PAL_BARRIER_PROCESSOR_FULL
 
	`__©omic_thªad_„n˚
–
__ATOMIC_ACQ_REL
 )

	)

406 
	#LFDS711_PAL_ATOMIC_ADD
–
poöãr_to_èrgë
, 
vÆue
, 
ªsu…
, 
ªsu…_ty≥
 ) \

408 (
ªsu…
Ë(
ªsu…_ty≥
Ë
	`__©omic_add_„tch
–(
poöãr_to_èrgë
), (
vÆue
), 
__ATOMIC_RELAXED
 ); \

409 }

	)

411 
	#LFDS711_PAL_ATOMIC_CAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

413 
ªsu…
 = (Ë
	`__©omic_com∑ª_exch™ge_n
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
__ATOMIC_RELAXED
, __ATOMIC_RELAXED ); \

414 }

	)

417 #if–
deföed
 
__¨m__
 || deföed 
__i686__
 || deföed 
__i586__
 || deföed 
__i486__
 )

418 
	#LFDS711_PAL_ATOMIC_DWCAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
poöãr_to_√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

420 (
ªsu…
Ë(Ë
	`__©omic_com∑ª_exch™ge_n
–(vﬁ©ûê*Ë(
poöãr_to_de°ö©i⁄
), (*Ë(
poöãr_to_com∑ª
), *(*Ë(
poöãr_to_√w_de°ö©i⁄
), (
ˇs_°ªngth
), 
__ATOMIC_RELAXED
, __ATOMIC_RELAXED ); \

421 }

	)

424 #if–
deföed
 
__x86_64__
 )

431 
	#LFDS711_PAL_ATOMIC_DWCAS
–
poöãr_to_de°ö©i⁄
, 
poöãr_to_com∑ª
, 
poöãr_to_√w_de°ö©i⁄
, 
ˇs_°ªngth
, 
ªsu…
 ) \

433 (
ªsu…
) = 0; \

435 
__asm__
 
__vﬁ©ûe__
 \

442 : "+m" ((
poöãr_to_de°ö©i⁄
)[0]), "+m" (’oöãr_to_de°ö©i⁄)[1]), "+a" ((
poöãr_to_com∑ª
)[0]), "+d" (’oöãr_to_com∑ª)[1]), "=q" (
ªsu…
) \

445 : "b" ((
poöãr_to_√w_de°ö©i⁄
)[0]), "c" ((pointer_to_new_destination)[1]) \

450 }

	)

453 
	#LFDS711_PAL_ATOMIC_EXCHANGE
–
poöãr_to_de°ö©i⁄
, 
exch™ge
, 
exch™ge_ty≥
 ) \

455 (
exch™ge
Ë(
exch™ge_ty≥
Ë
	`__©omic_exch™ge_n
–(
poöãr_to_de°ö©i⁄
), (exch™ge), 
__ATOMIC_RELAXED
 ); \

456 }

	)

458 
	#LFDS711_PAL_ATOMIC_SET
–
poöãr_to_de°ö©i⁄
, 
√w_vÆue
 ) \

460 (Ë
	`__©omic_exch™ge_n
–(
poöãr_to_de°ö©i⁄
), (
√w_vÆue
), 
__ATOMIC_RELAXED
 ); \

461 }

	)

470 #if–!
deföed
 
LFDS711_PAL_COMPILER
 )

472 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 
lfds711_p‹tög_ab°ø˘i⁄_œyî_compûî
.
h


	@liblfds711/inc/liblfds711/lfds711_porting_abstraction_layer_operating_system.h

2 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 )

4 #ifde‡
LFDS711_PAL_OPERATING_SYSTEM


5 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_operating_system.h".

8 
	#LFDS711_PAL_OPERATING_SYSTEM


	)

10 
	~<as£π.h
>

12 
	#LFDS711_PAL_OS_STRING
 "Wödows"

	)

13 
	#LFDS711_PAL_ASSERT
–
ex¥essi⁄
 ) if–!”x¥essi⁄ËË
LFDS711_MISC_DELIBERATELY_CRASH
;

	)

22 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 )

24 #ifde‡
LFDS711_PAL_OPERATING_SYSTEM


25 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_operating_system.h".

28 
	#LFDS711_PAL_OPERATING_SYSTEM


	)

30 
	~<as£π.h
>

31 
	~<wdm.h
>

33 
	#LFDS711_PAL_OS_STRING
 "Wödows"

	)

34 
	#LFDS711_PAL_ASSERT
–
ex¥essi⁄
 ) if–!”x¥essi⁄ËË
LFDS711_MISC_DELIBERATELY_CRASH
;

	)

43 #if–
deföed
 
__löux__
 && !deföed 
KERNEL_MODE
 )

45 #ifde‡
LFDS711_PAL_OPERATING_SYSTEM


46 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_operating_system.h".

49 
	#LFDS711_PAL_OPERATING_SYSTEM


	)

51 
	#LFDS711_PAL_OS_STRING
 "Löux"

	)

52 
	#LFDS711_PAL_ASSERT
–
ex¥essi⁄
 ) if–!”x¥essi⁄ËË
LFDS711_MISC_DELIBERATELY_CRASH
;

	)

61 #if–
deföed
 
__löux__
 && deföed 
KERNEL_MODE
 )

63 #ifde‡
LFDS711_PAL_OPERATING_SYSTEM


64 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_operating_system.h".

67 
	#LFDS711_PAL_OPERATING_SYSTEM


	)

69 
	~<löux/moduÀ.h
>

71 
	#LFDS711_PAL_OS_STRING
 "Löux"

	)

72 
	#LFDS711_PAL_ASSERT
–
ex¥essi⁄
 ) 
	`BUG_ON
–ex¥essi⁄ )

	)

81 #if–!
deföed
 
LFDS711_PAL_OPERATING_SYSTEM
 )

83 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 
lfds711_p‹tög_ab°ø˘i⁄_œyî_›î©ög_sy°em
.
h


	@liblfds711/inc/liblfds711/lfds711_porting_abstraction_layer_processor.h

2 #if–
deföed
 
_MSC_VER
 && deföed 
_M_IX86
 )

4 #ifde‡
LFDS711_PAL_PROCESSOR


5 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

8 
	#LFDS711_PAL_PROCESSOR


	)

10 
	tlfds711_∑l_öt_t
;

11 
	tlfds711_∑l_uöt_t
;

13 
	#LFDS711_PAL_PROCESSOR_STRING
 "x86"

	)

15 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 4

	)

16 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 8

	)

18 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 32

	)

27 #if–
deföed
 
_MSC_VER
 && (deföed 
_M_X64
 || deföed 
_M_AMD64
) )

29 #ifde‡
LFDS711_PAL_PROCESSOR


30 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

33 
	#LFDS711_PAL_PROCESSOR


	)

35 
	tlfds711_∑l_öt_t
;

36 
	tlfds711_∑l_uöt_t
;

38 
	#LFDS711_PAL_PROCESSOR_STRING
 "x64"

	)

40 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

41 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

44 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 128

	)

53 #if–
deföed
 
_MSC_VER
 && deföed 
_M_IA64
 )

55 #ifde‡
LFDS711_PAL_PROCESSOR


56 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

59 
	#LFDS711_PAL_PROCESSOR


	)

61 
	tlfds711_∑l_öt_t
;

62 
	tlfds711_∑l_uöt_t
;

64 
	#LFDS711_PAL_PROCESSOR_STRING
 "IA64"

	)

66 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

67 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

69 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 64

	)

78 #if–
deföed
 
_MSC_VER
 && deföed 
_M_ARM
 )

80 #ifde‡
LFDS711_PAL_PROCESSOR


81 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

84 
	#LFDS711_PAL_PROCESSOR


	)

86 
	tlfds711_∑l_öt_t
;

87 
	tlfds711_∑l_uöt_t
;

89 
	#LFDS711_PAL_PROCESSOR_STRING
 "ARM (32-bô)"

	)

91 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 4

	)

92 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 8

	)

102 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 2048

	)

111 #if–
deföed
 
__GNUC__
 && deföed 
__¨m__
 )

113 #ifde‡
LFDS711_PAL_PROCESSOR


114 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

117 
	#LFDS711_PAL_PROCESSOR


	)

119 
	tlfds711_∑l_öt_t
;

120 
	tlfds711_∑l_uöt_t
;

122 
	#LFDS711_PAL_PROCESSOR_STRING
 "ARM (32-bô)"

	)

124 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 4

	)

125 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 8

	)

135 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 2048

	)

144 #if–
deföed
 
__GNUC__
 && deföed 
__Ørch64__
 )

146 #ifde‡
LFDS711_PAL_PROCESSOR


147 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

150 
	#LFDS711_PAL_PROCESSOR


	)

152 
	tlfds711_∑l_öt_t
;

153 
	tlfds711_∑l_uöt_t
;

155 
	#LFDS711_PAL_PROCESSOR_STRING
 "ARM (64-bô)"

	)

157 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

158 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

168 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 2048

	)

177 #if–
deföed
 
__GNUC__
 && (deföed 
__i686__
 || deföed 
__i586__
 || deföed 
__i486__
) )

179 #ifde‡
LFDS711_PAL_PROCESSOR


180 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

183 
	#LFDS711_PAL_PROCESSOR


	)

185 
	tlfds711_∑l_öt_t
;

186 
	tlfds711_∑l_uöt_t
;

188 
	#LFDS711_PAL_PROCESSOR_STRING
 "x86"

	)

190 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 4

	)

191 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 8

	)

193 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 32

	)

202 #if–
deföed
 
__GNUC__
 && deföed 
__x86_64__
 )

204 #ifde‡
LFDS711_PAL_PROCESSOR


205 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

208 
	#LFDS711_PAL_PROCESSOR


	)

210 
	tlfds711_∑l_öt_t
;

211 
	tlfds711_∑l_uöt_t
;

213 
	#LFDS711_PAL_PROCESSOR_STRING
 "x64"

	)

215 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

216 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

218 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 128

	)

227 #if–
deföed
 
__GNUC__
 && deföed 
__Æpha__
 )

229 #ifde‡
LFDS711_PAL_PROCESSOR


230 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

233 
	#LFDS711_PAL_PROCESSOR


	)

235 
	tlfds711_∑l_öt_t
;

236 
	tlfds711_∑l_uöt_t
;

238 
	#LFDS711_PAL_PROCESSOR_STRING
 "Æpha"

	)

240 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

241 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

243 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 64

	)

252 #if–
deföed
 
__GNUC__
 && deföed 
__ü64__
 )

254 #ifde‡
LFDS711_PAL_PROCESSOR


255 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

258 
	#LFDS711_PAL_PROCESSOR


	)

260 
	tlfds711_∑l_öt_t
;

261 
	tlfds711_∑l_uöt_t
;

263 
	#LFDS711_PAL_PROCESSOR_STRING
 "IA64"

	)

265 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

266 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

268 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 64

	)

277 #if–
deföed
 
__GNUC__
 && deföed 
__mùs__
 && !deföed 
__mùs64
 )

279 #ifde‡
LFDS711_PAL_PROCESSOR


280 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

283 
	#LFDS711_PAL_PROCESSOR


	)

285 
	tlfds711_∑l_öt_t
;

286 
	tlfds711_∑l_uöt_t
;

288 
	#LFDS711_PAL_PROCESSOR_STRING
 "MIPS (32-bô)"

	)

290 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 4

	)

291 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 8

	)

293 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 32

	)

302 #if–
deföed
 
__GNUC__
 && deföed 
__mùs__
 && deföed 
__mùs64
 )

304 #ifde‡
LFDS711_PAL_PROCESSOR


305 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

308 
	#LFDS711_PAL_PROCESSOR


	)

310 
	tlfds711_∑l_öt_t
;

311 
	tlfds711_∑l_uöt_t
;

313 
	#LFDS711_PAL_PROCESSOR_STRING
 "MIPS (64-bô)"

	)

315 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

316 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

318 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 64

	)

327 #if–
deföed
 
__GNUC__
 && deföed 
__µc__
 )

329 #ifde‡
LFDS711_PAL_PROCESSOR


330 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

333 
	#LFDS711_PAL_PROCESSOR


	)

335 
	tlfds711_∑l_öt_t
;

336 
	tlfds711_∑l_uöt_t
;

338 
	#LFDS711_PAL_PROCESSOR_STRING
 "POWERPC (32-bô)"

	)

340 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 4

	)

341 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 8

	)

344 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 128

	)

353 #if–
deföed
 
__GNUC__
 && deföed 
__µc64__
 )

355 #ifde‡
LFDS711_PAL_PROCESSOR


356 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

359 
	#LFDS711_PAL_PROCESSOR


	)

361 
	tlfds711_∑l_öt_t
;

362 
	tlfds711_∑l_uöt_t
;

364 
	#LFDS711_PAL_PROCESSOR_STRING
 "POWERPC (64-bô)"

	)

366 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

367 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

370 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 128

	)

379 #if–
deföed
 
__GNUC__
 && deföed 
__•¨c__
 && !deföed 
__•¨c_v9__
 )

381 #ifde‡
LFDS711_PAL_PROCESSOR


382 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

385 
	#LFDS711_PAL_PROCESSOR


	)

387 
	tlfds711_∑l_öt_t
;

388 
	tlfds711_∑l_uöt_t
;

390 
	#LFDS711_PAL_PROCESSOR_STRING
 "SPARC (32-bô)"

	)

392 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 4

	)

393 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 8

	)

395 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 32

	)

404 #if–
deföed
 
__GNUC__
 && deföed 
__•¨c__
 && deföed 
__•¨c_v9__
 )

406 #ifde‡
LFDS711_PAL_PROCESSOR


407 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

410 
	#LFDS711_PAL_PROCESSOR


	)

412 
	tlfds711_∑l_öt_t
;

413 
	tlfds711_∑l_uöt_t
;

415 
	#LFDS711_PAL_PROCESSOR_STRING
 "SPARC (64-bô)"

	)

417 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 8

	)

418 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 16

	)

420 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 64

	)

429 #if–
deföed
 
__GNUC__
 && deföed 
__m68k__
 )

431 #ifde‡
LFDS711_PAL_PROCESSOR


432 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

435 
	#LFDS711_PAL_PROCESSOR


	)

437 
	tlfds711_∑l_öt_t
;

438 
	tlfds711_∑l_uöt_t
;

440 
	#LFDS711_PAL_PROCESSOR_STRING
 "680x0"

	)

442 
	#LFDS711_PAL_ALIGN_SINGLE_POINTER
 4

	)

443 
	#LFDS711_PAL_ALIGN_DOUBLE_POINTER
 8

	)

445 
	#LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 32

	)

454 #if–!
deföed
 
LFDS711_PAL_PROCESSOR
 )

456 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 "lfds711_porting_abstraction_layer_processor.h".

	@liblfds711/inc/liblfds711/lfds711_prng.h

2 
	#LFDS711_PRNG_MAX
 ( (
lfds711_∑l_uöt_t
Ë-1 )

	)

16 #if–
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 4 )

17 
	#LFDS711_PRNG_SEED
 0x0a34655dUL

	)

18 
	#LFDS711_PRNG_SPLITMIX_MAGIC_RATIO
 0x9E3779B9UL

	)

19 
	#LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_ONE
 16

	)

20 
	#LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_TWO
 13

	)

21 
	#LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_THREE
 16

	)

22 
	#LFDS711_PRNG_SPLITMIX_MULTIPLY_CONSTANT_ONE
 0x85ebˇ6bUL

	)

23 
	#LFDS711_PRNG_SPLITMIX_MULTIPLY_CONSTANT_TWO
 0xc2b2´35UL

	)

26 #if–
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 8 )

27 
	#LFDS711_PRNG_SEED
 0x0a34655d34c092„ULL

	)

28 
	#LFDS711_PRNG_SPLITMIX_MAGIC_RATIO
 0x9E3779B97F4A7C15ULL

	)

29 
	#LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_ONE
 30

	)

30 
	#LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_TWO
 27

	)

31 
	#LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_THREE
 31

	)

32 
	#LFDS711_PRNG_SPLITMIX_MULTIPLY_CONSTANT_ONE
 0xBF58476D1CE4E5B9ULL

	)

33 
	#LFDS711_PRNG_SPLITMIX_MULTIPLY_CONSTANT_TWO
 0x94D049BB133111EBULL

	)

37 
	#LFDS711_PRNG_GENERATE
–
¥ng_°©e
, 
øndom_vÆue
 ) \

39 
	`LFDS711_PAL_ATOMIC_ADD
–&(
¥ng_°©e
).
íå›y
, 
LFDS711_PRNG_SPLITMIX_MAGIC_RATIO
, (
øndom_vÆue
), 
lfds711_∑l_uöt_t
 ); \

40 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 ); \

41 }

	)

44 
	#LFDS711_PRNG_ST_GENERATE
–
¥ng_°_°©e
, 
øndom_vÆue
 ) \

46 (
øndom_vÆue
Ë–(
¥ng_°_°©e
).
íå›y
 +
LFDS711_PRNG_SPLITMIX_MAGIC_RATIO
 ); \

47 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 ); \

48 }

	)

51 
	#LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 ) \

53 (
øndom_vÆue
Ë(‘™dom_vÆueË^ (‘™dom_vÆueË>> 
LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_ONE
)Ë* 
LFDS711_PRNG_SPLITMIX_MULTIPLY_CONSTANT_ONE
; \

54 (
øndom_vÆue
Ë(‘™dom_vÆueË^ (‘™dom_vÆueË>> 
LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_TWO
)Ë* 
LFDS711_PRNG_SPLITMIX_MULTIPLY_CONSTANT_TWO
; \

55 (
øndom_vÆue
Ë‘™dom_vÆuê^ (øndom_vÆuê>> 
LFDS711_PRNG_SPLITMIX_SHIFT_CONSTANT_THREE
)); \

56 }

	)

59 
	slfds711_¥ng_°©e


61 
lfds711_∑l_uöt_t
 vﬁ©ûê
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

62 
	míå›y
;

65 
	slfds711_¥ng_°_°©e


67 
lfds711_∑l_uöt_t


68 
	míå›y
;

72 
lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_¥ng_°©e
 *
ps
, 
lfds711_∑l_uöt_t
 
£ed
 );

73 
lfds711_¥ng_°_öô
–
lfds711_¥ng_°_°©e
 *
p°s
, 
lfds711_∑l_uöt_t
 
£ed
 );

	@liblfds711/inc/liblfds711/lfds711_queue_bounded_manyproducer_manyconsumer.h

2 
	#LFDS711_QUEUE_BMM_GET_USER_STATE_FROM_STATE
–
queue_bmm_°©e
 ) ( (queue_bmm_°©e).
u£r_°©e
 )

	)

5 
	elfds711_queue_bmm_quîy


7 
	mLFDS711_QUEUE_BMM_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
,

8 
	mLFDS711_QUEUE_BMM_QUERY_SINGLETHREADED_VALIDATE


12 
	slfds711_queue_bmm_ñemít


14 
lfds711_∑l_uöt_t
 volatile

15 
	m£quí˚_numbî
;

18 *vﬁ©ûê
	mkey
,

19 *vﬁ©ûê
	mvÆue
;

22 
	slfds711_queue_bmm_°©e


24 
lfds711_∑l_uöt_t


25 
	mnumbî_ñemíts
,

26 
	mmask
;

28 
lfds711_∑l_uöt_t
 vﬁ©ûê
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

29 
	mªad_ödex
,

30 
	mwrôe_ödex
;

32 
lfds711_queue_bmm_ñemít


33 *
	mñemít_¨øy
;

36 *
	mu£r_°©e
;

38 
lfds711_misc_backoff_°©e


39 
	mdequeue_backoff
,

40 
	míqueue_backoff
;

44 
lfds711_queue_bmm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_queue_bmm_°©e
 *
qbmms
,

45 
lfds711_queue_bmm_ñemít
 *
ñemít_¨øy
,

46 
lfds711_∑l_uöt_t
 
numbî_ñemíts
,

47 *
u£r_°©e
 );

49 
lfds711_queue_bmm_˛ónup
–
lfds711_queue_bmm_°©e
 *
qbmms
,

50 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_queue_bmm_°©e
 *
qbmms
,

51 *
key
,

52 *
vÆue
) );

54 
	`lfds711_queue_bmm_íqueue
–
lfds711_queue_bmm_°©e
 *
qbmms
,

55 *
key
,

56 *
vÆue
 );

58 
	`lfds711_queue_bmm_dequeue
–
lfds711_queue_bmm_°©e
 *
qbmms
,

59 **
key
,

60 **
vÆue
 );

62 
	`lfds711_queue_bmm_quîy
–
lfds711_queue_bmm_°©e
 *
qbmms
,

63 
lfds711_queue_bmm_quîy
 
quîy_ty≥
,

64 *
quîy_öput
,

65 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_queue_bounded_singleproducer_singleconsumer.h

2 
	#LFDS711_QUEUE_BSS_GET_USER_STATE_FROM_STATE
–
queue_bss_°©e
 ) ( (queue_bss_°©e).
u£r_°©e
 )

	)

5 
	elfds711_queue_bss_quîy


7 
	mLFDS711_QUEUE_BSS_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
,

8 
	mLFDS711_QUEUE_BSS_QUERY_VALIDATE


12 
	slfds711_queue_bss_ñemít


15 *vﬁ©ûê
	mkey
,

16 *vﬁ©ûê
	mvÆue
;

19 
	slfds711_queue_bss_°©e


21 
lfds711_∑l_uöt_t


22 
	mnumbî_ñemíts
,

23 
	mmask
;

25 
lfds711_∑l_uöt_t
 volatile

26 
	mªad_ödex
,

27 
	mwrôe_ödex
;

29 
lfds711_queue_bss_ñemít


30 *
	mñemít_¨øy
;

33 *
	mu£r_°©e
;

37 
lfds711_queue_bss_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_queue_bss_°©e
 *
qbsss
,

38 
lfds711_queue_bss_ñemít
 *
ñemít_¨øy
,

39 
lfds711_∑l_uöt_t
 
numbî_ñemíts
,

40 *
u£r_°©e
 );

44 
lfds711_queue_bss_˛ónup
–
lfds711_queue_bss_°©e
 *
qbsss
,

45 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_queue_bss_°©e
 *
qbsss
, *
key
, *
vÆue
) );

47 
	`lfds711_queue_bss_íqueue
–
lfds711_queue_bss_°©e
 *
qbsss
,

48 *
key
,

49 *
vÆue
 );

51 
	`lfds711_queue_bss_dequeue
–
lfds711_queue_bss_°©e
 *
qbsss
,

52 **
key
,

53 **
vÆue
 );

55 
	`lfds711_queue_bss_quîy
–
lfds711_queue_bss_°©e
 *
qbsss
,

56 
lfds711_queue_bss_quîy
 
quîy_ty≥
,

57 *
quîy_öput
,

58 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_queue_unbounded_manyproducer_manyconsumer.h

2 
	#LFDS711_QUEUE_UMM_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LFDS711_QUEUE_UMM_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LFDS711_QUEUE_UMM_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	elfds711_queue_umm_quîy


11 
	mLFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_GET_COUNT
,

12 
	mLFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE


16 
	slfds711_queue_umm_ñemít


18 
lfds711_queue_umm_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

19 *vﬁ©ûê
	m√xt
[
PAC_SIZE
];

22 *
	mkey
,

23 *
	mvÆue
;

26 
	slfds711_queue_umm_°©e


28 
lfds711_queue_umm_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

29 *vﬁ©ûê
	míqueue
[
PAC_SIZE
],

30 *vﬁ©ûê
	mdequeue
[
PAC_SIZE
];

32 
lfds711_∑l_uöt_t
 vﬁ©ûê
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

33 
	maba_cou¡î
;

35 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

36 *
	mu£r_°©e
;

38 
lfds711_misc_backoff_°©e


39 
	mdequeue_backoff
,

40 
	míqueue_backoff
;

44 
lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_queue_umm_°©e
 *
qumms
,

45 
lfds711_queue_umm_ñemít
 *
qumme_dummy
,

46 *
u£r_°©e
 );

49 
lfds711_queue_umm_˛ónup
–
lfds711_queue_umm_°©e
 *
qumms
,

50 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_queue_umm_°©e
 *
qumms
, 
lfds711_queue_umm_ñemít
 *
qumme
, 
lfds711_misc_Êag
 
dummy_ñemít_Êag
) );

52 
	`lfds711_queue_umm_íqueue
–
lfds711_queue_umm_°©e
 *
qumms
,

53 
lfds711_queue_umm_ñemít
 *
qumme
 );

55 
	`lfds711_queue_umm_dequeue
–
lfds711_queue_umm_°©e
 *
qumms
,

56 
lfds711_queue_umm_ñemít
 **
qumme
 );

58 
	`lfds711_queue_umm_quîy
–
lfds711_queue_umm_°©e
 *
qumms
,

59 
lfds711_queue_umm_quîy
 
quîy_ty≥
,

60 *
quîy_öput
,

61 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_ringbuffer.h

2 
	#LFDS711_RINGBUFFER_GET_USER_STATE_FROM_STATE
–
rögbuf„r_°©e
 ) ( (rögbuf„r_°©e).
u£r_°©e
 )

	)

5 
	elfds711_rögbuf„r_quîy


7 
	mLFDS711_RINGBUFFER_QUERY_SINGLETHREADED_GET_COUNT
,

8 
	mLFDS711_RINGBUFFER_QUERY_SINGLETHREADED_VALIDATE


12 
	slfds711_rögbuf„r_ñemít


14 
lfds711_‰ìli°_ñemít


15 
	m„
;

17 
lfds711_queue_umm_ñemít


18 
	mqumme
;

20 
lfds711_queue_umm_ñemít


21 *
	mqumme_u£
;

24 *
	mkey
,

25 *
	mvÆue
;

28 
	slfds711_rögbuf„r_°©e


30 
lfds711_‰ìli°_°©e


31 
	mfs
;

33 
lfds711_queue_umm_°©e


34 
	mqumms
;

37 (*
	mñemít_˛ónup_ˇŒback
)–
lfds711_rögbuf„r_°©e
 *
	mrs
, *
	mkey
, *
	mvÆue
, 
lfds711_misc_Êag
 
	muƒód_Êag
 ),

38 *
	mu£r_°©e
;

42 
lfds711_rögbuf„r_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_rögbuf„r_°©e
 *
rs
,

43 
lfds711_rögbuf„r_ñemít
 *
ª_¨øy_öc_dummy
,

44 
lfds711_∑l_uöt_t
 
numbî_ñemíts_öc_dummy
,

45 *
u£r_°©e
 );

48 
lfds711_rögbuf„r_˛ónup
–
lfds711_rögbuf„r_°©e
 *
rs
,

49 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_rögbuf„r_°©e
 *
rs
, *
key
, *
vÆue
, 
lfds711_misc_Êag
 
uƒód_Êag
) );

51 
	`lfds711_rögbuf„r_ªad
–
lfds711_rögbuf„r_°©e
 *
rs
,

52 **
key
,

53 **
vÆue
 );

55 
	`lfds711_rögbuf„r_wrôe
–
lfds711_rögbuf„r_°©e
 *
rs
,

56 *
key
,

57 *
vÆue
,

58 
lfds711_misc_Êag
 *
ovîwrôe_occuºed_Êag
,

59 **
ovîwrôãn_key
,

60 **
ovîwrôãn_vÆue
 );

62 
	`lfds711_rögbuf„r_quîy
–
lfds711_rögbuf„r_°©e
 *
rs
,

63 
lfds711_rögbuf„r_quîy
 
quîy_ty≥
,

64 *
quîy_öput
,

65 *
quîy_ouçut
 );

	@liblfds711/inc/liblfds711/lfds711_stack.h

2 
	#LFDS711_STACK_GET_KEY_FROM_ELEMENT
–
°ack_ñemít
 ) ( (°ack_ñemít).
key
 )

	)

3 
	#LFDS711_STACK_SET_KEY_IN_ELEMENT
–
°ack_ñemít
, 
√w_key
 ) ( (°ack_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LFDS711_STACK_GET_VALUE_FROM_ELEMENT
–
°ack_ñemít
 ) ( (°ack_ñemít).
vÆue
 )

	)

5 
	#LFDS711_STACK_SET_VALUE_IN_ELEMENT
–
°ack_ñemít
, 
√w_vÆue
 ) ( (°ack_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LFDS711_STACK_GET_USER_STATE_FROM_STATE
–
°ack_°©e
 ) ( (°ack_°©e).
u£r_°©e
 )

	)

9 
	elfds711_°ack_quîy


11 
	mLFDS711_STACK_QUERY_SINGLETHREADED_GET_COUNT
,

12 
	mLFDS711_STACK_QUERY_SINGLETHREADED_VALIDATE


16 
	slfds711_°ack_ñemít


18 
lfds711_°ack_ñemít


19 *
	m√xt
;

22 *
	mkey
,

23 *
	mvÆue
;

26 
	slfds711_°ack_°©e


28 
lfds711_°ack_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

29 *vﬁ©ûê
	mt›
[
PAC_SIZE
];

31 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

32 *
	mu£r_°©e
;

34 
lfds711_misc_backoff_°©e


35 
	mp›_backoff
,

36 
	mpush_backoff
;

40 
lfds711_°ack_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_°ack_°©e
 *
ss
,

41 *
u£r_°©e
 );

44 
lfds711_°ack_˛ónup
–
lfds711_°ack_°©e
 *
ss
,

45 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_°ack_°©e
 *
ss
, 
lfds711_°ack_ñemít
 *
£
) );

47 
	`lfds711_°ack_push
–
lfds711_°ack_°©e
 *
ss
,

48 
lfds711_°ack_ñemít
 *
£
 );

50 
	`lfds711_°ack_p›
–
lfds711_°ack_°©e
 *
ss
,

51 
lfds711_°ack_ñemít
 **
£
 );

53 
	`lfds711_°ack_quîy
–
lfds711_°ack_°©e
 *
ss
,

54 
lfds711_°ack_quîy
 
quîy_ty≥
,

55 *
quîy_öput
,

56 *
quîy_ouçut
 );

	@liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_cleanup.c

2 
	~"lfds711_båì_add⁄ly_unbÆ™˚d_öã∫Æ.h
"

9 
	$lfds711_båì_au_˛ónup
–
lfds711_båì_au_°©e
 *
baus
,

10 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_båì_au_°©e
 *
baus
, 
lfds711_båì_au_ñemít
 *
baue
) )

12 
lfds711_båì_au_dñëe_a˘i⁄


13 
dñëe_a˘i⁄
 = 
LFDS711_BTREE_AU_DELETE_SELF
;

15 
lfds711_båì_au_ñemít


16 *
baue
;

18 
lfds711_båì_au_ñemít


19 *
ãmp
;

21 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

41 if–
ñemít_˛ónup_ˇŒback
 =
NULL
 )

44 
LFDS711_MISC_BARRIER_LOAD
;

46 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_ROOT
 );

48  
baue
 !
NULL
 )

50 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

51 
dñëe_a˘i⁄
 = 
LFDS711_BTREE_AU_DELETE_SELF
;

53 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

54 
dñëe_a˘i⁄
 = 
LFDS711_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

56 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

57 
dñëe_a˘i⁄
 = 
LFDS711_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

59 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

60 
dñëe_a˘i⁄
 = 
LFDS711_BTREE_AU_DELETE_MOVE_LEFT
;

62  
dñëe_a˘i⁄
 )

64 
LFDS711_BTREE_AU_DELETE_SELF
:

66 if–
baue
->
up
 !
NULL
 )

68 if–
baue
->
up
->
À·
 == baue )

69 
baue
->
up
->
À·
 = 
NULL
;

70 if–
baue
->
up
->
right
 == baue )

71 
baue
->
up
->
right
 = 
NULL
;

74 
ãmp
 = 
baue
;

75 
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
–&
baue
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_UP
 );

76 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

79 
LFDS711_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

80 
baue
->
À·
->
up
 = baue->up;

81 if–
baue
->
up
 !
NULL
 )

83 if–
baue
->
up
->
À·
 == baue )

84 
baue
->
up
->
À·
 = baue->left;

85 if–
baue
->
up
->
right
 == baue )

86 
baue
->
up
->
right
 = baue->
À·
;

89 
ãmp
 = 
baue
;

90 
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
–&
baue
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_LEFT
 );

91 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

94 
LFDS711_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

95 
baue
->
right
->
up
 = baue->up;

96 if–
baue
->
up
 !
NULL
 )

98 if–
baue
->
up
->
À·
 == baue )

99 
baue
->
up
->
À·
 = baue->
right
;

100 if–
baue
->
up
->
right
 == baue )

101 
baue
->
up
->
right
 = baue->right;

104 
ãmp
 = 
baue
;

105 
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
–&
baue
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_RIGHT
 );

106 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

109 
LFDS711_BTREE_AU_DELETE_MOVE_LEFT
:

110 
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
–&
baue
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_LEFT
 );

116 
	}
}

	@liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_get.c

2 
	~"lfds711_båì_add⁄ly_unbÆ™˚d_öã∫Æ.h
"

5 
lfds711_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
lfds711_båì_au_ñemít
 **
baue
 );

6 
lfds711_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
lfds711_båì_au_ñemít
 **
baue
 );

13 
	$lfds711_båì_au_gë_by_key
–
lfds711_båì_au_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 *
key
,

16 
lfds711_båì_au_ñemít
 **
baue
 )

19 
com∑ª_ªsu…
 = !0,

20 
rv
 = 1;

22 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

25 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

27 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

28 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

30 
LFDS711_MISC_BARRIER_LOAD
;

32 *
baue
 = 
baus
->
roŸ
;

34 
LFDS711_MISC_BARRIER_LOAD
;

36  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

38 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

40 if–
com∑ª_ªsu…
 < 0 )

42 *
baue
 = (*baue)->
À·
;

43 
LFDS711_MISC_BARRIER_LOAD
;

46 if–
com∑ª_ªsu…
 > 0 )

48 *
baue
 = (*baue)->
right
;

49 
LFDS711_MISC_BARRIER_LOAD
;

53 if–*
baue
 =
NULL
 )

54 
rv
 = 0;

56  
rv
;

57 
	}
}

64 
	$lfds711_båì_au_gë_by_absﬁuã_posôi⁄
–
lfds711_båì_au_°©e
 *
baus
,

65 
lfds711_båì_au_ñemít
 **
baue
,

66 
lfds711_båì_au_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

69 
rv
 = 1;

71 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

72 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

75 
LFDS711_MISC_BARRIER_LOAD
;

77 *
baue
 = 
baus
->
roŸ
;

79 
LFDS711_MISC_BARRIER_LOAD
;

81  
absﬁuã_posôi⁄
 )

83 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_ROOT
:

86 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

87 if–*
baue
 !
NULL
 )

88  (*
baue
)->
right
 !
NULL
 )

90 *
baue
 = (*baue)->
right
;

91 
LFDS711_MISC_BARRIER_LOAD
;

95 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

96 if–*
baue
 !
NULL
 )

97  (*
baue
)->
À·
 !
NULL
 )

99 *
baue
 = (*baue)->
À·
;

100 
LFDS711_MISC_BARRIER_LOAD
;

105 if–*
baue
 =
NULL
 )

106 
rv
 = 0;

108  
rv
;

109 
	}
}

116 
	$lfds711_båì_au_gë_by_ªœtive_posôi⁄
–
lfds711_båì_au_ñemít
 **
baue
,

117 
lfds711_båì_au_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

120 
rv
 = 1;

122 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

125 if–*
baue
 =
NULL
 )

128 
LFDS711_MISC_BARRIER_LOAD
;

130  
ªœtive_posôi⁄
 )

132 
LFDS711_BTREE_AU_RELATIVE_POSITION_UP
:

133 *
baue
 = (*baue)->
up
;

137 
LFDS711_BTREE_AU_RELATIVE_POSITION_LEFT
:

138 *
baue
 = (*baue)->
À·
;

139 
LFDS711_MISC_BARRIER_LOAD
;

142 
LFDS711_BTREE_AU_RELATIVE_POSITION_RIGHT
:

143 *
baue
 = (*baue)->
right
;

144 
LFDS711_MISC_BARRIER_LOAD
;

147 
LFDS711_BTREE_AU_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

148 *
baue
 = (*baue)->
À·
;

149 if–*
baue
 !
NULL
 )

151 
LFDS711_MISC_BARRIER_LOAD
;

152  (*
baue
)->
right
 !
NULL
 )

154 *
baue
 = (*baue)->
right
;

155 
LFDS711_MISC_BARRIER_LOAD
;

160 
LFDS711_BTREE_AU_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

161 *
baue
 = (*baue)->
right
;

162 if–*
baue
 !
NULL
 )

164 
LFDS711_MISC_BARRIER_LOAD
;

165  (*
baue
)->
À·
 !
NULL
 )

167 *
baue
 = (*baue)->
À·
;

168 
LFDS711_MISC_BARRIER_LOAD
;

173 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

174 
	`lfds711_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baue
 );

177 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

178 
	`lfds711_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baue
 );

182 if–*
baue
 =
NULL
 )

183 
rv
 = 0;

185  
rv
;

186 
	}
}

193 
	$lfds711_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
lfds711_båì_au_ñemít
 **
baue
 )

195 
lfds711_båì_au_move


196 
a˘i⁄
 = 
LFDS711_BTREE_AU_MOVE_INVALID
;

198 
lfds711_misc_Êag


199 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
,

200 
lﬂd_föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

202 
lfds711_båì_au_ñemít


203 *
À·
 = 
NULL
,

204 *
right
 = 
NULL
,

205 *
up
 = 
NULL
,

206 *
up_À·
 = 
NULL
,

207 *
up_right
 = 
NULL
;

209 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

229 
LFDS711_MISC_BARRIER_LOAD
;

231  
lﬂd_föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

233 
À·
 = (*
baue
)->left;

234 
right
 = (*
baue
)->right;

235 
up
 = (*
baue
)->up;

236 if–
up
 !
NULL
 )

238 
up_À·
 = (*
baue
)->
up
->
À·
;

239 
up_right
 = (*
baue
)->
up
->
right
;

243 if–
À·
 !
NULL
 
™d
 
right
 !NULL 
	`™d
 (
up
 =NULL 
	`‹
 (u∞!NULLánd 
up_À·
 !NULLánd 
up_right
 != NULL)) )

246 
LFDS711_MISC_BARRIER_LOAD
;

248 if–
À·
 =(*
baue
)->À· 
™d
 
right
 =(*baue)->righà
	`™d
 (
up
 =
NULL
 
	`‹
 (u∞!NULLánd u∞=(*baue)->u∞™d 
up_À·
 =(*baue)->up->À·ánd 
up_right
 == (*baue)->up->right)) )

249 
lﬂd_föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

252 if–
À·
 !
NULL
 )

253 
a˘i⁄
 = 
LFDS711_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

255 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

256 
a˘i⁄
 = 
LFDS711_BTREE_AU_MOVE_GET_PARENT
;

258 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

259 
a˘i⁄
 = 
LFDS711_BTREE_AU_MOVE_MOVE_UP_TREE
;

261  
a˘i⁄
 )

263 
LFDS711_BTREE_AU_MOVE_INVALID
:

264 
LFDS711_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

268 
LFDS711_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

269 *
baue
 = 
À·
;

270 if–*
baue
 !
NULL
 )

272 
LFDS711_MISC_BARRIER_LOAD
;

273  (*
baue
)->
right
 !
NULL
 )

275 *
baue
 = (*baue)->
right
;

276 
LFDS711_MISC_BARRIER_LOAD
;

281 
LFDS711_BTREE_AU_MOVE_GET_PARENT
:

282 *
baue
 = 
up
;

285 
LFDS711_BTREE_AU_MOVE_MOVE_UP_TREE
:

286  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

288 
lﬂd_föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

290  
lﬂd_föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

292 
up
 = (*
baue
)->up;

293 if–
up
 !
NULL
 )

294 
up_À·
 = (*
baue
)->
up
->
À·
;

297 if–
up
 =
NULL
 
	`‹
 (u∞!NULL 
™d
 
up_À·
 != NULL) )

300 
LFDS711_MISC_BARRIER_LOAD
;

302 if–
up
 =(*
baue
)->u∞
™d
 
up_À·
 =(*baue)->up->
À·
 )

303 
lﬂd_föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

306 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

307 *
baue
 = 
up
;

309 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

312 *
baue
 = 
up
;

326 
	}
}

333 
	$lfds711_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
lfds711_båì_au_ñemít
 **
baue
 )

335 
lfds711_båì_au_move


336 
a˘i⁄
 = 
LFDS711_BTREE_AU_MOVE_INVALID
;

338 
lfds711_misc_Êag


339 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
,

340 
lﬂd_föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

342 
lfds711_båì_au_ñemít


343 *
À·
 = 
NULL
,

344 *
right
 = 
NULL
,

345 *
up
 = 
NULL
,

346 *
up_À·
 = 
NULL
,

347 *
up_right
 = 
NULL
;

349 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

358 
LFDS711_MISC_BARRIER_LOAD
;

360  
lﬂd_föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

362 
À·
 = (*
baue
)->left;

363 
right
 = (*
baue
)->right;

364 
up
 = (*
baue
)->up;

365 if–
up
 !
NULL
 )

367 
up_À·
 = (*
baue
)->
up
->
À·
;

368 
up_right
 = (*
baue
)->
up
->
right
;

372 if–
À·
 !
NULL
 
™d
 
right
 !NULL 
	`™d
 (
up
 =NULL 
	`‹
 (u∞!NULLánd 
up_À·
 !NULLánd 
up_right
 != NULL)) )

375 
LFDS711_MISC_BARRIER_LOAD
;

377 if–
À·
 =(*
baue
)->À· 
™d
 
right
 =(*baue)->righà
	`™d
 (
up
 =
NULL
 
	`‹
 (u∞!NULLánd u∞=(*baue)->u∞™d 
up_À·
 =(*baue)->up->À·ánd 
up_right
 == (*baue)->up->right)) )

378 
lﬂd_föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

381 if–
right
 !
NULL
 )

382 
a˘i⁄
 = 
LFDS711_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

384 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

385 
a˘i⁄
 = 
LFDS711_BTREE_AU_MOVE_GET_PARENT
;

387 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

388 
a˘i⁄
 = 
LFDS711_BTREE_AU_MOVE_MOVE_UP_TREE
;

390  
a˘i⁄
 )

392 
LFDS711_BTREE_AU_MOVE_INVALID
:

393 
LFDS711_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

397 
LFDS711_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

398 *
baue
 = 
right
;

399 if–*
baue
 !
NULL
 )

401 
LFDS711_MISC_BARRIER_LOAD
;

402  (*
baue
)->
À·
 !
NULL
 )

404 *
baue
 = (*baue)->
À·
;

405 
LFDS711_MISC_BARRIER_LOAD
;

410 
LFDS711_BTREE_AU_MOVE_GET_PARENT
:

411 *
baue
 = 
up
;

414 
LFDS711_BTREE_AU_MOVE_MOVE_UP_TREE
:

415  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

417 
lﬂd_föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

419  
lﬂd_föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

421 
up
 = (*
baue
)->up;

422 if–
up
 !
NULL
 )

423 
up_right
 = (*
baue
)->
up
->
right
;

426 if–
up
 =
NULL
 
	`‹
 (u∞!NULL 
™d
 
up_right
 != NULL) )

429 
LFDS711_MISC_BARRIER_LOAD
;

431 if–
up
 =(*
baue
)->u∞
™d
 
up_right
 =(*baue)->up->
right
 )

432 
lﬂd_föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

435 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

436 *
baue
 = 
up
;

438 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

441 *
baue
 = 
up
;

455 
	}
}

462 
	$lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
lfds711_båì_au_°©e
 *
baus
,

463 
lfds711_båì_au_ñemít
 **
baue
,

464 
lfds711_båì_au_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

465 
lfds711_båì_au_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

468 
rv
;

470 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

471 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

475 if–*
baue
 =
NULL
 )

476 
rv
 = 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

478 
rv
 = 
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
–
baue
, 
ªœtive_posôi⁄
 );

480  
rv
;

481 
	}
}

	@liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_init.c

2 
	~"lfds711_båì_add⁄ly_unbÆ™˚d_öã∫Æ.h
"

9 
	$lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_båì_au_°©e
 *
baus
,

10 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

11 
lfds711_båì_au_exi°ög_key
 
exi°ög_key
,

12 *
u£r_°©e
 )

14 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

15 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
baus
->
roŸ
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

16 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

20 
baus
->
roŸ
 = 
NULL
;

21 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

22 
baus
->
exi°ög_key
 =Éxisting_key;

23 
baus
->
u£r_°©e
 = user_state;

25 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
baus
->
ö£π_backoff
 );

27 
LFDS711_MISC_BARRIER_STORE
;

29 
	`lfds711_misc_f‹˚_°‹e
();

32 
	}
}

	@liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_insert.c

2 
	~"lfds711_båì_add⁄ly_unbÆ™˚d_öã∫Æ.h
"

9 
lfds711_båì_au_ö£π_ªsu…
 
	$lfds711_båì_au_ö£π
–
lfds711_båì_au_°©e
 *
baus
,

10 
lfds711_båì_au_ñemít
 *
baue
,

11 
lfds711_båì_au_ñemít
 **
exi°ög_baue
 )

14 
ªsu…
 = 0;

17 
com∑ª_ªsu…
 = 0;

19 
lfds711_∑l_uöt_t


20 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

22 
lfds711_båì_au_ñemít


23 *
com∑ª
 = 
NULL
,

24 *vﬁ©ûê
baue_√xt
 = 
NULL
,

25 *vﬁ©ûê
baue_∑ª¡
 = 
NULL
,

26 *vﬁ©ûê
baue_ãmp
;

28 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

29 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

30 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
baue
->
À·
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

31 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
baue
->
right
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

32 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
baue
->
up
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

33 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
baue
->
vÆue
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

49 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

51 
LFDS711_MISC_BARRIER_LOAD
;

53 
baue_ãmp
 = 
baus
->
roŸ
;

55 
LFDS711_MISC_BARRIER_LOAD
;

57  
ªsu…
 == 0 )

60  
baue_ãmp
 !
NULL
 )

62 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

64 if–
com∑ª_ªsu…
 == 0 )

66 if–
exi°ög_baue
 !
NULL
 )

67 *
exi°ög_baue
 = 
baue_ãmp
;

69  
baus
->
exi°ög_key
 )

71 
LFDS711_BTREE_AU_EXISTING_KEY_OVERWRITE
:

72 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–*
baue_ãmp
, 
baue
->
vÆue
 );

73  
LFDS711_BTREE_AU_INSERT_RESULT_SUCCESS_OVERWRITE
;

76 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
:

77  
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
;

82 if–
com∑ª_ªsu…
 < 0 )

83 
baue_√xt
 = 
baue_ãmp
->
À·
;

85 if–
com∑ª_ªsu…
 > 0 )

86 
baue_√xt
 = 
baue_ãmp
->
right
;

88 
baue_∑ª¡
 = 
baue_ãmp
;

89 
baue_ãmp
 = 
baue_√xt
;

90 if–
baue_ãmp
 !
NULL
 )

91 
LFDS711_MISC_BARRIER_LOAD
;

112 if–
baue_∑ª¡
 =
NULL
 )

114 
com∑ª
 = 
NULL
;

115 
baue
->
up
 = 
baus
->
roŸ
;

116 
LFDS711_MISC_BARRIER_STORE
;

117 
	`LFDS711_PAL_ATOMIC_CAS
–&
baus
->
roŸ
, &
com∑ª
, 
baue
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

119 if–
ªsu…
 == 0 )

120 
baue_ãmp
 = 
baus
->
roŸ
;

123 if–
baue_∑ª¡
 !
NULL
 )

125 if–
com∑ª_ªsu…
 <= 0 )

127 
com∑ª
 = 
NULL
;

128 
baue
->
up
 = 
baue_∑ª¡
;

129 
LFDS711_MISC_BARRIER_STORE
;

130 
	`LFDS711_PAL_ATOMIC_CAS
–&
baue_∑ª¡
->
À·
, &
com∑ª
, 
baue
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

133 if–
com∑ª_ªsu…
 > 0 )

135 
com∑ª
 = 
NULL
;

136 
baue
->
up
 = 
baue_∑ª¡
;

137 
LFDS711_MISC_BARRIER_STORE
;

138 
	`LFDS711_PAL_ATOMIC_CAS
–&
baue_∑ª¡
->
right
, &
com∑ª
, 
baue
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

142 if–
ªsu…
 == 0 )

143 
baue_ãmp
 = 
baue_∑ª¡
;

146 if–
ªsu…
 == 0 )

147 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
baus
->
ö£π_backoff
, 
backoff_ôî©i⁄
 );

150 
	`LFDS711_BACKOFF_AUTOTUNE
–
baus
->
ö£π_backoff
, 
backoff_ôî©i⁄
 );

153 if–
exi°ög_baue
 !
NULL
 )

154 *
exi°ög_baue
 = 
NULL
;

156  
LFDS711_BTREE_AU_INSERT_RESULT_SUCCESS
;

157 
	}
}

	@liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

5 
	elfds711_båì_au_move


7 
	mLFDS711_BTREE_AU_MOVE_INVALID
,

8 
	mLFDS711_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
,

9 
	mLFDS711_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
,

10 
	mLFDS711_BTREE_AU_MOVE_GET_PARENT
,

11 
	mLFDS711_BTREE_AU_MOVE_MOVE_UP_TREE


14 
	elfds711_båì_au_dñëe_a˘i⁄


16 
	mLFDS711_BTREE_AU_DELETE_SELF
,

17 
	mLFDS711_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
,

18 
	mLFDS711_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
,

19 
	mLFDS711_BTREE_AU_DELETE_MOVE_LEFT


	@liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_query.c

2 
	~"lfds711_båì_add⁄ly_unbÆ™˚d_öã∫Æ.h
"

5 
lfds711_båì_au_öã∫Æ_vÆid©e
–
lfds711_båì_au_°©e
 *
abs
, 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
, 
lfds711_misc_vÆidôy
 *
lfds711_båì_au_vÆidôy
 );

12 
	$lfds711_båì_au_quîy
–
lfds711_båì_au_°©e
 *
baus
,

13 
lfds711_båì_au_quîy
 
quîy_ty≥
,

14 *
quîy_öput
,

15 *
quîy_ouçut
 )

17 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

20 
LFDS711_MISC_BARRIER_LOAD
;

22  
quîy_ty≥
 )

24 
LFDS711_BTREE_AU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
:

26 
lfds711_båì_au_ñemít


27 *
baue
 = 
NULL
;

29 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

30 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

32 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 0;

34  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(
baus
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

35 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )++;

39 
LFDS711_BTREE_AU_QUERY_SINGLETHREADED_VALIDATE
:

41 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

43 
	`lfds711_båì_au_öã∫Æ_vÆid©e
–
baus
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

48 
	}
}

55 
	$lfds711_båì_au_öã∫Æ_vÆid©e
–
lfds711_båì_au_°©e
 *
baus
,

56 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

57 
lfds711_misc_vÆidôy
 *
lfds711_båì_au_vÆidôy
 )

59 
lfds711_∑l_uöt_t


60 
numbî_ñemíts_‰om_quîy_åì
 = 0,

61 
numbî_ñemíts_‰om_wÆk
 = 0;

63 
lfds711_båì_au_ñemít


64 *
baue
 = 
NULL
,

65 *
baue_¥ev
 = 
NULL
;

67 
	`LFDS711_PAL_ASSERT
–
baus
!
NULL
 );

69 
	`LFDS711_PAL_ASSERT
–
lfds711_båì_au_vÆidôy
 !
NULL
 );

71 *
lfds711_båì_au_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

81 
LFDS711_MISC_BARRIER_LOAD
;

83  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(
baus
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

86 if–
baue_¥ev
 !
NULL
 )

87 if–
baus
->
	`key_com∑ª_fun˘i⁄
(
baue_¥ev
->
key
, 
baue
->key) > 0 )

89 *
lfds711_båì_au_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ORDER
;

93 
baue_¥ev
 = 
baue
;

94 
numbî_ñemíts_‰om_wÆk
++;

97 if–*
lfds711_båì_au_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 )

99 
	`lfds711_båì_au_quîy
–(
lfds711_båì_au_°©e
 *Ë
baus
, 
LFDS711_BTREE_AU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, &
numbî_ñemíts_‰om_quîy_åì
 );

101 if–
numbî_ñemíts_‰om_wÆk
 > 
numbî_ñemíts_‰om_quîy_åì
 )

102 *
lfds711_båì_au_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

104 if–
numbî_ñemíts_‰om_wÆk
 < 
numbî_ñemíts_‰om_quîy_åì
 )

105 *
lfds711_båì_au_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

113 if–*
lfds711_båì_au_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
vi
 !
NULL
 )

115 
	`lfds711_båì_au_quîy
–(
lfds711_båì_au_°©e
 *Ë
baus
, 
LFDS711_BTREE_AU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, &
numbî_ñemíts_‰om_quîy_åì
 );

117 if–
numbî_ñemíts_‰om_quîy_åì
 < 
vi
->
mö_ñemíts
 )

118 *
lfds711_båì_au_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

120 if–
numbî_ñemíts_‰om_quîy_åì
 > 
vi
->
max_ñemíts
 )

121 *
lfds711_båì_au_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

125 
	}
}

	@liblfds711/src/lfds711_freelist/lfds711_freelist_cleanup.c

2 
	~"lfds711_‰ìli°_öã∫Æ.h
"

9 
	$lfds711_‰ìli°_˛ónup
–
lfds711_‰ìli°_°©e
 *
fs
,

10 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_‰ìli°_°©e
 *
fs
, 
lfds711_‰ìli°_ñemít
 *
„
) )

12 
lfds711_‰ìli°_ñemít


13 *
„
,

14 *
„_ãmp
;

16 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

19 
LFDS711_MISC_BARRIER_LOAD
;

21 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

23 
„
 = 
fs
->
t›
[
POINTER
];

25  
„
 !
NULL
 )

27 
„_ãmp
 = 
„
;

28 
„
 = fe->
√xt
;

30 
	`ñemít_˛ónup_ˇŒback
–
fs
, 
„_ãmp
 );

35 
	}
}

	@liblfds711/src/lfds711_freelist/lfds711_freelist_init.c

2 
	~"lfds711_‰ìli°_öã∫Æ.h
"

9 
lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_‰ìli°_°©e
 *
fs
,

10 
lfds711_‰ìli°_ñemít
 * vﬁ©ûê(*
ñimö©i⁄_¨øy
)[
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
],

11 
lfds711_∑l_uöt_t
 
ñimö©i⁄_¨øy_size_ö_ñemíts
,

12 *
u£r_°©e
 )

14 
lfds711_∑l_uöt_t


15 
	glo›
,

16 
	gsublo›
;

18 
LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

19 
LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë
fs
->
t›
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

20 
LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

22 
LFDS711_PAL_ASSERT
–(
ñimö©i⁄_¨øy
 =
NULL
Ë
‹


23 –(
ñimö©i⁄_¨øy
 !
NULL
Ë
™d
 (
lfds711_∑l_uöt_t
Ëñimö©i⁄_¨øy % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 ) );

24 
LFDS711_PAL_ASSERT
–(
ñimö©i⁄_¨øy
 =
NULL
 
™d
 
ñimö©i⁄_¨øy_size_ö_ñemíts
 =0Ë
‹


25 (
ñimö©i⁄_¨øy
 !
NULL
 
™d
 
ñimö©i⁄_¨øy_size_ö_ñemíts
 >= 2ánd (elimination_array_size_in_elements & (elimination_array_size_in_elements-1)) == 0) );

28 
	gfs
->
	gt›
[
POINTER
] = 
NULL
;

29 
	gfs
->
	gt›
[
COUNTER
] = 0;

31 
	gfs
->
	gñimö©i⁄_¨øy
 = 
ñimö©i⁄_¨øy
;

32 
	gfs
->
	gñimö©i⁄_¨øy_size_ö_ñemíts
 = 
ñimö©i⁄_¨øy_size_ö_ñemíts
;

33 
	gfs
->
	gu£r_°©e
 = 
u£r_°©e
;

35  
	glo›
 = 0 ;Üo› < 
	gñimö©i⁄_¨øy_size_ö_ñemíts
 ;Üoop++ )

36  
	gsublo›
 = 0 ; sublo› < 
	gLFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 ; subloop++ )

37 
	gfs
->
	gñimö©i⁄_¨øy
[
lo›
][
sublo›
] = 
NULL
;

39 
lfds711_misc_öã∫Æ_backoff_öô
–&
fs
->
p›_backoff
 );

40 
lfds711_misc_öã∫Æ_backoff_öô
–&
fs
->
push_backoff
 );

42 
	gLFDS711_MISC_BARRIER_STORE
;

44 
lfds711_misc_f‹˚_°‹e
();

	@liblfds711/src/lfds711_freelist/lfds711_freelist_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

5 
lfds711_‰ìli°_öã∫Æ_push_wôhout_ó
–
lfds711_‰ìli°_°©e
 *
fs
,

6 
lfds711_‰ìli°_ñemít
 *
„
 );

	@liblfds711/src/lfds711_freelist/lfds711_freelist_pop.c

2 
	~"lfds711_‰ìli°_öã∫Æ.h
"

9 
	$lfds711_‰ìli°_p›
–
lfds711_‰ìli°_°©e
 *
fs
,

10 
lfds711_‰ìli°_ñemít
 **
„
,

11 
lfds711_¥ng_°_°©e
 *
p°s
 )

14 
ªsu…
;

16 
lfds711_∑l_uöt_t


17 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
,

18 
ñimö©i⁄_¨øy_ödex
,

19 
lo›
,

20 
øndom_vÆue
;

22 
lfds711_‰ìli°_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

23 *
√w_t›
[
PAC_SIZE
],

24 *vﬁ©ûê
‹igöÆ_t›
[
PAC_SIZE
];

26 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

30 
LFDS711_MISC_BARRIER_LOAD
;

32 if–
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
 > 0 )

34 if–
p°s
 !
NULL
 )

36 
	`LFDS711_PRNG_ST_GENERATE
–*
p°s
, 
øndom_vÆue
 );

37 
ñimö©i⁄_¨øy_ödex
 = ( 
øndom_vÆue
 & (
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
-1) );

41 
ñimö©i⁄_¨øy_ödex
 = (
lfds711_∑l_uöt_t
Ë
„
;

42 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
ñimö©i⁄_¨øy_ödex
 );

43 
ñimö©i⁄_¨øy_ödex
 = (Élimö©i⁄_¨øy_ödex & (
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
-1) );

48 *
„
 = 
NULL
;

50  
lo›
 = 0 ;Üo› < 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 ;Üoop++ )

51 if–
fs
->
ñimö©i⁄_¨øy
[
ñimö©i⁄_¨øy_ödex
][
lo›
] !
NULL
 )

53 
	`LFDS711_PAL_ATOMIC_EXCHANGE
–&
fs
->
ñimö©i⁄_¨øy
[
ñimö©i⁄_¨øy_ödex
][
lo›
], *
„
, 
lfds711_‰ìli°_ñemít
 * );

54 if–*
„
 !
NULL
 )

59 
‹igöÆ_t›
[
COUNTER
] = 
fs
->
t›
[COUNTER];

60 
‹igöÆ_t›
[
POINTER
] = 
fs
->
t›
[POINTER];

64 if–
‹igöÆ_t›
[
POINTER
] =
NULL
 )

66 *
„
 = 
NULL
;

70 
√w_t›
[
COUNTER
] = 
‹igöÆ_t›
[COUNTER] + 1;

71 
√w_t›
[
POINTER
] = 
‹igöÆ_t›
[POINTER]->
√xt
;

73 
	`LFDS711_PAL_ATOMIC_DWCAS
–
fs
->
t›
, 
‹igöÆ_t›
, 
√w_t›
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

75 if–
ªsu…
 == 0 )

77 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
fs
->
p›_backoff
, 
backoff_ôî©i⁄
 );

78 
LFDS711_MISC_BARRIER_LOAD
;

81  
ªsu…
 == 0 );

83 *
„
 = 
‹igöÆ_t›
[
POINTER
];

85 
	`LFDS711_BACKOFF_AUTOTUNE
–
fs
->
p›_backoff
, 
backoff_ôî©i⁄
 );

88 
	}
}

	@liblfds711/src/lfds711_freelist/lfds711_freelist_push.c

2 
	~"lfds711_‰ìli°_öã∫Æ.h
"

9 
	$lfds711_‰ìli°_push
–
lfds711_‰ìli°_°©e
 *
fs
,

10 
lfds711_‰ìli°_ñemít
 *
„
,

11 
lfds711_¥ng_°_°©e
 *
p°s
 )

14 
ªsu…
;

16 
lfds711_∑l_uöt_t


17 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
,

18 
ñimö©i⁄_¨øy_ödex
,

19 
lo›
,

20 
øndom_vÆue
;

22 
lfds711_‰ìli°_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

23 *
√w_t›
[
PAC_SIZE
],

24 *vﬁ©ûê
‹igöÆ_t›
[
PAC_SIZE
];

26 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

30 
LFDS711_MISC_BARRIER_LOAD
;

32 if–
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
 > 0 )

34 if–
p°s
 !
NULL
 )

36 
	`LFDS711_PRNG_ST_GENERATE
–*
p°s
, 
øndom_vÆue
 );

37 
ñimö©i⁄_¨øy_ödex
 = ( 
øndom_vÆue
 & (
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
-1) );

41 
ñimö©i⁄_¨øy_ödex
 = (
lfds711_∑l_uöt_t
Ë
„
;

42 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
ñimö©i⁄_¨øy_ödex
 );

43 
ñimö©i⁄_¨øy_ödex
 = (Élimö©i⁄_¨øy_ödex & (
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
-1) );

48  
lo›
 = 0 ;Üo› < 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 ;Üoop++ )

49 if–
fs
->
ñimö©i⁄_¨øy
[
ñimö©i⁄_¨øy_ödex
][
lo›
] =
NULL
 )

51 
	`LFDS711_PAL_ATOMIC_EXCHANGE
–&
fs
->
ñimö©i⁄_¨øy
[
ñimö©i⁄_¨øy_ödex
][
lo›
], 
„
, 
lfds711_‰ìli°_ñemít
 * );

52 if–
„
 =
NULL
 )

57 
√w_t›
[
POINTER
] = 
„
;

59 
‹igöÆ_t›
[
COUNTER
] = 
fs
->
t›
[COUNTER];

60 
‹igöÆ_t›
[
POINTER
] = 
fs
->
t›
[POINTER];

64 
„
->
√xt
 = 
‹igöÆ_t›
[
POINTER
];

65 
LFDS711_MISC_BARRIER_STORE
;

67 
√w_t›
[
COUNTER
] = 
‹igöÆ_t›
[COUNTER] + 1;

68 
	`LFDS711_PAL_ATOMIC_DWCAS
–
fs
->
t›
, 
‹igöÆ_t›
, 
√w_t›
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

70 if–
ªsu…
 == 0 )

71 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
fs
->
push_backoff
, 
backoff_ôî©i⁄
 );

73  
ªsu…
 == 0 );

75 
	`LFDS711_BACKOFF_AUTOTUNE
–
fs
->
push_backoff
, 
backoff_ôî©i⁄
 );

78 
	}
}

85 
	$lfds711_‰ìli°_öã∫Æ_push_wôhout_ó
–
lfds711_‰ìli°_°©e
 *
fs
,

86 
lfds711_‰ìli°_ñemít
 *
„
 )

89 
ªsu…
;

91 
lfds711_∑l_uöt_t


92 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

94 
lfds711_‰ìli°_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

95 *
√w_t›
[
PAC_SIZE
],

96 *vﬁ©ûê
‹igöÆ_t›
[
PAC_SIZE
];

98 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

99 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

101 
√w_t›
[
POINTER
] = 
„
;

103 
‹igöÆ_t›
[
COUNTER
] = 
fs
->
t›
[COUNTER];

104 
‹igöÆ_t›
[
POINTER
] = 
fs
->
t›
[POINTER];

108 
„
->
√xt
 = 
‹igöÆ_t›
[
POINTER
];

109 
LFDS711_MISC_BARRIER_STORE
;

111 
√w_t›
[
COUNTER
] = 
‹igöÆ_t›
[COUNTER] + 1;

112 
	`LFDS711_PAL_ATOMIC_DWCAS
–
fs
->
t›
, 
‹igöÆ_t›
, 
√w_t›
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

114 if–
ªsu…
 == 0 )

115 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
fs
->
push_backoff
, 
backoff_ôî©i⁄
 );

117  
ªsu…
 == 0 );

119 
	`LFDS711_BACKOFF_AUTOTUNE
–
fs
->
push_backoff
, 
backoff_ôî©i⁄
 );

122 
	}
}

	@liblfds711/src/lfds711_freelist/lfds711_freelist_query.c

2 
	~"lfds711_‰ìli°_öã∫Æ.h
"

5 
lfds711_‰ìli°_öã∫Æ_‰ìli°_vÆid©e
–
lfds711_‰ìli°_°©e
 *
fs
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_‰ìli°_vÆidôy
 );

14 
	$lfds711_‰ìli°_quîy
–
lfds711_‰ìli°_°©e
 *
fs
,

15 
lfds711_‰ìli°_quîy
 
quîy_ty≥
,

16 *
quîy_öput
,

17 *
quîy_ouçut
 )

19 
lfds711_‰ìli°_ñemít


20 *
„
;

22 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

25 
LFDS711_MISC_BARRIER_LOAD
;

27  
quîy_ty≥
 )

29 
LFDS711_FREELIST_QUERY_SINGLETHREADED_GET_COUNT
:

31 
lfds711_∑l_uöt_t


32 
lo›
,

33 
sublo›
;

35 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

36 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

38 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 0;

41  
lo›
 = 0 ;Üo› < 
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
 ;Üoop++ )

42  
sublo›
 = 0 ; sublo› < 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 ; subloop++ )

43 if–
fs
->
ñimö©i⁄_¨øy
[
lo›
][
sublo›
] !
NULL
 )

44 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )++;

47 
„
 = (
lfds711_‰ìli°_ñemít
 *Ë
fs
->
t›
[
POINTER
];

49  
„
 !
NULL
 )

51 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )++;

52 
„
 = (
lfds711_‰ìli°_ñemít
 *Ë„->
√xt
;

57 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
:

59 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

61 
	`lfds711_‰ìli°_öã∫Æ_‰ìli°_vÆid©e
–
fs
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

64 
LFDS711_FREELIST_QUERY_GET_ELIMINATION_ARRAY_EXTRA_ELEMENTS_IN_FREELIST_ELEMENTS
:

66 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

67 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

69 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 ) = (
fs
->
ñimö©i⁄_¨øy_size_ö_ñemíts
-1Ë* 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
;

75 
	}
}

82 
	$lfds711_‰ìli°_öã∫Æ_‰ìli°_vÆid©e
–
lfds711_‰ìli°_°©e
 *
fs
,

83 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

84 
lfds711_misc_vÆidôy
 *
lfds711_‰ìli°_vÆidôy
 )

86 
lfds711_∑l_uöt_t


87 
numbî_ñemíts
 = 0;

89 
lfds711_‰ìli°_ñemít


90 *
„_¶ow
,

91 *
„_Á°
;

93 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

95 
	`LFDS711_PAL_ASSERT
–
lfds711_‰ìli°_vÆidôy
 !
NULL
 );

97 *
lfds711_‰ìli°_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

99 
„_¶ow
 = 
„_Á°
 = (
lfds711_‰ìli°_ñemít
 *Ë
fs
->
t›
[
POINTER
];

118 if–
„_¶ow
 !
NULL
 )

121 
„_¶ow
 = fe_¶ow->
√xt
;

123 if–
„_Á°
 !
NULL
 )

124 
„_Á°
 = fe_Á°->
√xt
;

126 if–
„_Á°
 !
NULL
 )

127 
„_Á°
 = fe_Á°->
√xt
;

129  
„_¶ow
 !
NULL
 
™d
 
„_Á°
 != fe_slow );

131 if–
„_Á°
 !
NULL
 
™d
 
„_¶ow
 != NULLánd fe_fast == fe_slow )

132 *
lfds711_‰ìli°_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_LOOP
;

139 if–*
lfds711_‰ìli°_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
vi
 !
NULL
 )

141 
	`lfds711_‰ìli°_quîy
–
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_GET_COUNT
, 
NULL
, (*Ë&
numbî_ñemíts
 );

143 if–
numbî_ñemíts
 < 
vi
->
mö_ñemíts
 )

144 *
lfds711_‰ìli°_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

146 if–
numbî_ñemíts
 > 
vi
->
max_ñemíts
 )

147 *
lfds711_‰ìli°_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

151 
	}
}

	@liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_cleanup.c

2 
	~"lfds711_hash_add⁄ly_öã∫Æ.h
"

5 
båì_au_ñemít_˛ónup_fun˘i⁄
–
lfds711_båì_au_°©e
 *
baus
,

6 
lfds711_båì_au_ñemít
 *
baue
 );

13 
	$lfds711_hash_a_˛ónup
–
lfds711_hash_a_°©e
 *
has
,

14 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_hash_a_°©e
 *
has
, 
lfds711_hash_a_ñemít
 *
h´
) )

16 
lfds711_∑l_uöt_t


17 
lo›
;

19 
	`LFDS711_PAL_ASSERT
–
has
 !
NULL
 );

22 if–
ñemít_˛ónup_ˇŒback
 =
NULL
 )

25 
LFDS711_MISC_BARRIER_LOAD
;

27 
has
->
ñemít_˛ónup_ˇŒback
 =Élement_cleanup_callback;

29  
lo›
 = 0 ;Üo› < 
has
->
¨øy_size
 ;Üoop++ )

30 
	`lfds711_båì_au_˛ónup
–
has
->
baus_¨øy
+
lo›
, 
båì_au_ñemít_˛ónup_fun˘i⁄
 );

33 
	}
}

40 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

42 
	$båì_au_ñemít_˛ónup_fun˘i⁄
–
lfds711_båì_au_°©e
 *
baus
,

43 
lfds711_båì_au_ñemít
 *
baue
 )

45 
lfds711_hash_a_°©e


46 *
has
;

48 
lfds711_hash_a_ñemít


49 *
h´
;

51 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

54 
h´
 = (
lfds711_hash_a_ñemít
 *Ë
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

55 
has
 = (
lfds711_hash_a_°©e
 *Ë
	`LFDS711_BTREE_AU_GET_USER_STATE_FROM_STATE
–*
baus
 );

57 
has
->
	`ñemít_˛ónup_ˇŒback
–has, 
h´
 );

60 
	}
}

62 #¥agm®
w¨nög
(  : 4100 )

	@liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_get.c

2 
	~"lfds711_hash_add⁄ly_öã∫Æ.h
"

9 
	$lfds711_hash_a_gë_by_key
–
lfds711_hash_a_°©e
 *
has
,

10 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

11 (*
key_hash_fun˘i⁄
)(c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
),

12 *
key
,

13 
lfds711_hash_a_ñemít
 **
h´
 )

16 
rv
;

18 
lfds711_∑l_uöt_t


19 
hash
 = 0;

21 
lfds711_båì_au_ñemít


22 *
baue
;

24 
	`LFDS711_PAL_ASSERT
–
has
 !
NULL
 );

28 
	`LFDS711_PAL_ASSERT
–
h´
 !
NULL
 );

30 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

31 
key_com∑ª_fun˘i⁄
 = 
has
->key_compare_function;

33 if–
key_hash_fun˘i⁄
 =
NULL
 )

34 
key_hash_fun˘i⁄
 = 
has
->key_hash_function;

36 
	`key_hash_fun˘i⁄
–
key
, &
hash
 );

38 
rv
 = 
	`lfds711_båì_au_gë_by_key
–
has
->
baus_¨øy
 + (
hash
 % has->
¨øy_size
), 
key_com∑ª_fun˘i⁄
, 
key
, &
baue
 );

40 if–
rv
 == 1 )

41 *
h´
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

43 *
h´
 = 
NULL
;

45  
rv
;

46 
	}
}

	@liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_init.c

2 
	~"lfds711_hash_add⁄ly_öã∫Æ.h
"

9 
	$lfds711_hash_a_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_hash_a_°©e
 *
has
,

10 
lfds711_båì_au_°©e
 *
baus_¨øy
,

11 
lfds711_∑l_uöt_t
 
¨øy_size
,

12 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

13 (*
key_hash_fun˘i⁄
)(c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
),

14 
lfds711_hash_a_exi°ög_key
 
exi°ög_key
,

15 *
u£r_°©e
 )

17 
lfds711_båì_au_exi°ög_key


18 
båì_au_exi°ög_key
 = 
LFDS711_BTREE_AU_EXISTING_KEY_OVERWRITE
;

20 
lfds711_∑l_uöt_t


21 
lo›
;

23 
	`LFDS711_PAL_ASSERT
–
has
 !
NULL
 );

24 
	`LFDS711_PAL_ASSERT
–
baus_¨øy
 !
NULL
 );

25 
	`LFDS711_PAL_ASSERT
–
¨øy_size
 > 0 );

26 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–
key_hash_fun˘i⁄
 !
NULL
 );

31 
has
->
¨øy_size
 =árray_size;

32 
has
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

33 
has
->
key_hash_fun˘i⁄
 = key_hash_function;

34 
has
->
exi°ög_key
 =Éxisting_key;

35 
has
->
baus_¨øy
 = baus_array;

36 
has
->
u£r_°©e
 = user_state;

38 if–
has
->
exi°ög_key
 =
LFDS711_HASH_A_EXISTING_KEY_OVERWRITE
 )

39 
båì_au_exi°ög_key
 = 
LFDS711_BTREE_AU_EXISTING_KEY_OVERWRITE
;

41 if–
has
->
exi°ög_key
 =
LFDS711_HASH_A_EXISTING_KEY_FAIL
 )

42 
båì_au_exi°ög_key
 = 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
;

45  
lo›
 = 0 ;Üo› < 
¨øy_size
 ;Üoop++ )

46 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
has
->
baus_¨øy
+
lo›
, 
key_com∑ª_fun˘i⁄
, 
båì_au_exi°ög_key
, 
u£r_°©e
 );

48 
LFDS711_MISC_BARRIER_STORE
;

50 
	`lfds711_misc_f‹˚_°‹e
();

53 
	}
}

	@liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_insert.c

2 
	~"lfds711_hash_add⁄ly_öã∫Æ.h
"

9 
lfds711_hash_a_ö£π_ªsu…
 
	$lfds711_hash_a_ö£π
–
lfds711_hash_a_°©e
 *
has
,

10 
lfds711_hash_a_ñemít
 *
h´
,

11 
lfds711_hash_a_ñemít
 **
exi°ög_h´
 )

13 
lfds711_hash_a_ö£π_ªsu…


14 
≠r
 = 
LFDS711_HASH_A_PUT_RESULT_SUCCESS
;

16 
lfds711_båì_au_ö£π_ªsu…


17 
Ær
;

19 
lfds711_∑l_uöt_t


20 
hash
 = 0;

22 
lfds711_båì_au_ñemít


23 *
exi°ög_baue
;

25 
	`LFDS711_PAL_ASSERT
–
has
 !
NULL
 );

26 
	`LFDS711_PAL_ASSERT
–
h´
 !
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
h´
->
vÆue
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

31 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
h´
->
baue
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

33 
has
->
	`key_hash_fun˘i⁄
–
h´
->
key
, &
hash
 );

35 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
h´
->
baue
, h´->
key
 );

36 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
h´
->
baue
, hae );

38 
Ær
 = 
	`lfds711_båì_au_ö£π
–
has
->
baus_¨øy
 + (
hash
 % has->
¨øy_size
), &
h´
->
baue
, &
exi°ög_baue
 );

40  
Ær
 )

42 
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
:

43 if–
exi°ög_h´
 !
NULL
 )

44 *
exi°ög_h´
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
exi°ög_baue
 );

46 
≠r
 = 
LFDS711_HASH_A_PUT_RESULT_FAILURE_EXISTING_KEY
;

49 
LFDS711_BTREE_AU_INSERT_RESULT_SUCCESS_OVERWRITE
:

50 
≠r
 = 
LFDS711_HASH_A_PUT_RESULT_SUCCESS_OVERWRITE
;

53 
LFDS711_BTREE_AU_INSERT_RESULT_SUCCESS
:

54 
≠r
 = 
LFDS711_HASH_A_PUT_RESULT_SUCCESS
;

58  
≠r
;

59 
	}
}

	@liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

	@liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_iterate.c

2 
	~"lfds711_hash_add⁄ly_öã∫Æ.h
"

9 
	$lfds711_hash_a_ôî©e_öô
–
lfds711_hash_a_°©e
 *
has
,

10 
lfds711_hash_a_ôî©e
 *
hai
 )

12 
	`LFDS711_PAL_ASSERT
–
has
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
hai
 !
NULL
 );

15 
hai
->
baus
 = 
has
->
baus_¨øy
;

16 
hai
->
baus_íd
 = 
has
->
baus_¨øy
 + has->
¨øy_size
;

17 
hai
->
baue
 = 
NULL
;

20 
	}
}

27 
	$lfds711_hash_a_ôî©e
–
lfds711_hash_a_ôî©e
 *
hai
,

28 
lfds711_hash_a_ñemít
 **
h´
 )

30 
lfds711_misc_Êag


31 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

34 
rv
 = 0;

36 
	`LFDS711_PAL_ASSERT
–
hai
 !
NULL
 );

37 
	`LFDS711_PAL_ASSERT
–
h´
 !
NULL
 );

39  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

41 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
hai
->
baus
, &hai->
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
 );

43 if–
hai
->
baue
 !
NULL
 )

45 *
h´
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
hai
->
baue
 );

46 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

47 
rv
 = 1;

50 if–
hai
->
baue
 =
NULL
 )

51 if–++
hai
->
baus
 =hai->
baus_íd
 )

53 *
h´
 = 
NULL
;

54 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

58  
rv
;

59 
	}
}

	@liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_query.c

2 
	~"lfds711_hash_add⁄ly_öã∫Æ.h
"

5 
lfds711_hash_a_öã∫Æ_vÆid©e
–
lfds711_hash_a_°©e
 *
has
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_hash_a_vÆidôy
 );

14 
	$lfds711_hash_a_quîy
–
lfds711_hash_a_°©e
 *
has
,

15 
lfds711_hash_a_quîy
 
quîy_ty≥
,

16 *
quîy_öput
,

17 *
quîy_ouçut
 )

19 
	`LFDS711_PAL_ASSERT
–
has
 !
NULL
 );

22 
LFDS711_MISC_BARRIER_LOAD
;

24  
quîy_ty≥
 )

26 
LFDS711_HASH_A_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
:

28 
lfds711_hash_a_ôî©e


29 
ai
;

31 
lfds711_hash_a_ñemít


32 *
h´
;

34 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

35 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

37 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 0;

39 
	`lfds711_hash_a_ôî©e_öô
–
has
, &
ai
 );

41  
	`lfds711_hash_a_ôî©e
(&
ai
, &
h´
) )

42 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )++;

46 
LFDS711_HASH_A_QUERY_SINGLETHREADED_VALIDATE
:

48 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

50 
	`lfds711_hash_a_öã∫Æ_vÆid©e
–
has
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

55 
	}
}

62 
	$lfds711_hash_a_öã∫Æ_vÆid©e
–
lfds711_hash_a_°©e
 *
has
,

63 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

64 
lfds711_misc_vÆidôy
 *
lfds711_hash_a_vÆidôy
 )

66 
lfds711_∑l_uöt_t


67 
lfds711_hash_a_tŸÆ_numbî_ñemíts
 = 0,

68 
lfds711_båì_au_tŸÆ_numbî_ñemíts
 = 0,

69 
numbî_ñemíts
;

71 
lfds711_∑l_uöt_t


72 
lo›
;

74 
	`LFDS711_PAL_ASSERT
–
has
!
NULL
 );

76 
	`LFDS711_PAL_ASSERT
–
lfds711_hash_a_vÆidôy
 !
NULL
 );

83 *
lfds711_hash_a_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

85  
lo›
 = 0 ; *
lfds711_hash_a_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
Üo› < 
has
->
¨øy_size
 ;Üoop++ )

86 
	`lfds711_båì_au_quîy
–
has
->
baus_¨øy
+
lo›
, 
LFDS711_BTREE_AU_QUERY_SINGLETHREADED_VALIDATE
, 
NULL
, (*Ë
lfds711_hash_a_vÆidôy
 );

88 if–*
lfds711_hash_a_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 )

90  
lo›
 = 0 ;Üo› < 
has
->
¨øy_size
 ;Üoop++ )

92 
	`lfds711_båì_au_quîy
–
has
->
baus_¨øy
+
lo›
, 
LFDS711_BTREE_AU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_ñemíts
 );

93 
lfds711_båì_au_tŸÆ_numbî_ñemíts
 +
numbî_ñemíts
;

97 
	`lfds711_hash_a_quîy
–
has
, 
LFDS711_HASH_A_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, &
lfds711_hash_a_tŸÆ_numbî_ñemíts
 );

100 if–
lfds711_hash_a_tŸÆ_numbî_ñemíts
 < 
lfds711_båì_au_tŸÆ_numbî_ñemíts
 )

101 *
lfds711_hash_a_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

103 if–
lfds711_hash_a_tŸÆ_numbî_ñemíts
 > 
lfds711_båì_au_tŸÆ_numbî_ñemíts
 )

104 *
lfds711_hash_a_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

107 if–*
lfds711_hash_a_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
vi
 !
NULL
 )

109 if–
lfds711_båì_au_tŸÆ_numbî_ñemíts
 < 
vi
->
mö_ñemíts
 )

110 *
lfds711_hash_a_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

112 if–
lfds711_båì_au_tŸÆ_numbî_ñemíts
 > 
vi
->
max_ñemíts
 )

113 *
lfds711_hash_a_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

118 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_cleanup.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_‹dîed_öã∫Æ.h
"

9 
	$lfds711_li°_aso_˛ónup
–
lfds711_li°_aso_°©e
 *
œsos
,

10 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_li°_aso_°©e
 *
œsos
, 
lfds711_li°_aso_ñemít
 *
œs€
) )

12 
lfds711_li°_aso_ñemít


13 *
œs€
,

14 *
ãmp
;

16 
	`LFDS711_PAL_ASSERT
–
œsos
 !
NULL
 );

19 
LFDS711_MISC_BARRIER_LOAD
;

21 if–
ñemít_˛ónup_ˇŒback
 =
NULL
 )

24 
œs€
 = 
	`LFDS711_LIST_ASO_GET_START
–*
œsos
 );

26  
œs€
 !
NULL
 )

28 
ãmp
 = 
œs€
;

30 
œs€
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe );

32 
	`ñemít_˛ónup_ˇŒback
–
œsos
, 
ãmp
 );

36 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_get.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_‹dîed_öã∫Æ.h
"

9 
	$lfds711_li°_aso_gë_by_key
–
lfds711_li°_aso_°©e
 *
œsos
,

10 *
key
,

11 
lfds711_li°_aso_ñemít
 **
œs€
 )

14 
¸
 = !0,

15 
rv
 = 1;

17 
	`LFDS711_PAL_ASSERT
–
œsos
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
œs€
 !
NULL
 );

21  
¸
 !0 
™d
 
	`LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
(*
œsos
, *
œs€
) )

22 
¸
 = 
œsos
->
	`key_com∑ª_fun˘i⁄
–
key
, (*
œs€
)->key );

24 if–*
œs€
 =
NULL
 )

25 
rv
 = 0;

27  
rv
;

28 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_init.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_‹dîed_öã∫Æ.h
"

9 
	$lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_li°_aso_°©e
 *
œsos
,

10 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

11 
lfds711_li°_aso_exi°ög_key
 
exi°ög_key
,

12 *
u£r_°©e
 )

14 
	`LFDS711_PAL_ASSERT
–
œsos
 !
NULL
 );

15 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsos
->
dummy_ñemít
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

16 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsos
->
°¨t
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

17 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

22 
œsos
->
°¨t
 = &œsos->
dummy_ñemít
;

24 
œsos
->
°¨t
->
√xt
 = 
NULL
;

25 
œsos
->
°¨t
->
vÆue
 = 
NULL
;

26 
œsos
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

27 
œsos
->
exi°ög_key
 =Éxisting_key;

28 
œsos
->
u£r_°©e
 = user_state;

30 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
œsos
->
ö£π_backoff
 );

32 
LFDS711_MISC_BARRIER_STORE
;

34 
	`lfds711_misc_f‹˚_°‹e
();

37 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_insert.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_‹dîed_öã∫Æ.h
"

9 
lfds711_li°_aso_ö£π_ªsu…
 
	$lfds711_li°_aso_ö£π
–
lfds711_li°_aso_°©e
 *
œsos
,

10 
lfds711_li°_aso_ñemít
 *
œs€
,

11 
lfds711_li°_aso_ñemít
 **
exi°ög_œs€
 )

14 
ªsu…
;

16 
lfds711_misc_Êag


17 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

20 
com∑ª_ªsu…
 = 0;

22 
lfds711_∑l_uöt_t


23 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

25 
lfds711_li°_aso_ñemít


26 *vﬁ©ûê
œs€_ãmp
 = 
NULL
,

27 *vﬁ©ûê
œs€_åaûög
;

29 
	`LFDS711_PAL_ASSERT
–
œsos
 !
NULL
 );

30 
	`LFDS711_PAL_ASSERT
–
œs€
 !
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œs€
->
√xt
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

32 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œs€
->
vÆue
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

62 
LFDS711_MISC_BARRIER_LOAD
;

69 
œs€_åaûög
 = 
œsos
->
°¨t
;

70 
œs€_ãmp
 = 
œsos
->
°¨t
->
√xt
;

72  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

74 if–
œs€_ãmp
 =
NULL
 )

75 
com∑ª_ªsu…
 = -1;

77 if–
œs€_ãmp
 !
NULL
 )

79 
LFDS711_MISC_BARRIER_LOAD
;

80 
com∑ª_ªsu…
 = 
œsos
->
	`key_com∑ª_fun˘i⁄
–
œs€
->
key
, 
œs€_ãmp
->key );

83 if–
com∑ª_ªsu…
 == 0 )

85 if–
exi°ög_œs€
 !
NULL
 )

86 *
exi°ög_œs€
 = 
œs€_ãmp
;

88  
œsos
->
exi°ög_key
 )

90 
LFDS711_LIST_ASO_EXISTING_KEY_OVERWRITE
:

91 
	`LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–*
œs€_ãmp
, 
œs€
->
vÆue
 );

92  
LFDS711_LIST_ASO_INSERT_RESULT_SUCCESS_OVERWRITE
;

95 
LFDS711_LIST_ASO_EXISTING_KEY_FAIL
:

96  
LFDS711_LIST_ASO_INSERT_RESULT_FAILURE_EXISTING_KEY
;

100 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

103 if–
com∑ª_ªsu…
 < 0 )

105 
œs€
->
√xt
 = 
œs€_ãmp
;

106 
LFDS711_MISC_BARRIER_STORE
;

107 
	`LFDS711_PAL_ATOMIC_CAS
–&
œs€_åaûög
->
√xt
, (
lfds711_li°_aso_ñemít
 **Ë&
œs€
->√xt,Üas€, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

109 if–
ªsu…
 == 1 )

110 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

113 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
œsos
->
ö£π_backoff
, 
backoff_ôî©i⁄
 );

115 
œs€_ãmp
 = 
œs€_åaûög
->
√xt
;

119 if–
com∑ª_ªsu…
 > 0 )

122 
œs€_åaûög
 =Üas€_åaûög->
√xt
;

128 
œs€_ãmp
 = 
œs€_åaûög
->
√xt
;

132 
	`LFDS711_BACKOFF_AUTOTUNE
–
œsos
->
ö£π_backoff
, 
backoff_ôî©i⁄
 );

134  
LFDS711_LIST_ASO_INSERT_RESULT_SUCCESS
;

135 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

	@liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_query.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_‹dîed_öã∫Æ.h
"

5 
lfds711_li°_aso_öã∫Æ_vÆid©e
–
lfds711_li°_aso_°©e
 *
œsos
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_li°_aso_vÆidôy
 );

14 
	$lfds711_li°_aso_quîy
–
lfds711_li°_aso_°©e
 *
œsos
,

15 
lfds711_li°_aso_quîy
 
quîy_ty≥
,

16 *
quîy_öput
,

17 *
quîy_ouçut
 )

19 
	`LFDS711_PAL_ASSERT
–
œsos
 !
NULL
 );

22 
LFDS711_MISC_BARRIER_LOAD
;

24  
quîy_ty≥
 )

26 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
:

28 
lfds711_li°_aso_ñemít


29 *
œs€
 = 
NULL
;

31 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

34 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 0;

36  
	`LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
(*
œsos
, 
œs€
) )

37 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )++;

41 
LFDS711_LIST_ASO_QUERY_SINGLETHREADED_VALIDATE
:

43 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

45 
	`lfds711_li°_aso_öã∫Æ_vÆid©e
–
œsos
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

50 
	}
}

58 
	$lfds711_li°_aso_öã∫Æ_vÆid©e
–
lfds711_li°_aso_°©e
 *
œsos
,

59 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

60 
lfds711_misc_vÆidôy
 *
lfds711_li°_aso_vÆidôy
 )

62 
lfds711_∑l_uöt_t


63 
numbî_ñemíts
 = 0;

65 
lfds711_li°_aso_ñemít


66 *
œs€_Á°
,

67 *
œs€_¶ow
;

69 
	`LFDS711_PAL_ASSERT
–
œsos
!
NULL
 );

71 
	`LFDS711_PAL_ASSERT
–
lfds711_li°_aso_vÆidôy
 !
NULL
 );

73 *
lfds711_li°_aso_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

75 
œs€_¶ow
 = 
œs€_Á°
 = 
œsos
->
°¨t
->
√xt
;

94 if–
œs€_¶ow
 !
NULL
 )

97 
œs€_¶ow
 =Üas€_¶ow->
√xt
;

99 if–
œs€_Á°
 !
NULL
 )

100 
œs€_Á°
 =Üas€_Á°->
√xt
;

102 if–
œs€_Á°
 !
NULL
 )

103 
œs€_Á°
 =Üas€_Á°->
√xt
;

105  
œs€_¶ow
 !
NULL
 
™d
 
œs€_Á°
 !=Üasoe_slow );

107 if–
œs€_Á°
 !
NULL
 
™d
 
œs€_¶ow
 != NULLándÜasoe_fast ==Üasoe_slow )

108 *
lfds711_li°_aso_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_LOOP
;

115 if–*
lfds711_li°_aso_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
vi
 !
NULL
 )

117 
	`lfds711_li°_aso_quîy
–
œsos
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, &
numbî_ñemíts
 );

119 if–
numbî_ñemíts
 < 
vi
->
mö_ñemíts
 )

120 *
lfds711_li°_aso_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

122 if–
numbî_ñemíts
 > 
vi
->
max_ñemíts
 )

123 *
lfds711_li°_aso_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

127 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_cleanup.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_un‹dîed_öã∫Æ.h
"

9 
	$lfds711_li°_asu_˛ónup
–
lfds711_li°_asu_°©e
 *
œsus
,

10 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_li°_asu_°©e
 *
œsus
, 
lfds711_li°_asu_ñemít
 *
œsue
) )

12 
lfds711_li°_asu_ñemít


13 *
œsue
,

14 *
ãmp
;

16 
	`LFDS711_PAL_ASSERT
–
œsus
 !
NULL
 );

19 
LFDS711_MISC_BARRIER_LOAD
;

21 if–
ñemít_˛ónup_ˇŒback
 =
NULL
 )

24 
œsue
 = 
	`LFDS711_LIST_ASU_GET_START
–*
œsus
 );

26  
œsue
 !
NULL
 )

28 
ãmp
 = 
œsue
;

30 
œsue
 = 
	`LFDS711_LIST_ASU_GET_NEXT
( *lasue );

32 
	`ñemít_˛ónup_ˇŒback
–
œsus
, 
ãmp
 );

36 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_get.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_un‹dîed_öã∫Æ.h
"

9 
	$lfds711_li°_asu_gë_by_key
–
lfds711_li°_asu_°©e
 *
œsus
,

10 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

11 *
key
,

12 
lfds711_li°_asu_ñemít
 **
œsue
 )

15 
¸
 = !0,

16 
rv
 = 1;

18 
	`LFDS711_PAL_ASSERT
–
œsus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
œsue
 !
NULL
 );

23 *
œsue
 = 
NULL
;

25  
¸
 !0 
™d
 
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
œsus
, *
œsue
) )

26 
¸
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
œsue
)->key );

28 if–*
œsue
 =
NULL
 )

29 
rv
 = 0;

31  
rv
;

32 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_init.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_un‹dîed_öã∫Æ.h
"

9 
	$lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_li°_asu_°©e
 *
œsus
,

10 *
u£r_°©e
 )

12 
	`LFDS711_PAL_ASSERT
–
œsus
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsus
->
dummy_ñemít
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

14 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsus
->
íd
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

15 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsus
->
°¨t
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

19 
œsus
->
°¨t
 =Üasus->
íd
 = &œsus->
dummy_ñemít
;

21 
œsus
->
°¨t
->
√xt
 = 
NULL
;

22 
œsus
->
°¨t
->
vÆue
 = 
NULL
;

23 
œsus
->
u£r_°©e
 = user_state;

25 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
œsus
->
a·î_backoff
 );

26 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
œsus
->
°¨t_backoff
 );

27 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
œsus
->
íd_backoff
 );

29 
LFDS711_MISC_BARRIER_STORE
;

31 
	`lfds711_misc_f‹˚_°‹e
();

34 
	}
}

	@liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_insert.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_un‹dîed_öã∫Æ.h
"

9 
	$lfds711_li°_asu_ö£π_©_posôi⁄
–
lfds711_li°_asu_°©e
 *
œsus
,

10 
lfds711_li°_asu_ñemít
 *
œsue
,

11 
lfds711_li°_asu_ñemít
 *
œsue_¥ede˚ss‹
,

12 
lfds711_li°_asu_posôi⁄
 
posôi⁄
 )

14 
	`LFDS711_PAL_ASSERT
–
œsus
 !
NULL
 );

15 
	`LFDS711_PAL_ASSERT
–
œsue
 !
NULL
 );

16 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsue
->
√xt
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

17 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsue
->
vÆue
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

21  
posôi⁄
 )

23 
LFDS711_LIST_ASU_POSITION_START
:

24 
	`lfds711_li°_asu_ö£π_©_°¨t
–
œsus
, 
œsue
 );

27 
LFDS711_LIST_ASU_POSITION_END
:

28 
	`lfds711_li°_asu_ö£π_©_íd
–
œsus
, 
œsue
 );

31 
LFDS711_LIST_ASU_POSITION_AFTER
:

32 
	`lfds711_li°_asu_ö£π_a·î_ñemít
–
œsus
, 
œsue
, 
œsue_¥ede˚ss‹
 );

37 
	}
}

44 
	$lfds711_li°_asu_ö£π_©_°¨t
–
lfds711_li°_asu_°©e
 *
œsus
,

45 
lfds711_li°_asu_ñemít
 *
œsue
 )

48 
ªsu…
;

50 
lfds711_∑l_uöt_t


51 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

53 
	`LFDS711_PAL_ASSERT
–
œsus
 !
NULL
 );

54 
	`LFDS711_PAL_ASSERT
–
œsue
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsue
->
√xt
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

56 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsue
->
vÆue
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

58 
LFDS711_MISC_BARRIER_LOAD
;

60 
œsue
->
√xt
 = 
œsus
->
°¨t
->next;

64 
LFDS711_MISC_BARRIER_STORE
;

65 
	`LFDS711_PAL_ATOMIC_CAS
–&
œsus
->
°¨t
->
√xt
, (
lfds711_li°_asu_ñemít
 **Ë&
œsue
->√xt,Üasue, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

66 if–
ªsu…
 == 0 )

67 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
œsus
->
°¨t_backoff
, 
backoff_ôî©i⁄
 );

69  
ªsu…
 == 0 );

71 
	`LFDS711_BACKOFF_AUTOTUNE
–
œsus
->
°¨t_backoff
, 
backoff_ôî©i⁄
 );

74 
	}
}

81 
	$lfds711_li°_asu_ö£π_©_íd
–
lfds711_li°_asu_°©e
 *
œsus
,

82 
lfds711_li°_asu_ñemít
 *
œsue
 )

85 
ªsu…
;

87 
lfds711_misc_Êag


88 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

90 
lfds711_∑l_uöt_t


91 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

93 
lfds711_li°_asu_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

94 *
com∑ª
;

96 
lfds711_li°_asu_ñemít


97 *vﬁ©ûê
œsue_√xt
,

98 *vﬁ©ûê
œsue_íd
;

100 
	`LFDS711_PAL_ASSERT
–
œsus
 !
NULL
 );

101 
	`LFDS711_PAL_ASSERT
–
œsue
 !
NULL
 );

102 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsue
->
√xt
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

103 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsue
->
vÆue
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

115 
LFDS711_MISC_BARRIER_LOAD
;

117 
œsue
->
√xt
 = 
NULL
;

118 
œsue_íd
 = 
œsus
->
íd
;

120  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

122 
com∑ª
 = 
NULL
;

124 
LFDS711_MISC_BARRIER_STORE
;

125 
	`LFDS711_PAL_ATOMIC_CAS
–&
œsue_íd
->
√xt
, &
com∑ª
, 
œsue
, 
LFDS711_MISC_CAS_STRENGTH_STRONG
, 
ªsu…
 );

127 if–
ªsu…
 == 1 )

128 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

131 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
œsus
->
íd_backoff
, 
backoff_ôî©i⁄
 );

133 
œsue_íd
 = 
com∑ª
;

134 
œsue_√xt
 = 
	`LFDS711_LIST_ASU_GET_NEXT
–*
œsue_íd
 );

136  
œsue_√xt
 !
NULL
 )

138 
œsue_íd
 = 
œsue_√xt
;

139 
œsue_√xt
 = 
	`LFDS711_LIST_ASU_GET_NEXT
–*
œsue_íd
 );

144 
œsus
->
íd
 = 
œsue
;

146 
	`LFDS711_BACKOFF_AUTOTUNE
–
œsus
->
íd_backoff
, 
backoff_ôî©i⁄
 );

149 
	}
}

156 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

158 
	$lfds711_li°_asu_ö£π_a·î_ñemít
–
lfds711_li°_asu_°©e
 *
œsus
,

159 
lfds711_li°_asu_ñemít
 *
œsue
,

160 
lfds711_li°_asu_ñemít
 *
œsue_¥ede˚ss‹
 )

163 
ªsu…
;

165 
lfds711_∑l_uöt_t


166 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

168 
	`LFDS711_PAL_ASSERT
–
œsus
 !
NULL
 );

169 
	`LFDS711_PAL_ASSERT
–
œsue
 !
NULL
 );

170 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsue
->
√xt
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

171 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
œsue
->
vÆue
 % 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 0 );

172 
	`LFDS711_PAL_ASSERT
–
œsue_¥ede˚ss‹
 !
NULL
 );

174 
LFDS711_MISC_BARRIER_LOAD
;

176 
œsue
->
√xt
 = 
œsue_¥ede˚ss‹
->next;

180 
LFDS711_MISC_BARRIER_STORE
;

181 
	`LFDS711_PAL_ATOMIC_CAS
–&
œsue_¥ede˚ss‹
->
√xt
, (
lfds711_li°_asu_ñemít
 **Ë&
œsue
->√xt,Üasue, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

182 if–
ªsu…
 == 0 )

183 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
œsus
->
a·î_backoff
, 
backoff_ôî©i⁄
 );

185  
ªsu…
 == 0 );

187 
	`LFDS711_BACKOFF_AUTOTUNE
–
œsus
->
a·î_backoff
, 
backoff_ôî©i⁄
 );

190 
	}
}

192 #¥agm®
w¨nög
(  : 4100 )

	@liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

	@liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_query.c

2 
	~"lfds711_li°_add⁄ly_söglylöked_un‹dîed_öã∫Æ.h
"

5 
lfds711_li°_asu_öã∫Æ_vÆid©e
–
lfds711_li°_asu_°©e
 *
œsus
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_li°_asu_vÆidôy
 );

14 
	$lfds711_li°_asu_quîy
–
lfds711_li°_asu_°©e
 *
œsus
,

15 
lfds711_li°_asu_quîy
 
quîy_ty≥
,

16 *
quîy_öput
,

17 *
quîy_ouçut
 )

19 
	`LFDS711_PAL_ASSERT
–
œsus
 !
NULL
 );

22 
LFDS711_MISC_BARRIER_LOAD
;

24  
quîy_ty≥
 )

26 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
:

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
;

31 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

34 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 0;

36  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
œsus
, 
œsue
) )

37 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )++;

41 
LFDS711_LIST_ASU_QUERY_SINGLETHREADED_VALIDATE
:

43 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

45 
	`lfds711_li°_asu_öã∫Æ_vÆid©e
–
œsus
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

50 
	}
}

58 
	$lfds711_li°_asu_öã∫Æ_vÆid©e
–
lfds711_li°_asu_°©e
 *
œsus
,

59 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

60 
lfds711_misc_vÆidôy
 *
lfds711_li°_asu_vÆidôy
 )

62 
lfds711_∑l_uöt_t


63 
numbî_ñemíts
 = 0;

65 
lfds711_li°_asu_ñemít


66 *
œsue_Á°
,

67 *
œsue_¶ow
;

69 
	`LFDS711_PAL_ASSERT
–
œsus
!
NULL
 );

71 
	`LFDS711_PAL_ASSERT
–
lfds711_li°_asu_vÆidôy
 !
NULL
 );

73 *
lfds711_li°_asu_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

75 
œsue_¶ow
 = 
œsue_Á°
 = 
œsus
->
°¨t
->
√xt
;

94 if–
œsue_¶ow
 !
NULL
 )

97 
œsue_¶ow
 =Üasue_¶ow->
√xt
;

99 if–
œsue_Á°
 !
NULL
 )

100 
œsue_Á°
 =Üasue_Á°->
√xt
;

102 if–
œsue_Á°
 !
NULL
 )

103 
œsue_Á°
 =Üasue_Á°->
√xt
;

105  
œsue_¶ow
 !
NULL
 
™d
 
œsue_Á°
 !=Üasue_slow );

107 if–
œsue_Á°
 !
NULL
 
™d
 
œsue_¶ow
 != NULLándÜasue_fast ==Üasue_slow )

108 *
lfds711_li°_asu_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_LOOP
;

115 if–*
lfds711_li°_asu_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
vi
 !
NULL
 )

117 
	`lfds711_li°_asu_quîy
–
œsus
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, &
numbî_ñemíts
 );

119 if–
numbî_ñemíts
 < 
vi
->
mö_ñemíts
 )

120 *
lfds711_li°_asu_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

122 if–
numbî_ñemíts
 > 
vi
->
max_ñemíts
 )

123 *
lfds711_li°_asu_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

127 
	}
}

	@liblfds711/src/lfds711_misc/lfds711_misc_globals.c

2 
	~"lfds711_misc_öã∫Æ.h
"

9 
lfds711_misc_globÆs


10 
	glfds711_misc_globÆs
 =

12 { 
LFDS711_PRNG_SEED
 }

	@liblfds711/src/lfds711_misc/lfds711_misc_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

5 
lfds711_misc_¥ng_öã∫Æ_big_¶ow_high_quÆôy_öô
–
£ed
 );

	@liblfds711/src/lfds711_misc/lfds711_misc_internal_backoff_init.c

2 
	~"lfds711_misc_öã∫Æ.h
"

9 
	$lfds711_misc_öã∫Æ_backoff_öô
–
lfds711_misc_backoff_°©e
 *
bs
 )

11 
	`LFDS711_PAL_ASSERT
–
bs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
bs
->
lock
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

14 
bs
->
lock
 = 
LFDS711_MISC_FLAG_LOWERED
;

15 
bs
->
backoff_ôî©i⁄_‰equícy_cou¡îs
[0] = 0;

16 
bs
->
backoff_ôî©i⁄_‰equícy_cou¡îs
[1] = 0;

17 
bs
->
mëric
 = 1;

18 
bs
->
tŸÆ_›î©i⁄s
 = 0;

21 
	}
}

	@liblfds711/src/lfds711_misc/lfds711_misc_query.c

2 
	~"lfds711_misc_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$lfds711_misc_quîy
–
lfds711_misc_quîy
 
quîy_ty≥
,

12 *
quîy_öput
,

13 *
quîy_ouçut
 )

19  
quîy_ty≥
 )

21 
LFDS711_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
:

24 * c⁄° 
buûd_™d_vîsi⁄_°rög
 = "liblfd†" 
LFDS711_MISC_VERSION_STRING
 " (" 
BUILD_TYPE_STRING
 ", " 
LFDS711_PAL_OS_STRING
 ", " 
MODE_TYPE_STRING
 ", " 
LFDS711_PAL_PROCESSOR_STRING
 ", " 
LFDS711_PAL_COMPILER_STRING
 ")";

26 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

29 *(c⁄° **Ë
quîy_ouçut
 = 
buûd_™d_vîsi⁄_°rög
;

35 
	}
}

37 #¥agm®
w¨nög
(  : 4100 )

	@liblfds711/src/lfds711_prng/lfds711_prng_init.c

2 
	~"lfds711_¥ng_öã∫Æ.h
"

9 
	$lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_¥ng_°©e
 *
ps
, 
lfds711_∑l_uöt_t
 
£ed
 )

11 
	`LFDS711_PAL_ASSERT
–
ps
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
ps
->
íå›y
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

15 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
£ed
 );

17 
ps
->
íå›y
 = 
£ed
;

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$lfds711_¥ng_°_öô
–
lfds711_¥ng_°_°©e
 *
p°s
, 
lfds711_∑l_uöt_t
 
£ed
 )

33 
	`LFDS711_PAL_ASSERT
–
p°s
 !
NULL
 );

34 
	`LFDS711_PAL_ASSERT
–
£ed
 != 0 );

36 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
£ed
 );

38 
p°s
->
íå›y
 = 
£ed
;

41 
	}
}

	@liblfds711/src/lfds711_prng/lfds711_prng_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

	@liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_cleanup.c

2 
	~"lfds711_queue_bounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_bmm_˛ónup
–
lfds711_queue_bmm_°©e
 *
qbmms
,

10 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_queue_bmm_°©e
 *
qbmms
, *
key
, *
vÆue
) )

13 *
key
,

14 *
vÆue
;

16 
	`LFDS711_PAL_ASSERT
–
qbmms
 !
NULL
 );

19 
LFDS711_MISC_BARRIER_LOAD
;

21 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

22  
	`lfds711_queue_bmm_dequeue
(
qbmms
,&
key
,&
vÆue
) )

23 
	`ñemít_˛ónup_ˇŒback
–
qbmms
, 
key
, 
vÆue
 );

26 
	}
}

	@liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_dequeue.c

2 
	~"lfds711_queue_bounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_bmm_dequeue
–
lfds711_queue_bmm_°©e
 *
qbmms
,

10 **
key
,

11 **
vÆue
 )

14 
ªsu…
;

16 
lfds711_misc_Êag


17 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

20 
rv
 = 1;

22 
lfds711_∑l_uöt_t


23 
ªad_ödex
,

24 
£quí˚_numbî
;

26 
lfds711_∑l_öt_t


27 
dif„ªn˚
;

29 
lfds711_∑l_uöt_t


30 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

32 
lfds711_queue_bmm_ñemít


33 *
qbmme
 = 
NULL
;

35 
	`LFDS711_PAL_ASSERT
–
qbmms
 !
NULL
 );

39 
LFDS711_MISC_BARRIER_LOAD
;

41 
ªad_ödex
 = 
qbmms
->read_index;

43  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

45 
qbmme
 = &
qbmms
->
ñemít_¨øy
[ 
ªad_ödex
 & qbmms->
mask
 ];

46 
LFDS711_MISC_BARRIER_LOAD
;

47 
£quí˚_numbî
 = 
qbmme
->sequence_number;

48 
dif„ªn˚
 = (
lfds711_∑l_öt_t
Ë
£quí˚_numbî
 - (lfds711_∑l_öt_tË(
ªad_ödex
 + 1);

50 if–
dif„ªn˚
 == 0 )

52 
	`LFDS711_PAL_ATOMIC_CAS
–&
qbmms
->
ªad_ödex
, &ªad_ödex,Ñód_ödex + 1, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

53 if–
ªsu…
 == 0 )

54 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
qbmms
->
dequeue_backoff
, 
backoff_ôî©i⁄
 );

55 if–
ªsu…
 == 1 )

56 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

59 if–
dif„ªn˚
 < 0 )

61 
rv
 = 0;

62 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

65 if–
dif„ªn˚
 > 0 )

67 
LFDS711_MISC_BARRIER_LOAD
;

68 
ªad_ödex
 = 
qbmms
->read_index;

72 if–
rv
 == 1 )

74 if–
key
 !
NULL
 )

75 *
key
 = 
qbmme
->key;

76 if–
vÆue
 !
NULL
 )

77 *
vÆue
 = 
qbmme
->value;

78 
LFDS711_MISC_BARRIER_STORE
;

79 
qbmme
->
£quí˚_numbî
 = 
ªad_ödex
 + 
qbmms
->
mask
 + 1;

82 
	`LFDS711_BACKOFF_AUTOTUNE
–
qbmms
->
dequeue_backoff
, 
backoff_ôî©i⁄
 );

84  
rv
;

85 
	}
}

	@liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_enqueue.c

2 
	~"lfds711_queue_bounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_bmm_íqueue
–
lfds711_queue_bmm_°©e
 *
qbmms
,

10 *
key
,

11 *
vÆue
 )

14 
ªsu…
;

16 
lfds711_misc_Êag


17 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

20 
rv
 = 1;

22 
lfds711_∑l_uöt_t


23 
£quí˚_numbî
,

24 
wrôe_ödex
;

26 
lfds711_∑l_öt_t


27 
dif„ªn˚
;

29 
lfds711_∑l_uöt_t


30 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

32 
lfds711_queue_bmm_ñemít


33 *
qbmme
 = 
NULL
;

35 
	`LFDS711_PAL_ASSERT
–
qbmms
 !
NULL
 );

39 
LFDS711_MISC_BARRIER_LOAD
;

41 
wrôe_ödex
 = 
qbmms
->write_index;

43  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

45 
qbmme
 = &
qbmms
->
ñemít_¨øy
[ 
wrôe_ödex
 & qbmms->
mask
 ];

46 
LFDS711_MISC_BARRIER_LOAD
;

47 
£quí˚_numbî
 = 
qbmme
->sequence_number;

48 
dif„ªn˚
 = (
lfds711_∑l_öt_t
Ë
£quí˚_numbî
 - (lfds711_∑l_öt_tË
wrôe_ödex
;

50 if–
dif„ªn˚
 == 0 )

52 
	`LFDS711_PAL_ATOMIC_CAS
–&
qbmms
->
wrôe_ödex
, &wrôe_ödex, wrôe_ödex + 1, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

53 if–
ªsu…
 == 0 )

54 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
qbmms
->
íqueue_backoff
, 
backoff_ôî©i⁄
 );

55 if–
ªsu…
 == 1 )

56 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

59 if–
dif„ªn˚
 < 0 )

61 
rv
 = 0;

62 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

65 if–
dif„ªn˚
 > 0 )

67 
LFDS711_MISC_BARRIER_LOAD
;

68 
wrôe_ödex
 = 
qbmms
->write_index;

72 if–
rv
 == 1 )

74 
qbmme
->
key
 = key;

75 
qbmme
->
vÆue
 = value;

76 
LFDS711_MISC_BARRIER_STORE
;

77 
qbmme
->
£quí˚_numbî
 = 
wrôe_ödex
 + 1;

80 
	`LFDS711_BACKOFF_AUTOTUNE
–
qbmms
->
íqueue_backoff
, 
backoff_ôî©i⁄
 );

82  
rv
;

83 
	}
}

	@liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_init.c

2 
	~"lfds711_queue_bounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_bmm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_queue_bmm_°©e
 *
qbmms
,

10 
lfds711_queue_bmm_ñemít
 *
ñemít_¨øy
,

11 
lfds711_∑l_uöt_t
 
numbî_ñemíts
,

12 *
u£r_°©e
 )

14 
lfds711_∑l_uöt_t


15 
lo›
;

17 
	`LFDS711_PAL_ASSERT
–
qbmms
 !
NULL
 );

18 
	`LFDS711_PAL_ASSERT
–
ñemít_¨øy
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
numbî_ñemíts
 >= 2 );

20 
	`LFDS711_PAL_ASSERT
––
numbî_ñemíts
 & (number_elements-1) ) == 0 );

23 
qbmms
->
numbî_ñemíts
 =Çumber_elements;

24 
qbmms
->
mask
 = qbmms->
numbî_ñemíts
 - 1;

25 
qbmms
->
ªad_ödex
 = 0;

26 
qbmms
->
wrôe_ödex
 = 0;

27 
qbmms
->
ñemít_¨øy
 =Élement_array;

28 
qbmms
->
u£r_°©e
 = user_state;

30  
lo›
 = 0 ;Üo› < 
qbmms
->
numbî_ñemíts
 ;Üoop++ )

31 
qbmms
->
ñemít_¨øy
[
lo›
].
£quí˚_numbî
 =Üoop;

33 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
qbmms
->
dequeue_backoff
 );

34 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
qbmms
->
íqueue_backoff
 );

36 
LFDS711_MISC_BARRIER_STORE
;

38 
	`lfds711_misc_f‹˚_°‹e
();

41 
	}
}

	@liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

	@liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_query.c

2 
	~"lfds711_queue_bounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

5 
lfds711_queue_bmm_öã∫Æ_vÆid©e
–
lfds711_queue_bmm_°©e
 *
qbmms
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_vÆidôy
 );

14 
	$lfds711_queue_bmm_quîy
–
lfds711_queue_bmm_°©e
 *
qbmms
,

15 
lfds711_queue_bmm_quîy
 
quîy_ty≥
,

16 *
quîy_öput
,

17 *
quîy_ouçut
 )

19 
	`LFDS711_PAL_ASSERT
–
qbmms
 !
NULL
 );

22  
quîy_ty≥
 )

24 
LFDS711_QUEUE_BMM_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
:

26 
lfds711_∑l_uöt_t


27 
loˇl_ªad_ödex
,

28 
loˇl_wrôe_ödex
;

30 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

33 
LFDS711_MISC_BARRIER_LOAD
;

35 
loˇl_ªad_ödex
 = 
qbmms
->
ªad_ödex
;

36 
loˇl_wrôe_ödex
 = 
qbmms
->
wrôe_ödex
;

38 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = +–
loˇl_wrôe_ödex
 - 
loˇl_ªad_ödex
 );

40 if–
loˇl_ªad_ödex
 > 
loˇl_wrôe_ödex
 )

41 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = ((lfds711_pal_uint_t) -1) - *(lfds711_pal_uint_t *) query_output;

45 
LFDS711_QUEUE_BMM_QUERY_SINGLETHREADED_VALIDATE
:

47 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

49 
	`lfds711_queue_bmm_öã∫Æ_vÆid©e
–
qbmms
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

54 
	}
}

61 
	$lfds711_queue_bmm_öã∫Æ_vÆid©e
–
lfds711_queue_bmm_°©e
 *
qbmms
,

62 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

63 
lfds711_misc_vÆidôy
 *
lfds711_vÆidôy
 )

65 
lfds711_∑l_uöt_t


66 
ex≥˘ed_£quí˚_numbî
,

67 
lo›
,

68 
numbî_ñemíts
,

69 
£quí˚_numbî
;

71 
	`LFDS711_PAL_ASSERT
–
qbmms
 !
NULL
 );

73 
	`LFDS711_PAL_ASSERT
–
lfds711_vÆidôy
 !
NULL
 );

75 *
lfds711_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

81 
	`lfds711_queue_bmm_quîy
–
qbmms
, 
LFDS711_QUEUE_BMM_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_ñemíts
 );

83 
ex≥˘ed_£quí˚_numbî
 = 
qbmms
->
ñemít_¨øy
[ qbmms->
ªad_ödex
 & qbmms->
mask
 ].
£quí˚_numbî
;

85  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

87 
£quí˚_numbî
 = 
qbmms
->
ñemít_¨øy
[ (qbmms->
ªad_ödex
 + 
lo›
Ë& qbmms->
mask
 ].sequence_number;

89 if–
£quí˚_numbî
 !
ex≥˘ed_£quí˚_numbî
 )

90 *
lfds711_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ORDER
;

92 if–
£quí˚_numbî
 =
ex≥˘ed_£quí˚_numbî
 )

93 
ex≥˘ed_£quí˚_numbî
 = 
£quí˚_numbî
 + 1;

98 
ex≥˘ed_£quí˚_numbî
 = 
qbmms
->
ñemít_¨øy
[ qbmms->
wrôe_ödex
 & qbmms->
mask
 ].
£quí˚_numbî
;

100  
lo›
 = 0 ;Üo› < 
qbmms
->
numbî_ñemíts
 -Çumber_elements ;Üoop++ )

102 
£quí˚_numbî
 = 
qbmms
->
ñemít_¨øy
[ (qbmms->
wrôe_ödex
 + 
lo›
Ë& qbmms->
mask
 ].sequence_number;

104 if–
£quí˚_numbî
 !
ex≥˘ed_£quí˚_numbî
 )

105 *
lfds711_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ORDER
;

107 if–
£quí˚_numbî
 =
ex≥˘ed_£quí˚_numbî
 )

108 
ex≥˘ed_£quí˚_numbî
 = 
£quí˚_numbî
 + 1;

113 if–*
lfds711_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
vi
 !
NULL
 )

115 
lfds711_∑l_uöt_t


116 
numbî_ñemíts
;

118 
	`lfds711_queue_bmm_quîy
–
qbmms
, 
LFDS711_QUEUE_BMM_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_ñemíts
 );

120 if–
numbî_ñemíts
 < 
vi
->
mö_ñemíts
 )

121 *
lfds711_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

123 if–
numbî_ñemíts
 > 
vi
->
max_ñemíts
 )

124 *
lfds711_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

128 
	}
}

	@liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_cleanup.c

2 
	~"lfds711_queue_bounded_sögÀ¥odu˚r_sögÀc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_bss_˛ónup
–
lfds711_queue_bss_°©e
 *
qbsss
,

10 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_queue_bss_°©e
 *
qbsss
, *
key
, *
vÆue
) )

12 
lfds711_∑l_uöt_t


13 
lo›
;

15 
lfds711_queue_bss_ñemít


16 *
qbs£
;

18 
	`LFDS711_PAL_ASSERT
–
qbsss
 !
NULL
 );

21 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

22  
lo›
 = 
qbsss
->
ªad_ödex
 ;Üo› < qbsss->ªad_ödex + qbsss->
numbî_ñemíts
 ;Üoop++ )

24 
qbs£
 = 
qbsss
->
ñemít_¨øy
 + (
lo›
 % qbsss->
numbî_ñemíts
);

25 
	`ñemít_˛ónup_ˇŒback
–
qbsss
, 
qbs£
->
key
, qbs£->
vÆue
 );

29 
	}
}

	@liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_dequeue.c

2 
	~"lfds711_queue_bounded_sögÀ¥odu˚r_sögÀc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_bss_dequeue
–
lfds711_queue_bss_°©e
 *
qbsss
,

10 **
key
,

11 **
vÆue
 )

13 
lfds711_queue_bss_ñemít


14 *
qbs£
;

16 
	`LFDS711_PAL_ASSERT
–
qbsss
 !
NULL
 );

20 
LFDS711_MISC_BARRIER_LOAD
;

22 if–
qbsss
->
ªad_ödex
 !qbsss->
wrôe_ödex
 )

24 
qbs£
 = 
qbsss
->
ñemít_¨øy
 + qbsss->
ªad_ödex
;

26 if–
key
 !
NULL
 )

27 *
key
 = 
qbs£
->key;

29 if–
vÆue
 !
NULL
 )

30 *
vÆue
 = 
qbs£
->value;

32 
qbsss
->
ªad_ödex
 = (qbsss->ªad_ödex + 1Ë& qbsss->
mask
;

34 
LFDS711_MISC_BARRIER_STORE
;

40 
	}
}

	@liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_enqueue.c

2 
	~"lfds711_queue_bounded_sögÀ¥odu˚r_sögÀc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_bss_íqueue
–
lfds711_queue_bss_°©e
 *
qbsss
,

10 *
key
,

11 *
vÆue
 )

13 
lfds711_queue_bss_ñemít


14 *
qbs£
;

16 
	`LFDS711_PAL_ASSERT
–
qbsss
 !
NULL
 );

20 
LFDS711_MISC_BARRIER_LOAD
;

22 if––(
qbsss
->
wrôe_ödex
+1Ë& qbsss->
mask
 ) !qbsss->
ªad_ödex
 )

24 
qbs£
 = 
qbsss
->
ñemít_¨øy
 + qbsss->
wrôe_ödex
;

26 
qbs£
->
key
 = key;

27 
qbs£
->
vÆue
 = value;

29 
LFDS711_MISC_BARRIER_STORE
;

31 
qbsss
->
wrôe_ödex
 = (qbsss->wrôe_ödex + 1Ë& qbsss->
mask
;

37 
	}
}

	@liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_init.c

2 
	~"lfds711_queue_bounded_sögÀ¥odu˚r_sögÀc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_bss_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_queue_bss_°©e
 *
qbsss
,

10 
lfds711_queue_bss_ñemít
 *
ñemít_¨øy
,

11 
lfds711_∑l_uöt_t
 
numbî_ñemíts
,

12 *
u£r_°©e
 )

14 
	`LFDS711_PAL_ASSERT
–
qbsss
 !
NULL
 );

15 
	`LFDS711_PAL_ASSERT
–
ñemít_¨øy
 !
NULL
 );

16 
	`LFDS711_PAL_ASSERT
–
numbî_ñemíts
 >= 2 );

17 
	`LFDS711_PAL_ASSERT
––
numbî_ñemíts
 & (number_elements-1) ) == 0 );

50 
qbsss
->
numbî_ñemíts
 =Çumber_elements;

51 
qbsss
->
mask
 = qbsss->
numbî_ñemíts
 - 1;

52 
qbsss
->
ªad_ödex
 = 0;

53 
qbsss
->
wrôe_ödex
 = 0;

54 
qbsss
->
ñemít_¨øy
 =Élement_array;

55 
qbsss
->
u£r_°©e
 = user_state;

57 
LFDS711_MISC_BARRIER_STORE
;

59 
	`lfds711_misc_f‹˚_°‹e
();

62 
	}
}

	@liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

	@liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_query.c

2 
	~"lfds711_queue_bounded_sögÀ¥odu˚r_sögÀc⁄sumî_öã∫Æ.h
"

5 
lfds711_queue_bss_öã∫Æ_vÆid©e
–
lfds711_queue_bss_°©e
 *
qbsss
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_vÆidôy
 );

14 
	$lfds711_queue_bss_quîy
–
lfds711_queue_bss_°©e
 *
qbsss
,

15 
lfds711_queue_bss_quîy
 
quîy_ty≥
,

16 *
quîy_öput
,

17 *
quîy_ouçut
 )

19 
	`LFDS711_PAL_ASSERT
–
qbsss
 !
NULL
 );

22  
quîy_ty≥
 )

24 
LFDS711_QUEUE_BSS_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
:

26 
lfds711_∑l_uöt_t


27 
loˇl_ªad_ödex
,

28 
loˇl_wrôe_ödex
;

30 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

33 
LFDS711_MISC_BARRIER_LOAD
;

35 
loˇl_ªad_ödex
 = 
qbsss
->
ªad_ödex
;

36 
loˇl_wrôe_ödex
 = 
qbsss
->
wrôe_ödex
;

38 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = +–
loˇl_wrôe_ödex
 - 
loˇl_ªad_ödex
 );

40 if–
loˇl_ªad_ödex
 > 
loˇl_wrôe_ödex
 )

41 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 
qbsss
->
numbî_ñemíts
 - *(lfds711_pal_uint_t *) query_output;

45 
LFDS711_QUEUE_BSS_QUERY_VALIDATE
:

47 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

49 
	`lfds711_queue_bss_öã∫Æ_vÆid©e
–
qbsss
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

54 
	}
}

61 
	$lfds711_queue_bss_öã∫Æ_vÆid©e
–
lfds711_queue_bss_°©e
 *
qbsss
,

62 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

63 
lfds711_misc_vÆidôy
 *
lfds711_vÆidôy
 )

65 
	`LFDS711_PAL_ASSERT
–
qbsss
 !
NULL
 );

67 
	`LFDS711_PAL_ASSERT
–
lfds711_vÆidôy
 !
NULL
 );

69 *
lfds711_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

71 if–
vi
 !
NULL
 )

73 
lfds711_∑l_uöt_t


74 
numbî_ñemíts
;

76 
	`lfds711_queue_bss_quîy
–
qbsss
, 
LFDS711_QUEUE_BSS_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_ñemíts
 );

78 if–
numbî_ñemíts
 < 
vi
->
mö_ñemíts
 )

79 *
lfds711_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

81 if–
numbî_ñemíts
 > 
vi
->
max_ñemíts
 )

82 *
lfds711_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

86 
	}
}

	@liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_cleanup.c

2 
	~"lfds711_queue_unbounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_umm_˛ónup
–
lfds711_queue_umm_°©e
 *
qumms
,

10 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_queue_umm_°©e
 *
qumms
, 
lfds711_queue_umm_ñemít
 *
qumme
, 
lfds711_misc_Êag
 
dummy_ñemít_Êag
) )

12 
lfds711_queue_umm_ñemít


13 *
qumme
;

16 *
vÆue
;

18 
	`LFDS711_PAL_ASSERT
–
qumms
 !
NULL
 );

21 
LFDS711_MISC_BARRIER_LOAD
;

23 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

25  
qumms
->
dequeue
[
POINTER
] !qumms->
íqueue
[POINTER] )

28 
vÆue
 = 
qumms
->
dequeue
[
POINTER
]->
√xt
[POINTER]->value;

31 
qumme
 = 
qumms
->
dequeue
[
POINTER
];

34 
qumms
->
dequeue
[
POINTER
] = qumms->dequeue[POINTER]->
√xt
[POINTER];

37 
qumme
->
vÆue
 = value;

39 
	`ñemít_˛ónup_ˇŒback
–
qumms
, 
qumme
, 
LFDS711_MISC_FLAG_LOWERED
 );

43 
	`ñemít_˛ónup_ˇŒback
–
qumms
, (
lfds711_queue_umm_ñemít
 *Ëqumms->
dequeue
[
POINTER
], 
LFDS711_MISC_FLAG_RAISED
 );

47 
	}
}

	@liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_dequeue.c

2 
	~"lfds711_queue_unbounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_umm_dequeue
–
lfds711_queue_umm_°©e
 *
qumms
,

10 
lfds711_queue_umm_ñemít
 **
qumme
 )

13 
ªsu…
 = 0;

15 
lfds711_misc_Êag


16 
backoff_Êag
 = 
LFDS711_MISC_FLAG_RAISED
,

17 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

19 
lfds711_queue_umm_queue_°©e


20 
°©e
 = 
LFDS711_QUEUE_UMM_QUEUE_STATE_UNKNOWN
;

23 
rv
 = 1;

25 
lfds711_∑l_uöt_t


26 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

28 
lfds711_queue_umm_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

29 *
dequeue
[
PAC_SIZE
],

30 *
íqueue
[
PAC_SIZE
],

31 *
√xt
[
PAC_SIZE
];

34 *
key
 = 
NULL
,

35 *
vÆue
 = 
NULL
;

37 
	`LFDS711_PAL_ASSERT
–
qumms
 !
NULL
 );

38 
	`LFDS711_PAL_ASSERT
–
qumme
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

55 
dequeue
[
COUNTER
] = 
qumms
->dequeue[COUNTER];

56 
dequeue
[
POINTER
] = 
qumms
->dequeue[POINTER];

58 
LFDS711_MISC_BARRIER_LOAD
;

60 
íqueue
[
COUNTER
] = 
qumms
->enqueue[COUNTER];

61 
íqueue
[
POINTER
] = 
qumms
->enqueue[POINTER];

63 
√xt
[
COUNTER
] = 
qumms
->
dequeue
[
POINTER
]->next[COUNTER];

64 
√xt
[
POINTER
] = 
qumms
->
dequeue
[POINTER]->next[POINTER];

66 
LFDS711_MISC_BARRIER_LOAD
;

68 if–
qumms
->
dequeue
[
COUNTER
] =dequeue[COUNTER] 
™d
 qumms->dequeue[
POINTER
] == dequeue[POINTER] )

70 if–
íqueue
[
POINTER
] =
dequeue
[POINTER] 
™d
 
√xt
[POINTER] =
NULL
 )

71 
°©e
 = 
LFDS711_QUEUE_UMM_QUEUE_STATE_EMPTY
;

73 if–
íqueue
[
POINTER
] =
dequeue
[POINTER] 
™d
 
√xt
[POINTER] !
NULL
 )

74 
°©e
 = 
LFDS711_QUEUE_UMM_QUEUE_STATE_ENQUEUE_OUT_OF_PLACE
;

76 if–
íqueue
[
POINTER
] !
dequeue
[POINTER] )

77 
°©e
 = 
LFDS711_QUEUE_UMM_QUEUE_STATE_ATTEMPT_DEQUEUE
;

79  
°©e
 )

81 
LFDS711_QUEUE_UMM_QUEUE_STATE_UNKNOWN
:

85 
LFDS711_QUEUE_UMM_QUEUE_STATE_EMPTY
:

86 
rv
 = 0;

87 *
qumme
 = 
NULL
;

88 
ªsu…
 = 0;

89 
backoff_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

90 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

93 
LFDS711_QUEUE_UMM_QUEUE_STATE_ENQUEUE_OUT_OF_PLACE
:

94 
√xt
[
COUNTER
] = 
íqueue
[COUNTER] + 1;

95 
	`LFDS711_PAL_ATOMIC_DWCAS
–
qumms
->
íqueue
,Énqueue, 
√xt
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

99 
LFDS711_QUEUE_UMM_QUEUE_STATE_ATTEMPT_DEQUEUE
:

100 
key
 = 
√xt
[
POINTER
]->key;

101 
vÆue
 = 
√xt
[
POINTER
]->value;

103 
√xt
[
COUNTER
] = 
qumms
->
dequeue
[COUNTER] + 1;

104 
	`LFDS711_PAL_ATOMIC_DWCAS
–
qumms
->
dequeue
, dequeue, 
√xt
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

106 if–
ªsu…
 == 1 )

108 
backoff_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

109 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

115 
backoff_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

117 if–
backoff_Êag
 =
LFDS711_MISC_FLAG_RAISED
 )

118 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
qumms
->
dequeue_backoff
, 
backoff_ôî©i⁄
 );

120  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 );

122 if–
ªsu…
 == 1 )

124 *
qumme
 = 
dequeue
[
POINTER
];

125 (*
qumme
)->
key
 = key;

126 (*
qumme
)->
vÆue
 = value;

129 
	`LFDS711_BACKOFF_AUTOTUNE
–
qumms
->
dequeue_backoff
, 
backoff_ôî©i⁄
 );

131  
rv
;

132 
	}
}

	@liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_enqueue.c

2 
	~"lfds711_queue_unbounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_umm_íqueue
–
lfds711_queue_umm_°©e
 *
qumms
,

10 
lfds711_queue_umm_ñemít
 *
qumme
 )

13 
ªsu…
 = 0;

15 
lfds711_misc_Êag


16 
föished_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

18 
lfds711_∑l_uöt_t


19 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

21 
lfds711_queue_umm_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

22 *vﬁ©ûê
íqueue
[
PAC_SIZE
],

23 *
√w_íqueue
[
PAC_SIZE
],

24 *vﬁ©ûê
√xt
[
PAC_SIZE
];

26 
	`LFDS711_PAL_ASSERT
–
qumms
 !
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–
qumme
 !
NULL
 );

28 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë
qumme
->
√xt
 % 
LFDS711_PAL_ALIGN_DOUBLE_POINTER
 == 0 );

30 
qumme
->
√xt
[
POINTER
] = 
NULL
;

31 
	`LFDS711_PAL_ATOMIC_ADD
–&
qumms
->
aba_cou¡î
, 1, 
qumme
->
√xt
[
COUNTER
], 
lfds711_queue_umm_ñemít
 * );

32 
LFDS711_MISC_BARRIER_STORE
;

34 
√w_íqueue
[
POINTER
] = 
qumme
;

36 
LFDS711_MISC_BARRIER_LOAD
;

51 
íqueue
[
COUNTER
] = 
qumms
->enqueue[COUNTER];

52 
íqueue
[
POINTER
] = 
qumms
->enqueue[POINTER];

54 
LFDS711_MISC_BARRIER_LOAD
;

56 
√xt
[
COUNTER
] = 
qumms
->
íqueue
[
POINTER
]->next[COUNTER];

57 
√xt
[
POINTER
] = 
qumms
->
íqueue
[POINTER]->next[POINTER];

59 
LFDS711_MISC_BARRIER_LOAD
;

61 if–
qumms
->
íqueue
[
COUNTER
] =íqueue[COUNTER] 
™d
 qumms->íqueue[
POINTER
] ==Énqueue[POINTER] )

63 if–
√xt
[
POINTER
] =
NULL
 )

65 
√w_íqueue
[
COUNTER
] = 
√xt
[COUNTER] + 1;

66 
	`LFDS711_PAL_ATOMIC_DWCAS
–
íqueue
[
POINTER
]->
√xt
,Çext, 
√w_íqueue
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

67 if–
ªsu…
 == 1 )

68 
föished_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

72 
√xt
[
COUNTER
] = 
íqueue
[COUNTER] + 1;

74 
	`LFDS711_PAL_ATOMIC_DWCAS
–
qumms
->
íqueue
,Énqueue, 
√xt
, 
LFDS711_MISC_CAS_STRENGTH_STRONG
, 
ªsu…
 );

78 
ªsu…
 = 0;

80 if–
ªsu…
 == 0 )

81 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
qumms
->
íqueue_backoff
, 
backoff_ôî©i⁄
 );

83  
föished_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 );

86 
√w_íqueue
[
COUNTER
] = 
íqueue
[COUNTER] + 1;

87 
	`LFDS711_PAL_ATOMIC_DWCAS
–
qumms
->
íqueue
,Énqueue, 
√w_íqueue
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

89 if–
ªsu…
 == 0 )

90 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
qumms
->
íqueue_backoff
, 
backoff_ôî©i⁄
 );

92 
	`LFDS711_BACKOFF_AUTOTUNE
–
qumms
->
íqueue_backoff
, 
backoff_ôî©i⁄
 );

95 
	}
}

	@liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_init.c

2 
	~"lfds711_queue_unbounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

9 
	$lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_queue_umm_°©e
 *
qumms
,

10 
lfds711_queue_umm_ñemít
 *
qumme_dummy
,

11 *
u£r_°©e
 )

13 
	`LFDS711_PAL_ASSERT
–
qumms
 !
NULL
 );

14 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
qumms
->
íqueue
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

15 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
qumms
->
dequeue
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

16 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
qumms
->
u£r_°©e
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

17 
	`LFDS711_PAL_ASSERT
–
qumme_dummy
 !
NULL
 );

18 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë
qumme_dummy
->
√xt
 % 
LFDS711_PAL_ALIGN_DOUBLE_POINTER
 == 0 );

26 
	`LFDS711_PRNG_GENERATE
–
lfds711_misc_globÆs
.
ps
, 
qumms
->
aba_cou¡î
 );

28 
qumms
->
íqueue
[
POINTER
] = 
qumme_dummy
;

29 
qumms
->
íqueue
[
COUNTER
] = (
lfds711_queue_umm_ñemít
 *) 0;

30 
qumms
->
dequeue
[
POINTER
] = 
qumme_dummy
;

31 
qumms
->
dequeue
[
COUNTER
] = (
lfds711_queue_umm_ñemít
 *) 0;

33 
qumme_dummy
->
√xt
[
POINTER
] = 
NULL
;

35 
qumme_dummy
->
√xt
[
COUNTER
] = (
lfds711_queue_umm_ñemít
 *Ë
qumms
->
aba_cou¡î
++;

36 
qumme_dummy
->
key
 = 
NULL
;

37 
qumme_dummy
->
vÆue
 = 
NULL
;

39 
qumms
->
u£r_°©e
 = user_state;

41 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
qumms
->
dequeue_backoff
 );

42 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
qumms
->
íqueue_backoff
 );

44 
LFDS711_MISC_BARRIER_STORE
;

46 
	`lfds711_misc_f‹˚_°‹e
();

49 
	}
}

	@liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

5 
	elfds711_queue_umm_queue_°©e


7 
	mLFDS711_QUEUE_UMM_QUEUE_STATE_UNKNOWN
,

8 
	mLFDS711_QUEUE_UMM_QUEUE_STATE_EMPTY
,

9 
	mLFDS711_QUEUE_UMM_QUEUE_STATE_ENQUEUE_OUT_OF_PLACE
,

10 
	mLFDS711_QUEUE_UMM_QUEUE_STATE_ATTEMPT_DEQUEUE


	@liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_query.c

2 
	~"lfds711_queue_unbounded_m™y¥odu˚r_m™yc⁄sumî_öã∫Æ.h
"

5 
lfds711_queue_umm_öã∫Æ_vÆid©e
–
lfds711_queue_umm_°©e
 *
qumms
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_queue_umm_vÆidôy
 );

14 
	$lfds711_queue_umm_quîy
–
lfds711_queue_umm_°©e
 *
qumms
,

15 
lfds711_queue_umm_quîy
 
quîy_ty≥
,

16 *
quîy_öput
,

17 *
quîy_ouçut
 )

19 
lfds711_queue_umm_ñemít


20 *
qumme
;

22 
LFDS711_MISC_BARRIER_LOAD
;

24 
	`LFDS711_PAL_ASSERT
–
qumms
 !
NULL
 );

27  
quîy_ty≥
 )

29 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_GET_COUNT
:

30 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

33 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 0;

35 
qumme
 = (
lfds711_queue_umm_ñemít
 *Ë
qumms
->
dequeue
[
POINTER
];

37  
qumme
 !
NULL
 )

39 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )++;

40 
qumme
 = (
lfds711_queue_umm_ñemít
 *Ëqumme->
√xt
[
POINTER
];

44 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )--;

47 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE
:

49 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

51 
	`lfds711_queue_umm_öã∫Æ_vÆid©e
–
qumms
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

56 
	}
}

63 
	$lfds711_queue_umm_öã∫Æ_vÆid©e
–
lfds711_queue_umm_°©e
 *
qumms
,

64 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

65 
lfds711_misc_vÆidôy
 *
lfds711_queue_umm_vÆidôy
 )

67 
lfds711_∑l_uöt_t


68 
numbî_ñemíts
 = 0;

70 
lfds711_queue_umm_ñemít


71 *
qumme_Á°
,

72 *
qumme_¶ow
;

74 
	`LFDS711_PAL_ASSERT
–
qumms
 !
NULL
 );

76 
	`LFDS711_PAL_ASSERT
–
lfds711_queue_umm_vÆidôy
 !
NULL
 );

78 *
lfds711_queue_umm_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

80 
qumme_¶ow
 = 
qumme_Á°
 = (
lfds711_queue_umm_ñemít
 *Ë
qumms
->
dequeue
[
POINTER
];

99 if–
qumme_¶ow
 !
NULL
 )

102 
qumme_¶ow
 = qumme_¶ow->
√xt
[
POINTER
];

104 if–
qumme_Á°
 !
NULL
 )

105 
qumme_Á°
 = qumme_Á°->
√xt
[
POINTER
];

107 if–
qumme_Á°
 !
NULL
 )

108 
qumme_Á°
 = qumme_Á°->
√xt
[
POINTER
];

110  
qumme_¶ow
 !
NULL
 
™d
 
qumme_Á°
 != qumme_slow );

112 if–
qumme_Á°
 !
NULL
 
™d
 
qumme_¶ow
 != NULLánd qumme_fast == qumme_slow )

113 *
lfds711_queue_umm_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_LOOP
;

120 if–*
lfds711_queue_umm_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
vi
 !
NULL
 )

122 
	`lfds711_queue_umm_quîy
–
qumms
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_GET_COUNT
, 
NULL
, (*Ë&
numbî_ñemíts
 );

124 if–
numbî_ñemíts
 < 
vi
->
mö_ñemíts
 )

125 *
lfds711_queue_umm_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

127 if–
numbî_ñemíts
 > 
vi
->
max_ñemíts
 )

128 *
lfds711_queue_umm_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

132 
	}
}

	@liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_cleanup.c

2 
	~"lfds711_rögbuf„r_öã∫Æ.h
"

5 
lfds711_rögbuf„r_öã∫Æ_queue_umm_ñemít_˛ónup_ˇŒback
–
lfds711_queue_umm_°©e
 *
qumms
,

6 
lfds711_queue_umm_ñemít
 *
qumme
,

7 
lfds711_misc_Êag
 
dummy_ñemít_Êag
 );

8 
lfds711_rögbuf„r_öã∫Æ_‰ìli°_ñemít_˛ónup_ˇŒback
–
lfds711_‰ìli°_°©e
 *
fs
,

9 
lfds711_‰ìli°_ñemít
 *
„
 );

16 
	$lfds711_rögbuf„r_˛ónup
–
lfds711_rögbuf„r_°©e
 *
rs
,

17 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_rögbuf„r_°©e
 *
rs
, *
key
, *
vÆue
, 
lfds711_misc_Êag
 
uƒód_Êag
) )

19 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

22 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

24 
rs
->
ñemít_˛ónup_ˇŒback
 =Élement_cleanup_callback;

25 
	`lfds711_queue_umm_˛ónup
–&
rs
->
qumms
, 
lfds711_rögbuf„r_öã∫Æ_queue_umm_ñemít_˛ónup_ˇŒback
 );

26 
	`lfds711_‰ìli°_˛ónup
–&
rs
->
fs
, 
lfds711_rögbuf„r_öã∫Æ_‰ìli°_ñemít_˛ónup_ˇŒback
 );

30 
	}
}

37 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

39 
	$lfds711_rögbuf„r_öã∫Æ_queue_umm_ñemít_˛ónup_ˇŒback
–
lfds711_queue_umm_°©e
 *
qumms
,

40 
lfds711_queue_umm_ñemít
 *
qumme
,

41 
lfds711_misc_Êag
 
dummy_ñemít_Êag
 )

43 
lfds711_rögbuf„r_ñemít


44 *
ª
;

46 
lfds711_rögbuf„r_°©e


47 *
rs
;

49 
	`LFDS711_PAL_ASSERT
–
qumms
 !
NULL
 );

50 
	`LFDS711_PAL_ASSERT
–
qumme
 !
NULL
 );

53 
rs
 = (
lfds711_rögbuf„r_°©e
 *Ë
	`LFDS711_QUEUE_UMM_GET_USER_STATE_FROM_STATE
–*
qumms
 );

54 
ª
 = (
lfds711_rögbuf„r_ñemít
 *Ë
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qumme
 );

56 if–
dummy_ñemít_Êag
 =
LFDS711_MISC_FLAG_LOWERED
 )

57 
rs
->
	`ñemít_˛ónup_ˇŒback
–rs, 
ª
->
key
,Ñe->
vÆue
, 
LFDS711_MISC_FLAG_RAISED
 );

60 
	}
}

62 #¥agm®
w¨nög
(  : 4100 )

69 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

71 
	$lfds711_rögbuf„r_öã∫Æ_‰ìli°_ñemít_˛ónup_ˇŒback
–
lfds711_‰ìli°_°©e
 *
fs
,

72 
lfds711_‰ìli°_ñemít
 *
„
 )

74 
lfds711_rögbuf„r_ñemít


75 *
ª
;

77 
lfds711_rögbuf„r_°©e


78 *
rs
;

80 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

81 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

83 
rs
 = (
lfds711_rögbuf„r_°©e
 *Ë
	`LFDS711_FREELIST_GET_USER_STATE_FROM_STATE
–*
fs
 );

84 
ª
 = (
lfds711_rögbuf„r_ñemít
 *Ë
	`LFDS711_FREELIST_GET_VALUE_FROM_ELEMENT
–*
„
 );

86 
rs
->
	`ñemít_˛ónup_ˇŒback
–rs, 
ª
->
key
,Ñe->
vÆue
, 
LFDS711_MISC_FLAG_LOWERED
 );

89 
	}
}

91 #¥agm®
w¨nög
(  : 4100 )

	@liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_init.c

2 
	~"lfds711_rögbuf„r_öã∫Æ.h
"

9 
	$lfds711_rögbuf„r_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_rögbuf„r_°©e
 *
rs
,

10 
lfds711_rögbuf„r_ñemít
 *
ª_¨øy_öc_dummy
,

11 
lfds711_∑l_uöt_t
 
numbî_ñemíts_öc_dummy
,

12 *
u£r_°©e
 )

14 
lfds711_∑l_uöt_t


15 
lo›
;

17 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

18 
	`LFDS711_PAL_ASSERT
–
ª_¨øy_öc_dummy
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
numbî_ñemíts_öc_dummy
 >= 2 );

22 
rs
->
u£r_°©e
 = user_state;

24 
ª_¨øy_öc_dummy
[0].
qumme_u£
 = &ª_¨øy_öc_dummy[0].
qumme
;

26 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
rs
->
fs
, 
NULL
, 0,Ñs );

27 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
rs
->
qumms
, &
ª_¨øy_öc_dummy
[0].
qumme
,Ñs );

29  
lo›
 = 1 ;Üo› < 
numbî_ñemíts_öc_dummy
 ;Üoop++ )

31 
ª_¨øy_öc_dummy
[
lo›
].
qumme_u£
 = &ª_¨øy_öc_dummy[lo›].
qumme
;

32 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–
ª_¨øy_öc_dummy
[
lo›
].
„
, &re_array_inc_dummy[loop] );

33 
	`lfds711_‰ìli°_push
–&
rs
->
fs
, &
ª_¨øy_öc_dummy
[
lo›
].
„
, 
NULL
 );

36 
LFDS711_MISC_BARRIER_STORE
;

38 
	`lfds711_misc_f‹˚_°‹e
();

41 
	}
}

	@liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

	@liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_query.c

2 
	~"lfds711_rögbuf„r_öã∫Æ.h
"

5 
lfds711_rögbuf„r_öã∫Æ_vÆid©e
–
lfds711_rögbuf„r_°©e
 *
rs
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_queue_umm_vÆidôy
,

8 
lfds711_misc_vÆidôy
 *
lfds711_‰ìli°_vÆidôy
 );

13 
	$lfds711_rögbuf„r_quîy
–
lfds711_rögbuf„r_°©e
 *
rs
,

14 
lfds711_rögbuf„r_quîy
 
quîy_ty≥
,

15 *
quîy_öput
,

16 *
quîy_ouçut
 )

18 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

21 
LFDS711_MISC_BARRIER_LOAD
;

23  
quîy_ty≥
 )

25 
LFDS711_RINGBUFFER_QUERY_SINGLETHREADED_GET_COUNT
:

26 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

29 
	`lfds711_queue_umm_quîy
–&
rs
->
qumms
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_GET_COUNT
, 
NULL
, 
quîy_ouçut
 );

32 
LFDS711_RINGBUFFER_QUERY_SINGLETHREADED_VALIDATE
:

34 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

36 
	`lfds711_rögbuf„r_öã∫Æ_vÆid©e
–
rs
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
, ((lfds711_misc_validity *) query_output)+1 );

41 
	}
}

48 
	$lfds711_rögbuf„r_öã∫Æ_vÆid©e
–
lfds711_rögbuf„r_°©e
 *
rs
,

49 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

50 
lfds711_misc_vÆidôy
 *
lfds711_queue_umm_vÆidôy
,

51 
lfds711_misc_vÆidôy
 *
lfds711_‰ìli°_vÆidôy
 )

53 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
lfds711_queue_umm_vÆidôy
 !
NULL
 );

56 
	`LFDS711_PAL_ASSERT
–
lfds711_‰ìli°_vÆidôy
 !
NULL
 );

58 if–
vi
 =
NULL
 )

60 
	`lfds711_queue_umm_quîy
–&
rs
->
qumms
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE
, 
NULL
, 
lfds711_queue_umm_vÆidôy
 );

61 
	`lfds711_‰ìli°_quîy
–&
rs
->
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, 
NULL
, 
lfds711_‰ìli°_vÆidôy
 );

64 if–
vi
 !
NULL
 )

66 
lfds711_misc_vÆid©i⁄_öfo


67 
‰ìli°_vi
,

68 
queue_vi
;

70 
queue_vi
.
mö_ñemíts
 = 0;

71 
‰ìli°_vi
.
mö_ñemíts
 = 0;

72 
queue_vi
.
max_ñemíts
 = 
vi
->max_elements;

73 
‰ìli°_vi
.
max_ñemíts
 = 
vi
->max_elements;

75 
	`lfds711_queue_umm_quîy
–&
rs
->
qumms
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE
, &
queue_vi
, 
lfds711_queue_umm_vÆidôy
 );

76 
	`lfds711_‰ìli°_quîy
–&
rs
->
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, &
‰ìli°_vi
, 
lfds711_‰ìli°_vÆidôy
 );

80 
	}
}

	@liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_read.c

2 
	~"lfds711_rögbuf„r_öã∫Æ.h
"

9 
	$lfds711_rögbuf„r_ªad
–
lfds711_rögbuf„r_°©e
 *
rs
,

10 **
key
,

11 **
vÆue
 )

14 
rv
;

16 
lfds711_queue_umm_ñemít


17 *
qumme
;

19 
lfds711_rögbuf„r_ñemít


20 *
ª
;

22 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

27 
rv
 = 
	`lfds711_queue_umm_dequeue
–&
rs
->
qumms
, &
qumme
 );

29 if–
rv
 == 1 )

31 
ª
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qumme
 );

32 
ª
->
qumme_u£
 = (
lfds711_queue_umm_ñemít
 *Ë
qumme
;

33 if–
key
 !
NULL
 )

34 *
key
 = 
ª
->key;

35 if–
vÆue
 !
NULL
 )

36 *
vÆue
 = 
ª
->value;

37 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–
ª
->
„
,Ñe );

38 
	`lfds711_‰ìli°_push
–&
rs
->
fs
, &
ª
->
„
, 
NULL
 );

41  
rv
;

42 
	}
}

	@liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_write.c

2 
	~"lfds711_rögbuf„r_öã∫Æ.h
"

9 
	$lfds711_rögbuf„r_wrôe
–
lfds711_rögbuf„r_°©e
 *
rs
,

10 *
key
,

11 *
vÆue
,

12 
lfds711_misc_Êag
 *
ovîwrôe_occuºed_Êag
,

13 **
ovîwrôãn_key
,

14 **
ovîwrôãn_vÆue
 )

17 
rv
 = 0;

19 
lfds711_‰ìli°_ñemít


20 *
„
;

22 
lfds711_queue_umm_ñemít


23 *
qumme
;

25 
lfds711_rögbuf„r_ñemít


26 *
ª
 = 
NULL
;

28 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

36 if–
ovîwrôe_occuºed_Êag
 !
NULL
 )

37 *
ovîwrôe_occuºed_Êag
 = 
LFDS711_MISC_FLAG_LOWERED
;

41 
rv
 = 
	`lfds711_‰ìli°_p›
–&
rs
->
fs
, &
„
, 
NULL
 );

43 if–
rv
 == 1 )

44 
ª
 = 
	`LFDS711_FREELIST_GET_VALUE_FROM_ELEMENT
–*
„
 );

46 if–
rv
 == 0 )

49 
rv
 = 
	`lfds711_queue_umm_dequeue
–&
rs
->
qumms
, &
qumme
 );

51 if–
rv
 == 1 )

53 
ª
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qumme
 );

54 
ª
->
qumme_u£
 = (
lfds711_queue_umm_ñemít
 *Ë
qumme
;

56 if–
ovîwrôe_occuºed_Êag
 !
NULL
 )

57 *
ovîwrôe_occuºed_Êag
 = 
LFDS711_MISC_FLAG_RAISED
;

59 if–
ovîwrôãn_key
 !
NULL
 )

60 *
ovîwrôãn_key
 = 
ª
->
key
;

62 if–
ovîwrôãn_vÆue
 !
NULL
 )

63 *
ovîwrôãn_vÆue
 = 
ª
->
vÆue
;

67  
rv
 == 0 );

69 
ª
->
key
 = key;

70 
ª
->
vÆue
 = value;

72 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–*
ª
->
qumme_u£
,Ñe );

73 
	`lfds711_queue_umm_íqueue
–&
rs
->
qumms
, 
ª
->
qumme_u£
 );

76 
	}
}

	@liblfds711/src/lfds711_stack/lfds711_stack_cleanup.c

2 
	~"lfds711_°ack_öã∫Æ.h
"

9 
	$lfds711_°ack_˛ónup
–
lfds711_°ack_°©e
 *
ss
,

10 (*
ñemít_˛ónup_ˇŒback
)(
lfds711_°ack_°©e
 *
ss
, 
lfds711_°ack_ñemít
 *
£
) )

12 
lfds711_°ack_ñemít


13 *
£
,

14 *
£_ãmp
;

16 
	`LFDS711_PAL_ASSERT
–
ss
 !
NULL
 );

19 
LFDS711_MISC_BARRIER_LOAD
;

21 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

23 
£
 = 
ss
->
t›
[
POINTER
];

25  
£
 !
NULL
 )

27 
£_ãmp
 = 
£
;

28 
£
 = se->
√xt
;

30 
	`ñemít_˛ónup_ˇŒback
–
ss
, 
£_ãmp
 );

35 
	}
}

	@liblfds711/src/lfds711_stack/lfds711_stack_init.c

2 
	~"lfds711_°ack_öã∫Æ.h
"

9 
	$lfds711_°ack_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
lfds711_°ack_°©e
 *
ss
,

10 *
u£r_°©e
 )

12 
	`LFDS711_PAL_ASSERT
–
ss
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë
ss
->
t›
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

14 
	`LFDS711_PAL_ASSERT
–(
lfds711_∑l_uöt_t
Ë&
ss
->
u£r_°©e
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 == 0 );

17 
ss
->
t›
[
POINTER
] = 
NULL
;

18 
ss
->
t›
[
COUNTER
] = 0;

20 
ss
->
u£r_°©e
 = user_state;

22 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
ss
->
p›_backoff
 );

23 
	`lfds711_misc_öã∫Æ_backoff_öô
–&
ss
->
push_backoff
 );

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

	@liblfds711/src/lfds711_stack/lfds711_stack_internal.h

2 
	~"../liblfds711_öã∫Æ.h
"

	@liblfds711/src/lfds711_stack/lfds711_stack_pop.c

2 
	~"lfds711_°ack_öã∫Æ.h
"

9 
	$lfds711_°ack_p›
–
lfds711_°ack_°©e
 *
ss
,

10 
lfds711_°ack_ñemít
 **
£
 )

13 
ªsu…
;

15 
lfds711_∑l_uöt_t


16 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

18 
lfds711_°ack_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

19 *
√w_t›
[
PAC_SIZE
],

20 *vﬁ©ûê
‹igöÆ_t›
[
PAC_SIZE
];

22 
	`LFDS711_PAL_ASSERT
–
ss
 !
NULL
 );

23 
	`LFDS711_PAL_ASSERT
–
£
 !
NULL
 );

25 
LFDS711_MISC_BARRIER_LOAD
;

27 
‹igöÆ_t›
[
COUNTER
] = 
ss
->
t›
[COUNTER];

28 
‹igöÆ_t›
[
POINTER
] = 
ss
->
t›
[POINTER];

32 if–
‹igöÆ_t›
[
POINTER
] =
NULL
 )

34 *
£
 = 
NULL
;

38 
√w_t›
[
COUNTER
] = 
‹igöÆ_t›
[COUNTER] + 1;

39 
√w_t›
[
POINTER
] = 
‹igöÆ_t›
[POINTER]->
√xt
;

41 
	`LFDS711_PAL_ATOMIC_DWCAS
–
ss
->
t›
, 
‹igöÆ_t›
, 
√w_t›
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

43 if–
ªsu…
 == 0 )

45 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
ss
->
p›_backoff
, 
backoff_ôî©i⁄
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

49  
ªsu…
 == 0 );

51 *
£
 = 
‹igöÆ_t›
[
POINTER
];

53 
	`LFDS711_BACKOFF_AUTOTUNE
–
ss
->
p›_backoff
, 
backoff_ôî©i⁄
 );

56 
	}
}

	@liblfds711/src/lfds711_stack/lfds711_stack_push.c

2 
	~"lfds711_°ack_öã∫Æ.h
"

9 
	$lfds711_°ack_push
–
lfds711_°ack_°©e
 *
ss
,

10 
lfds711_°ack_ñemít
 *
£
 )

13 
ªsu…
;

15 
lfds711_∑l_uöt_t


16 
backoff_ôî©i⁄
 = 
LFDS711_BACKOFF_INITIAL_VALUE
;

18 
lfds711_°ack_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

19 *
√w_t›
[
PAC_SIZE
],

20 *vﬁ©ûê
‹igöÆ_t›
[
PAC_SIZE
];

22 
	`LFDS711_PAL_ASSERT
–
ss
 !
NULL
 );

23 
	`LFDS711_PAL_ASSERT
–
£
 !
NULL
 );

25 
√w_t›
[
POINTER
] = 
£
;

27 
‹igöÆ_t›
[
COUNTER
] = 
ss
->
t›
[COUNTER];

28 
‹igöÆ_t›
[
POINTER
] = 
ss
->
t›
[POINTER];

32 
£
->
√xt
 = 
‹igöÆ_t›
[
POINTER
];

33 
LFDS711_MISC_BARRIER_STORE
;

35 
√w_t›
[
COUNTER
] = 
‹igöÆ_t›
[COUNTER] + 1;

36 
	`LFDS711_PAL_ATOMIC_DWCAS
–
ss
->
t›
, 
‹igöÆ_t›
, 
√w_t›
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

38 if–
ªsu…
 == 0 )

39 
	`LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
ss
->
push_backoff
, 
backoff_ôî©i⁄
 );

41  
ªsu…
 == 0 );

43 
	`LFDS711_BACKOFF_AUTOTUNE
–
ss
->
push_backoff
, 
backoff_ôî©i⁄
 );

46 
	}
}

	@liblfds711/src/lfds711_stack/lfds711_stack_query.c

2 
	~"lfds711_°ack_öã∫Æ.h
"

5 
lfds711_°ack_öã∫Æ_°ack_vÆid©e
–
lfds711_°ack_°©e
 *
ss
,

6 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

7 
lfds711_misc_vÆidôy
 *
lfds711_°ack_vÆidôy
 );

14 
	$lfds711_°ack_quîy
–
lfds711_°ack_°©e
 *
ss
,

15 
lfds711_°ack_quîy
 
quîy_ty≥
,

16 *
quîy_öput
,

17 *
quîy_ouçut
 )

19 
lfds711_°ack_ñemít


20 *
£
;

22 
LFDS711_MISC_BARRIER_LOAD
;

24 
	`LFDS711_PAL_ASSERT
–
ss
 !
NULL
 );

27  
quîy_ty≥
 )

29 
LFDS711_STACK_QUERY_SINGLETHREADED_GET_COUNT
:

30 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

33 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 0;

35 
£
 = (
lfds711_°ack_ñemít
 *Ë
ss
->
t›
[
POINTER
];

37  
£
 !
NULL
 )

39 –*(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 )++;

40 
£
 = (
lfds711_°ack_ñemít
 *Ë£->
√xt
;

44 
LFDS711_STACK_QUERY_SINGLETHREADED_VALIDATE
:

46 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

48 
	`lfds711_°ack_öã∫Æ_°ack_vÆid©e
–
ss
, (
lfds711_misc_vÆid©i⁄_öfo
 *Ë
quîy_öput
, (
lfds711_misc_vÆidôy
 *Ë
quîy_ouçut
 );

53 
	}
}

60 
	$lfds711_°ack_öã∫Æ_°ack_vÆid©e
–
lfds711_°ack_°©e
 *
ss
,

61 
lfds711_misc_vÆid©i⁄_öfo
 *
vi
,

62 
lfds711_misc_vÆidôy
 *
lfds711_°ack_vÆidôy
 )

64 
lfds711_∑l_uöt_t


65 
numbî_ñemíts
 = 0;

67 
lfds711_°ack_ñemít


68 *
£_Á°
,

69 *
£_¶ow
;

71 
	`LFDS711_PAL_ASSERT
–
ss
 !
NULL
 );

73 
	`LFDS711_PAL_ASSERT
–
lfds711_°ack_vÆidôy
 !
NULL
 );

75 *
lfds711_°ack_vÆidôy
 = 
LFDS711_MISC_VALIDITY_VALID
;

77 
£_¶ow
 = 
£_Á°
 = (
lfds711_°ack_ñemít
 *Ë
ss
->
t›
[
POINTER
];

96 if–
£_¶ow
 !
NULL
 )

99 
£_¶ow
 = se_¶ow->
√xt
;

101 if–
£_Á°
 !
NULL
 )

102 
£_Á°
 = se_Á°->
√xt
;

104 if–
£_Á°
 !
NULL
 )

105 
£_Á°
 = se_Á°->
√xt
;

107  
£_¶ow
 !
NULL
 
™d
 
£_Á°
 != se_slow );

109 if–
£_Á°
 !
NULL
 
™d
 
£_¶ow
 != NULLánd se_fast == se_slow )

110 *
lfds711_°ack_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_LOOP
;

117 if–*
lfds711_°ack_vÆidôy
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
vi
 !
NULL
 )

119 
	`lfds711_°ack_quîy
–
ss
, 
LFDS711_STACK_QUERY_SINGLETHREADED_GET_COUNT
, 
NULL
, (*Ë&
numbî_ñemíts
 );

121 if–
numbî_ñemíts
 < 
vi
->
mö_ñemíts
 )

122 *
lfds711_°ack_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

124 if–
numbî_ñemíts
 > 
vi
->
max_ñemíts
 )

125 *
lfds711_°ack_vÆidôy
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

129 
	}
}

	@liblfds711/src/liblfds711_internal.h

2 
	~"../öc/liblfds711.h
"

5 
	#™d
 &&

	)

6 
	#‹
 ||

	)

8 
	#NO_FLAGS
 0x0

	)

10 
	#LFDS711_VERSION_STRING
 "7.1.1"

	)

11 
	#LFDS711_VERSION_INTEGER
 711

	)

13 #if–
deföed
 
KERNEL_MODE
 )

14 
	#MODE_TYPE_STRING
 "kî√l-mode"

	)

17 #if–!
deföed
 
KERNEL_MODE
 )

18 
	#MODE_TYPE_STRING
 "u£r-mode"

	)

21 #if–
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

22 
	#BUILD_TYPE_STRING
 "ªÀa£"

	)

25 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

26 
	#BUILD_TYPE_STRING
 "debug"

	)

29 #if–!
deföed
 
NDEBUG
 && deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

30 
	#BUILD_TYPE_STRING
 "covîage"

	)

33 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && deföed 
TSAN
 && !deföed 
PROF
 )

34 
	#BUILD_TYPE_STRING
 "thªadßnôizî"

	)

37 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && deföed 
PROF
 )

38 
	#BUILD_TYPE_STRING
 "¥ofûög"

	)

41 
	#LFDS711_BACKOFF_INITIAL_VALUE
 0

	)

42 
	#LFDS711_BACKOFF_LIMIT
 10

	)

44 
	#LFDS711_BACKOFF_EXPONENTIAL_BACKOFF
–
backoff_°©e
, 
backoff_ôî©i⁄
 ) \

46 
lfds711_∑l_uöt_t
 volatile \

47 
lo›
; \

49 
lfds711_∑l_uöt_t
 \

50 
ídlo›
; \

52 if–(
backoff_ôî©i⁄
Ë=
LFDS711_BACKOFF_LIMIT
 ) \

53 (
backoff_ôî©i⁄
Ë
LFDS711_BACKOFF_INITIAL_VALUE
; \

56 
ídlo›
 = ( ((
lfds711_∑l_uöt_t
Ë0x1Ë<< (
backoff_ôî©i⁄
ËË* (
backoff_°©e
).
mëric
; \

57  
lo›
 = 0 ;Üo› < 
ídlo›
 ;Üoop++ ); \

60 (
backoff_ôî©i⁄
)++; \

61 }

	)

63 
	#LFDS711_BACKOFF_AUTOTUNE
–
bs
, 
backoff_ôî©i⁄
 ) \

65 if–(
backoff_ôî©i⁄
) < 2 ) \

66 (
bs
).
backoff_ôî©i⁄_‰equícy_cou¡îs
[(
backoff_ôî©i⁄
)]++; \

68 if–++(
bs
).
tŸÆ_›î©i⁄s
 >10000 
	`™d
 (bs).
lock
 =
LFDS711_MISC_FLAG_LOWERED
 ) \

71 
ªsu…
; \

73 
lfds711_∑l_uöt_t
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
) \

74 
com∑ª
 = 
LFDS711_MISC_FLAG_LOWERED
; \

76 
	`LFDS711_PAL_ATOMIC_CAS
–&(
bs
).
lock
, &
com∑ª
, 
LFDS711_MISC_FLAG_RAISED
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 ); \

78 if–
ªsu…
 == 1 ) \

81 if–(
bs
).
backoff_ôî©i⁄_‰equícy_cou¡îs
[1] < (bs).backoff_iteration_frequency_counters[0] / 100 ) \

83 if–(
bs
).
mëric
 >= 11 ) \

84 (
bs
).
mëric
 -= 10; \

87 (
bs
).
mëric
 += 10; \

89 (
bs
).
backoff_ôî©i⁄_‰equícy_cou¡îs
[0] = 0; \

90 (
bs
).
backoff_ôî©i⁄_‰equícy_cou¡îs
[1] = 0; \

91 (
bs
).
tŸÆ_›î©i⁄s
 = 0; \

93 
LFDS711_MISC_BARRIER_STORE
; \

95 
	`LFDS711_PAL_ATOMIC_SET
–&(
bs
).
lock
, 
LFDS711_MISC_FLAG_LOWERED
 ); \

98 }

	)

101 
lfds711_misc_öã∫Æ_backoff_öô
–
lfds711_misc_backoff_°©e
 *
bs
 );

	@test_and_benchmark/benchmark/src/internal.h

2 
	~"p‹tög_ab°ø˘i⁄_œyî.h
"

3 
	~"p‹tög_ab°ø˘i⁄_œyî_›î©ög_sy°em.h
"

4 
	~<as£π.h
>

5 
	~<°dio.h
>

6 
	~<°dlib.h
>

7 
	~"../../../liblfds711/öc/liblfds711.h
"

8 
	~"../../libbíchm¨k/öc/libbíchm¨k.h
"

9 
	~"utû_cmdlöe.h
"

12 
	#™d
 &&

	)

13 
	#‹
 ||

	)

15 
	#BITS_PER_BYTE
 8

	)

17 
	#NO_FLAGS
 0x0

	)

19 
	#BENCHMARK_VERSION_STRING
 "7.1.1"

	)

20 
	#BENCHMARK_VERSION_INTEGER
 711

	)

22 #if–
deföed
 
KERNEL_MODE
 )

23 
	#MODE_TYPE_STRING
 "kî√l-mode"

	)

26 #if–!
deföed
 
KERNEL_MODE
 )

27 
	#MODE_TYPE_STRING
 "u£r-mode"

	)

30 #if–
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

31 
	#BUILD_TYPE_STRING
 "ªÀa£"

	)

34 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

35 
	#BUILD_TYPE_STRING
 "debug"

	)

38 #if–!
deföed
 
NDEBUG
 && deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

39 
	#BUILD_TYPE_STRING
 "covîage"

	)

42 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && deföed 
TSAN
 && !deföed 
PROF
 )

43 
	#BUILD_TYPE_STRING
 "thªadßnôizî"

	)

46 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && deföed 
PROF
 )

47 
	#BUILD_TYPE_STRING
 "¥ofûög"

	)

50 
	#ONE_KILOBYTES_IN_BYTES
 1024

	)

51 
	#ONE_MEGABYTE_IN_BYTES
 (
ONE_KILOBYTES_IN_BYTES
 * 1024)

	)

52 
	#BENCHMARK_DEFAULT_MEMORY_IN_MEGABYTES
 64

	)

61 
maö
–
¨gc
, **
¨gv
 );

62 
öã∫Æ_show_vîsi⁄
( );

63 
ˇŒback_°dout
–*
°rög
 );

65 *
bíchm¨k_∑l_numa_mÆloc
–
lfds711_∑l_uöt_t
 
numa_node_id
,Üfds711_∑l_uöt_à
size_ö_byãs
 );

66 
bíchm¨k_∑l_numa_‰ì
–*
mem‹y
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
 );

	@test_and_benchmark/benchmark/src/main.c

2 
	~"öã∫Æ.h
"

5 
	s›î©i⁄s_to_≥rf‹m


8 *
	mgnu∂Ÿ_sy°em_°rög
;

10 
Êag


11 
	mbíchm¨k_duøti⁄_Êag
,

12 
	mgnu∂Ÿ_fûe_Êag
,

13 
	mgnu∂Ÿ_log¨ôhmic_yaxis_Êag
,

14 
	mgnu∂Ÿ_≤g_Êag
,

15 
	mgnu∂Ÿ_height_Êag
,

16 
	mgnu∂Ÿ_width_Êag
,

17 
	mrun_Êag
,

18 
	mshow_˝u_t›ﬁogy_⁄ly_Êag
,

19 
	mshow_îr‹_Êag
,

20 
	mshow_hñp_Êag
,

21 
	mshow_vîsi⁄_Êag
,

22 
	mmem‹y_Êag
;

24 
lfds711_∑l_uöt_t


25 
	mmem‹y_ö_megabyãs
,

26 
	mbíchm¨k_duøti⁄_ö_£c⁄ds
,

27 
	mgnu∂Ÿ_height_ö_pixñs
,

28 
	mgnu∂Ÿ_width_ö_pixñs
;

32 
c⁄vît_comm™d_löe_¨gs_to_›î©i⁄s_to_≥rf‹m
–
¨gc
, **
¨gv
, 
›î©i⁄s_to_≥rf‹m
 *
Ÿp
 );

33 
≥rf‹m_›î©i⁄s
–
›î©i⁄s_to_≥rf‹m
 *
Ÿp
 );

34 
mem‹y_˛ónup_ˇŒback
–
Êag
 
known_numa_node_Êag
, *
°‹e
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
 );

41 
	$maö
–
¨gc
, **
¨gv
 )

43 
›î©i⁄s_to_≥rf‹m


44 
Ÿp
;

46 
	`as£π
–
¨gc
 >= 1 );

47 
	`as£π
–
¨gv
 !
NULL
 );

49 
	`c⁄vît_comm™d_löe_¨gs_to_›î©i⁄s_to_≥rf‹m
–
¨gc
, 
¨gv
, &
Ÿp
 );

51 
	`≥rf‹m_›î©i⁄s
–&
Ÿp
 );

53  
EXIT_SUCCESS
;

54 
	}
}

61 
	$c⁄vît_comm™d_löe_¨gs_to_›î©i⁄s_to_≥rf‹m
–
¨gc
, **
¨gv
, 
›î©i⁄s_to_≥rf‹m
 *
Ÿp
 )

64 
rv
;

66 
utû_cmdlöe_°©e


67 
cs
;

69 
utû_cmdlöe_¨g_d©a


70 *
¨g_d©a
;

72 
	`as£π
–
¨gc
 >= 1 );

73 
	`as£π
–
¨gv
 !
NULL
 );

74 
	`as£π
–
Ÿp
 !
NULL
 );

76 
Ÿp
->
bíchm¨k_duøti⁄_Êag
 = 
LOWERED
;

77 
Ÿp
->
gnu∂Ÿ_fûe_Êag
 = 
LOWERED
;

78 
Ÿp
->
gnu∂Ÿ_log¨ôhmic_yaxis_Êag
 = 
LOWERED
;

79 
Ÿp
->
gnu∂Ÿ_≤g_Êag
 = 
LOWERED
;

80 
Ÿp
->
gnu∂Ÿ_height_Êag
 = 
LOWERED
;

81 
Ÿp
->
gnu∂Ÿ_width_Êag
 = 
LOWERED
;

82 
Ÿp
->
run_Êag
 = 
LOWERED
;

83 
Ÿp
->
show_˝u_t›ﬁogy_⁄ly_Êag
 = 
LOWERED
;

84 
Ÿp
->
show_îr‹_Êag
 = 
LOWERED
;

85 
Ÿp
->
show_hñp_Êag
 = 
RAISED
;

86 
Ÿp
->
show_vîsi⁄_Êag
 = 
LOWERED
;

87 
Ÿp
->
mem‹y_Êag
 = 
LOWERED
;

96 
Ÿp
->
mem‹y_ö_megabyãs
 = 
BENCHMARK_DEFAULT_MEMORY_IN_MEGABYTES
;

98 
	`utû_cmdlöe_öô
–&
cs
 );

100 
	`utû_cmdlöe_add_¨g
–&
cs
, 'g', 
UTIL_CMDLINE_ARG_TYPE_STRING
 );

101 
	`utû_cmdlöe_add_¨g
–&
cs
, 'h', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

102 
	`utû_cmdlöe_add_¨g
–&
cs
, 'l', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

103 
	`utû_cmdlöe_add_¨g
–&
cs
, 'm', 
UTIL_CMDLINE_ARG_TYPE_INTEGER
 );

104 
	`utû_cmdlöe_add_¨g
–&
cs
, 'p', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

105 
	`utû_cmdlöe_add_¨g
–&
cs
, 'r', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

106 
	`utû_cmdlöe_add_¨g
–&
cs
, 's', 
UTIL_CMDLINE_ARG_TYPE_INTEGER
 );

107 
	`utû_cmdlöe_add_¨g
–&
cs
, 't', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

108 
	`utû_cmdlöe_add_¨g
–&
cs
, 'v', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

109 
	`utû_cmdlöe_add_¨g
–&
cs
, 'x', 
UTIL_CMDLINE_ARG_TYPE_INTEGER
 );

110 
	`utû_cmdlöe_add_¨g
–&
cs
, 'y', 
UTIL_CMDLINE_ARG_TYPE_INTEGER
 );

112 
rv
 = 
	`utû_cmdlöe_¥o˚ss_¨gs
–&
cs
, 
¨gc
, 
¨gv
 );

114 if–
rv
 == 0 )

115 
Ÿp
->
show_îr‹_Êag
 = 
RAISED
;

117 if–
rv
 == 1 )

119 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'g', &
¨g_d©a
 );

120 if–
¨g_d©a
 !
NULL
 )

122 
Ÿp
->
gnu∂Ÿ_fûe_Êag
 = 
RAISED
;

123 
Ÿp
->
gnu∂Ÿ_sy°em_°rög
 = 
¨g_d©a
->
°rög
.string;

126 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'h', &
¨g_d©a
 );

127 if–
¨g_d©a
 !
NULL
 )

128 
Ÿp
->
show_hñp_Êag
 = 
RAISED
;

130 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'l', &
¨g_d©a
 );

131 if–
¨g_d©a
 !
NULL
 )

132 
Ÿp
->
gnu∂Ÿ_log¨ôhmic_yaxis_Êag
 = 
RAISED
;

134 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'm', &
¨g_d©a
 );

135 if–
¨g_d©a
 !
NULL
 )

137 if–
¨g_d©a
->
öãgî
.integer < 2 )

139 
	`puts
( "Memory (in megabytes)ÇeedsÅo be 2 or greater." );

140 
	`exô
–
EXIT_FAILURE
 );

143 
Ÿp
->
mem‹y_ö_megabyãs
 = (
lfds711_∑l_uöt_t
Ë
¨g_d©a
->
öãgî
.integer;

144 
Ÿp
->
mem‹y_Êag
 = 
RAISED
;

147 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'p', &
¨g_d©a
 );

148 if–
¨g_d©a
 !
NULL
 )

150 
Ÿp
->
gnu∂Ÿ_≤g_Êag
 = 
RAISED
;

153 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'g', &
¨g_d©a
 );

154 if–
¨g_d©a
 =
NULL
 )

156 
	`puts
( "If -p is given, -g mustálso be given." );

157 
	`exô
–
EXIT_FAILURE
 );

161 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'r', &
¨g_d©a
 );

162 if–
¨g_d©a
 !
NULL
 )

164 
Ÿp
->
show_hñp_Êag
 = 
LOWERED
;

165 
Ÿp
->
run_Êag
 = 
RAISED
;

168 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 's', &
¨g_d©a
 );

169 if–
¨g_d©a
 !
NULL
 )

171 if–
¨g_d©a
->
öãgî
.integer < 1 )

173 
	`puts
( "Duration in secondsÇeedsÅo be 1 or greater." );

174 
	`exô
–
EXIT_FAILURE
 );

177 
Ÿp
->
bíchm¨k_duøti⁄_ö_£c⁄ds
 = (
lfds711_∑l_uöt_t
Ë
¨g_d©a
->
öãgî
.integer;

178 
Ÿp
->
bíchm¨k_duøti⁄_Êag
 = 
RAISED
;

181 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 't', &
¨g_d©a
 );

182 if–
¨g_d©a
 !
NULL
 )

184 
Ÿp
->
show_hñp_Êag
 = 
LOWERED
;

185 
Ÿp
->
show_˝u_t›ﬁogy_⁄ly_Êag
 = 
RAISED
;

188 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'v', &
¨g_d©a
 );

189 if–
¨g_d©a
 !
NULL
 )

191 
Ÿp
->
show_hñp_Êag
 = 
LOWERED
;

192 
Ÿp
->
show_vîsi⁄_Êag
 = 
RAISED
;

195 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'x', &
¨g_d©a
 );

196 if–
¨g_d©a
 !
NULL
 )

198 if–
¨g_d©a
->
öãgî
.integer < 1 )

200 
	`puts
( "Gnuplot width inÖixelsÇeedsÅo be 1 or greater." );

201 
	`exô
–
EXIT_FAILURE
 );

204 
Ÿp
->
gnu∂Ÿ_width_ö_pixñs
 = (
lfds711_∑l_uöt_t
Ë
¨g_d©a
->
öãgî
.integer;

205 
Ÿp
->
gnu∂Ÿ_width_Êag
 = 
RAISED
;

208 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'y', &
¨g_d©a
 );

209 if–
¨g_d©a
 !
NULL
 )

211 if–
¨g_d©a
->
öãgî
.integer < 1 )

213 
	`puts
( "Gnuplot height inÖixelsÇeedsÅo be 1 or greater." );

214 
	`exô
–
EXIT_FAILURE
 );

217 
Ÿp
->
gnu∂Ÿ_height_ö_pixñs
 = (
lfds711_∑l_uöt_t
Ë
¨g_d©a
->
öãgî
.integer;

218 
Ÿp
->
gnu∂Ÿ_height_Êag
 = 
RAISED
;

222 
	`utû_cmdlöe_˛ónup
–&
cs
 );

225 
	}
}

232 
	$≥rf‹m_›î©i⁄s
–
›î©i⁄s_to_≥rf‹m
 *
Ÿp
 )

234 
	`as£π
–
Ÿp
 !
NULL
 );

236 if–
Ÿp
->
show_îr‹_Êag
 =
RAISED
 )

238 
	`¥ötf
( "\nInvalidárguments. Sorry - it'sá simpleÖarser, soÇo clues.\n"

244 if–
Ÿp
->
show_hñp_Êag
 =
RAISED
 )

246 
	`¥ötf
( "benchmark -g [s] -h -l -m [n] -p -r -s [n] -t -v -x [n] -y [n]\n"

261 (Ë
BENCHMARK_DEFAULT_MEMORY_IN_MEGABYTES
 );

263 #if–
BENCHMARK_PAL_MEMORY_TYPE
 =
BENCHMARK_MEMORY_TYPE_SMP
 )

265 
	`¥ötf
( "\n"

286 if–
Ÿp
->
show_˝u_t›ﬁogy_⁄ly_Êag
 =
RAISED
 )

289 *
t›ﬁogy_°rög
;

291 
libsh¨ed_mem‹y_°©e


292 
ms
;

294 
libbíchm¨k_t›ﬁogy_°©e


295 
ts
;

298 *
°‹e
;

300 
	`libsh¨ed_mem‹y_öô
–&
ms
 );

301 
°‹e
 = 
	`mÆloc
–
Ÿp
->
mem‹y_ö_megabyãs
 * 
ONE_MEGABYTE_IN_BYTES
 );

302 
	`libsh¨ed_mem‹y_add_mem‹y
–&
ms
, 
°‹e
, 
Ÿp
->
mem‹y_ö_megabyãs
 * 
ONE_MEGABYTE_IN_BYTES
 );

303 
	`libbíchm¨k_t›ﬁogy_öô
–&
ts
, &
ms
 );

304 
t›ﬁogy_°rög
 = 
	`libbíchm¨k_t›ﬁogy_gíî©e_°rög
–&
ts
, &
ms
, 
LIBBENCHMARK_TOPOLOGY_STRING_FORMAT_STDOUT
 );

305 
	`¥ötf
–"%s", 
t›ﬁogy_°rög
 );

306 
	`libbíchm¨k_t›ﬁogy_˛ónup
–&
ts
 );

307 
	`libsh¨ed_mem‹y_˛ónup
–&
ms
, 
NULL
 );

308 
	`‰ì
–
°‹e
 );

313 if–
Ÿp
->
run_Êag
 =
RAISED
 )

316 
diskbuf„r
[
BUFSIZ
];

318 
libbíchm¨k_t›ﬁogy_numa_mode


319 
numa_mode
 = 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
;

321 
FILE


322 *
diskfûe
;

324 
lfds711_∑l_uöt_t


325 
›ti⁄s_bômask
 = 
NO_FLAGS
,

326 
size_ö_byãs
;

328 
lfds711_li°_asu_ñemít


329 *
œsue
 = 
NULL
;

331 
lfds711_li°_asu_°©e


332 
li°_of_gnu∂Ÿs
;

334 
libbíchm¨k_bíchm¨k£t_gnu∂Ÿ


335 *
bg
;

337 
libbíchm¨k_bíchm¨ksuôe_°©e


338 
bss
;

340 
libsh¨ed_mem‹y_°©e


341 
ms_f‹_bíchm¨ks
,

342 
ms_f‹_rs_™d_ts
;

344 
libbíchm¨k_t›ﬁogy_°©e


345 
ts
;

347 
libbíchm¨k_ªsu…s_°©e


348 
rs
;

351 *
°‹e
;

354 
	`lfds700_misc_libøry_öô_vÆid_⁄_cuºít_logiˇl_c‹e
();

356 
	`libsh¨ed_mem‹y_öô
–&
ms_f‹_rs_™d_ts
 );

357 
size_ö_byãs
 = (
Ÿp
->
mem‹y_ö_megabyãs
 / 2Ë* 
ONE_MEGABYTE_IN_BYTES
;

358 
°‹e
 = 
	`mÆloc
–
size_ö_byãs
 );

359 
	`libsh¨ed_mem‹y_add_mem‹y
–&
ms_f‹_rs_™d_ts
, 
°‹e
, 
size_ö_byãs
 );

360 
	`libbíchm¨k_t›ﬁogy_öô
–&
ts
, &
ms_f‹_rs_™d_ts
 );

362 
	`libsh¨ed_mem‹y_öô
–&
ms_f‹_bíchm¨ks
 );

364 #if–
BENCHMARK_PAL_MEMORY_TYPE
 =
BENCHMARK_MEMORY_TYPE_SMP
 )

365 
numa_mode
 = 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
;

366 
size_ö_byãs
 = (
Ÿp
->
mem‹y_ö_megabyãs
 / 2Ë* 
ONE_MEGABYTE_IN_BYTES
;

367 
°‹e
 = 
	`mÆloc
–
size_ö_byãs
 );

368 
	`libsh¨ed_mem‹y_add_mem‹y
–&
ms_f‹_bíchm¨ks
, 
°‹e
, 
size_ö_byãs
 );

371 #if–
BENCHMARK_PAL_MEMORY_TYPE
 =
BENCHMARK_MEMORY_TYPE_NUMA
 )

373 
lfds711_∑l_uöt_t


374 
numa_node_id
,

375 
numbî_numa_nodes
;

377 
libbíchm¨k_t›ﬁogy_ôî©e_°©e


378 
tis
;

380 
libbíchm¨k_t›ﬁogy_node_°©e


381 *
äs
;

383 
numa_mode
 = 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
;

385 
	`libbíchm¨k_t›ﬁogy_quîy
–&
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMBER_OF_NODE_TYPE
, (*Ë(
lfds711_∑l_uöt_t
Ë
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
, (*Ë&
numbî_numa_nodes
 );

387 
	`libbíchm¨k_t›ﬁogy_ôî©e_öô
–&
tis
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
 );

389  
	`libbíchm¨k_t›ﬁogy_ôî©e
(&
ts
, &
tis
, &
äs
) )

391 
numa_node_id
 = 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
–*
äs
 );

392 
size_ö_byãs
 = ( (
Ÿp
->
mem‹y_ö_megabyãs
 / 2Ë* 
ONE_MEGABYTE_IN_BYTES
 ) / 
numbî_numa_nodes
;

393 
°‹e
 = 
	`bíchm¨k_∑l_numa_mÆloc
–(Ë
numa_node_id
, 
size_ö_byãs
 );

394 
	`libsh¨ed_mem‹y_add_mem‹y_‰om_numa_node
–&
ms_f‹_bíchm¨ks
, 
numa_node_id
, 
°‹e
, 
size_ö_byãs
 );

399 if–
Ÿp
->
bíchm¨k_duøti⁄_Êag
 =
RAISED
 )

400 
›ti⁄s_bômask
 |
LIBBENCHMARK_BENCHMARKSUITE_OPTION_DURATION
;

402 
	`libbíchm¨k_bíchm¨ksuôe_öô
–&
bss
, &
ts
, &
ms_f‹_bíchm¨ks
, 
numa_mode
, 
›ti⁄s_bômask
, 
Ÿp
->
bíchm¨k_duøti⁄_ö_£c⁄ds
 );

404 
	`libbíchm¨k_ªsu…s_öô
–&
rs
, &
ms_f‹_rs_™d_ts
 );

406 
	`libbíchm¨k_bíchm¨ksuôe_run
–&
bss
, &
rs
 );

408 if–
Ÿp
->
gnu∂Ÿ_fûe_Êag
 =
RAISED
 
‹
 oç->
gnu∂Ÿ_≤g_Êag
 == RAISED )

411 
sy°em_comm™d
[1024];

413 
libbíchm¨k_gnu∂Ÿ_›ti⁄s


414 
gpo
;

416 
	`LIBBENCHMARK_GNUPLOT_OPTIONS_INIT
–
gpo
 );

418 if–
Ÿp
->
gnu∂Ÿ_log¨ôhmic_yaxis_Êag
 =
RAISED
 )

419 
	`LIBBENCHMARK_GNUPLOT_OPTIONS_SET_Y_AXIS_SCALE_TYPE_LOGARITHMIC
–
gpo
 );

421 if–
Ÿp
->
gnu∂Ÿ_height_Êag
 =
RAISED
 )

422 
	`LIBBENCHMARK_GNUPLOT_OPTIONS_SET_HEIGHT_IN_PIXELS
–
gpo
, 
Ÿp
->
gnu∂Ÿ_height_ö_pixñs
 );

424 if–
Ÿp
->
gnu∂Ÿ_width_Êag
 =
RAISED
 )

425 
	`LIBBENCHMARK_GNUPLOT_OPTIONS_SET_WIDTH_IN_PIXELS
–
gpo
, 
Ÿp
->
gnu∂Ÿ_width_ö_pixñs
 );

427 
	`libbíchm¨k_bíchm¨ksuôe_gë_li°_of_gnu∂Ÿ_°rögs
–&
bss
, &
rs
, 
Ÿp
->
gnu∂Ÿ_sy°em_°rög
, &
gpo
, &
li°_of_gnu∂Ÿs
 );

430  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
li°_of_gnu∂Ÿs
,
œsue
) )

432 
bg
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

434 
diskfûe
 = 
	`f›í
–
bg
->
fûíame
, "w" );

435 
	`£tbuf
–
diskfûe
, 
diskbuf„r
 );

437 
	`fwrôe
–
bg
->
gnu∂Ÿ_°rög
, 
	`libsh¨ed_™si_°æí
(bg->gnu∂Ÿ_°rög), 1, 
diskfûe
 );

438 
	`f˛o£
–
diskfûe
 );

440 if–
Ÿp
->
gnu∂Ÿ_≤g_Êag
 =
RAISED
 )

442 
	`•rötf
–
sy°em_comm™d
, "gnu∂Ÿ \"%s\"", 
bg
->
fûíame
 );

443 
	`sy°em
–
sy°em_comm™d
 );

448 
	`libbíchm¨k_ªsu…s_˛ónup
–&
rs
 );

450 
	`libbíchm¨k_bíchm¨ksuôe_˛ónup
–&
bss
 );

452 
	`libsh¨ed_mem‹y_˛ónup
–&
ms_f‹_bíchm¨ks
, 
mem‹y_˛ónup_ˇŒback
 );

454 
	`libsh¨ed_mem‹y_˛ónup
–&
ms_f‹_rs_™d_ts
, 
mem‹y_˛ónup_ˇŒback
 );

456 
	`lfds700_misc_libøry_˛ónup
();

459 if–
Ÿp
->
show_vîsi⁄_Êag
 =
RAISED
 )

460 
	`öã∫Æ_show_vîsi⁄
();

463 
	}
}

470 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

472 
	$mem‹y_˛ónup_ˇŒback
–
Êag
 
known_numa_node_Êag
, *
°‹e
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
 )

474 
	`as£π
–
°‹e
 !
NULL
 );

477 #if–
BENCHMARK_PAL_MEMORY_TYPE
 =
BENCHMARK_MEMORY_TYPE_SMP
 )

478 
	`‰ì
–
°‹e
 );

481 #if–
BENCHMARK_PAL_MEMORY_TYPE
 =
BENCHMARK_MEMORY_TYPE_NUMA
 )

482 
	`bíchm¨k_∑l_numa_‰ì
–
°‹e
, 
size_ö_byãs
 );

486 
	}
}

488 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/benchmark/src/misc.c

2 
	~"öã∫Æ.h
"

9 
	$öã∫Æ_show_vîsi⁄
()

12 *
vîsi⁄_™d_buûd_°rög
;

15 * c⁄° 
loˇl_buûd_™d_vîsi⁄_°rög
 = "bíchm¨k " 
BENCHMARK_VERSION_STRING
 " (" 
BUILD_TYPE_STRING
 ", " 
MODE_TYPE_STRING
 ", " 
BENCHMARK_PAL_MEMORY_TYPE_STRING
 ")";

17 
	`¥ötf
–"%s\n", 
loˇl_buûd_™d_vîsi⁄_°rög
 );

19 
	`libbíchm¨k_misc_quîy
–
LIBBENCHMARK_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
vîsi⁄_™d_buûd_°rög
 );

21 
	`¥ötf
–"%s\n", 
vîsi⁄_™d_buûd_°rög
 );

23 
	`libsh¨ed_misc_quîy
–
LIBSHARED_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
vîsi⁄_™d_buûd_°rög
 );

25 
	`¥ötf
–"%s\n", 
vîsi⁄_™d_buûd_°rög
 );

27 
	`lfds711_misc_quîy
–
LFDS711_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
vîsi⁄_™d_buûd_°rög
 );

29 
	`¥ötf
–"%s\n", 
vîsi⁄_™d_buûd_°rög
 );

31 
	`lfds700_misc_quîy
–
LFDS700_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
vîsi⁄_™d_buûd_°rög
 );

33 
	`¥ötf
–"%s\n", 
vîsi⁄_™d_buûd_°rög
 );

36 
	}
}

	@test_and_benchmark/benchmark/src/porting_abstraction_layer.h

2 
	#BENCHMARK_MEMORY_TYPE_SMP
 1

	)

3 
	#BENCHMARK_MEMORY_TYPE_NUMA
 2

	)

	@test_and_benchmark/benchmark/src/porting_abstraction_layer_numa_free.c

2 
	~"öã∫Æ.h
"

9 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 )

11 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

13 
	$bíchm¨k_∑l_numa_‰ì
–*
mem‹y
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
 )

15 
HANDLE


16 
¥o˚ss_h™dÀ
;

18 
	`as£π
–
mem‹y
 !
NULL
 );

21 
¥o˚ss_h™dÀ
 = 
	`GëCuºítPro˚ss
();

23 
	`VútuÆFªeEx
–
¥o˚ss_h™dÀ
, 
mem‹y
, 0, 
MEM_RELEASE
 );

26 
	}
}

28 #¥agm®
w¨nög
(  : 4100 )

37 #if–
deföed
 
__löux__
 && deföed 
LIBNUMA
 )

39 #ifde‡
BENCHMARK_PAL_NUMA_FREE


40 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 
p‹tög_ab°ø˘i⁄_‰ì
.
c


43 
	#BENCHMARK_PAL_NUMA_FREE


	)

45 
	$bíchm¨k_∑l_numa_‰ì
–*
mem‹y
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
 )

47 
	`as£π
–
mem‹y
 !
NULL
 );

50 #if–
deföed
 
_POSIX_MEMLOCK_RANGE
 > 0 )

51 
	`mu∆ock
–
mem‹y
, 
size_ö_byãs
 );

54 
	`numa_‰ì
–
mem‹y
, 
size_ö_byãs
 );

57 
	}
}

	@test_and_benchmark/benchmark/src/porting_abstraction_layer_numa_malloc.c

2 
	~"öã∫Æ.h
"

9 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_VISTA
 )

11 #ifde‡
BENCHMARK_PAL_NUMA_MALLOC


12 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 
p‹tög_ab°ø˘i⁄_mÆloc
.
c


15 
	#BENCHMARK_PAL_NUMA_MALLOC


	)

17 *
	$bíchm¨k_∑l_numa_mÆloc
–
lfds711_∑l_uöt_t
 
numa_node_id
,Üfds711_∑l_uöt_à
size_ö_byãs
 )

19 
HANDLE


20 
¥o˚ss_h™dÀ
;

22 
LPVOID


23 
mem‹y
;

28 
¥o˚ss_h™dÀ
 = 
	`GëCuºítPro˚ss
();

30 
mem‹y
 = 
	`VútuÆAŒocExNuma
–
¥o˚ss_h™dÀ
, 
NULL
, 
size_ö_byãs
, 
MEM_COMMIT
, 
PAGE_READWRITE
, (
DWORD
Ë
numa_node_id
 );

32  
mem‹y
;

33 
	}
}

42 #if–
deföed
 
__löux__
 && deföed 
LIBNUMA
 )

44 #ifde‡
BENCHMARK_PAL_NUMA_MALLOC


45 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 
p‹tög_ab°ø˘i⁄_mÆloc
.
c


48 
	#BENCHMARK_PAL_NUMA_MALLOC


	)

50 *
	$bíchm¨k_∑l_numa_mÆloc
–
lfds711_∑l_uöt_t
 
numa_node_id
,Üfds711_∑l_uöt_à
size_ö_byãs
 )

53 *
mem‹y
;

58 
mem‹y
 = 
	`numa_Æloc_⁄node
–
size_ö_byãs
, (Ë
numa_node_id
 );

81 #if–
deföed
 
_POSIX_MEMLOCK_RANGE
 > 0 )

82 
	`mlock
–
mem‹y
, 
size_ö_byãs
 );

85  
mem‹y
;

86 
	}
}

	@test_and_benchmark/benchmark/src/porting_abstraction_layer_operating_system.h

2 #if–
deföed
 
_MSC_VER
 )

10 
	#__STDC__
 1

	)

11 
	#__STDC_HOSTED__
 1

	)

19 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 < 
NTDDI_VISTA
 )

21 #ifde‡
BENCHMARK_PAL_OPERATING_SYSTEM


22 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
.

25 
	#BENCHMARK_PAL_OPERATING_SYSTEM


	)

27 
	#BENCHMARK_PAL_OS_STRING
 "Wödows"

	)

28 
	#BENCHMARK_PAL_MEMORY_TYPE
 
BENCHMARK_MEMORY_TYPE_SMP


	)

29 
	#BENCHMARK_PAL_MEMORY_TYPE_STRING
 "SMP"

	)

38 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_VISTA
 )

40 #ifde‡
BENCHMARK_PAL_OPERATING_SYSTEM


41 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
.

44 
	#BENCHMARK_PAL_OPERATING_SYSTEM


	)

46 
	#BENCHMARK_PAL_OS_STRING
 "Wödows"

	)

47 
	#BENCHMARK_PAL_MEMORY_TYPE
 
BENCHMARK_MEMORY_TYPE_NUMA


	)

48 
	#BENCHMARK_PAL_MEMORY_TYPE_STRING
 "NUMA"

	)

57 #if–
deföed
 
__löux__
 && !deföed 
KERNEL_MODE
 && !deföed 
LIBNUMA
 )

59 #ifde‡
BENCHMARK_PAL_OPERATING_SYSTEM


60 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
.

63 
	#BENCHMARK_PAL_OPERATING_SYSTEM


	)

65 
	#BENCHMARK_PAL_OS_STRING
 "Löux"

	)

66 
	#BENCHMARK_PAL_MEMORY_TYPE
 
BENCHMARK_MEMORY_TYPE_SMP


	)

67 
	#BENCHMARK_PAL_MEMORY_TYPE_STRING
 "SMP"

	)

69 
	~<uni°d.h
>

70 #if–
_POSIX_MEMLOCK_RANGE
 > 0 )

71 
	~<sys/mm™.h
>

81 #if–
deföed
 
__löux__
 && !deföed 
KERNEL_MODE
 && deföed 
LIBNUMA
 )

83 #ifde‡
BENCHMARK_PAL_OPERATING_SYSTEM


84 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
.

87 
	#BENCHMARK_PAL_OPERATING_SYSTEM


	)

89 
	#BENCHMARK_PAL_OS_STRING
 "Löux"

	)

90 
	#BENCHMARK_PAL_MEMORY_TYPE
 
BENCHMARK_MEMORY_TYPE_NUMA


	)

91 
	#BENCHMARK_PAL_MEMORY_TYPE_STRING
 "NUMA"

	)

93 
	~<uni°d.h
>

94 
	~<numa.h
>

95 #if–
_POSIX_MEMLOCK_RANGE
 > 0 )

96 
	~<sys/mm™.h
>

106 #if–!
deföed
 
BENCHMARK_PAL_OPERATING_SYSTEM
 )

108 #îr‹ 
No
 
›î©ög
 
sy°em
 
p‹tög
 
ab°ø˘i⁄
 
œyî
.

	@test_and_benchmark/benchmark/src/util_cmdline.c

2 
	~"öã∫Æ.h
"

9 
	$utû_cmdlöe_öô
–
utû_cmdlöe_°©e
 *
cs
 )

11 
lfds711_∑l_uöt_t


12 
lo›
;

14 
	`as£π
–
cs
 !
NULL
 );

16  
lo›
 = 0 ;Üo› < 
NUMBER_OF_LOWERCASE_LETTERS_IN_LATIN_ALPHABET
 ;Üoop++ )

18 
cs
->
¨gs
[
lo›
].
¨g_ty≥
 = 
UTIL_CMDLINE_ARG_TYPE_UNSET
;

19 
cs
->
¨gs
[
lo›
].
¥o˚s£d_Êag
 = 
LOWERED
;

23 
	}
}

30 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

32 
	$utû_cmdlöe_˛ónup
–
utû_cmdlöe_°©e
 *
cs
 )

34 
	`as£π
–
cs
 !
NULL
 );

37 
	}
}

39 #¥agm®
w¨nög
(  : 4100 )

46 
	$utû_cmdlöe_add_¨g
–
utû_cmdlöe_°©e
 *
cs
, 
¨g_Àâî
, 
utû_cmdlöe_¨g_ty≥
 
¨g_ty≥
 )

48 
lfds711_∑l_uöt_t


49 
ödex
;

51 
	`as£π
–
cs
 !
NULL
 );

52 
	`as£π
–
¨g_Àâî
 >'a' 
™d
árg_letter <= 'z' );

55 
ödex
 = 
¨g_Àâî
 - 'a';

57 
cs
->
¨gs
[
ödex
].
¨g_ty≥
 =árg_type;

59 if–
¨g_ty≥
 =
UTIL_CMDLINE_ARG_TYPE_FLAG
 )

60 
cs
->
¨gs
[
ödex
].
¨g_d©a
.
Êag
.Êag = 
LOWERED
;

62 if–
¨g_ty≥
 =
UTIL_CMDLINE_ARG_TYPE_STRING
 )

63 
cs
->
¨gs
[
ödex
].
¨g_d©a
.
°rög
.°rög = 
NULL
;

66 
	}
}

73 
	$utû_cmdlöe_¥o˚ss_¨gs
–
utû_cmdlöe_°©e
 *
cs
, 
¨gc
, **
¨gv
 )

76 *
¨g
;

79 
¨g_Àâî
,

80 
cc
,

81 
lo›
,

82 
rv
 = 1;

84 
lfds711_∑l_uöt_t


85 
ödex
;

87 
	`as£π
–
cs
 !
NULL
 );

88 
	`as£π
–
¨gc
 >= 1 );

89 
	`as£π
–
¨gv
 !
NULL
 );

91  
lo›
 = 1 ;Üo› < 
¨gc
 ;Üoop++ )

93 
¨g
 = *(
¨gv
+
lo›
);

95  *
¨g
 )

98 
¨g_Àâî
 = 
	`tﬁowî
–*(
¨g
+1) );

100 if–
¨g_Àâî
 >'a' 
™d
árg_letter <= 'z' )

102 
ödex
 = 
¨g_Àâî
 - 'a';

104  
cs
->
¨gs
[
ödex
].
¨g_ty≥
 )

106 
UTIL_CMDLINE_ARG_TYPE_INTEGER_RANGE
:

107 if–
lo›
+1 >
¨gc
 )

108 
rv
 = 0;

110 if–
lo›
+1 < 
¨gc
 )

112 
cc
 = 
	`ssˇnf
–*(
¨gv
+
lo›
+1), "%Œu-%Œu", &
cs
->
¨gs
[
ödex
].
¨g_d©a
.
öãgî_ønge
.
öãgî_°¨t
, &cs->¨gs[ödex].¨g_d©a.öãgî_ønge.
öãgî_íd
 );

114 if–
cc
 != 2 )

115 
rv
 = 0;

117 if–
cc
 == 2 )

119 
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 = 
RAISED
;

120 
lo›
++;

125 
UTIL_CMDLINE_ARG_TYPE_INTEGER
:

126 if–
lo›
+1 >
¨gc
 )

127 
rv
 = 0;

129 if–
lo›
+1 < 
¨gc
 )

131 
cc
 = 
	`ssˇnf
–*(
¨gv
+
lo›
+1), "%Œu", &
cs
->
¨gs
[
ödex
].
¨g_d©a
.
öãgî
.integer );

133 if–
cc
 != 1 )

134 
rv
 = 0;

136 if–
cc
 == 1 )

138 
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 = 
RAISED
;

139 
lo›
++;

144 
UTIL_CMDLINE_ARG_TYPE_FLAG
:

145 
cs
->
¨gs
[
ödex
].
¨g_d©a
.
Êag
.Êag = 
RAISED
;

146 
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 = 
RAISED
;

149 
UTIL_CMDLINE_ARG_TYPE_STRING
:

150 
cs
->
¨gs
[
ödex
].
¨g_d©a
.
°rög
.°rög = *(
¨gv
+
lo›
+1);

151 
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 = 
RAISED
;

152 
lo›
++;

155 
UTIL_CMDLINE_ARG_TYPE_UNSET
:

162 
rv
 = 0;

167  
rv
;

168 
	}
}

175 
	$utû_cmdlöe_gë_¨g_d©a
–
utû_cmdlöe_°©e
 *
cs
, 
¨g_Àâî
, 
utû_cmdlöe_¨g_d©a
 **
¨g_d©a
 )

177 
lfds711_∑l_uöt_t


178 
ödex
;

180 
	`as£π
–
cs
 !
NULL
 );

181 
	`as£π
–
¨g_Àâî
 >'a' 
™d
árg_letter <= 'z' );

182 
	`as£π
–
¨g_d©a
 !
NULL
 );

184 
ödex
 = 
¨g_Àâî
 - 'a';

186 if–
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 =
RAISED
 )

187 *
¨g_d©a
 = &
cs
->
¨gs
[
ödex
].arg_data;

189 *
¨g_d©a
 = 
NULL
;

192 
	}
}

	@test_and_benchmark/benchmark/src/util_cmdline.h

2 
	~<˘y≥.h
>

5 
	#NUMBER_OF_LOWERCASE_LETTERS_IN_LATIN_ALPHABET
 26

	)

8 
	eutû_cmdlöe_¨g_ty≥


10 
	mUTIL_CMDLINE_ARG_TYPE_INTEGER_RANGE
,

11 
	mUTIL_CMDLINE_ARG_TYPE_INTEGER
,

12 
	mUTIL_CMDLINE_ARG_TYPE_FLAG
,

13 
	mUTIL_CMDLINE_ARG_TYPE_STRING
,

14 
	mUTIL_CMDLINE_ARG_TYPE_UNSET


18 
	sutû_cmdlöe_¨g_öãgî_ønge


21 
	möãgî_°¨t
,

22 
	möãgî_íd
;

25 
	sutû_cmdlöe_¨g_öãgî


28 
	möãgî
;

31 
	sutû_cmdlöe_¨g_Êag


33 
Êag


34 
	mÊag
;

37 
	sutû_cmdlöe_¨g_°rög


40 *
	m°rög
;

43 
	uutû_cmdlöe_¨g_d©a


45 
utû_cmdlöe_¨g_öãgî_ønge


46 
	möãgî_ønge
;

48 
utû_cmdlöe_¨g_öãgî


49 
	möãgî
;

51 
utû_cmdlöe_¨g_Êag


52 
	mÊag
;

54 
utû_cmdlöe_¨g_°rög


55 
	m°rög
;

58 
	sutû_cmdlöe_¨g_Àâî_™d_d©a


60 
utû_cmdlöe_¨g_ty≥


61 
	m¨g_ty≥
;

63 
Êag


64 
	m¥o˚s£d_Êag
;

66 
utû_cmdlöe_¨g_d©a


67 
	m¨g_d©a
;

70 
	sutû_cmdlöe_°©e


72 
utû_cmdlöe_¨g_Àâî_™d_d©a


73 
	m¨gs
[
NUMBER_OF_LOWERCASE_LETTERS_IN_LATIN_ALPHABET
];

77 
utû_cmdlöe_öô
–
utû_cmdlöe_°©e
 *
cs
 );

78 
utû_cmdlöe_˛ónup
–
utû_cmdlöe_°©e
 *
cs
 );

79 
utû_cmdlöe_add_¨g
–
utû_cmdlöe_°©e
 *
cs
, 
¨g_Àâî
, 
utû_cmdlöe_¨g_ty≥
 
¨g_ty≥
 );

80 
utû_cmdlöe_¥o˚ss_¨gs
–
utû_cmdlöe_°©e
 *
cs
, 
¨gc
, **
¨gv
 );

81 
utû_cmdlöe_gë_¨g_d©a
–
utû_cmdlöe_°©e
 *
cs
, 
¨g_Àâî
, 
utû_cmdlöe_¨g_d©a
 **
¨g_d©a
 );

	@test_and_benchmark/libbenchmark/build/wdk_7.1/driver_entry_renamed_to_avoid_compiler_warning.c

1 
	~"libbíchm¨k_öã∫Æ.h
"

8 
DRIVER_INITIALIZE
 
	gDrivîE¡ry
;

15 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

17 
NTSTATUS
 
	$DrivîE¡ry
–
_DRIVER_OBJECT
 *
DrivîObje˘
, 
PUNICODE_STRING
 
Regi°ryP©h
 )

19  
STATUS_SUCCESS
;

20 
	}
}

22 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/inc/libbenchmark.h

1 #i‚de‡
LIBBENCHMARK_H


4 
	#LIBBENCHMARK_H


	)

7 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_›î©ög_sy°em.h
"

10 
	~"../../../liblfds711/öc/liblfds711.h
"

11 
	~"../../libsh¨ed/öc/libsh¨ed.h
"

12 
	~"../../../../liblfds7.0.0/liblfds700/öc/liblfds700.h
"

16 #¥agm®
w¨nög
–
push
 )

17 #¥agm®
w¨nög
–
dißbÀ
 : 4324 )

20 
	~"libbíchm¨k/libbíchm¨k_t›ﬁogy_node.h
"

21 
	~"libbíchm¨k/libbíchm¨k_t›ﬁogy.h
"

23 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî.h
"

24 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_gcc_•ölock_©omic.h
"

25 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_gcc_•ölock_sync.h
"

26 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_msvc_•ölock.h
"

27 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_±hªad_muãx.h
"

28 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_±hªad_rwlock.h
"

29 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_±hªad_•ölock_¥o˚ss_¥iv©e.h
"

30 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_±hªad_•ölock_¥o˚ss_sh¨ed.h
"

31 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_wödows_¸ôiˇl_£˘i⁄.h
"

32 
	~"libbíchm¨k/libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_lock_wödows_muãx.h
"

34 
	~"libbíchm¨k/libbíchm¨k_íums.h
"

35 
	~"libbíchm¨k/libbíchm¨k_gnu∂Ÿ.h
"

36 
	~"libbíchm¨k/libbíchm¨k_ªsu…s.h
"

37 
	~"libbíchm¨k/libbíchm¨k_thªad£t.h
"

38 
	~"libbíchm¨k/libbíchm¨k_bíchm¨ks_båì_au_ªadn_wrôí.h
"

39 
	~"libbíchm¨k/libbíchm¨k_bíchm¨ks_‰ìli°_push1_thí_p›1.h
"

40 
	~"libbíchm¨k/libbíchm¨k_bíchm¨ks_queue_umm_íqueue1_thí_dequeue1.h
"

41 
	~"libbíchm¨k/libbíchm¨k_bíchm¨kö°™˚.h
"

42 
	~"libbíchm¨k/libbíchm¨k_bíchm¨k£t.h
"

43 
	~"libbíchm¨k/libbíchm¨k_bíchm¨ksuôe.h
"

44 
	~"libbíchm¨k/libbíchm¨k_¥ng.h
"

46 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic.h
"

47 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync.h
"

48 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock.h
"

49 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx.h
"

50 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock.h
"

51 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e.h
"

52 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed.h
"

53 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄.h
"

54 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx.h
"

56 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic.h
"

57 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync.h
"

58 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock.h
"

59 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx.h
"

60 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock.h
"

61 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e.h
"

62 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed.h
"

63 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄.h
"

64 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx.h
"

66 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic.h
"

67 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync.h
"

68 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock.h
"

69 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx.h
"

70 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock.h
"

71 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e.h
"

72 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed.h
"

73 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄.h
"

74 
	~"libbíchm¨k/libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx.h
"

76 
	~"libbíchm¨k/libbíchm¨k_misc.h
"

79 #¥agm®
w¨nög
–
p›
 )

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarkinstance.h

4 
	slibbíchm¨k_bíchm¨kö°™˚_°©e


6 
Êag


7 
	mnuma_aw¨íess_Êag
;

9 
libbíchm¨k_d©a°ru˘uª_id


10 
	md©a°ru˘uª_id
;

12 
libbíchm¨k_bíchm¨k_id


13 
	mbíchm¨k_id
;

15 
libbíchm¨k_lock_id


16 
	mlock_id
;

18 
libbíchm¨k_thªad£t_°©e


19 
	mt£ts
;

21 
libbíchm¨k_t›ﬁogy_°©e


22 *
	mts
;

24 
lfds711_li°_asu_ñemít


25 
	mœsue
;

28 (*
	möô_fun˘i⁄
)–
libbíchm¨k_t›ﬁogy_°©e
 *
	mts
,

29 
lfds711_li°_aso_°©e
 *
	mlogiˇl_¥o˚ss‹_£t
,

30 
libsh¨ed_mem‹y_°©e
 *
	mms
,

31 
libbíchm¨k_t›ﬁogy_numa_mode
 
	mnuma_node
,

32 
libbíchm¨k_thªad£t_°©e
 *
	mt£ts
 ),

33 (*
	m˛ónup_fun˘i⁄
)–
lfds711_li°_aso_°©e
 *
	mlogiˇl_¥o˚ss‹_£t
,

34 
libbíchm¨k_t›ﬁogy_numa_mode
 
	mnuma_node
,

35 
libbíchm¨k_ªsu…s_°©e
 *
	mrs
,

36 
libbíchm¨k_thªad£t_°©e
 *
	mt£ts
 );

40 
libbíchm¨k_bíchm¨kö°™˚_öô
–
libbíchm¨k_bíchm¨kö°™˚_°©e
 *
bs
,

41 
libbíchm¨k_d©a°ru˘uª_id
 
d©a°ru˘uª_id
,

42 
libbíchm¨k_bíchm¨k_id
 
bíchm¨k_id
,

43 
libbíchm¨k_lock_id
 
lock_id
,

44 
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

45 (*
öô_fun˘i⁄
)–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

46 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

47 
libsh¨ed_mem‹y_°©e
 *
ms
,

48 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
,

49 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 ),

50 (*
˛ónup_fun˘i⁄
)–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

51 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
,

52 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

53 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 ) );

55 
	`libbíchm¨k_bíchm¨kö°™˚_˛ónup
–
libbíchm¨k_bíchm¨kö°™˚_°©e
 *
bs
 );

57 
	`libbíchm¨k_bíchm¨kö°™˚_run
–
libbíchm¨k_bíchm¨kö°™˚_°©e
 *
bs
,

58 
lfds711_li°_aso_°©e
 *
Õ£t
,

59 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_ªsu…s_°©e
 *
rs
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarks_btree_au_readn_writen.h

2 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

3 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

4 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

5 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

6 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

7 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

8 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

9 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

10 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

11 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

12 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

14 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

15 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

16 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

17 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

18 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

19 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

20 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

22 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

23 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

24 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

26 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

27 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

28 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

29 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

30 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

31 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

32 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

33 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

34 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

35 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

36 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarks_freelist_push1_then_pop1.h

2 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

3 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

4 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

5 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

6 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

7 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

8 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

9 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

10 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

11 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

12 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

14 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

15 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

16 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

17 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

18 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

19 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

20 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

22 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

23 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

24 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

26 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

27 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

28 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

29 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

30 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

31 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

32 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

33 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

34 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

35 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

36 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1.h

2 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

3 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

4 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

5 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

6 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

7 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

8 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

9 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

10 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

11 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

12 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

14 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

15 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

16 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

17 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

18 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

19 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

20 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

22 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

23 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

24 
libsh¨ed_∑l_thªad_ªtu∫_t
 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 );

26 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

27 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

28 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

29 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

30 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

31 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

32 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

33 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

34 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

35 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

36 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
, 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarkset.h

6 
	slibbíchm¨k_bíchm¨k£t_°©e


8 
libbíchm¨k_d©a°ru˘uª_id


9 
	md©a°ru˘uª_id
;

11 
libbíchm¨k_bíchm¨k_id


12 
	mbíchm¨k_id
;

14 
lfds711_li°_asu_ñemít


15 
	mœsue
;

17 
lfds711_li°_asu_°©e


18 
	mbíchm¨ks
,

19 *
	mlogiˇl_¥o˚ss‹_£ts
,

20 *
	mnuma_modes_li°
;

22 
libsh¨ed_mem‹y_°©e


23 *
	mms
;

25 
libbíchm¨k_t›ﬁogy_°©e


26 *
	mts
;

29 
	slibbíchm¨k_bíchm¨k£t_gnu∂Ÿ


32 
	mfûíame
[256],

33 *
	mgnu∂Ÿ_°rög
;

35 
libbíchm¨k_bíchm¨k_id


36 
	mbíchm¨k_id
;

38 
libbíchm¨k_d©a°ru˘uª_id


39 
	md©a°ru˘uª_id
;

41 
lfds711_li°_asu_ñemít


42 
	mœsue
;

46 
libbíchm¨k_bíchm¨k£t_öô
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
,

47 
libbíchm¨k_d©a°ru˘uª_id
 
d©a°ru˘uª_id
,

48 
libbíchm¨k_bíchm¨k_id
 
bíchm¨k_id
,

49 
lfds711_li°_asu_°©e
 *
logiˇl_¥o˚ss‹_£ts
,

50 
lfds711_li°_asu_°©e
 *
numa_modes_li°
,

51 
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

52 
libsh¨ed_mem‹y_°©e
 *
ms
 );

54 
libbíchm¨k_bíchm¨k£t_˛ónup
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
 );

56 
libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
, 
libbíchm¨k_bíchm¨kö°™˚_°©e
 *
bs
 );

58 
libbíchm¨k_bíchm¨k£t_run
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
 );

60 
libbíchm¨k_bíchm¨k£t_gnu∂Ÿ_emô
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
,

61 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

62 *
gnu∂Ÿ_sy°em_°rög
,

63 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

64 
libbíchm¨k_gnu∂Ÿ_›ti⁄s
 *
gpo
,

65 
libbíchm¨k_bíchm¨k£t_gnu∂Ÿ
 *
bg
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarksuite.h

2 
	#LIBBENCHMARK_BENCHMARKSUITE_OPTION_DURATION
 0x1

	)

7 
	slibbíchm¨k_bíchm¨ksuôe_°©e


9 
lfds711_li°_asu_°©e


10 
	mbíchm¨k£ts
,

11 
	mÕ£ts
,

12 
	mnuma_modes_li°
;

14 
libsh¨ed_mem‹y_°©e


15 *
	mms
;

17 
libbíchm¨k_t›ﬁogy_°©e


18 *
	mts
;

22 
libbíchm¨k_bíchm¨ksuôe_öô
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
,

23 
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

24 
libsh¨ed_mem‹y_°©e
 *
ms
,

25 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

26 
lfds711_∑l_uöt_t
 
›ti⁄s_bômask
,

27 
lfds711_∑l_uöt_t
 
bíchm¨k_duøti⁄_ö_£c⁄ds
 );

29 
libbíchm¨k_bíchm¨ksuôe_˛ónup
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
 );

31 
libbíchm¨k_bíchm¨ksuôe_add_bíchm¨k£t
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
,

32 
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
 );

34 
libbíchm¨k_bíchm¨ksuôe_run
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
,

35 
libbíchm¨k_ªsu…s_°©e
 *
rs
 );

37 
libbíchm¨k_bíchm¨ksuôe_gë_li°_of_gnu∂Ÿ_°rögs
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
,

38 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

39 *
gnu∂Ÿ_sy°em_°rög
,

40 
libbíchm¨k_gnu∂Ÿ_›ti⁄s
 *
gpo
,

41 
lfds711_li°_asu_°©e
 *
li°_of_gnu∂Ÿ_°rögs
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_gcc_spinlock_atomic.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
((båì_au_°©e).
lock
); (exi°ög_vÆueË(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


56 *
	mroŸ
;

58 
∑l_lock_gcc_•ölock_©omic_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

90 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
,

91 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

98 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

99 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_gcc_spinlock_sync.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
((båì_au_°©e).
lock
); (exi°ög_vÆueË(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


56 *
	mroŸ
;

58 
∑l_lock_gcc_•ölock_sync_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

90 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
,

91 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

98 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

99 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_msvc_spinlock.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
((båì_au_°©e).
lock
); (exi°ög_vÆueË(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


56 *
	mroŸ
;

58 
∑l_lock_msvc_•ölock_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

90 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
,

91 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

98 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

99 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_pthread_mutex.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
((båì_au_°©e).
lock
); (exi°ög_vÆueË(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


56 *
	mroŸ
;

58 
∑l_lock_±hªad_muãx_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

90 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
,

91 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

98 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

99 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_pthread_rwlock.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_READ
((båì_au_°©e).
lock
); (exi°ög_vÆueË(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


56 *
	mroŸ
;

58 
∑l_lock_±hªad_rwlock_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_key_f‹_ªad
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_key_f‹_wrôe
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

90 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

91 *
key
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄_f‹_ªad
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

97 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

99 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_absﬁuã_posôi⁄_f‹_ªad
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
,

101 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

103 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_ªœtive_posôi⁄_f‹_ªad
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

104 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
,

105 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_pthread_spinlock_process_private.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
((båì_au_°©e).
lock
); (exi°ög_vÆueË(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


56 *
	mroŸ
;

58 
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

90 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
,

91 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

98 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

99 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_pthread_spinlock_process_shared.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
((båì_au_°©e).
lock
);Éxi°ög_vÆuê(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


56 *
	mroŸ
;

58 
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

90 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
,

91 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

98 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

99 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_windows_critical_section.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
((båì_au_°©e).
lock
); (exi°ög_vÆueË(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


56 *
	mroŸ
;

58 
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

90 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
,

91 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

98 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

99 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_windows_mutex.h

2 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_GET_KEY_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
 ) ( (båì_au_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_KEY_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_key
 ) ( (båì_au_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_GET_VALUE_FROM_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
exi°ög_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
((båì_au_°©e).
lock
); (exi°ög_vÆueË(båì_au_ñemít).
vÆue
; 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
((båì_au_°©e).lock); }

	)

5 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_VALUE_IN_ELEMENT
–
båì_au_°©e
, 
båì_au_ñemít
, 
√w_vÆue
 ) { 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
((båì_au_°©e).
lock
); (båì_au_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆue); 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
((båì_au_°©e).lock); }

	)

6 
	#LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_GET_USER_STATE_FROM_STATE
–
båì_au_°©e
 ) ( (båì_au_°©e).
u£r_°©e
 )

	)

9 
	elibbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_absﬁuã_posôi⁄


11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_ABSOLUTE_POSITION_ROOT
,

12 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_ABSOLUTE_POSITION_SMALLEST_IN_TREE
,

13 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_ABSOLUTE_POSITION_LARGEST_IN_TREE


16 
	elibbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_exi°ög_key


18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_EXISTING_KEY_OVERWRITE
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_EXISTING_KEY_FAIL


22 
	elibbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π_ªsu…


24 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
,

25 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_SUCCESS_OVERWRITE
,

26 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_SUCCESS


29 
	elibbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ªœtive_posôi⁄


31 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_UP
,

32 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_LEFT
,

33 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_RIGHT
,

34 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

35 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
,

36 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
,

37 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE


41 
	slibbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


43 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


44 *
	mÀ·
,

45 *
	mright
,

46 *
	mup
;

49 *
	mkey
,

50 *
	mvÆue
;

53 
	slibbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e


55 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


56 *
	mroŸ
;

58 
∑l_lock_wödows_muãx_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

59 
	mlock
;

62 (*
	mkey_com∑ª_fun˘i⁄
)–c⁄° *
	m√w_key
, c⁄° *
	mexi°ög_key
 );

64 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_exi°ög_key


65 
	mexi°ög_key
;

68 *
	mu£r_°©e
;

72 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

73 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

74 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_exi°ög_key
 
exi°ög_key
,

75 *
u£r_°©e
 );

77 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

78 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 *
baue
) );

80 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π_ªsu…
 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

81 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 *
baue
,

82 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
exi°ög_baue
 );

84 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

85 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

86 *
key
,

87 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
 );

89 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

90 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
,

91 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
,

92 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

94 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

95 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
,

96 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 );

98 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

99 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
,

100 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_gcc_spinlock_atomic.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_ATOMIC_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_ATOMIC_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_ATOMIC_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_ATOMIC_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_ATOMIC_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít


12 *
	mt›
;

14 
∑l_lock_gcc_•ölock_©omic_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_gcc_spinlock_sync.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít


12 *
	mt›
;

14 
∑l_lock_gcc_•ölock_sync_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_msvc_spinlock.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_GCC_SPINLOCK_SYNC_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít


12 *
	mt›
;

14 
∑l_lock_msvc_•ölock_°©e


15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_pthread_mutex.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_MUTEX_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_MUTEX_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_MUTEX_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_MUTEX_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_MUTEX_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít


12 *
	mt›
;

14 
∑l_lock_±hªad_muãx_°©e


15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_pthread_rwlock.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_RWLOCK_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_RWLOCK_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_RWLOCK_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_RWLOCK_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_RWLOCK_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít


12 *
	mt›
;

14 
∑l_lock_±hªad_rwlock_°©e


15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_pthread_spinlock_process_private.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


12 *
	mt›
;

14 
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_pthread_spinlock_process_shared.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


12 *
	mt›
;

14 
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_windows_critical_section.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_CRITICAL_SECTION_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_CRITICAL_SECTION_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_CRITICAL_SECTION_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_CRITICAL_SECTION_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_CRITICAL_SECTION_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít


12 *
	mt›
;

14 
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e


15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_windows_mutex.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_MUTEX_GET_KEY_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_MUTEX_SET_KEY_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_key
 ) ( (‰ìli°_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_MUTEX_GET_VALUE_FROM_ELEMENT
–
‰ìli°_ñemít
 ) ( (‰ìli°_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_MUTEX_SET_VALUE_IN_ELEMENT
–
‰ìli°_ñemít
, 
√w_vÆue
 ) ( (‰ìli°_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_FREELIST_WINDOWS_MUTEX_GET_USER_STATE_FROM_STATE
–
‰ìli°_°©e
 ) ( (‰ìli°_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e


11 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít


12 *
	mt›
;

14 
∑l_lock_wödows_muãx_°©e


15 
	mlock
;

18 *
	mu£r_°©e
;

21 
	slibbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít


23 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít


24 *
	m√xt
;

27 *
	mkey
,

28 *
	mvÆue
;

32 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
 *
fs
, *
u£r_°©e
 );

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
 *
„
, *
u£r_°©e
) );

35 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
 *
„
 );

36 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
 **
„
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_gcc_spinlock_atomic.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_ATOMIC_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_ATOMIC_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_ATOMIC_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_ATOMIC_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_ATOMIC_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_gcc_•ölock_©omic_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_gcc_spinlock_sync.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_SYNC_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_SYNC_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_SYNC_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_SYNC_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_GCC_SPINLOCK_SYNC_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_gcc_•ölock_sync_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_msvc_spinlock.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_MSVC_SPINLOCK_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_MSVC_SPINLOCK_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_MSVC_SPINLOCK_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_MSVC_SPINLOCK_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_MSVC_SPINLOCK_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_msvc_•ölock_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_pthread_mutex.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_MUTEX_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_MUTEX_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_MUTEX_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_MUTEX_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_MUTEX_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_±hªad_muãx_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_pthread_rwlock.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_RWLOCK_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_RWLOCK_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_RWLOCK_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_RWLOCK_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_RWLOCK_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_±hªad_rwlock_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_pthread_spinlock_process_private.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_pthread_spinlock_process_shared.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_PTHREAD_SPINLOCK_PROCESS_SHARED_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_windows_critical_section.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_CRITICAL_SECTION_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_CRITICAL_SECTION_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_CRITICAL_SECTION_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_CRITICAL_SECTION_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_CRITICAL_SECTION_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_windows_mutex.h

2 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_MUTEX_GET_KEY_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
key
 )

	)

3 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_MUTEX_SET_KEY_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_key
 ) ( (queue_umm_ñemít).
key
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_keyË)

	)

4 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_MUTEX_GET_VALUE_FROM_ELEMENT
–
queue_umm_ñemít
 ) ( (queue_umm_ñemít).
vÆue
 )

	)

5 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_MUTEX_SET_VALUE_IN_ELEMENT
–
queue_umm_ñemít
, 
√w_vÆue
 ) ( (queue_umm_ñemít).
vÆue
 = (*Ë(
lfds711_∑l_uöt_t
Ë“ew_vÆueË)

	)

6 
	#LIBBENCHMARK_DATA_STRUCTURE_QUEUE_UMM_WINDOWS_MUTEX_GET_USER_STATE_FROM_STATE
–
queue_umm_°©e
 ) ( (queue_umm_°©e).
u£r_°©e
 )

	)

9 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít


11 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít


12 *
	m√xt
;

15 *
	mkey
,

16 *
	mvÆue
;

19 
	slibbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e


29 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 *
	míqueue_umm
,

31 *
	mdequeue_umm
;

33 
∑l_lock_wödows_muãx_°©e
 
LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

34 
	mlock_íqueue_umm
,

35 
	mlock_dequeue_umm
;

38 *
	mu£r_°©e
;

42 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 *
qe
, *
u£r_°©e
 );

43 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
, (*
ñemít_dequeue_umm_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©ê*qs, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 *
qe
, 
Êag
 
dummy_Êag
) );

45 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 *
qe
 );

46 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 **
qe
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_enums.h

2 
	elibbíchm¨k_d©a°ru˘uª_id


4 
	mLIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

5 
	mLIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

6 
	mLIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

7 
	mLIBBENCHMARK_DATASTRUCTURE_COUNT


10 
	elibbíchm¨k_bíchm¨k_id


12 
	mLIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

13 
	mLIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

14 
	mLIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1


17 
	elibbíchm¨k_lock_id


19 
	mLIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_ATOMIC
,

20 
	mLIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_SYNC
,

21 
	mLIBBENCHMARK_LOCK_ID_LIBLFDS700_LOCKFREE
,

22 
	mLIBBENCHMARK_LOCK_ID_LIBLFDS711_LOCKFREE
,

23 
	mLIBBENCHMARK_LOCK_ID_MSVC_SPINLOCK
,

24 
	mLIBBENCHMARK_LOCK_ID_PTHREAD_MUTEX
,

25 
	mLIBBENCHMARK_LOCK_ID_PTHREAD_RWLOCK
,

26 
	mLIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_PRIVATE
,

27 
	mLIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_SHARED
,

28 
	mLIBBENCHMARK_LOCK_ID_WINDOWS_CRITICAL_SECTION
,

29 
	mLIBBENCHMARK_LOCK_ID_WINDOWS_MUTEX


	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_gnuplot.h

2 
	#LIBBENCHMARK_GNUPLOT_OPTIONS_INIT
–
gpo
 ) (gpo).
y_axis_sˇÀ_ty≥
 = 
LIBBENCHMARK_GNUPLOT_Y_AXIS_SCALE_TYPE_LINEAR
, (gpo).
width_ö_pixñs_£t_Êag
 = 
LOWERED
, (gpo).width_ö_pixñs_£t_Êag = 
	)
LOWERED

3 
	#LIBBENCHMARK_GNUPLOT_OPTIONS_SET_Y_AXIS_SCALE_TYPE_LOGARITHMIC
–
gpo
 ) (gpo).
y_axis_sˇÀ_ty≥
 = 
LIBBENCHMARK_GNUPLOT_Y_AXIS_SCALE_TYPE_LOGARITHMIC
;

	)

4 
	#LIBBENCHMARK_GNUPLOT_OPTIONS_SET_WIDTH_IN_PIXELS
–
gpo
, 
wù
 ) (gpo).
width_ö_pixñs
 = wù, (gpo).
width_ö_pixñs_£t_Êag
 = 
RAISED


	)

5 
	#LIBBENCHMARK_GNUPLOT_OPTIONS_SET_HEIGHT_IN_PIXELS
–
gpo
, 
wù
 ) (gpo).
height_ö_pixñs
 = wù, (gpo).
height_ö_pixñs_£t_Êag
 = 
RAISED


	)

8 
	elibbíchm¨k_gnu∂Ÿ_y_axis_sˇÀ_ty≥


10 
	mLIBBENCHMARK_GNUPLOT_Y_AXIS_SCALE_TYPE_LINEAR
,

11 
	mLIBBENCHMARK_GNUPLOT_Y_AXIS_SCALE_TYPE_LOGARITHMIC


15 
	slibbíchm¨k_gnu∂Ÿ_›ti⁄s


17 
Êag


18 
	mwidth_ö_pixñs_£t_Êag
,

19 
	mheight_ö_pixñs_£t_Êag
;

21 
libbíchm¨k_gnu∂Ÿ_y_axis_sˇÀ_ty≥


22 
	my_axis_sˇÀ_ty≥
;

24 
lfds711_∑l_uöt_t


25 
	mwidth_ö_pixñs
,

26 
	mheight_ö_pixñs
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_misc.h

2 
	#LIBBENCHMARK_MISC_VERSION_STRING
 "7.1.1"

	)

3 
	#LIBBENCHMARK_MISC_VERSION_INTEGER
 711

	)

6 
	elibbíchm¨k_misc_quîy


8 
	mLIBBENCHMARK_MISC_QUERY_GET_BUILD_AND_VERSION_STRING


13 * c⁄° 
libbíchm¨k_globÆs_d©a°ru˘uª_«mes
[],

14 * c⁄° 
libbíchm¨k_globÆs_bíchm¨k_«mes
[],

15 * c⁄° 
libbíchm¨k_globÆs_lock_«mes
[],

16 * c⁄° 
libbíchm¨k_globÆs_numa_mode_«mes
[];

18 
lfds711_∑l_uöt_t


19 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

22 
libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–
libbíchm¨k_t›ﬁogy_node_°©e
 **
äs
,

23 
libsh¨ed_mem‹y_°©e
 *
ms
 );

25 
libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

26 
libsh¨ed_mem‹y_°©e
 *
ms
,

27 
lfds711_∑l_uöt_t
 
logiˇl_¥o˚ss‹_numbî
,

28 
Êag
 
wödows_¥o˚ss‹_group_öu£_Êag
,

29 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
 );

31 
libbíchm¨k_misc_∑l_hñ≥r_add_sy°em_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

32 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 );

34 
libbíchm¨k_misc_∑l_hñ≥r_add_numa_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

35 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

36 
lfds711_∑l_uöt_t
 
numa_node_id
 );

38 
libbíchm¨k_misc_∑l_hñ≥r_add_sockë_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

39 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 );

41 
libbíchm¨k_misc_∑l_hñ≥r_add_physiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

42 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 );

44 
libbíchm¨k_misc_∑l_hñ≥r_add_ˇche_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

45 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

46 
lfds711_∑l_uöt_t
 
Àvñ
,

47 
libbíchm¨k_t›ﬁogy_node_ˇche_ty≥
 
ty≥
 );

49 
libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

50 
libsh¨ed_mem‹y_°©e
 *
ms
,

51 
lfds711_∑l_uöt_t
 
logiˇl_¥o˚ss‹_numbî
,

52 
Êag
 
wödows_¥o˚ss‹_group_öu£_Êag
,

53 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
 );

55 
libbíchm¨k_misc_quîy
–libbíchm¨k_misc_quîy 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer.h

2 #if–!
deföed
 
NULL
 )

3 
	#NULL
 (*Ë0

	)

6 #if–
deföed
 
__GNUC__
 )

8 
	#LIBLFDS_GCC_VERSION
 ( 
__GNUC__
 * 100 + 
__GNUC_MINOR__
 * 10 + 
__GNUC_PATCHLEVEL__
 )

	)

14 
libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_p›uœã_t›ﬁogy
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
 );

15 
libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_t›ﬁogy_node_˛ónup
–
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 );

17 
libbíchm¨k_∑l_¥öt_°rög
–c⁄° * c⁄° 
°rög
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_gcc_spinlock_atomic.h

2 #if–
deföed
 
__GNUC__
 && 
LIBLFDS_GCC_VERSION
 >= 473 )

5 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC
 1

	)

7 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_UNINITIALIZED
 0

	)

8 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_AVAILABLE
 1

	)

9 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_UNAVAILABLE
 2

	)

11 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_CREATE
–
∑l_lock_gcc_•ölock_©omic_°©e
 ) \

13 (
∑l_lock_gcc_•ölock_©omic_°©e
Ë
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_AVAILABLE
; \

14 
LFDS711_MISC_BARRIER_STORE
; \

15 
	`lfds711_misc_f‹˚_°‹e
(); \

16 }

	)

18 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_DESTROY
–
∑l_lock_gcc_•ölock_©omic_°©e
 ) \

20 (
∑l_lock_gcc_•ölock_©omic_°©e
Ë
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_UNAVAILABLE
; \

21 
LFDS711_MISC_BARRIER_STORE
; \

22 
	`lfds711_misc_f‹˚_°‹e
(); \

23 }

	)

25 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
∑l_lock_gcc_•ölock_©omic_°©e
 ) \

27 
lfds711_∑l_uöt_t
 
ex≥˘ed
 = (lfds711_∑l_uöt_tË
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_AVAILABLE
; \

28  0 =
	`__©omic_com∑ª_exch™ge_n
(&(
∑l_lock_gcc_•ölock_©omic_°©e
), &
ex≥˘ed
, (
lfds711_∑l_uöt_t
Ë
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_UNAVAILABLE
, 1, 
__ATOMIC_RELAXED
, __ATOMIC_RELAXEDËËex≥˘ed = (lfds711_∑l_uöt_tË
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_AVAILABLE
; \

29 }

	)

31 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
∑l_lock_gcc_•ölock_©omic_°©e
 ) 
	`__©omic_exch™ge_n
–&’Æ_lock_gcc_•ölock_©omic_°©e), (*Ë
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_AVAILABLE
, 
__ATOMIC_RELAXED
 )

	)

34 
lfds711_∑l_uöt_t
 
	t∑l_lock_gcc_•ölock_©omic_°©e
;

43 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC
 )

46 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC
 0

	)

48 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_CREATE
–
∑l_lock_gcc_•ölock_©omic_°©e
 )

	)

49 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_DESTROY
–
∑l_lock_gcc_•ölock_©omic_°©e
 )

	)

50 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
∑l_lock_gcc_•ölock_©omic_°©e
 )

	)

51 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
∑l_lock_gcc_•ölock_©omic_°©e
 )

	)

54 * 
	t∑l_lock_gcc_•ölock_©omic_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_gcc_spinlock_sync.h

2 #if–
deföed
 
__GNUC__
 && 
LIBLFDS_GCC_VERSION
 >= 412 )

5 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC
 1

	)

7 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_UNINITIALIZED
 0

	)

8 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_AVAILABLE
 1

	)

9 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_UNAVAILABLE
 2

	)

11 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_CREATE
–
∑l_lock_gcc_•ölock_sync_°©e
 ) \

13 (
∑l_lock_gcc_•ölock_sync_°©e
Ë
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_AVAILABLE
; \

14 
LFDS711_MISC_BARRIER_STORE
; \

15 
	`lfds711_misc_f‹˚_°‹e
(); \

16 }

	)

18 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_DESTROY
–
∑l_lock_gcc_•ölock_sync_°©e
 ) \

20 (
∑l_lock_gcc_•ölock_sync_°©e
Ë
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_UNAVAILABLE
; \

21 
LFDS711_MISC_BARRIER_STORE
; \

22 
	`lfds711_misc_f‹˚_°‹e
(); \

23 }

	)

25 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
∑l_lock_gcc_•ölock_sync_°©e
 )  
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_AVAILABLE
 !
	`__sync_vÆ_com∑ª_™d_sw≠
(&’Æ_lock_gcc_•ölock_sync_°©e), (
lfds711_∑l_uöt_t
ËLIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_AVAILABLE, (lfds711_∑l_uöt_tË
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_UNAVAILABLE
Ë)

	)

27 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
∑l_lock_gcc_•ölock_sync_°©e
 ) 
	`__sync_lock_ã°_™d_£t
–&’Æ_lock_gcc_•ölock_sync_°©e), 
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_AVAILABLE
 )

	)

30 
lfds711_∑l_uöt_t
 
	t∑l_lock_gcc_•ölock_sync_°©e
;

39 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC
 )

42 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC
 0

	)

44 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_CREATE
–
∑l_lock_gcc_•ölock_©omic_sync
 )

	)

45 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_DESTROY
–
∑l_lock_gcc_•ölock_©omic_sync
 )

	)

46 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
∑l_lock_gcc_•ölock_©omic_sync
 )

	)

47 
	#LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
∑l_lock_gcc_•ölock_©omic_sync
 )

	)

50 * 
	t∑l_lock_gcc_•ölock_sync_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_msvc_spinlock.h

2 #if–
deföed
 
_MSC_VER
 && _MSC_VER >= 1400 )

11 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK
 1

	)

13 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_UNINITIALIZED
 0

	)

14 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_AVAILABLE
 1

	)

15 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_UNAVAILABLE
 2

	)

17 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_CREATE
–
∑l_lock_msvc_•ölock_°©e
 ) \

19 
∑l_lock_msvc_•ölock_°©e
 = 
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_AVAILABLE
; \

20 
LFDS711_MISC_BARRIER_STORE
; \

21 
	`lfds711_misc_f‹˚_°‹e
(); \

22 }

	)

24 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_DESTROY
–
∑l_lock_msvc_•ölock_°©e
 ) \

26 
∑l_lock_msvc_•ölock_°©e
 = 
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_UNAVAILABLE
; \

27 
LFDS711_MISC_BARRIER_STORE
; \

28 
	`lfds711_misc_f‹˚_°‹e
(); \

29 }

	)

35 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
∑l_lock_msvc_•ölock_°©e
 ) \

38 
ªsu…
; \

40 
lfds711_∑l_uöt_t
 \

41 
com∑ª
; \

45 
com∑ª
 = 
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_AVAILABLE
; \

46 
	`LFDS711_PAL_ATOMIC_CAS
–&(
∑l_lock_msvc_•ölock_°©e
), &
com∑ª
, 
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_UNAVAILABLE
, 
LFDS711_MISC_CAS_STRENGTH_STRONG
, 
ªsu…
 ); \

48  
ªsu…
 == 0 ); \

49 }

	)

51 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
∑l_lock_msvc_•ölock_°©e
 ) \

53 
	`LFDS711_PAL_ATOMIC_SET
–&(
∑l_lock_msvc_•ölock_°©e
), 
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_AVAILABLE
 ); \

54 }

	)

57 
lfds711_∑l_uöt_t
 
	t∑l_lock_msvc_•ölock_°©e
;

66 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK
 )

69 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK
 0

	)

71 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_CREATE
–
∑l_lock_msvc_•ölock_°©e
 )

	)

72 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_DESTROY
–
∑l_lock_msvc_•ölock_°©e
 )

	)

73 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
∑l_lock_msvc_•ölock_°©e
 )

	)

74 
	#LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
∑l_lock_msvc_•ölock_°©e
 )

	)

77 * 
	t∑l_lock_msvc_•ölock_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_pthread_mutex.h

2 #if–
deföed
 
_POSIX_THREADS
 && _POSIX_THREADS >0 && !deföed 
KERNEL_MODE
 )

14 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX
 1

	)

16 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_CREATE
–
∑l_lock_±hªad_muãx_°©e
 ) 
	`±hªad_muãx_öô
–&∑l_lock_±hªad_muãx_°©e, 
NULL
 )

	)

17 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_DESTROY
–
∑l_lock_±hªad_muãx_°©e
 ) 
	`±hªad_muãx_de°roy
–&∑l_lock_±hªad_muãx_°©ê)

	)

18 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
∑l_lock_±hªad_muãx_°©e
 ) 
	`±hªad_muãx_lock
–&∑l_lock_±hªad_muãx_°©ê)

	)

19 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
∑l_lock_±hªad_muãx_°©e
 ) 
	`±hªad_muãx_u∆ock
–&∑l_lock_±hªad_muãx_°©ê)

	)

22 
±hªad_muãx_t
 
	t∑l_lock_±hªad_muãx_°©e
;

31 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX
 )

34 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX
 0

	)

36 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_CREATE
–
∑l_lock_±hªad_muãx_°©e
 )

	)

37 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_DESTROY
–
∑l_lock_±hªad_muãx_°©e
 )

	)

38 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
∑l_lock_±hªad_muãx_°©e
 )

	)

39 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
∑l_lock_±hªad_muãx_°©e
 )

	)

42 * 
	t∑l_lock_±hªad_muãx_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_pthread_rwlock.h

2 #if–
deföed
 
_POSIX_THREADS
 && _POSIX_THREADS >0 && !deföed 
KERNEL_MODE
 )

14 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK
 1

	)

16 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_CREATE
–
∑l_lock_±hªad_rwlock_°©e
 ) 
	`±hªad_rwlock_öô
–&∑l_lock_±hªad_rwlock_°©e, 
NULL
 )

	)

17 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_DESTROY
–
∑l_lock_±hªad_rwlock_°©e
 ) 
	`±hªad_rwlock_de°roy
–&∑l_lock_±hªad_rwlock_°©ê)

	)

18 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_READ
–
∑l_lock_±hªad_rwlock_°©e
 ) 
	`±hªad_rwlock_rdlock
–&∑l_lock_±hªad_rwlock_°©ê)

	)

19 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
–
∑l_lock_±hªad_rwlock_°©e
 ) 
	`±hªad_rwlock_wæock
–&∑l_lock_±hªad_rwlock_°©ê)

	)

20 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
∑l_lock_±hªad_rwlock_°©e
 ) 
	`±hªad_rwlock_u∆ock
–&∑l_lock_±hªad_rwlock_°©ê)

	)

23 
±hªad_rwlock_t
 
	t∑l_lock_±hªad_rwlock_°©e
;

32 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK
 )

35 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK
 0

	)

37 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_CREATE
–
∑l_lock_±hªad_rwlock_°©e
 )

	)

38 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_DESTROY
–
∑l_lock_±hªad_rwlock_°©e
 )

	)

39 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_READ
–
∑l_lock_±hªad_rwlock_°©e
 )

	)

40 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
–
∑l_lock_±hªad_rwlock_°©e
 )

	)

41 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
∑l_lock_±hªad_rwlock_°©e
 )

	)

44 * 
	t∑l_lock_±hªad_rwlock_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_pthread_spinlock_process_private.h

2 #if–
deföed
 
_POSIX_SPIN_LOCKS
 && _POSIX_SPIN_LOCKS >0 && !deföed 
KERNEL_MODE
 )

14 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE
 1

	)

16 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_CREATE
–
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 ) 
	`±hªad_•ö_öô
–&∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e, 
PTHREAD_PROCESS_PRIVATE
 )

	)

17 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_DESTROY
–
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 ) 
	`±hªad_•ö_de°roy
–&∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©ê)

	)

18 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 ) 
	`±hªad_•ö_lock
–&∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©ê)

	)

19 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 ) 
	`±hªad_•ö_u∆ock
–&∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©ê)

	)

22 
±hªad_•ölock_t
 
	t∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
;

31 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE
 )

34 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE
 0

	)

36 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_CREATE
–
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 )

	)

37 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_DESTROY
–
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 )

	)

38 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 )

	)

39 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 )

	)

42 * 
	t∑l_lock_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_pthread_spinlock_process_shared.h

2 #if–
deföed
 
_POSIX_SPIN_LOCKS
 && _POSIX_SPIN_LOCKS >0 && !deföed 
KERNEL_MODE
 )

14 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED
 1

	)

16 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_CREATE
–
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 ) 
	`±hªad_•ö_öô
–&∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e, 
PTHREAD_PROCESS_SHARED
 );

	)

17 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_DESTROY
–
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 ) 
	`±hªad_•ö_de°roy
–&∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©ê);

	)

18 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 ) 
	`±hªad_•ö_lock
–&∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©ê);

	)

19 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 ) 
	`±hªad_•ö_u∆ock
–&∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©ê);

	)

22 
±hªad_•ölock_t
 
	t∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
;

31 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED
 )

34 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED
 0

	)

36 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_CREATE
–
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 )

	)

37 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_DESTROY
–
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 )

	)

38 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 )

	)

39 
	#LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 )

	)

42 * 
	t∑l_lock_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_windows_critical_section.h

2 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && !deföed 
KERNEL_MODE
 )

15 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION
 1

	)

17 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_CREATE
–
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 ) 
	`InôülizeCrôiˇlSe˘i⁄
–&∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©ê)

	)

18 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_DESTROY
–
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 ) 
	`DñëeCrôiˇlSe˘i⁄
–&∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©ê)

	)

19 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 ) 
	`E¡îCrôiˇlSe˘i⁄
–&∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©ê)

	)

20 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 ) 
	`LóveCrôiˇlSe˘i⁄
–&∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©ê)

	)

23 
CRITICAL_SECTION
 
	t∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
;

32 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION
 )

35 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION
 0

	)

37 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_CREATE
–
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 )

	)

38 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_DESTROY
–
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 )

	)

39 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 )

	)

40 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
 )

	)

43 * 
	t∑l_lock_wödows_¸ôiˇl_£˘i⁄_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_windows_mutex.h

2 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && !deföed 
KERNEL_MODE
 )

15 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX
 1

	)

17 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_CREATE
–
∑l_lock_wödows_muãx_°©e
 )ÖÆ_lock_wödows_muãx_°©ê
	`Cª©eMuãx
–
NULL
, 
FALSE
, NULL )

	)

18 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_DESTROY
–
∑l_lock_wödows_muãx_°©e
 ) 
	`Clo£H™dÀ
–∑l_lock_wödows_muãx_°©ê)

	)

19 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
∑l_lock_wödows_muãx_°©e
 ) 
	`WaôF‹SögÀObje˘
–∑l_lock_wödows_muãx_°©e, 
INFINITE
 )

	)

20 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
∑l_lock_wödows_muãx_°©e
 ) 
	`Rñó£Muãx
–∑l_lock_wödows_muãx_°©ê)

	)

23 
HANDLE
 
	t∑l_lock_wödows_muãx_°©e
;

32 #if–!
deföed
 
LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX
 )

35 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX
 0

	)

37 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_CREATE
–
∑l_lock_wödows_muãx_°©e
 )

	)

38 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_DESTROY
–
∑l_lock_wödows_muãx_°©e
 )

	)

39 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
∑l_lock_wödows_muãx_°©e
 )

	)

40 
	#LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
∑l_lock_wödows_muãx_°©e
 )

	)

43 * 
	t∑l_lock_wödows_muãx_°©e
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_operating_system.h

2 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 )

4 #ifde‡
LIBBENCHMARK_PAL_OPERATING_SYSTEM


5 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
. 
ö
 "libbenchmark_porting_abstraction_layer_operating_system.h".

8 
	#LIBBENCHMARK_PAL_OPERATING_SYSTEM


	)

10 
	#LIBBENCHMARK_PAL_OS_STRING
 "Wödows"

	)

12 
	~<wödows.h
>

14 
	#LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–
poöãr_to_time_unôs_≥r_£c⁄d
 ) 
	`QuîyPîf‹m™˚Fªquícy
–(
LARGE_INTEGER
 *)’oöãr_to_time_unôs_≥r_£c⁄dË)

	)

16 
	#LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–
poöãr_to_time
 ) 
	`QuîyPîf‹m™˚Cou¡î
–(
LARGE_INTEGER
 *)’oöãr_to_timeË);

	)

25 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 )

27 #ifde‡
LIBBENCHMARK_PAL_OPERATING_SYSTEM


28 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
. 
ö
 "libbenchmark_porting_abstraction_layer_operating_system.h".

31 
	#LIBBENCHMARK_PAL_OPERATING_SYSTEM


	)

33 
	#LIBBENCHMARK_PAL_OS_STRING
 "Wödows"

	)

35 
	~<wdm.h
>

37 
	#LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–
poöãr_to_time_unôs_≥r_£c⁄d
 ) 
	`KeQuîyPîf‹m™˚Cou¡î
–(
LARGE_INTEGER
 *)’oöãr_to_time_unôs_≥r_£c⁄dË)

	)

39 
	#LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–
poöãr_to_time
 ) *–(
LARGE_INTEGER
 *Ëpoöãr_to_timêË
	`KeQuîyPîf‹m™˚Cou¡î
–
NULL
 );

	)

48 #if–
deföed
 
__löux__
 && !deföed 
KERNEL_MODE
 )

50 #ifde‡
LIBBENCHMARK_PAL_OPERATING_SYSTEM


51 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
. 
ö
 "libbenchmark_porting_abstraction_layer_operating_system.h".

54 
	#LIBBENCHMARK_PAL_OPERATING_SYSTEM


	)

56 
	#LIBBENCHMARK_PAL_OS_STRING
 "Löux"

	)

58 
	#_GNU_SOURCE


	)

60 
	~<uni°d.h
>

61 
	~<°d¨g.h
>

62 
	~<°dio.h
>

64 #if–
deföed
 
_POSIX_THREADS
 && 
_POSIX_TIMERS
 >0 && 
_POSIX_MONOTONIC_CLOCK
 >= 0 )

65 
	#LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–
poöãr_to_time_unôs_≥r_£c⁄d
 ) *’oöãr_to_time_unôs_≥r_£c⁄dË
NUMBER_OF_NANOSECONDS_IN_ONE_SECOND


	)

67 
	#LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–
poöãr_to_time
 ) \

69 
time•ec
 
ç
; \

70 
	`˛ock_gëtime
–
CLOCK_MONOTONIC_RAW
, &
ç
 ); \

71 *(
poöãr_to_time
Ë
ç
.
tv_£c
 * 
NUMBER_OF_NANOSECONDS_IN_ONE_SECOND
 +Åp.
tv_n£c
; \

72 }

	)

74 #îr‹ 
Löux
 
wôhout
 
high
 
ªsﬁuti⁄
 
timîs
.

84 #if–
deföed
 
__löux__
 && deföed 
KERNEL_MODE
 )

86 #ifde‡
LIBBENCHMARK_PAL_OPERATING_SYSTEM


87 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
. 
ö
 "libbenchmark_porting_abstraction_layer_operating_system.h".

90 
	#LIBBENCHMARK_PAL_OPERATING_SYSTEM


	)

92 
	#LIBBENCHMARK_PAL_OS_STRING
 "Löux"

	)

94 
	#_GNU_SOURCE


	)

96 
	~<löux/moduÀ.h
>

104 #îr‹ 
No
 
high
 
ªsﬁuti⁄
 
time
 
ab°ø˘i⁄
 
the
 
Löux
 
kî√l
.

113 #if–!
deföed
 
LIBBENCHMARK_PAL_OPERATING_SYSTEM
 )

115 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 "libbenchmark_porting_abstraction_layer_operating_system.h".

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_prng.h

2 
	#LIBBENCHMARK_PRNG_MAX
 ( (
lfds711_∑l_uöt_t
Ë-1 )

	)

5 #if–
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 4 )

7 
	#LIBBENCHMARK_PRNG_INIT
–
¥ng_°©e
, 
£ed
 ) (¥ng_°©e).
íå›y
 = (£ed), (¥ng_°©e).íå›y = (’∫g_°©e).íå›y ^ (’∫g_°©e).íå›y >> 16)Ë* 0x85ebˇ6bUL, (¥ng_°©e).íå›y = (’∫g_°©e).íå›y ^ (’∫g_°©e).íå›y >> 13)Ë* 0xc2b2´35UL, (¥ng_°©e).íå›y = (’∫g_°©e).íå›y ^ (’∫g_°©e).íå›y >> 16))

	)

10 
	#LIBBENCHMARK_PRNG_GENERATE
–
¥ng_°©e
, 
øndom_vÆue
 ) \

12 (
øndom_vÆue
Ë–(
¥ng_°©e
).
íå›y
 += 0x9E3779B9UL ); \

13 (
øndom_vÆue
) = ((random_value) ^ ((random_value) >> 16)) * 0x85ebca6bUL; \

14 (
øndom_vÆue
) = ((random_value) ^ ((random_value) >> 13)) * 0xc2b2ae35UL; \

15 (
øndom_vÆue
) = (random_value ^ (random_value >> 16)); \

16 }

	)

18 
	#LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
øndom_vÆue
 ) \

20 (
øndom_vÆue
) ^= ((random_value) >> 16); \

21 (
øndom_vÆue
) *= 0x85ebca6b; \

22 (
øndom_vÆue
) ^= ((random_value) >> 13); \

23 (
øndom_vÆue
) *= 0xc2b2ae35; \

24 (
øndom_vÆue
) ^= ((random_value) >> 16); \

25 }

	)

29 #if–
LFDS711_PAL_ALIGN_SINGLE_POINTER
 == 8 )

31 
	#LIBBENCHMARK_PRNG_INIT
–
¥ng_°©e
, 
£ed
 ) (¥ng_°©e).
íå›y
 = (£ed), (¥ng_°©e).íå›y = (’∫g_°©e).íå›y ^ (’∫g_°©e).íå›y >> 33)Ë* 0xff51afd7ed558ccdULL, (¥ng_°©e).íå›y = (’∫g_°©e).íå›y ^ (’∫g_°©e).íå›y >> 33)Ë* 0xc4˚b9„1a85ec53ULL, (¥ng_°©e).íå›y = (’∫g_°©e).íå›y ^ (’∫g_°©e).íå›y >> 33))

	)

34 
	#LIBBENCHMARK_PRNG_GENERATE
–
¥ng_°©e
, 
øndom_vÆue
 ) \

36 (
øndom_vÆue
Ë–(
¥ng_°©e
).
íå›y
 += 0x9E3779B97F4A7C15ULL ); \

37 (
øndom_vÆue
) = ((random_value) ^ ((random_value) >> 30)) * 0xBF58476D1CE4E5B9ULL; \

38 (
øndom_vÆue
) = ((random_value) ^ ((random_value) >> 27)) * 0x94D049BB133111EBULL; \

39 (
øndom_vÆue
) = (random_value ^ (random_value >> 31)); \

40 }

	)

42 
	#LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
øndom_vÆue
 ) \

44 (
øndom_vÆue
) ^= (random_value) >> 33; \

45 (
øndom_vÆue
) *= 0xff51afd7ed558ccdULL; \

46 (
øndom_vÆue
) ^= (random_value) >> 33; \

47 (
øndom_vÆue
) *= 0xc4ceb9fe1a85ec53ULL; \

48 (
øndom_vÆue
) ^= (random_value) >> 33; \

49 }

	)

55 
	slibbíchm¨k_¥ng_°©e


57 
lfds711_∑l_uöt_t


58 
	míå›y
;

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_results.h

6 
	slibbíchm¨k_ªsu…


8 
libbíchm¨k_bíchm¨k_id


9 
	mbíchm¨k_id
;

11 
libbíchm¨k_d©a°ru˘uª_id


12 
	md©a°ru˘uª_id
;

14 
libbíchm¨k_lock_id


15 
	mlock_id
;

17 
libbíchm¨k_t›ﬁogy_numa_mode


18 
	mnuma_mode
;

20 
lfds711_∑l_uöt_t


21 
	mªsu…
;

23 
lfds711_båì_au_ñemít


24 
	mbaue
;

26 
lfds711_li°_aso_°©e


27 *
	mÕ£t
;

29 
libbíchm¨k_t›ﬁogy_node_°©e


30 
	mäs
;

33 
	slibbíchm¨k_ªsu…s_°©e


35 
libsh¨ed_mem‹y_°©e


36 *
	mms
;

38 
lfds711_båì_au_°©e


39 
	mªsu…s_åì
;

43 
libbíchm¨k_ªsu…s_öô
–
libbíchm¨k_ªsu…s_°©e
 *
rs
,

44 
libsh¨ed_mem‹y_°©e
 *
ms
 );

45 
libbíchm¨k_ªsu…s_˛ónup
–
libbíchm¨k_ªsu…s_°©e
 *
rs
 );

47 
libbíchm¨k_ªsu…s_put_ªsu…
–
libbíchm¨k_ªsu…s_°©e
 *
rs
,

48 
libbíchm¨k_d©a°ru˘uª_id
 
d©a°ru˘uª_id
,

49 
libbíchm¨k_bíchm¨k_id
 
bíchm¨k_id
,

50 
libbíchm¨k_lock_id
 
lock_id
,

51 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

52 
lfds711_li°_aso_°©e
 *
Õ£t
,

53 
lfds711_∑l_uöt_t
 
logiˇl_¥o˚ss‹_numbî
,

54 
lfds711_∑l_uöt_t
 
wödows_logiˇl_¥o˚ss‹_group_numbî
,

55 
lfds711_∑l_uöt_t
 
ªsu…
 );

57 
libbíchm¨k_ªsu…s_gë_ªsu…
–
libbíchm¨k_ªsu…s_°©e
 *
rs
,

58 
libbíchm¨k_d©a°ru˘uª_id
 
d©a°ru˘uª_id
,

59 
libbíchm¨k_bíchm¨k_id
 
bíchm¨k_id
,

60 
libbíchm¨k_lock_id
 
lock_id
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
lfds711_li°_aso_°©e
 *
Õ£t
,

63 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

64 
lfds711_∑l_uöt_t
 *
ªsu…
 );

66 
libbíchm¨k_ªsu…_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_threadset.h

2 
	#LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 ) (libbíchm¨k_thªad£t_≥r_thªad_°©e).
u£rs_≥r_thªad_°©e


	)

3 
	#LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 ) (libbíchm¨k_thªad£t_≥r_thªad_°©e).
numa_node_°©e
->
u£rs_≥r_numa_°©e


	)

4 
	#LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 ) (libbíchm¨k_thªad£t_≥r_thªad_°©e).
thªad£t_°©e
->
u£rs_thªad£t_°©e


	)

7 
	slibbíchm¨k_thªad£t_≥r_thªad_°©e


9 
Êag
 volatile

10 
	mthªad_ªady_Êag
,

11 *
	mthªad£t_°¨t_Êag
;

13 
libsh¨ed_∑l_thªad_h™dÀ_t


14 
	mthªad_h™dÀ
;

16 
lfds711_li°_asu_ñemít


17 
	mœsue
;

19 
libbíchm¨k_t›ﬁogy_node_°©e


20 *
	mäs_Õ
;

22 
libbíchm¨k_thªad£t_≥r_numa_°©e


23 *
	mnuma_node_°©e
;

25 
libbíchm¨k_thªad£t_°©e


26 *
	mthªad£t_°©e
;

28 
libsh¨ed_∑l_thªad_öfo


29 
	m±i
;

32 *
	mu£rs_≥r_thªad_°©e
;

35 
	slibbíchm¨k_thªad£t_≥r_numa_°©e


37 
lfds711_∑l_uöt_t


38 
	mnuma_node_id
;

40 
lfds711_li°_asu_ñemít


41 
	mœsue
;

44 *
	mu£rs_≥r_numa_°©e
;

47 
	slibbíchm¨k_thªad£t_°©e


49 
Êag
 volatile

50 
	mthªad£t_°¨t_Êag
;

52 
	mlibsh¨ed_∑l_thªad_ªtu∫_t


53 (
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 *
	mthªad_fun˘i⁄
)–*
	mthªad_u£r_°©e
 );

55 
lfds711_li°_asu_°©e


56 
	mli°_of_≥r_numa_°©es
,

57 
	mli°_of_≥r_thªad_°©es
;

60 *
	mu£rs_thªad£t_°©e
;

64 
libbíchm¨k_thªad£t_öô
–
libbíchm¨k_thªad£t_°©e
 *
t£ts
,

65 
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

66 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

67 
libsh¨ed_mem‹y_°©e
 *
ms
,

68 
	$libsh¨ed_∑l_thªad_ªtu∫_t
 (
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 *
thªad_fun˘i⁄
)–*
thªad_u£r_°©e
 ),

69 *
u£rs_thªad£t_°©e
 );

70 
	`libbíchm¨k_thªad£t_˛ónup
–
libbíchm¨k_thªad£t_°©e
 *
ts
 );

72 
	`libbíchm¨k_thªad£t_run
–
libbíchm¨k_thªad£t_°©e
 *
t£ts
 );

74 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *
ts
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_topology.h

2 
	elibbíchm¨k_t›ﬁogy_°rög_f‹m©


4 
	mLIBBENCHMARK_TOPOLOGY_STRING_FORMAT_STDOUT
,

5 
	mLIBBENCHMARK_TOPOLOGY_STRING_FORMAT_GNUPLOT


8 
	elibbíchm¨k_t›ﬁogy_numa_mode


10 
	mLIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
,

11 
	mLIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
,

12 
	mLIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED


15 
	elibbíchm¨k_t›ﬁogy_quîy


17 
	mLIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMBER_OF_NODE_TYPE
,

18 
	mLIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR


22 
	slibbíchm¨k_t›ﬁogy_°©e


25 
	mlöe_width
;

27 
lfds711_båì_au_°©e


28 
	mÕ_¥ötög_off£t_lookup_åì
,

29 
	mt›ﬁogy_åì
;

32 
	slibbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t


34 
lfds711_li°_aso_°©e


35 
	mlogiˇl_¥o˚ss‹s
;

37 
lfds711_li°_asu_ñemít


38 
	mœsue
;

41 
	slibbíchm¨k_t›ﬁogy_ôî©e_°©e


43 
libbíchm¨k_t›ﬁogy_node_ty≥


44 
	mty≥
;

46 
lfds711_båì_au_ñemít


47 *
	mbaue
;

50 
	slibbíchm¨k_t›ﬁogy_numa_node


52 
libbíchm¨k_t›ﬁogy_numa_mode


53 
	mmode
;

55 
lfds711_li°_asu_ñemít


56 
	mœsue
;

60 
libbíchm¨k_t›ﬁogy_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
 );

61 
libbíchm¨k_t›ﬁogy_˛ónup
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
 );

63 
libbíchm¨k_t›ﬁogy_ö£π
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 );

65 
libbíchm¨k_t›ﬁogy_com∑ª_logiˇl_¥o˚ss‹_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

67 
libbíchm¨k_t›ﬁogy_gíî©e_dedu∂iˇãd_logiˇl_¥o˚ss‹_£ts
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 );

69 
libbíchm¨k_t›ﬁogy_gíî©e_numa_modes_li°
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
numa_modes_li°
 );

71 *
libbíchm¨k_t›ﬁogy_gíî©e_°rög
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_°rög_f‹m©
 
f‹m©
 );

72 *
libbíchm¨k_t›ﬁogy_gíî©e_Õ£t_°rög
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_aso_°©e
 *
Õ£t
 );

74 
libbíchm¨k_t›ﬁogy_com∑ª_Õ_¥ötög_off£ts_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

75 
libbíchm¨k_t›ﬁogy_com∑ª_node_agaö°_Õ_¥ötög_off£t_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

77 
libbíchm¨k_t›ﬁogy_ôî©e_öô
–
libbíchm¨k_t›ﬁogy_ôî©e_°©e
 *
tis
, 
libbíchm¨k_t›ﬁogy_node_ty≥
 
ty≥
 );

78 
libbíchm¨k_t›ﬁogy_ôî©e
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libbíchm¨k_t›ﬁogy_ôî©e_°©e
 *
tis
, 
libbíchm¨k_t›ﬁogy_node_°©e
 **
äs
 );

80 
libbíchm¨k_t›ﬁogy_quîy
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, libbíchm¨k_t›ﬁogy_quîy 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 );

	@test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_topology_node.h

2 
	#LIBBENCHMARK_TOPOLOGY_NODE_GET_TYPE
–
äs
, 
node_ty≥
 ) (äs).
ty≥


	)

3 
	#LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–
äs
, 
node_ty≥
 ) (äs).
ty≥
 = (node_ty≥)

	)

5 
	#LIBBENCHMARK_TOPOLOGY_NODE_GET_CACHE_TYPE
–
äs
, 
ˇche_ty≥
 ) (äs).
exãnded_node_öfo
.
ˇche
.
ty≥


	)

6 
	#LIBBENCHMARK_TOPOLOGY_NODE_SET_CACHE_TYPE
–
äs
, 
ˇche_ty≥
 ) (äs).
exãnded_node_öfo
.
ˇche
.
ty≥
 = (ˇche_ty≥)

	)

8 
	#LIBBENCHMARK_TOPOLOGY_NODE_GET_CACHE_LEVEL
–
äs
, 
ˇche_Àvñ
 ) (äs).
exãnded_node_öfo
.
ˇche
.
Àvñ


	)

9 
	#LIBBENCHMARK_TOPOLOGY_NODE_SET_CACHE_LEVEL
–
äs
, 
ˇche_Àvñ
 ) (äs).
exãnded_node_öfo
.
ˇche
.
Àvñ
 = (ˇche_Àvñ)

	)

11 
	#LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
–
äs
 ) (äs).
exãnded_node_öfo
.
numa
.
id


	)

12 
	#LIBBENCHMARK_TOPOLOGY_NODE_SET_NUMA_ID
–
äs
, 
numa_node_id
 ) (äs).
exãnded_node_öfo
.
numa
.
id
 = (numa_node_id)

	)

14 
	#LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–
äs
 ) (äs).
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî


	)

15 
	#LIBBENCHMARK_TOPOLOGY_NODE_SET_LOGICAL_PROCESSOR_NUMBER
–
äs
, 
¥o˚ss‹_numbî
 ) (äs).
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 = (¥o˚ss‹_numbî)

	)

17 
	#LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–
äs
 ) (äs).
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî


	)

18 
	#LIBBENCHMARK_TOPOLOGY_NODE_SET_WINDOWS_GROUP_NUMBER
–
äs
, 
wö_group_numbî
 ) (äs).
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 = (wö_group_numbî), (äs).exãnded_node_öfo.logiˇl_¥o˚ss‹.
wödows_group_numbî_£t_Êag
 = 
RAISED


	)

19 
	#LIBBENCHMARK_TOPOLOGY_NODE_UNSET_WINDOWS_GROUP_NUMBER
–
äs
 ) 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_WINDOWS_GROUP_NUMBER
–äs, 0 ), (äs).
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî_£t_Êag
 = 
LOWERED


	)

20 
	#LIBBENCHMARK_TOPOLOGY_NODE_IS_WINDOWS_GROUP_NUMBER
–
äs
 ) (äs).
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî_£t_Êag


	)

23 
	elibbíchm¨k_t›ﬁogy_node_ty≥


25 
	mLIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
,

26 
	mLIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
,

27 
	mLIBBENCHMARK_TOPOLOGY_NODE_TYPE_PHYSICAL_PROCESSOR
,

28 
	mLIBBENCHMARK_TOPOLOGY_NODE_TYPE_SOCKET
,

29 
	mLIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
,

30 
	mLIBBENCHMARK_TOPOLOGY_NODE_TYPE_SYSTEM


33 
	elibbíchm¨k_t›ﬁogy_node_ˇche_ty≥


35 
	mLIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_DATA
,

36 
	mLIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_INSTRUCTION
,

37 
	mLIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_UNIFIED
,

38 
	mLIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_COUNT


41 
	elibbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t_ícodög


43 
	mLIBBENCHMARK_TOPOLOGY_LOGICAL_PROCESSOR_SET_ENCODING_BITMASK
,

44 
	mLIBBENCHMARK_TOPOLOGY_LOGICAL_PROCESSOR_SET_ENCODING_PATH_TO_CSV_HEX
,

45 
	mLIBBENCHMARK_TOPOLOGY_LOGICAL_PROCESSOR_SET_ENCODING_SINGLE_LOGICAL_PROCESSOR


49 
	slibbíchm¨k_t›ﬁogy_node_ˇche


51 
libbíchm¨k_t›ﬁogy_node_ˇche_ty≥


52 
	mty≥
;

54 
lfds711_∑l_uöt_t


55 
	mÀvñ
;

58 
	slibbíchm¨k_t›ﬁogy_node_logiˇl_¥o˚ss‹


60 
Êag


61 
	mwödows_group_numbî_£t_Êag
;

63 
lfds711_∑l_uöt_t


64 
	mnumbî
,

65 
	mwödows_group_numbî
;

68 
	slibbíchm¨k_t›ﬁogy_node_numa


70 
lfds711_∑l_uöt_t


71 
	mid
;

75 
	ulibbíchm¨k_t›ﬁogy_node_exãnded_öfo


77 
libbíchm¨k_t›ﬁogy_node_ˇche


78 
	mˇche
;

80 
libbíchm¨k_t›ﬁogy_node_logiˇl_¥o˚ss‹


81 
	mlogiˇl_¥o˚ss‹
;

83 
libbíchm¨k_t›ﬁogy_node_numa


84 
	mnuma
;

87 
	slibbíchm¨k_t›ﬁogy_node_°©e


89 
libbíchm¨k_t›ﬁogy_node_ty≥


90 
	mty≥
;

92 
lfds711_båì_au_ñemít


93 
	mbaue
;

95 
lfds711_li°_aso_ñemít


96 
	mœs€
;

98 
lfds711_li°_aso_°©e


99 
	mlogiˇl_¥o˚ss‹_chûdªn
;

101 
libbíchm¨k_t›ﬁogy_node_exãnded_öfo


102 
	mexãnded_node_öfo
;

106 
libbíchm¨k_t›ﬁogy_node_öô
–
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 );

107 
libbíchm¨k_t›ﬁogy_node_˛ónup
–
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
, (*
ñemít_˛ónup_ˇŒback
)(
lfds711_li°_aso_°©e
 *
œsos
, 
lfds711_li°_aso_ñemít
 *
œs€
) );

109 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

110 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

112 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_Õ£ts_fun˘i⁄
–
lfds711_li°_aso_°©e
 *
Õ£t_⁄e
, lfds711_li°_aso_°©ê*
Õ£t_two
 );

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkinstance/libbenchmark_benchmarkinstance_cleanup.c

2 
	~"libbíchm¨k_bíchm¨kö°™˚_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libbíchm¨k_bíchm¨kö°™˚_˛ónup
–
libbíchm¨k_bíchm¨kö°™˚_°©e
 *
bs
 )

13 
	`LFDS711_PAL_ASSERT
–
bs
 !
NULL
 );

18 
	}
}

20 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkinstance/libbenchmark_benchmarkinstance_init.c

2 
	~"libbíchm¨k_bíchm¨kö°™˚_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨kö°™˚_öô
–
libbíchm¨k_bíchm¨kö°™˚_°©e
 *
bs
,

10 
libbíchm¨k_d©a°ru˘uª_id
 
d©a°ru˘uª_id
,

11 
libbíchm¨k_bíchm¨k_id
 
bíchm¨k_id
,

12 
libbíchm¨k_lock_id
 
lock_id
,

13 
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

14 (*
öô_fun˘i⁄
)–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

15 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

16 
libsh¨ed_mem‹y_°©e
 *
ms
,

17 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
,

18 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 ),

19 (*
˛ónup_fun˘i⁄
)–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

20 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_node
,

21 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

22 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 ) )

24 
	`LFDS711_PAL_ASSERT
–
bs
 !
NULL
 );

28 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

29 
	`LFDS711_PAL_ASSERT
–
öô_fun˘i⁄
 !
NULL
 );

30 
	`LFDS711_PAL_ASSERT
–
˛ónup_fun˘i⁄
 !
NULL
 );

32 
bs
->
d©a°ru˘uª_id
 = datastructure_id;

33 
bs
->
bíchm¨k_id
 = benchmark_id;

34 
bs
->
lock_id
 =Üock_id;

35 
bs
->
ts
 =Ås;

36 
bs
->
öô_fun˘i⁄
 = init_function;

37 
bs
->
˛ónup_fun˘i⁄
 = cleanup_function;

40 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkinstance/libbenchmark_benchmarkinstance_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkinstance/libbenchmark_benchmarkinstance_run.c

2 
	~"libbíchm¨k_bíchm¨kö°™˚_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨kö°™˚_run
–
libbíchm¨k_bíchm¨kö°™˚_°©e
 *
bs
,

10 
lfds711_li°_aso_°©e
 *
Õ£t
,

11 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

12 
libsh¨ed_mem‹y_°©e
 *
ms
,

13 
libbíchm¨k_ªsu…s_°©e
 *
rs
 )

16 *
Õ£t_°rög
,

17 
ãmp
[64];

19 
lfds711_∑l_uöt_t


20 
›î©i⁄_cou¡
;

22 
lfds711_li°_aso_ñemít


23 *
œs€
;

25 
libbíchm¨k_t›ﬁogy_node_°©e


26 *
äs
;

28 
	`LFDS711_PAL_ASSERT
–
bs
 !
NULL
 );

29 
	`LFDS711_PAL_ASSERT
–
Õ£t
 !
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

34 
	`libsh¨ed_mem‹y_£t_rﬁlback
–
ms
 );

36 
Õ£t_°rög
 = 
	`libbíchm¨k_t›ﬁogy_gíî©e_Õ£t_°rög
–
bs
->
ts
, 
ms
, 
Õ£t
 );

38 
	`libbíchm¨k_∑l_¥öt_°rög
–
Õ£t_°rög
 );

40 
	`libbíchm¨k_∑l_¥öt_°rög
( " " );

41 
	`libbíchm¨k_∑l_¥öt_°rög
–
libbíchm¨k_globÆs_d©a°ru˘uª_«mes
[
bs
->
d©a°ru˘uª_id
] );

42 
	`libbíchm¨k_∑l_¥öt_°rög
( " " );

43 
	`libbíchm¨k_∑l_¥öt_°rög
–
libbíchm¨k_globÆs_lock_«mes
[
bs
->
lock_id
] );

45 
	`libbíchm¨k_∑l_¥öt_°rög
( " (" );

46 
	`libbíchm¨k_∑l_¥öt_°rög
–
libbíchm¨k_globÆs_numa_mode_«mes
[
numa_mode
] );

47 
	`libbíchm¨k_∑l_¥öt_°rög
( ")" );

49 
bs
->
	`öô_fun˘i⁄
–bs->
ts
, 
Õ£t
, 
ms
, 
numa_mode
, &bs->
t£ts
 );

51 
	`libbíchm¨k_thªad£t_run
–&
bs
->
t£ts
 );

54 
bs
->
	`˛ónup_fun˘i⁄
–
Õ£t
, 
numa_mode
, 
rs
, &bs->
t£ts
 );

56 
	`libbíchm¨k_thªad£t_˛ónup
–&
bs
->
t£ts
 );

60 
œs€
 = 
NULL
;

62  
	`LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
(*
Õ£t
, 
œs€
) )

64 
äs
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œs€
 );

66 
	`libbíchm¨k_ªsu…s_gë_ªsu…
–
rs
,

67 
bs
->
d©a°ru˘uª_id
,

68 
bs
->
bíchm¨k_id
,

69 
bs
->
lock_id
,

70 
numa_mode
,

71 
Õ£t
,

72 
äs
,

73 &
›î©i⁄_cou¡
 );

75 
	`libsh¨ed_™si_°r˝y
–
ãmp
, ", " );

76 
	`libsh¨ed_™si_°rˇt_numbî
–
ãmp
, 
›î©i⁄_cou¡
 / 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
 );

77 
	`libsh¨ed_™si_°rˇt
–
ãmp
, " (" );

80 
	`libsh¨ed_™si_°rˇt_numbî
–
ãmp
, 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
(*
äs
) );

82 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_IS_WINDOWS_GROUP_NUMBER
(*
äs
) )

84 
	`libsh¨ed_™si_°rˇt
–
ãmp
, "/" );

85 
	`libsh¨ed_™si_°rˇt_numbî
–
ãmp
, 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
(*
äs
) );

88 
	`libsh¨ed_™si_°rˇt
–
ãmp
, ")" );

90 
	`libbíchm¨k_∑l_¥öt_°rög
–
ãmp
 );

93 
	`libbíchm¨k_∑l_¥öt_°rög
( "\n" );

95 
	`libsh¨ed_mem‹y_rﬁlback
–
ms
 );

98 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_gcc_spinlock_atomic_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_ATOMIC
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_gcc_spinlock_sync_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_SYNC
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_liblfds700_lockfree_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
lfds700_båì_au_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
lfds700_båì_au_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
lfds700_båì_au_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
lfds700_båì_au_ö£π_ªsu…


65 
ú
;

67 
lfds700_misc_¥ng_°©e


68 
lfds700_ps
;

70 
lfds711_∑l_uöt_t


71 
ödex
 = 0,

72 
lo›
,

73 
numbî_logiˇl_¥o˚ss‹s
,

74 
numbî_bíchm¨k_ñemíts
,

75 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

76 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

77 
tŸÆ_numbî_bíchm¨k_ñemíts
;

79 
lfds711_li°_asu_ñemít


80 *
œsue
 = 
NULL
,

81 *
œsue_Õ
;

83 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


84 *
obs
;

86 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


87 *
±ns
;

89 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


90 *
±bs
;

92 
lfds700_båì_au_°©e


93 *
bs
 = 
NULL
;

95 
libbíchm¨k_¥ng_°©e


96 
ps
;

98 
libbíchm¨k_thªad£t_≥r_numa_°©e


99 *
≤s
,

100 *
œrge°_≤s
 = 
NULL
;

102 
libbíchm¨k_thªad£t_≥r_thªad_°©e


103 *
±s
;

105 
libbíchm¨k_t›ﬁogy_node_°©e


106 *
numa_node_f‹_Õ
;

108 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

110 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

112 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

114 
	`lfds700_misc_¥ng_öô
–&
lfds700_ps
 );

116 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

118 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_thªad
, 
NULL
 );

120 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

122 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

124 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

126  
numa_mode
 )

128 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

129 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds700_båì_au_°©e
), 
LFDS700_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

130 
	`lfds700_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_FAIL
, 
NULL
 );

132 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS700_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

133 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

135  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

138 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

139 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

141 
	`LFDS700_BTREE_AU_SET_KEY_IN_ELEMENT
–
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

142 
	`LFDS700_BTREE_AU_SET_VALUE_IN_ELEMENT
–
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

143 
ú
 = 
	`lfds700_båì_au_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
, &
lfds700_ps
 );

145  
ú
 =
LFDS700_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

147 
œsue
 = 
NULL
;

149  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

151 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

152 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

153 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

154 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

158 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

161 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

163 
œsue_Õ
 = 
NULL
;

164 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

166  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

168 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

170 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

172 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

173 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

176 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

177 
œrge°_≤s
 = 
≤s
;

180 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds700_båì_au_°©e
), 
LFDS700_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

181 
	`lfds700_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LFDS700_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

183 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

185 
œsue
 = 
NULL
;

187  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

189 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

195 
œsue_Õ
 = 
NULL
;

196 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

198  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

200 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

202 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

204 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

205 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

208 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

210 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

212 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

214 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS700_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

216  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

219 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

220 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

222 
	`LFDS700_BTREE_AU_SET_KEY_IN_ELEMENT
–
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

223 
	`LFDS700_BTREE_AU_SET_VALUE_IN_ELEMENT
–
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

224 
ú
 = 
	`lfds700_båì_au_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
, &
lfds700_ps
 );

226  
ú
 =
LFDS700_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

228 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

232 
œsue
 = 
NULL
;

234  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

236 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

237 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

239  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

240 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

243 
œsue
 = 
NULL
;

245  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

247 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

248 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

249 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

250 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

251 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

255 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

256  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

258 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

260 
œsue_Õ
 = 
NULL
;

261 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

263  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

265 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

267 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

269 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

270 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

273 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

274 
œrge°_≤s
 = 
≤s
;

277 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds700_båì_au_°©e
), 
LFDS700_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

278 
	`lfds700_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LFDS700_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

280 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

282 
œsue
 = 
NULL
;

284  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

286 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

292 
œsue_Õ
 = 
NULL
;

293 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

295  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

297 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

299 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

301 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

302 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

305 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

307 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

308 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

309 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

312 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS700_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

314  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

317 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

318 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

320 
	`LFDS700_BTREE_AU_SET_KEY_IN_ELEMENT
–
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

321 
	`LFDS700_BTREE_AU_SET_VALUE_IN_ELEMENT
–
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

322 
ú
 = 
	`lfds700_båì_au_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
, &
lfds700_ps
 );

324  
ú
 =
LFDS700_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

326 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

330 
œsue
 = 
NULL
;

332  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

334 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

335 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

337  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

338 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

341 
œsue
 = 
NULL
;

343  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

345 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

346 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

347 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

348 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

349 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

354 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

355 
obs
->
bs
 = bs;

356 
obs
->
numa_mode
 =Çuma_mode;

358 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

361 
	}
}

368 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

371 
cuºít_time
 = 0,

372 
íd_time
,

373 
time_unôs_≥r_£c⁄d
;

375 
lfds711_∑l_uöt_t


376 *
ñemít_key_¨øy
 = 
NULL
,

377 
ödex
,

378 
numbî_ñemít_keys
 = 0,

379 
›î©i⁄_cou¡
 = 0,

380 
øndom_vÆue
,

381 
time_lo›
 = 0;

383 
libbíchm¨k_¥ng_°©e


384 
ps
;

386 
lfds700_båì_au_ñemít


387 *
exi°ög_be
;

389 
lfds700_båì_au_°©e


390 *
bs
;

392 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


393 *
±bs
;

395 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


396 *
≤bs
 = 
NULL
;

398 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


399 *
obs
;

401 
libbíchm¨k_thªad£t_≥r_thªad_°©e


402 *
±s
;

404 
LFDS711_MISC_BARRIER_LOAD
;

406 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

408 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

410 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

411 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

412 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

413 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

414 
bs
 = 
obs
->bs;

416 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

418 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

420  
obs
->
numa_mode
 )

422 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

423 
ñemít_key_¨øy
 = 
obs
->element_key_array;

424 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

427 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

428 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

429 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

432 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

433 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

434 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

438 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

440 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

442 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

444  
cuºít_time
 < 
íd_time
 )

446 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

447 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

450 
	`lfds700_båì_au_gë_by_key
–
bs
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

453 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

454 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

457 
	`lfds700_båì_au_gë_by_key
–
bs
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

460 
›î©i⁄_cou¡
++;

462 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

464 
time_lo›
 = 0;

465 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

469 
±bs
->
›î©i⁄_cou¡
 = operation_count;

471 
LFDS711_MISC_BARRIER_STORE
;

473 
	`lfds711_misc_f‹˚_°‹e
();

475  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

476 
	}
}

483 
	$libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

484 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

485 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

486 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

488 
lfds711_li°_asu_ñemít


489 *
œsue
 = 
NULL
;

491 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


492 *
obs
;

494 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


495 *
±bs
;

497 
libbíchm¨k_thªad£t_≥r_thªad_°©e


498 *
±s
;

500 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

502 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

503 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

505  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

507 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

509 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

511 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

512 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

513 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

514 
LIBBENCHMARK_LOCK_ID_LIBLFDS700_LOCKFREE
,

515 
numa_mode
,

516 
logiˇl_¥o˚ss‹_£t
,

517 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

518 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

519 
±bs
->
›î©i⁄_cou¡
 );

522 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

524 
	`lfds700_båì_au_˛ónup
–
obs
->
bs
, 
NULL
 );

527 
	}
}

534 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

536 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít


537 *
√w_bíchm¨k_ñemít
,

538 *
exi°ög_bíchm¨k_ñemít
;

540 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

541 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

543 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

544 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

546 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

549 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

553 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_liblfds711_lockfree_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
lfds711_båì_au_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
lfds711_båì_au_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
lfds711_båì_au_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
lfds711_båì_au_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
lfds711_båì_au_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_båì_au_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`lfds711_båì_au_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_båì_au_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`lfds711_båì_au_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_båì_au_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`lfds711_båì_au_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
lfds711_båì_au_ñemít


382 *
exi°ög_be
;

384 
lfds711_båì_au_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

409 
bs
 = 
obs
->bs;

411 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

413 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

415  
obs
->
numa_mode
 )

417 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

418 
ñemít_key_¨øy
 = 
obs
->element_key_array;

419 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

422 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

423 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

424 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

427 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

428 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

429 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

433 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

435 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

437 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

439  
cuºít_time
 < 
íd_time
 )

441 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

442 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

445 
	`lfds711_båì_au_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

448 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

449 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

452 
	`lfds711_båì_au_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

455 
›î©i⁄_cou¡
++;

457 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

459 
time_lo›
 = 0;

460 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

464 
±bs
->
›î©i⁄_cou¡
 = operation_count;

466 
LFDS711_MISC_BARRIER_STORE
;

468 
	`lfds711_misc_f‹˚_°‹e
();

470  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

471 
	}
}

478 
	$libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

479 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

480 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

481 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

483 
lfds711_li°_asu_ñemít


484 *
œsue
 = 
NULL
;

486 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


487 *
obs
;

489 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


490 *
±bs
;

492 
libbíchm¨k_thªad£t_≥r_thªad_°©e


493 *
±s
;

495 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

497 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

500  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

502 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

504 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

506 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

507 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

508 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

509 
LIBBENCHMARK_LOCK_ID_LIBLFDS711_LOCKFREE
,

510 
numa_mode
,

511 
logiˇl_¥o˚ss‹_£t
,

512 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

514 
±bs
->
›î©i⁄_cou¡
 );

517 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

519 
	`lfds711_båì_au_˛ónup
–
obs
->
bs
, 
NULL
 );

522 
	}
}

529 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

531 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít


532 *
√w_bíchm¨k_ñemít
,

533 *
exi°ög_bíchm¨k_ñemít
;

535 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

536 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

538 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

539 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

541 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

544 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

548 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_msvc_spinlock_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_MSVC_SPINLOCK
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_pthread_mutex_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_PTHREAD_MUTEX
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_pthread_rwlock_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_key_f‹_ªad
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_key_f‹_wrôe
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_PTHREAD_RWLOCK
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_pthread_spinlock_process_private_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_PRIVATE
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_pthread_spinlock_process_shared_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_SHARED
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_windows_critical_section_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_WINDOWS_CRITICAL_SECTION
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_windows_mutex_readn_writen.c

2 
	~"libbíchm¨k_bíchm¨ks_båì_au_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít


7 
lfds711_∑l_uöt_t


8 
	md©um
;

10 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


11 
	mbe
;

14 
	slibbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


16 
lfds711_∑l_uöt_t


17 
	m›î©i⁄_cou¡
,

18 
	m≥r_thªad_¥ng_£ed
;

21 
	slibbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


23 
lfds711_∑l_uöt_t


24 *
	mñemít_key_¨øy
,

25 
	mnumbî_ñemít_keys
;

27 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít


28 *
	mbme
;

30 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e


31 *
	mbs
;

34 
	slibbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


36 
libbíchm¨k_t›ﬁogy_numa_mode


37 
	mnuma_mode
;

39 
lfds711_∑l_uöt_t


40 *
	mñemít_key_¨øy
,

41 
	mnumbî_ñemít_keys
;

43 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít


44 *
	mbme
;

46 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e


47 *
	mbs
;

51 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

58 
	$libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

59 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

60 
libsh¨ed_mem‹y_°©e
 *
ms
,

61 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

62 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

64 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π_ªsu…


65 
ú
;

67 
lfds711_∑l_uöt_t


68 
ödex
 = 0,

69 
lo›
,

70 
numbî_logiˇl_¥o˚ss‹s
,

71 
numbî_bíchm¨k_ñemíts
,

72 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

73 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

74 
tŸÆ_numbî_bíchm¨k_ñemíts
;

76 
lfds711_li°_asu_ñemít


77 *
œsue
 = 
NULL
,

78 *
œsue_Õ
;

80 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


81 *
obs
;

83 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


84 *
±ns
;

86 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


87 *
±bs
;

89 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e


90 *
bs
 = 
NULL
;

92 
libbíchm¨k_¥ng_°©e


93 
ps
;

95 
libbíchm¨k_thªad£t_≥r_numa_°©e


96 *
≤s
,

97 *
œrge°_≤s
 = 
NULL
;

99 
libbíchm¨k_thªad£t_≥r_thªad_°©e


100 *
±s
;

102 
libbíchm¨k_t›ﬁogy_node_°©e


103 *
numa_node_f‹_Õ
;

105 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

106 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

109 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

111 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_thªad
, 
NULL
 );

115 
tŸÆ_numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
 * 1024;

117 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
LFDS711_PRNG_SEED
 );

121  
numa_mode
 )

123 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

124 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

125 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_EXISTING_KEY_FAIL
, 
NULL
 );

127 
obs
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

128 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

130  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

133 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
obs
->
bme
[
lo›
].
d©um
 );

134 
obs
->
ñemít_key_¨øy
[
lo›
] = obs->
bme
[lo›].
d©um
;

136 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_KEY_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

137 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_VALUE_IN_ELEMENT
–*
bs
, 
obs
->
bme
[
lo›
].
be
, &obs->bme[loop] );

138 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π
–
bs
, &
obs
->
bme
[
lo›
].
be
, 
NULL
 );

140  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

142 
œsue
 = 
NULL
;

144  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

146 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

149 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

153 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_EXISTING_KEY_FAIL
, 
NULL
 );

178 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

180 
œsue
 = 
NULL
;

182  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

184 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

190 
œsue_Õ
 = 
NULL
;

191 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

193  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

195 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

197 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

199 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

200 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

203 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

205 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

207 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

209 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

211  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

214 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

215 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

217 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

218 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

219 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

221  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

223 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

227 
œsue
 = 
NULL
;

229  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

231 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

232 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

234  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

235 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

238 
œsue
 = 
NULL
;

240  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

242 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

243 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

244 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

245 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

246 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

250 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

251  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

253 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

255 
œsue_Õ
 = 
NULL
;

256 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

258  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

260 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

262 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

264 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

265 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

268 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

269 
œrge°_≤s
 = 
≤s
;

272 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

273 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_öô
–
bs
, 
key_com∑ª_fun˘i⁄
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_EXISTING_KEY_FAIL
, 
NULL
 );

275 
obs
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

277 
œsue
 = 
NULL
;

279  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

281 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

287 
œsue_Õ
 = 
NULL
;

288 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

294 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

296 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

297 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

300 
numbî_bíchm¨k_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 * 1024;

302 
±ns
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

303 
±ns
->
ñemít_key_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_∑l_uöt_t
Ë* 
tŸÆ_numbî_bíchm¨k_ñemíts
, (lfds711_pal_uint_t) );

304 
±ns
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

307 
±ns
->
bme
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít
Ë* 
numbî_bíchm¨k_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

309  
lo›
 = 0 ;Üo› < 
numbî_bíchm¨k_ñemíts
 ;Üo›++, 
ödex
++ )

312 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±ns
->
bme
[
lo›
].
d©um
 );

313 
obs
->
ñemít_key_¨øy
[
ödex
] = 
±ns
->
bme
[
lo›
].
d©um
;

315 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_KEY_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

316 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_VALUE_IN_ELEMENT
–*
bs
, 
±ns
->
bme
[
lo›
].
be
, &ptns->bme[loop] );

317 
ú
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π
–
bs
, &
±ns
->
bme
[
lo›
].
be
, 
NULL
 );

319  
ú
 =
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
 );

321 
≤s
->
u£rs_≥r_numa_°©e
 = 
±ns
;

325 
œsue
 = 
NULL
;

327  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

329 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

330 
±ns
 = 
≤s
->
u£rs_≥r_numa_°©e
;

332  
lo›
 = 0 ;Üo› < 
tŸÆ_numbî_bíchm¨k_ñemíts
 ;Üoop++ )

333 
±ns
->
ñemít_key_¨øy
[
lo›
] = 
obs
->element_key_array[loop];

336 
œsue
 = 
NULL
;

338  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

340 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

341 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

342 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

343 
	`LIBBENCHMARK_PRNG_MURMURHASH3_MIXING_FUNCTION
–
±bs
->
≥r_thªad_¥ng_£ed
 );

344 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

349 
obs
->
numbî_ñemít_keys
 = 
tŸÆ_numbî_bíchm¨k_ñemíts
;

350 
obs
->
bs
 = bs;

351 
obs
->
numa_mode
 =Çuma_mode;

353 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

356 
	}
}

363 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

366 
cuºít_time
 = 0,

367 
íd_time
,

368 
time_unôs_≥r_£c⁄d
;

370 
lfds711_∑l_uöt_t


371 *
ñemít_key_¨øy
 = 
NULL
,

372 
ödex
,

373 
numbî_ñemít_keys
 = 0,

374 
›î©i⁄_cou¡
 = 0,

375 
øndom_vÆue
,

376 
time_lo›
 = 0;

378 
libbíchm¨k_¥ng_°©e


379 
ps
;

381 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


382 *
exi°ög_be
;

384 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e


385 *
bs
;

387 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


388 *
±bs
;

390 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_numa_bíchm¨k_°©e


391 *
≤bs
 = 
NULL
;

393 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


394 *
obs
;

396 
libbíchm¨k_thªad£t_≥r_thªad_°©e


397 *
±s
;

399 
LFDS711_MISC_BARRIER_LOAD
;

401 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

403 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

405 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

406 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

407 if–
obs
->
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 
‹
 obs->numa_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
 )

408 
≤bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_NUMA_STATE
–*
±s
 );

410 
bs
 = 
obs
->bs;

412 
	`LIBBENCHMARK_PRNG_INIT
–
ps
, 
±bs
->
≥r_thªad_¥ng_£ed
 );

414 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

416  
obs
->
numa_mode
 )

418 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

419 
ñemít_key_¨øy
 = 
obs
->element_key_array;

420 
numbî_ñemít_keys
 = 
obs
->number_element_keys;

423 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

424 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

425 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

428 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

429 
ñemít_key_¨øy
 = 
≤bs
->element_key_array;

430 
numbî_ñemít_keys
 = 
≤bs
->number_element_keys;

434 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

436 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

438 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

440  
cuºít_time
 < 
íd_time
 )

442 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

443 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

446 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

449 
	`LIBBENCHMARK_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

450 
ödex
 = 
øndom_vÆue
 % 
numbî_ñemít_keys
;

453 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_key
–
bs
, 
NULL
, &
ñemít_key_¨øy
[
ödex
], &
exi°ög_be
 );

456 
›î©i⁄_cou¡
++;

458 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

460 
time_lo›
 = 0;

461 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

465 
±bs
->
›î©i⁄_cou¡
 = operation_count;

467 
LFDS711_MISC_BARRIER_STORE
;

469 
	`lfds711_misc_f‹˚_°‹e
();

471  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

472 
	}
}

479 
	$libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

480 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

481 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

482 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

484 
lfds711_li°_asu_ñemít


485 *
œsue
 = 
NULL
;

487 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_ovîÆl_bíchm¨k_°©e


488 *
obs
;

490 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_≥r_thªad_bíchm¨k_°©e


491 *
±bs
;

493 
libbíchm¨k_thªad£t_≥r_thªad_°©e


494 *
±s
;

496 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

498 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

499 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

501  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

503 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

505 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

507 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

508 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
,

509 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
,

510 
LIBBENCHMARK_LOCK_ID_WINDOWS_MUTEX
,

511 
numa_mode
,

512 
logiˇl_¥o˚ss‹_£t
,

513 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

514 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

515 
±bs
->
›î©i⁄_cou¡
 );

518 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;;

520 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_˛ónup
–
obs
->
bs
, 
NULL
 );

523 
	}
}

530 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

532 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít


533 *
√w_bíchm¨k_ñemít
,

534 *
exi°ög_bíchm¨k_ñemít
;

536 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

537 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

539 
√w_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
√w_key
;

540 
exi°ög_bíchm¨k_ñemít
 = (
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_bíchm¨k_ñemít
 *Ë
exi°ög_key
;

542 if–
√w_bíchm¨k_ñemít
->
d©um
 < 
exi°ög_bíchm¨k_ñemít
->datum )

545 if–
√w_bíchm¨k_ñemít
->
d©um
 > 
exi°ög_bíchm¨k_ñemít
->datum )

549 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_gcc_spinlock_atomic_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_ATOMIC
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_gcc_spinlock_sync_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_SYNC
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_liblfds700_lockfree_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

11 
	slibbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e


13 
lfds700_‰ìli°_°©e


14 *
	mfs
;

22 
	$libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

23 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

24 
libsh¨ed_mem‹y_°©e
 *
ms
,

25 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

26 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

28 
Êag


29 
föished_Êag
 = 
LOWERED
;

31 
lfds700_misc_¥ng_°©e


32 
ps
;

34 
lfds711_∑l_uöt_t


35 *
„_¨øy_cou¡
,

36 
ödex
 = 0,

37 
lo›
,

38 
numbî_logiˇl_¥o˚ss‹s
,

39 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

40 
numbî_numa_nodes
,

41 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

43 
lfds711_li°_asu_ñemít


44 *
œsue
 = 
NULL
,

45 *
œsue_Õ
 = 
NULL
;

47 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e


48 *
obs
;

50 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e


51 *
±bs
;

53 
lfds700_‰ìli°_ñemít


54 *
„
,

55 **
„_¨øy_poöãrs
;

57 
lfds700_‰ìli°_°©e


58 *
fs
 = 
NULL
;

60 
libbíchm¨k_thªad£t_≥r_numa_°©e


61 *
≤s
,

62 *
œrge°_≤s
 = 
NULL
;

64 
libbíchm¨k_thªad£t_≥r_thªad_°©e


65 *
±s
;

67 
libbíchm¨k_t›ﬁogy_node_°©e


68 *
numa_node_f‹_Õ
;

70 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

71 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

72 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

74 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

76 
	`lfds700_misc_¥ng_öô
–&
ps
 );

78 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

80 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_thªad
, 
NULL
 );

82  
numa_mode
 )

84 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

85 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

86 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds700_‰ìli°_°©e
), 
LFDS700_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

87 
	`lfds700_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
fs
, 
NULL
 );

89 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_‰ìli°_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

90  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

91 
	`lfds700_‰ìli°_push
–
fs
, &
„
[
lo›
], &
ps
 );

92  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

94 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

95 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

96 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

100 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

114 
œsue_Õ
 = 
NULL
;

115 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

117  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

119 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

121 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

123 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

124 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

127 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

128 
œrge°_≤s
 = 
≤s
;

131 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_‰ìli°_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132 
	`lfds700_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
fs
, 
NULL
 );

139 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMBER_OF_NODE_TYPE
, (*Ë(
lfds711_∑l_uöt_t
Ë
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
, (*Ë&
numbî_numa_nodes
 );

141 
„_¨øy_poöãrs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_‰ìli°_ñemít
 *Ë* 
numbî_numa_nodes
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

142 
„_¨øy_cou¡
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_numa_nodes
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

143  
lo›
 = 0 ;Üo› < 
numbî_numa_nodes
 ;Üoop++ )

144 
„_¨øy_cou¡
[
lo›
] = 0;

146 
œsue
 = 
NULL
;

148  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

150 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 
„_¨øy_cou¡
[
ödex
] = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
;

170 
„_¨øy_poöãrs
[
ödex
] = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_‰ìli°_ñemít
Ë* 
„_¨øy_cou¡
[ödex], 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

171 
ödex
++;

174  
föished_Êag
 =
LOWERED
 )

176  
lo›
 = 0 ;Üo› < 
ödex
 ;Üoop++ )

177 if–
„_¨øy_cou¡
[
lo›
] > 0 )

178 
	`lfds700_‰ìli°_push
–
fs
, &
„_¨øy_poöãrs
[
lo›
][ 
„_¨øy_cou¡
[lo›]-- ], &
ps
 );

180 
föished_Êag
 = 
RAISED
;

182  
lo›
 = 0 ;Üo› < 
ödex
 ;Üoop++ )

183 if–
„_¨øy_cou¡
[
lo›
] > 0 )

184 
föished_Êag
 = 
LOWERED
;

187 
œsue
 = 
NULL
;

189  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

191 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

192 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

193 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

197 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

207  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

209 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

211 
œsue_Õ
 = 
NULL
;

212 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

218 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

220 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

221 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

224 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

225 
œrge°_≤s
 = 
≤s
;

228 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

229 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_‰ìli°_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

230 
	`lfds700_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
fs
, 
NULL
 );

233 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_‰ìli°_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

234  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

235 
	`lfds700_‰ìli°_push
–
fs
, &
„
[
lo›
], &
ps
 );

237 
œsue
 = 
NULL
;

239  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

241 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

242 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

243 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

248 
obs
->
fs
 = fs;

249 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

252 
	}
}

259 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

262 
cuºít_time
 = 0,

263 
íd_time
,

264 
time_unôs_≥r_£c⁄d
;

266 
lfds711_∑l_uöt_t


267 
›î©i⁄_cou¡
 = 0,

268 
time_lo›
 = 0;

270 
lfds700_misc_¥ng_°©e


271 
ps
;

273 
lfds700_‰ìli°_°©e


274 *
fs
;

276 
lfds700_‰ìli°_ñemít


277 *
„
;

279 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e


280 *
obs
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
LFDS711_MISC_BARRIER_LOAD
;

290 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

292 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

294 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

295 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

296 
fs
 = 
obs
->fs;

298 
	`lfds700_misc_¥ng_öô
–&
ps
 );

300 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

302 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

304 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

306 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

308  
cuºít_time
 < 
íd_time
 )

310 
	`lfds700_‰ìli°_p›
–
fs
, &
„
, &
ps
 );

311 
	`lfds700_‰ìli°_push
–
fs
, 
„
, &
ps
 );

312 
›î©i⁄_cou¡
++;

314 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

316 
time_lo›
 = 0;

317 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

321 
±bs
->
›î©i⁄_cou¡
 = operation_count;

323 
LFDS711_MISC_BARRIER_STORE
;

325 
	`lfds711_misc_f‹˚_°‹e
();

327  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

328 
	}
}

335 
	$libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

336 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

337 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

338 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

340 
lfds711_li°_asu_ñemít


341 *
œsue
 = 
NULL
;

343 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e


344 *
obs
;

346 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e


347 *
±bs
;

349 
libbíchm¨k_thªad£t_≥r_thªad_°©e


350 *
±s
;

352 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

354 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

355 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

357  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

359 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

361 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

363 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

364 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

365 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

366 
LIBBENCHMARK_LOCK_ID_LIBLFDS700_LOCKFREE
,

367 
numa_mode
,

368 
logiˇl_¥o˚ss‹_£t
,

369 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

370 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

371 
±bs
->
›î©i⁄_cou¡
 );

374 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

376 
	`lfds700_‰ìli°_˛ónup
–
obs
->
fs
, 
NULL
 );

379 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_liblfds711_lockfree_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

10 
lfds711_¥ng_°_°©e


11 
	mp°s
;

14 
	slibbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e


16 
lfds711_‰ìli°_°©e


17 *
	mfs
;

25 
	$libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

26 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

27 
libsh¨ed_mem‹y_°©e
 *
ms
,

28 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

29 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

31 
Êag


32 
föished_Êag
 = 
LOWERED
;

34 
lfds711_∑l_uöt_t


35 
ó_size_ö_‰ìli°_ñemíts
,

36 *
„_¨øy_cou¡
,

37 
ödex
 = 0,

38 
lo›
,

39 
numbî_‰ìli°_ñemíts
,

40 
numbî_logiˇl_¥o˚ss‹s
,

41 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

42 
numbî_numa_nodes
,

43 
numbî_‰ìli°_ñemít_poöãrs_≥r_©omic_isﬁ©i⁄
 = 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 / (
lfds711_‰ìli°_ñemít
 *),

44 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0,

45 
øndom_vÆue
,

46 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 = 2,

47 
ãmp_numbî_logiˇl_¥o˚ss‹s
;

49 
lfds711_‰ìli°_ñemít
 * volatile

50 (*
ó
)[
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
];

52 
lfds711_li°_asu_ñemít


53 *
œsue
 = 
NULL
,

54 *
œsue_Õ
 = 
NULL
;

56 
lfds711_¥ng_°_°©e


57 
p°s
;

59 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e


60 *
obs
;

62 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e


63 *
±bs
;

65 
lfds711_‰ìli°_ñemít


66 *
„
,

67 **
„_¨øy_poöãrs
;

69 
lfds711_‰ìli°_°©e


70 *
fs
 = 
NULL
;

72 
libbíchm¨k_thªad£t_≥r_numa_°©e


73 *
≤s
,

74 *
œrge°_≤s
 = 
NULL
;

76 
libbíchm¨k_thªad£t_≥r_thªad_°©e


77 *
±s
;

79 
libbíchm¨k_t›ﬁogy_node_°©e


80 *
numa_node_f‹_Õ
;

82 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

83 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

84 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

86 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

88 
	`lfds711_¥ng_°_öô
–&
p°s
, 
LFDS711_PRNG_SEED
 );

90 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

92 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_thªad
, 
NULL
 );

94  
numa_mode
 )

96 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

97 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

98 
ãmp_numbî_logiˇl_¥o˚ss‹s
 = 
numbî_logiˇl_¥o˚ss‹s
 >> 2;

99  
ãmp_numbî_logiˇl_¥o˚ss‹s
 != 0 )

101 
ãmp_numbî_logiˇl_¥o˚ss‹s
 >>= 1;

102 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 <<= 1;

104 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_‰ìli°_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

105 
ó
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_‰ìli°_ñemít
 *Ë* 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 * 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

106 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
fs
, 
ó
, 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
NULL
 );

109 
numbî_‰ìli°_ñemíts
 = (
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 * 
numbî_‰ìli°_ñemít_poöãrs_≥r_©omic_isﬁ©i⁄
Ë+ 
numbî_logiˇl_¥o˚ss‹s
;

110 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_‰ìli°_ñemít
Ë* 
numbî_‰ìli°_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

111  
lo›
 = 0 ;Üo› < 
numbî_‰ìli°_ñemíts
 ;Üoop++ )

112 
	`lfds711_‰ìli°_push
–
fs
, &
„
[
lo›
], &
p°s
 );

113  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

115 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

116 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

117 
	`LFDS711_PRNG_ST_GENERATE
–
p°s
, 
øndom_vÆue
 );

118 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 );

119 
	`lfds711_¥ng_°_öô
–&
±bs
->
p°s
, 
øndom_vÆue
 );

120 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

124 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

134  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

136 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

138 
œsue_Õ
 = 
NULL
;

139 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

141  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

143 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

145 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

147 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

148 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

151 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

152 
œrge°_≤s
 = 
≤s
;

155 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

156 
ãmp_numbî_logiˇl_¥o˚ss‹s
 = 
numbî_logiˇl_¥o˚ss‹s
 >> 2;

157  
ãmp_numbî_logiˇl_¥o˚ss‹s
 != 0 )

159 
ãmp_numbî_logiˇl_¥o˚ss‹s
 >>= 1;

160 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 <<= 1;

163 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_‰ìli°_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

164 
ó
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_‰ìli°_ñemít
 *Ë* 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 * 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

165 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
fs
, 
ó
, 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
NULL
 );

172 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMBER_OF_NODE_TYPE
, (*Ë(
lfds711_∑l_uöt_t
Ë
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
, (*Ë&
numbî_numa_nodes
 );

174 
„_¨øy_poöãrs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_‰ìli°_ñemít
 *Ë* 
numbî_numa_nodes
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
„_¨øy_cou¡
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_numa_nodes
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176  
lo›
 = 0 ;Üo› < 
numbî_numa_nodes
 ;Üoop++ )

177 
„_¨øy_cou¡
[
lo›
] = 0;

180 
	`lfds711_‰ìli°_quîy
–
fs
, 
LFDS711_FREELIST_QUERY_GET_ELIMINATION_ARRAY_EXTRA_ELEMENTS_IN_FREELIST_ELEMENTS
, 
NULL
, (*Ë&
ó_size_ö_‰ìli°_ñemíts
 );

184 
œsue
 = 
NULL
;

186  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

188 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

194 
œsue_Õ
 = 
NULL
;

195 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

197  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

199 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

201 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

203 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

204 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

208 
„_¨øy_cou¡
[
ödex
] = 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 + (
ó_size_ö_‰ìli°_ñemíts
 *Çumbî_logiˇl_¥o˚ss‹s_ö_numa_nodeË/ 
numbî_logiˇl_¥o˚ss‹s
 + 1;

209 
„_¨øy_poöãrs
[
ödex
] = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_‰ìli°_ñemít
Ë* 
„_¨øy_cou¡
[ödex], 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

210 
ödex
++;

213  
föished_Êag
 =
LOWERED
 )

215  
lo›
 = 0 ;Üo› < 
ödex
 ;Üoop++ )

216 if–
„_¨øy_cou¡
[
lo›
] > 0 )

217 
	`lfds711_‰ìli°_push
–
fs
, &
„_¨øy_poöãrs
[
lo›
][ 
„_¨øy_cou¡
[lo›]-- ], &
p°s
 );

219 
föished_Êag
 = 
RAISED
;

221  
lo›
 = 0 ;Üo› < 
ödex
 ;Üoop++ )

222 if–
„_¨øy_cou¡
[
lo›
] > 0 )

223 
föished_Êag
 = 
LOWERED
;

226 
œsue
 = 
NULL
;

228  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

230 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

231 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

232 
	`LFDS711_PRNG_ST_GENERATE
–
p°s
, 
øndom_vÆue
 );

233 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 );

234 
	`lfds711_¥ng_°_öô
–&
±bs
->
p°s
, 
øndom_vÆue
 );

235 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

239 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

249  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

251 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

253 
œsue_Õ
 = 
NULL
;

254 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

256  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

258 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

260 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

262 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

263 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

266 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

267 
œrge°_≤s
 = 
≤s
;

270 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

271 
ãmp_numbî_logiˇl_¥o˚ss‹s
 = 
numbî_logiˇl_¥o˚ss‹s
 >> 2;

272  
ãmp_numbî_logiˇl_¥o˚ss‹s
 != 0 )

274 
ãmp_numbî_logiˇl_¥o˚ss‹s
 >>= 1;

275 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 <<= 1;

278 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_‰ìli°_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

279 
ó
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_‰ìli°_ñemít
 *Ë* 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 * 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

280 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
fs
, 
ó
, 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
NULL
 );

283 
numbî_‰ìli°_ñemíts
 = (
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 * 
numbî_‰ìli°_ñemít_poöãrs_≥r_©omic_isﬁ©i⁄
Ë+ 
numbî_logiˇl_¥o˚ss‹s
;

284 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_‰ìli°_ñemít
Ë* 
numbî_‰ìli°_ñemíts
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

285  
lo›
 = 0 ;Üo› < 
numbî_‰ìli°_ñemíts
 ;Üoop++ )

286 
	`lfds711_‰ìli°_push
–
fs
, &
„
[
lo›
], &
p°s
 );

288 
œsue
 = 
NULL
;

290  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

292 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

293 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

294 
	`LFDS711_PRNG_ST_GENERATE
–
p°s
, 
øndom_vÆue
 );

295 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 );

296 
	`lfds711_¥ng_°_öô
–&
±bs
->
p°s
, 
øndom_vÆue
 );

297 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

302 
obs
->
fs
 = fs;

303 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

306 
	}
}

313 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

316 
cuºít_time
 = 0,

317 
íd_time
,

318 
time_unôs_≥r_£c⁄d
;

320 
lfds711_∑l_uöt_t


321 
›î©i⁄_cou¡
 = 0,

322 
time_lo›
 = 0;

324 
lfds711_‰ìli°_°©e


325 *
fs
;

327 
lfds711_‰ìli°_ñemít


328 *
„
;

330 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e


331 *
obs
;

333 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e


334 *
±bs
;

336 
libbíchm¨k_thªad£t_≥r_thªad_°©e


337 *
±s
;

339 
LFDS711_MISC_BARRIER_LOAD
;

341 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

343 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

345 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

346 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

347 
fs
 = 
obs
->fs;

349 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

351 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

353 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

355 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

357  
cuºít_time
 < 
íd_time
 )

359 
	`lfds711_‰ìli°_p›
–
fs
, &
„
, &
±bs
->
p°s
 );

360 
	`lfds711_‰ìli°_push
–
fs
, 
„
, &
±bs
->
p°s
 );

361 
›î©i⁄_cou¡
++;

363 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

365 
time_lo›
 = 0;

366 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

370 
±bs
->
›î©i⁄_cou¡
 = operation_count;

372 
LFDS711_MISC_BARRIER_STORE
;

374 
	`lfds711_misc_f‹˚_°‹e
();

376  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

377 
	}
}

384 
	$libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

385 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

386 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

387 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

389 
lfds711_li°_asu_ñemít


390 *
œsue
 = 
NULL
;

392 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_ovîÆl_bíchm¨k_°©e


393 *
obs
;

395 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_≥r_thªad_bíchm¨k_°©e


396 *
±bs
;

398 
libbíchm¨k_thªad£t_≥r_thªad_°©e


399 *
±s
;

401 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

403 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

404 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

406  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

408 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

410 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

412 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

413 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

414 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

415 
LIBBENCHMARK_LOCK_ID_LIBLFDS711_LOCKFREE
,

416 
numa_mode
,

417 
logiˇl_¥o˚ss‹_£t
,

418 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

419 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

420 
±bs
->
›î©i⁄_cou¡
 );

423 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

425 
	`lfds711_‰ìli°_˛ónup
–
obs
->
fs
, 
NULL
 );

428 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_msvc_spinlock_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_MSVC_SPINLOCK
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_pthread_mutex_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_PTHREAD_MUTEX
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_pthread_rwlock_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_PTHREAD_RWLOCK
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_pthread_spinlock_process_private_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_PRIVATE
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_pthread_spinlock_process_shared_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_SHARED
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_windows_critical_section_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_WINDOWS_CRITICAL_SECTION
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_windows_mutex_push1_then_pop1.c

2 
	~"libbíchm¨k_bíchm¨ks_‰ìli°_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít


36 *
„
;

38 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e


39 *
fs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_öô
–
fs
, 
NULL
 );

64 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

65 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_push
–
fs
, &
„
[
lo›
] );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

70 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

71 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

76 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

88 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

90 
œsue_Õ
 = 
NULL
;

91 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

95 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

97 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

99 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

103 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

104 
œrge°_≤s
 = 
≤s
;

107 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

108 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_öô
–
fs
, 
NULL
 );

110 
œsue
 = 
NULL
;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

114 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

120 
œsue_Õ
 = 
NULL
;

121 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

125 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

127 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

129 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

133 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

134  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

135 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_push
–
fs
, &
„
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

154  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

156 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

158 
œsue_Õ
 = 
NULL
;

159 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

163 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

165 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

167 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

168 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

171 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

172 
œrge°_≤s
 = 
≤s
;

175 
fs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_öô
–
fs
, 
NULL
 );

178 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

179 
„
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

180  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

181 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_push
–
fs
, &
„
[
lo›
] );

183 
œsue
 = 
NULL
;

185  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

187 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

188 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

194 
t£ts
->
u£rs_thªad£t_°©e
 = 
fs
;

197 
	}
}

204 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

207 
cuºít_time
 = 0,

208 
íd_time
,

209 
time_unôs_≥r_£c⁄d
;

211 
lfds711_∑l_uöt_t


212 
›î©i⁄_cou¡
 = 0,

213 
time_lo›
 = 0;

215 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e


216 *
fs
;

218 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít


219 *
„
;

221 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e


222 *
±bs
;

224 
libbíchm¨k_thªad£t_≥r_thªad_°©e


225 *
±s
;

227 
LFDS711_MISC_BARRIER_LOAD
;

229 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

231 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

233 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

234 
fs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

236 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

238 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

240 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

242 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

244  
cuºít_time
 < 
íd_time
 )

246 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_p›
–
fs
, &
„
 );

247 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_push
–
fs
, 
„
 );

248 
›î©i⁄_cou¡
++;

250 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

252 
time_lo›
 = 0;

253 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

257 
±bs
->
›î©i⁄_cou¡
 = operation_count;

259 
LFDS711_MISC_BARRIER_STORE
;

261 
	`lfds711_misc_f‹˚_°‹e
();

263  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

264 
	}
}

271 
	$libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

272 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

273 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

274 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

276 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e


277 *
fs
;

279 
lfds711_li°_asu_ñemít


280 *
œsue
 = 
NULL
;

282 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_≥r_thªad_bíchm¨k_°©e


283 *
±bs
;

285 
libbíchm¨k_thªad£t_≥r_thªad_°©e


286 *
±s
;

288 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

290 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

291 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

293  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

295 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

297 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

299 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

300 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
,

301 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
,

302 
LIBBENCHMARK_LOCK_ID_WINDOWS_MUTEX
,

303 
numa_mode
,

304 
logiˇl_¥o˚ss‹_£t
,

305 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

306 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

307 
±bs
->
›î©i⁄_cou¡
 );

310 
fs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

312 
	`libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_˛ónup
–
fs
, 
NULL
 );

315 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_gcc_spinlock_atomic_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_ATOMIC
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_gcc_spinlock_sync_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_SYNC
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_liblfds700_lockfree_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

11 
	slibbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e


13 
lfds700_queue_°©e


14 *
	mqs
;

22 
	$libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

23 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

24 
libsh¨ed_mem‹y_°©e
 *
ms
,

25 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

26 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

28 
lfds700_misc_¥ng_°©e


29 
ps
;

31 
lfds711_∑l_uöt_t


32 
lo›
,

33 
numbî_logiˇl_¥o˚ss‹s
,

34 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

35 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

37 
lfds711_li°_asu_ñemít


38 *
œsue
 = 
NULL
,

39 *
œsue_Õ
 = 
NULL
;

41 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e


42 *
obs
;

44 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


45 *
±bs
;

47 
lfds700_queue_ñemít


48 *
qe
;

50 
lfds700_queue_°©e


51 *
qs
 = 
NULL
;

53 
libbíchm¨k_thªad£t_≥r_numa_°©e


54 *
≤s
,

55 *
œrge°_≤s
 = 
NULL
;

57 
libbíchm¨k_thªad£t_≥r_thªad_°©e


58 *
±s
;

60 
libbíchm¨k_t›ﬁogy_node_°©e


61 *
numa_node_f‹_Õ
;

63 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

64 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

65 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

67 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

69 
	`lfds700_misc_¥ng_öô
–&
ps
 );

71 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_thªad
, 
NULL
 );

75  
numa_mode
 )

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

78 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds700_queue_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

79 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

80 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds700_queue_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

81 
	`lfds700_queue_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
qs
, &
qe
[0], &
ps
, 
NULL
 );

82  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

83 
	`lfds700_queue_íqueue
–
qs
, &
qe
[
lo›
], &
ps
 );

85  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

87 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

88 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

89 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

93 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

95  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

97 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

99 
œsue_Õ
 = 
NULL
;

100 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

102  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

104 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

106 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

108 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

109 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

112 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

113 
œrge°_≤s
 = 
≤s
;

116 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds700_queue_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

117 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds700_queue_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

118 
	`lfds700_queue_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
qs
, 
qe
, &
ps
, 
NULL
 );

124 
œsue
 = 
NULL
;

126  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

128 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

134 
œsue_Õ
 = 
NULL
;

135 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

137  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

139 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

141 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

143 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

144 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

147 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds700_queue_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

148  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

149 
	`lfds700_queue_íqueue
–
qs
, &
qe
[
lo›
], &
ps
 );

154 
œsue
 = 
NULL
;

156  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

158 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

159 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

160 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

164 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

166  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

168 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

170 
œsue_Õ
 = 
NULL
;

171 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

173  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

175 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

177 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

179 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

180 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

183 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

184 
œrge°_≤s
 = 
≤s
;

187 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds700_queue_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

188 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds700_queue_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

189 
	`lfds700_queue_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
qs
, 
qe
, &
ps
, 
NULL
 );

195 
œsue
 = 
NULL
;

197  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

199 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

205 
œsue_Õ
 = 
NULL
;

206 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

208  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

210 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

212 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

214 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

215 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

219 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds700_queue_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

220  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

221 
	`lfds700_queue_íqueue
–
qs
, &
qe
[
lo›
], &
ps
 );

226 
œsue
 = 
NULL
;

228  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

230 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

231 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

232 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

236 
obs
->
qs
 = qs;

237 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

240 
	}
}

247 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

250 
cuºít_time
 = 0,

251 
íd_time
,

252 
time_unôs_≥r_£c⁄d
;

254 
lfds700_misc_¥ng_°©e


255 
ps
;

257 
lfds711_∑l_uöt_t


258 
›î©i⁄_cou¡
 = 0,

259 
time_lo›
 = 0;

261 
lfds700_queue_ñemít


262 *
qe
;

264 
lfds700_queue_°©e


265 *
qs
;

267 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e


268 *
obs
;

270 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


271 *
±bs
;

273 
libbíchm¨k_thªad£t_≥r_thªad_°©e


274 *
±s
;

276 
LFDS711_MISC_BARRIER_LOAD
;

278 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

280 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

282 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

283 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

284 
qs
 = 
obs
->qs;

286 
	`lfds700_misc_¥ng_öô
–&
ps
 );

288 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

290 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

292 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

294 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

296  
cuºít_time
 < 
íd_time
 )

298 
	`lfds700_queue_dequeue
–
qs
, &
qe
, &
ps
 );

299 
	`lfds700_queue_íqueue
–
qs
, 
qe
, &
ps
 );

300 
›î©i⁄_cou¡
++;

302 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

304 
time_lo›
 = 0;

305 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

309 
±bs
->
›î©i⁄_cou¡
 = operation_count;

311 
LFDS711_MISC_BARRIER_STORE
;

313 
	`lfds711_misc_f‹˚_°‹e
();

315  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

316 
	}
}

323 
	$libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

324 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

325 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

326 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

328 
lfds711_li°_asu_ñemít


329 *
œsue
 = 
NULL
;

331 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e


332 *
obs
;

334 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


335 *
±bs
;

337 
libbíchm¨k_thªad£t_≥r_thªad_°©e


338 *
±s
;

340 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

342 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

343 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

345  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

347 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

349 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

351 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

352 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

353 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

354 
LIBBENCHMARK_LOCK_ID_LIBLFDS700_LOCKFREE
,

355 
numa_mode
,

356 
logiˇl_¥o˚ss‹_£t
,

357 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

358 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

359 
±bs
->
›î©i⁄_cou¡
 );

362 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

364 
	`lfds700_queue_˛ónup
–
obs
->
qs
, 
NULL
 );

367 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_liblfds711_lockfree_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

11 
	slibbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e


13 
lfds711_queue_umm_°©e


14 *
	mqs
;

22 
	$libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

23 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

24 
libsh¨ed_mem‹y_°©e
 *
ms
,

25 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

26 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

28 
lfds711_∑l_uöt_t


29 
lo›
,

30 
numbî_logiˇl_¥o˚ss‹s
,

31 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

32 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

34 
lfds711_li°_asu_ñemít


35 *
œsue
 = 
NULL
,

36 *
œsue_Õ
 = 
NULL
;

38 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e


39 *
obs
;

41 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


42 *
±bs
;

44 
lfds711_queue_umm_ñemít


45 *
qe
;

47 
lfds711_queue_umm_°©e


48 *
qs
 = 
NULL
;

50 
libbíchm¨k_thªad£t_≥r_numa_°©e


51 *
≤s
,

52 *
œrge°_≤s
 = 
NULL
;

54 
libbíchm¨k_thªad£t_≥r_thªad_°©e


55 *
±s
;

57 
libbíchm¨k_t›ﬁogy_node_°©e


58 *
numa_node_f‹_Õ
;

60 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

62 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

64 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

66 
obs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

68 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_thªad
, 
NULL
 );

70  
numa_mode
 )

72 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

73 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_queue_umm_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

74 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

75 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_queue_umm_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

76 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
qs
, &
qe
[0], 
NULL
 );

77  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

78 
	`lfds711_queue_umm_íqueue
–
qs
, &
qe
[
lo›
] );

80  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

82 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

84 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

88 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

90  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

92 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

94 
œsue_Õ
 = 
NULL
;

95 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

97  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

99 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

101 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

103 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

104 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

107 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

108 
œrge°_≤s
 = 
≤s
;

111 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_queue_umm_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

112 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_queue_umm_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

113 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
qs
, 
qe
, 
NULL
 );

119 
œsue
 = 
NULL
;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

123 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

129 
œsue_Õ
 = 
NULL
;

130 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

132  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

134 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

136 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

138 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

139 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

142 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
lfds711_queue_umm_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

143  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

144 
	`lfds711_queue_umm_íqueue
–
qs
, &
qe
[
lo›
] );

149 
œsue
 = 
NULL
;

151  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

153 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

154 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

155 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

159 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

161  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

163 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

165 
œsue_Õ
 = 
NULL
;

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

168  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

170 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

172 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

174 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

175 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

178 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

179 
œrge°_≤s
 = 
≤s
;

182 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_queue_umm_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

183 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_queue_umm_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

184 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
qs
, 
qe
, 
NULL
 );

190 
œsue
 = 
NULL
;

192  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

194 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

200 
œsue_Õ
 = 
NULL
;

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

203  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

205 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

207 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

209 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

210 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

214 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
lfds711_queue_umm_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

215  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

216 
	`lfds711_queue_umm_íqueue
–
qs
, &
qe
[
lo›
] );

221 
œsue
 = 
NULL
;

223  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

225 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

226 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

227 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

231 
obs
->
qs
 = qs;

232 
t£ts
->
u£rs_thªad£t_°©e
 = 
obs
;

235 
	}
}

242 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

245 
cuºít_time
 = 0,

246 
íd_time
,

247 
time_unôs_≥r_£c⁄d
;

249 
lfds711_∑l_uöt_t


250 
›î©i⁄_cou¡
 = 0,

251 
time_lo›
 = 0;

253 
lfds711_queue_umm_ñemít


254 *
qe
;

256 
lfds711_queue_umm_°©e


257 *
qs
;

259 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e


260 *
obs
;

262 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


263 *
±bs
;

265 
libbíchm¨k_thªad£t_≥r_thªad_°©e


266 *
±s
;

268 
LFDS711_MISC_BARRIER_LOAD
;

270 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

272 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

274 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

275 
obs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

276 
qs
 = 
obs
->qs;

278 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

280 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

282 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

284 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

286  
cuºít_time
 < 
íd_time
 )

288 
	`lfds711_queue_umm_dequeue
–
qs
, &
qe
 );

289 
	`lfds711_queue_umm_íqueue
–
qs
, 
qe
 );

290 
›î©i⁄_cou¡
++;

292 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

294 
time_lo›
 = 0;

295 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

299 
±bs
->
›î©i⁄_cou¡
 = operation_count;

301 
LFDS711_MISC_BARRIER_STORE
;

303 
	`lfds711_misc_f‹˚_°‹e
();

305  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

306 
	}
}

313 
	$libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

314 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

315 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

316 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

318 
lfds711_li°_asu_ñemít


319 *
œsue
 = 
NULL
;

321 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_ovîÆl_bíchm¨k_°©e


322 *
obs
;

324 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


325 *
±bs
;

327 
libbíchm¨k_thªad£t_≥r_thªad_°©e


328 *
±s
;

330 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

332 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

333 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

335  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

337 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

339 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

341 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

342 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

343 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

344 
LIBBENCHMARK_LOCK_ID_LIBLFDS711_LOCKFREE
,

345 
numa_mode
,

346 
logiˇl_¥o˚ss‹_£t
,

347 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

348 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

349 
±bs
->
›î©i⁄_cou¡
 );

352 
obs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

354 
	`lfds711_queue_umm_˛ónup
–
obs
->
qs
, 
NULL
 );

357 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_msvc_spinlock_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_MSVC_SPINLOCK
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_pthread_mutex_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_PTHREAD_MUTEX
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_pthread_rwlock_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_PTHREAD_RWLOCK
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_pthread_spinlock_process_private_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_PRIVATE
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_pthread_spinlock_process_shared_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_SHARED
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_windows_critical_section_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_WINDOWS_CRITICAL_SECTION
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_windows_mutex_enqueue1_dequeue1.c

2 
	~"libbíchm¨k_bíchm¨ks_queue_umm_öã∫Æ.h
"

5 
	slibbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


7 
lfds711_∑l_uöt_t


8 
	m›î©i⁄_cou¡
;

16 
	$libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

17 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
,

19 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

20 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

22 
lfds711_∑l_uöt_t


23 
lo›
,

24 
numbî_logiˇl_¥o˚ss‹s
,

25 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
,

26 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

28 
lfds711_li°_asu_ñemít


29 *
œsue
 = 
NULL
,

30 *
œsue_Õ
 = 
NULL
;

32 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


33 *
±bs
;

35 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít


36 *
qe
;

38 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e


39 *
qs
 = 
NULL
;

41 
libbíchm¨k_thªad£t_≥r_numa_°©e


42 *
≤s
,

43 *
œrge°_≤s
 = 
NULL
;

45 
libbíchm¨k_thªad£t_≥r_thªad_°©e


46 *
±s
;

48 
libbíchm¨k_t›ﬁogy_node_°©e


49 *
numa_node_f‹_Õ
;

51 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

55 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

57 
	`libbíchm¨k_thªad£t_öô
–
t£ts
, 
ts
, 
logiˇl_¥o˚ss‹_£t
, 
ms
, 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_thªad
, 
NULL
 );

59  
numa_mode
 )

61 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

62 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

63 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

64 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_öô
–
qs
, &
qe
[0], 
NULL
 );

66  
lo›
 = 1 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
+1) ;Üoop++ )

67 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_íqueue_umm
–
qs
, &
qe
[
lo›
] );

69  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

71 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

73 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

77 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

79  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

81 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

83 
œsue_Õ
 = 
NULL
;

84 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

86  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

88 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

90 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

92 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

93 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

96 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

97 
œrge°_≤s
 = 
≤s
;

100 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_öô
–
qs
, 
qe
, 
NULL
 );

108 
œsue
 = 
NULL
;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

112 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

118 
œsue_Õ
 = 
NULL
;

119 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

121  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

123 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

125 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

127 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

128 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

131 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

132  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

133 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_íqueue_umm
–
qs
, &
qe
[
lo›
] );

138 
œsue
 = 
NULL
;

140  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

142 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

143 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

144 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

148 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

149 
	`lfds711_li°_aso_quîy
–
logiˇl_¥o˚ss‹_£t
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_logiˇl_¥o˚ss‹s
 );

152  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

154 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

156 
œsue_Õ
 = 
NULL
;

157 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

159  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

161 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

163 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

165 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

166 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

169 if–
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 > 
œrge°_numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 )

170 
œrge°_≤s
 = 
≤s
;

173 
qs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

174 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
+1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

175 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_öô
–
qs
, 
qe
, 
NULL
 );

181 
œsue
 = 
NULL
;

183  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

185 
≤s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

191 
œsue_Õ
 = 
NULL
;

192 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 = 0;

194  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue_Õ
) )

196 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ
 );

198 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
±s
->
äs_Õ
, &
numa_node_f‹_Õ
 );

200 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
numa_node_f‹_Õ
Ë=
≤s
->
numa_node_id
 )

201 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
++;

205 
qe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

206  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s_ö_numa_node
 ;Üoop++ )

207 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_íqueue_umm
–
qs
, &
qe
[
lo›
] );

212 
œsue
 = 
NULL
;

214  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

216 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

217 
±bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
œrge°_≤s
->
numa_node_id
, (
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

218 
±s
->
u£rs_≥r_thªad_°©e
 = 
±bs
;

222 
t£ts
->
u£rs_thªad£t_°©e
 = 
qs
;

225 
	}
}

232 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_thªad
–*
libbíchm¨k_thªad£t_≥r_thªad_°©e
 )

235 
cuºít_time
 = 0,

236 
íd_time
,

237 
time_unôs_≥r_£c⁄d
;

239 
lfds711_∑l_uöt_t


240 
›î©i⁄_cou¡
 = 0,

241 
time_lo›
 = 0;

243 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít


244 *
qe
;

246 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e


247 *
qs
;

249 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


250 *
±bs
;

252 
libbíchm¨k_thªad£t_≥r_thªad_°©e


253 *
±s
;

255 
LFDS711_MISC_BARRIER_LOAD
;

257 
	`LFDS711_PAL_ASSERT
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 !
NULL
 );

259 
±s
 = (
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *)Üibbenchmark_threadset_per_thread_state;

261 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

262 
qs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_OVERALL_STATE
–*
±s
 );

264 
	`LIBBENCHMARK_PAL_TIME_UNITS_PER_SECOND
–&
time_unôs_≥r_£c⁄d
 );

266 
	`libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
±s
 );

268 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

270 
íd_time
 = 
cuºít_time
 + 
time_unôs_≥r_£c⁄d
 * 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

272  
cuºít_time
 < 
íd_time
 )

274 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_dequeue_umm
–
qs
, &
qe
 );

275 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_íqueue_umm
–
qs
, 
qe
 );

276 
›î©i⁄_cou¡
++;

278 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

280 
time_lo›
 = 0;

281 
	`LIBBENCHMARK_PAL_GET_HIGHRES_TIME
–&
cuºít_time
 );

285 
±bs
->
›î©i⁄_cou¡
 = operation_count;

287 
LFDS711_MISC_BARRIER_STORE
;

289 
	`lfds711_misc_f‹˚_°‹e
();

291  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

292 
	}
}

299 
	$libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_˛ónup
–
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

300 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

301 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

302 
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

304 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e


305 *
qs
;

307 
lfds711_li°_asu_ñemít


308 *
œsue
 = 
NULL
;

310 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_≥r_thªad_bíchm¨k_°©e


311 *
±bs
;

313 
libbíchm¨k_thªad£t_≥r_thªad_°©e


314 *
±s
;

316 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

318 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

319 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

321  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

323 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

325 
±bs
 = 
	`LIBBENCHMARK_THREADSET_PER_THREAD_STATE_GET_USERS_PER_THREAD_STATE
–*
±s
 );

327 
	`libbíchm¨k_ªsu…s_put_ªsu…
–
rs
,

328 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
,

329 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
,

330 
LIBBENCHMARK_LOCK_ID_WINDOWS_MUTEX
,

331 
numa_mode
,

332 
logiˇl_¥o˚ss‹_£t
,

333 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*
±s
->
äs_Õ
 ),

334 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*
±s
->
äs_Õ
 ),

335 
±bs
->
›î©i⁄_cou¡
 );

338 
qs
 = 
t£ts
->
u£rs_thªad£t_°©e
;

340 
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_˛ónup
–
qs
, 
NULL
 );

343 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_add.c

2 
	~"libbíchm¨k_bíchm¨k£t_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
libbíchm¨k_bíchm¨k£t_°©e
 *
bss
, 
libbíchm¨k_bíchm¨kö°™˚_°©e
 *
bs
 )

11 
	`LFDS711_PAL_ASSERT
–
bss
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
bs
 !
NULL
 );

14 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
bs
->
œsue
, bs );

15 
	`lfds711_li°_asu_ö£π_©_íd
–&
bss
->
bíchm¨ks
, &
bs
->
œsue
 );

18 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_cleanup.c

2 
	~"libbíchm¨k_bíchm¨k£t_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libbíchm¨k_bíchm¨k£t_˛ónup
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
 )

13 
	`LFDS711_PAL_ASSERT
–
b£ts
 !
NULL
 );

16 
	}
}

18 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_gnuplot.c

2 
	~"libbíchm¨k_bíchm¨k£t_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨k£t_gnu∂Ÿ_emô
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
,

10 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

11 *
gnu∂Ÿ_sy°em_°rög
,

12 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

13 
libbíchm¨k_gnu∂Ÿ_›ti⁄s
 *
gpo
,

14 
libbíchm¨k_bíchm¨k£t_gnu∂Ÿ
 *
bg
 )

17 
≤g_fûíame
[512],

18 
ãmp_°rög
[64],

19 *
t›ﬁogy_°rög
;

22 *
libbíchm¨k_vîsi⁄_™d_buûd_°rög
,

23 *
liblfds_vîsi⁄_™d_buûd_°rög
,

24 *
libsh¨ed_vîsi⁄_™d_buûd_°rög
;

26 
Êag


27 
found_Êag
;

30 
rv
;

32 
lfds711_∑l_uöt_t


33 
cou¡
,

34 
gª©e°_digô
 = 0,

35 
gª©e°_ªsu…
 = 0,

36 
Àngth
,

37 
lo›
,

38 
l⁄ge°_löe_Àngth
 = 0,

39 
ªsu…
,

40 
£c⁄d_gª©e°_digô
,

41 
ãmp_gª©e°_ªsu…
,

42 
tôÀ_löe_Àngths
[5],

43 
y_max
 = 0,

44 
numbî_logiˇl_c‹es
,

45 
numbî_bíchm¨ks
,

46 
numbî_Õ_£ts
,

47 
t›ﬁogy_°rög_Àngth
,

48 
⁄e_block_xticks
,

49 
⁄e_block_∂Ÿ
,

50 
⁄e_block_tôÀs
,

51 
⁄e_block_numîic_d©a
,

52 
⁄e_ö√r_block
,

53 
⁄e_ouãr_block
,

54 
⁄e_block
,

55 
tŸÆ_Àngth_ö_byãs
;

57 
libbíchm¨k_bíchm¨kö°™˚_°©e


58 *
bs
;

60 
lfds711_båì_au_ñemít


61 *
baue
,

62 *
baue_ö√r
,

63 *
baue_ãmp
;

65 
lfds711_li°_asu_ñemít


66 *
œsue_bíchm¨ks
,

67 *
œsue_bíchm¨ks_ouãr
,

68 *
œsue_Õ£t
,

69 *
œsue_ãmp
;

71 
lfds711_li°_aso_ñemít


72 *
œs€
,

73 *
œs€_ö√r
;

75 
lfds711_li°_aso_°©e


76 *
logiˇl_¥o˚ss‹_£t
;

78 
libbíchm¨k_t›ﬁogy_node_°©e


79 *
äs
,

80 *
äs_ªsu…s
,

81 *
äs_ö√r
 = 
NULL
;

83 
	`LFDS711_PAL_ASSERT
–
b£ts
 !
NULL
 );

84 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

85 
	`LFDS711_PAL_ASSERT
–
gnu∂Ÿ_sy°em_°rög
 !
NULL
 );

87 
	`LFDS711_PAL_ASSERT
–
gpo
 !
NULL
 );

88 
	`LFDS711_PAL_ASSERT
–
bg
 !
NULL
 );

90 
bg
->
d©a°ru˘uª_id
 = 
b£ts
->datastructure_id;

91 
bg
->
bíchm¨k_id
 = 
b£ts
->benchmark_id;

112 
t›ﬁogy_°rög
 = 
	`libbíchm¨k_t›ﬁogy_gíî©e_°rög
–
b£ts
->
ts
, b£ts->
ms
, 
LIBBENCHMARK_TOPOLOGY_STRING_FORMAT_GNUPLOT
 );

114 
	`libbíchm¨k_t›ﬁogy_quîy
–
b£ts
->
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMBER_OF_NODE_TYPE
, (*Ë(
lfds711_∑l_uöt_t
Ë
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
, &
numbî_logiˇl_c‹es
 );

115 
	`lfds711_li°_asu_quîy
–&
b£ts
->
bíchm¨ks
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, &
numbî_bíchm¨ks
 );

116 
	`lfds711_li°_asu_quîy
–
b£ts
->
logiˇl_¥o˚ss‹_£ts
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_Õ_£ts
 );

118 
t›ﬁogy_°rög_Àngth
 = 
	`libsh¨ed_™si_°æí
–
t›ﬁogy_°rög
 );

119 
⁄e_block_xticks
 = 64 + 6 * 
numbî_logiˇl_c‹es
;

120 
⁄e_block_∂Ÿ
 = 16 + 40 * 
numbî_bíchm¨ks
;

121 
⁄e_block_tôÀs
 = 32 * 
numbî_bíchm¨ks
;

122 
⁄e_block_numîic_d©a
 = (16 + 
numbî_bíchm¨ks
Ë*Çumbî_bíchm¨k†* 
numbî_logiˇl_c‹es
;

123 
⁄e_ö√r_block
 = 
⁄e_block_tôÀs
 + 
⁄e_block_numîic_d©a
 + 2;

124 
⁄e_ouãr_block
 = 
⁄e_block_xticks
 + 
⁄e_block_∂Ÿ
;

125 
⁄e_block
 = 
⁄e_ö√r_block
 * 
numbî_bíchm¨ks
 + 
⁄e_ouãr_block
;

126 
tŸÆ_Àngth_ö_byãs
 = 
t›ﬁogy_°rög_Àngth
 + 4096 + 
⁄e_block
 * (
numbî_Õ_£ts
+1);

128 
bg
->
gnu∂Ÿ_°rög
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
b£ts
->
ms
, 
tŸÆ_Àngth_ö_byãs
, () );

130 
	`lfds711_misc_quîy
–
LFDS711_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
liblfds_vîsi⁄_™d_buûd_°rög
 );

131 
	`libbíchm¨k_misc_quîy
–
LIBBENCHMARK_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
libbíchm¨k_vîsi⁄_™d_buûd_°rög
 );

132 
	`libsh¨ed_misc_quîy
–
LIBSHARED_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
libsh¨ed_vîsi⁄_™d_buûd_°rög
 );

134 
	`libsh¨ed_™si_°r˝y
–
bg
->
fûíame
, "liblfds" );

135 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
fûíame
, (
lfds711_∑l_uöt_t
Ë
LFDS711_MISC_VERSION_INTEGER
 );

136 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, "_" );

137 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, 
libbíchm¨k_globÆs_d©a°ru˘uª_«mes
[
b£ts
->
d©a°ru˘uª_id
] );

138 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, "_" );

139 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, 
libbíchm¨k_globÆs_bíchm¨k_«mes
[
b£ts
->
bíchm¨k_id
] );

140 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, "_" );

141 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, 
libbíchm¨k_globÆs_numa_mode_«mes
[
numa_mode
] );

142 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, "_" );

143 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, 
gnu∂Ÿ_sy°em_°rög
 );

144 
	`libsh¨ed_™si_°rˇt
–
bg
->
fûíame
, ".gnuplot" );

146 
	`libsh¨ed_™si_°r˝y
–
≤g_fûíame
, "liblfds" );

147 
	`libsh¨ed_™si_°rˇt_numbî
–
≤g_fûíame
, (
lfds711_∑l_uöt_t
Ë
LFDS711_MISC_VERSION_INTEGER
 );

148 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, "_" );

149 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, 
libbíchm¨k_globÆs_d©a°ru˘uª_«mes
[
b£ts
->
d©a°ru˘uª_id
] );

150 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, "_" );

151 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, 
libbíchm¨k_globÆs_bíchm¨k_«mes
[
b£ts
->
bíchm¨k_id
] );

152 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, "_" );

153 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, 
libbíchm¨k_globÆs_numa_mode_«mes
[
numa_mode
] );

154 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, "_" );

155 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, 
gnu∂Ÿ_sy°em_°rög
 );

156 
	`libsh¨ed_™si_°rˇt
–
≤g_fûíame
, ".png" );

159 
	`libsh¨ed_™si_°r˝y
–
bg
->
gnu∂Ÿ_°rög
, "set output \"" );

160 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
≤g_fûíame
 );

161 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\"\n" );

163 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "setÅerminalÖngcairoÉnhanced font \"Courier New,14\" size " );

165 if–
gpo
->
width_ö_pixñs_£t_Êag
 =
RAISED
 )

166 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
gpo
->
width_ö_pixñs
 );

169 if–
gpo
->
width_ö_pixñs_£t_Êag
 =
LOWERED
 )

170 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
numbî_logiˇl_c‹es
 * 300 );

172 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "," );

175 if–
gpo
->
height_ö_pixñs_£t_Êag
 =
RAISED
 )

176 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
gpo
->
height_ö_pixñs
 );

178 if–
gpo
->
height_ö_pixñs_£t_Êag
 =
LOWERED
 )

179 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, (
numbî_Õ_£ts
+2) * 300 );

181 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\n" );

182 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "set multiplotÅitle \"" );

185 
tôÀ_löe_Àngths
[0] = 
	`libsh¨ed_™si_°æí
–"d©®°ru˘uª : " ) +Üibsh¨ed_™si_°æí–
libbíchm¨k_globÆs_d©a°ru˘uª_«mes
[
b£ts
->
d©a°ru˘uª_id
] );

186 
tôÀ_löe_Àngths
[1] = 
	`libsh¨ed_™si_°æí
–"bíchm¨k : " ) +Üibsh¨ed_™si_°æí–
libbíchm¨k_globÆs_bíchm¨k_«mes
[
b£ts
->
bíchm¨k_id
] );

187 
tôÀ_löe_Àngths
[2] = 
	`libsh¨ed_™si_°æí
–"num®modê : " ) +Üibsh¨ed_™si_°æí–
libbíchm¨k_globÆs_numa_mode_«mes
[
numa_mode
] );

188 
ãmp_°rög
[0] = '\0';

189 
	`libsh¨ed_™si_°rˇt_numbî
–
ãmp_°rög
, 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
 );

190 
tôÀ_löe_Àngths
[3] = 
	`libsh¨ed_™si_°æí
–"duøti⁄ : sec⁄ds(s)" ) +Üibsh¨ed_™si_°æí–
ãmp_°rög
 );

191 
tôÀ_löe_Àngths
[4] = 
	`libsh¨ed_™si_°æí
–"sy°em : " ) +Üibsh¨ed_™si_°æí–
gnu∂Ÿ_sy°em_°rög
 );

193  
lo›
 = 0 ;Üoop < 5 ;Üoop++ )

194 if–
tôÀ_löe_Àngths
[
lo›
] > 
l⁄ge°_löe_Àngth
 )

195 
l⁄ge°_löe_Àngth
 = 
tôÀ_löe_Àngths
[
lo›
];

198 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "data structure : " );

199 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
libbíchm¨k_globÆs_d©a°ru˘uª_«mes
[
b£ts
->
d©a°ru˘uª_id
] );

200  
lo›
 = 0 ;Üo› < 
l⁄ge°_löe_Àngth
 - 
tôÀ_löe_Àngths
[0] ;Üoop++ )

201 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " " );

202 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

204 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "benchmark : " );

205 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
libbíchm¨k_globÆs_bíchm¨k_«mes
[
b£ts
->
bíchm¨k_id
] );

206  
lo›
 = 0 ;Üo› < 
l⁄ge°_löe_Àngth
 - 
tôÀ_löe_Àngths
[1] ;Üoop++ )

207 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " " );

208 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

210 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "numa mode : " );

211 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
libbíchm¨k_globÆs_numa_mode_«mes
[
numa_mode
] );

212  
lo›
 = 0 ;Üo› < 
l⁄ge°_löe_Àngth
 - 
tôÀ_löe_Àngths
[2] ;Üoop++ )

213 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " " );

214 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

216 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "duration : " );

217 
ãmp_°rög
[0] = '\0';

218 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
 );

219 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " seconds(s)" );

220  
lo›
 = 0 ;Üo› < 
l⁄ge°_löe_Àngth
 - 
tôÀ_löe_Àngths
[3] ;Üoop++ )

221 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " " );

222 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

224 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "system : " );

225 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
gnu∂Ÿ_sy°em_°rög
 );

226  
lo›
 = 0 ;Üo› < 
l⁄ge°_löe_Àngth
 - 
tôÀ_löe_Àngths
[4] ;Üoop++ )

227 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " " );

228 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

230 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

231 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
t›ﬁogy_°rög
 );

232 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

234 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "Yáxis = ops/sec, Xáxis =Üogical cores in use\\n\\\n" );

235 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

236 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, (*Ë
liblfds_vîsi⁄_™d_buûd_°rög
 );

237 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

238 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, (*Ë
libsh¨ed_vîsi⁄_™d_buûd_°rög
 );

239 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\\n\\\n" );

240 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, (*Ë
libbíchm¨k_vîsi⁄_™d_buûd_°rög
 );

242 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\"Üayout " );

244 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
numbî_Õ_£ts
+1 );

245 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, ",1ÑowsfirstÇoenhanced\n"

269 
œsue_Õ£t
 = 
NULL
;

271  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
b£ts
->
logiˇl_¥o˚ss‹_£ts
,
œsue_Õ£t
) )

273 
logiˇl_¥o˚ss‹_£t
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ£t
 );

276 
œsue_bíchm¨ks
 = 
NULL
;

278  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks
) )

280 
bs
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_bíchm¨ks
 );

283 
œs€
 = 
NULL
;

285  
	`LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
(*
logiˇl_¥o˚ss‹_£t
, 
œs€
) )

287 
äs_ªsu…s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œs€
 );

290 
	`libbíchm¨k_ªsu…s_gë_ªsu…
–
rs
,

291 
b£ts
->
d©a°ru˘uª_id
,

292 
b£ts
->
bíchm¨k_id
,

293 
bs
->
lock_id
,

294 
numa_mode
,

295 
logiˇl_¥o˚ss‹_£t
,

296 
äs_ªsu…s
,

297 &
ªsu…
 );

299 if–
ªsu…
 > 
gª©e°_ªsu…
 )

300 
gª©e°_ªsu…
 = 
ªsu…
;

305 if–
gpo
->
y_axis_sˇÀ_ty≥
 =
LIBBENCHMARK_GNUPLOT_Y_AXIS_SCALE_TYPE_LINEAR
 )

306 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "set yrange [0:" );

308 if–
gpo
->
y_axis_sˇÀ_ty≥
 =
LIBBENCHMARK_GNUPLOT_Y_AXIS_SCALE_TYPE_LOGARITHMIC
 )

309 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "setÜogscale y\n"

320 
ãmp_gª©e°_ªsu…
 = 
gª©e°_ªsu…
 / 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
;

321 
Àngth
 = 0;

325 
£c⁄d_gª©e°_digô
 = 
gª©e°_digô
;

326 
gª©e°_digô
 = 
ãmp_gª©e°_ªsu…
 % 10;

327 
Àngth
++;

328 
ãmp_gª©e°_ªsu…
 -
gª©e°_digô
;

329 
ãmp_gª©e°_ªsu…
 /= 10;

331  
ãmp_gª©e°_ªsu…
 > 0 );

333 if–
Àngth
 == 1 )

335 
£c⁄d_gª©e°_digô
 = 
gª©e°_digô
;

336 
gª©e°_digô
 = 0;

339 if–
£c⁄d_gª©e°_digô
 < 5 )

340 
y_max
 = 
gª©e°_digô
 * 10 + 5;

342 if–
£c⁄d_gª©e°_digô
 >= 5 )

343 
y_max
 = (
gª©e°_digô
+1) * 10;

345 if–
Àngth
 >= 2 )

346  
lo›
 = 0 ;Üo› < 
Àngth
-2 ;Üoop++ )

347 
y_max
 *= 10;

349 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
y_max
 );

350 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "]\n" );

354 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "plot " );

356 
œsue_bíchm¨ks
 = 
NULL
;

357 
cou¡
 = 1;

359  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks
) )

361 
œsue_ãmp
 = 
œsue_bíchm¨ks
;

362 
œsue_ãmp
 = 
	`LFDS711_LIST_ASU_GET_NEXT
( *lasue_temp );

364 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " '-' using " );

365 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
cou¡
++ );

366 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
œsue_ãmp
 !
NULL
 ? ", \\\n" : "\n" );

382 
œsue_bíchm¨ks_ouãr
 = 
NULL
;

384  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks_ouãr
) )

387 
œsue_bíchm¨ks
 = 
NULL
;

389  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks
) )

391 
bs
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_bíchm¨ks
 );

393 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\"" );

394 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
libbíchm¨k_globÆs_lock_«mes
[
bs
->
lock_id
] );

395 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\" " );

398 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\n" );

401 
œsue_Õ£t
 = 
NULL
;

403  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
b£ts
->
logiˇl_¥o˚ss‹_£ts
,
œsue_Õ£t
) )

405 
logiˇl_¥o˚ss‹_£t
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ£t
 );

408 
œsue_bíchm¨ks
 = 
NULL
;

410  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks
) )

411 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "0 " );

413 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\n" );

416 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "e\n" );

419 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "set key off\n"

426 
œsue_Õ£t
 = 
NULL
;

428  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
b£ts
->
logiˇl_¥o˚ss‹_£ts
,
œsue_Õ£t
) )

430 
logiˇl_¥o˚ss‹_£t
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ£t
 );

439 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "set xtics 1 outÇomirror ( " );

441 
baue
 = 
NULL
;

442 
cou¡
 = 0;

444  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
b£ts
->
ts
->
t›ﬁogy_åì
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

446 
äs
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

448 if–
äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

455 
œs€_ö√r
 = 
NULL
;

456 
found_Êag
 = 
LOWERED
;

458  
found_Êag
 =
LOWERED
 
™d
 
	`LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
(*
logiˇl_¥o˚ss‹_£t
, 
œs€_ö√r
) )

460 
äs_ö√r
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œs€_ö√r
 );

462 if–0 =
	`libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
(
äs
, 
äs_ö√r
) )

463 
found_Êag
 = 
RAISED
;

469 
baue_ãmp
 = 
baue
;

470 
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
–&
baue_ãmp
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
 );

471 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\"" );

473 if–
found_Êag
 =
RAISED
 )

475 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
(*
äs_ö√r
) );

477 if–
	`LIBBENCHMARK_TOPOLOGY_NODE_IS_WINDOWS_GROUP_NUMBER
(*
äs_ö√r
) )

479 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "/" );

480 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
(*
äs_ö√r
) );

484 if–
found_Êag
 =
LOWERED
 )

485 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "-" );

487 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\" " );

488 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
cou¡
++ );

489 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
baue_ãmp
 !
NULL
 ? ", " : " " );

493 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " )\n" );

503 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "plot " );

506 
œsue_bíchm¨ks
 = 
NULL
;

507 
cou¡
 = 1;

509  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks
) )

511 
œsue_ãmp
 = 
œsue_bíchm¨ks
;

512 
œsue_ãmp
 = 
	`LFDS711_LIST_ASU_GET_NEXT
( *lasue_temp );

514 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " '-' using " );

515 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
cou¡
++ );

516 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
œsue_ãmp
 !
NULL
 ? ", \\\n" : "\n" );

529 
œsue_bíchm¨ks_ouãr
 = 
NULL
;

531  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks_ouãr
) )

533 
baue
 = 
NULL
;

536 
œsue_bíchm¨ks
 = 
NULL
;

538  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks
) )

540 
bs
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_bíchm¨ks
 );

542 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\"" );

543 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, 
libbíchm¨k_globÆs_lock_«mes
[
bs
->
lock_id
] );

544 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\" " );

547 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\n" );

549 
baue_ö√r
 = 
NULL
;

551  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
b£ts
->
ts
->
t›ﬁogy_åì
, &
baue_ö√r
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

553 
äs
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue_ö√r
 );

555 if–
äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

558 
œsue_bíchm¨ks
 = 
NULL
;

560  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks
) )

562 
bs
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_bíchm¨ks
 );

565 
rv
 = 
	`libbíchm¨k_ªsu…s_gë_ªsu…
–
rs
,

566 
b£ts
->
d©a°ru˘uª_id
,

567 
b£ts
->
bíchm¨k_id
,

568 
bs
->
lock_id
,

569 
numa_mode
,

570 
logiˇl_¥o˚ss‹_£t
,

571 
äs
,

572 &
ªsu…
 );

574 if–
rv
 == 0 )

575 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "0 " );

577 if–
rv
 == 1 )

579 
	`libsh¨ed_™si_°rˇt_numbî
–
bg
->
gnu∂Ÿ_°rög
, 
ªsu…
 / 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
);

580 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, " " );

584 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "\n" );

588 
	`libsh¨ed_™si_°rˇt
–
bg
->
gnu∂Ÿ_°rög
, "e\n" );

593 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_init.c

2 
	~"libbíchm¨k_bíchm¨k£t_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨k£t_öô
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
,

10 
libbíchm¨k_d©a°ru˘uª_id
 
d©a°ru˘uª_id
,

11 
libbíchm¨k_bíchm¨k_id
 
bíchm¨k_id
,

12 
lfds711_li°_asu_°©e
 *
logiˇl_¥o˚ss‹_£ts
,

13 
lfds711_li°_asu_°©e
 *
numa_modes_li°
,

14 
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

15 
libsh¨ed_mem‹y_°©e
 *
ms
 )

17 
	`LFDS711_PAL_ASSERT
–
b£ts
 !
NULL
 );

20 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£ts
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
numa_modes_li°
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

23 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

25 
b£ts
->
d©a°ru˘uª_id
 = datastructure_id;

26 
b£ts
->
bíchm¨k_id
 = benchmark_id;

27 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
b£ts
->
bíchm¨ks
, 
NULL
 );

28 
b£ts
->
logiˇl_¥o˚ss‹_£ts
 =Üogical_processor_sets;

29 
b£ts
->
numa_modes_li°
 =Çuma_modes_list;

30 
b£ts
->
ts
 =Ås;

31 
b£ts
->
ms
 = ms;

34 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_run.c

2 
	~"libbíchm¨k_bíchm¨k£t_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨k£t_run
–
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
 )

11 
lfds711_∑l_uöt_t


12 
numbî_numa_nodes
;

14 
libbíchm¨k_bíchm¨kö°™˚_°©e


15 *
bs
;

17 
lfds711_li°_asu_ñemít


18 *
œsue_bíchm¨ks
 = 
NULL
,

19 *
œsue_Õ£t
 = 
NULL
,

20 *
œsue_numa
 = 
NULL
;

22 
lfds711_li°_aso_°©e


23 *
logiˇl_¥o˚ss‹_£t
;

25 
libbíchm¨k_t›ﬁogy_numa_node


26 *
numa_mode
;

28 
	`LFDS711_PAL_ASSERT
–
b£ts
 !
NULL
 );

29 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

31 
	`libbíchm¨k_t›ﬁogy_quîy
–
b£ts
->
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMBER_OF_NODE_TYPE
, (*Ë(
lfds711_∑l_uöt_t
Ë
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
, &
numbî_numa_nodes
 );

34  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
b£ts
->
logiˇl_¥o˚ss‹_£ts
,
œsue_Õ£t
) )

36 
logiˇl_¥o˚ss‹_£t
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_Õ£t
 );

39  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
b£ts
->
bíchm¨ks
,
œsue_bíchm¨ks
) )

41 
bs
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_bíchm¨ks
 );

44  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
b£ts
->
numa_modes_li°
,
œsue_numa
) )

46 
numa_mode
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_numa
 );

47 
	`libbíchm¨k_bíchm¨kö°™˚_run
–
bs
, 
logiˇl_¥o˚ss‹_£t
, 
numa_mode
->
mode
, 
b£ts
->
ms
, 
rs
 );

53 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_add.c

2 
	~"libbíchm¨k_bíchm¨ksuôe_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨ksuôe_add_bíchm¨k£t
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
,

10 
libbíchm¨k_bíchm¨k£t_°©e
 *
b£ts
 )

12 
	`LFDS711_PAL_ASSERT
–
bss
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
b£ts
 !
NULL
 );

15 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
b£ts
->
œsue
, bsets );

16 
	`lfds711_li°_asu_ö£π_©_íd
–&
bss
->
bíchm¨k£ts
, &
b£ts
->
œsue
 );

19 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_cleanup.c

2 
	~"libbíchm¨k_bíchm¨ksuôe_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libbíchm¨k_bíchm¨ksuôe_˛ónup
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
 )

13 
	`LFDS711_PAL_ASSERT
–
bss
 !
NULL
 );

16 
	}
}

18 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_gnuplot.c

2 
	~"libbíchm¨k_bíchm¨ksuôe_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨ksuôe_gë_li°_of_gnu∂Ÿ_°rögs
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
,

10 
libbíchm¨k_ªsu…s_°©e
 *
rs
,

11 *
gnu∂Ÿ_sy°em_°rög
,

12 
libbíchm¨k_gnu∂Ÿ_›ti⁄s
 *
gpo
,

13 
lfds711_li°_asu_°©e
 *
li°_of_gnu∂Ÿ_°rögs
 )

15 
libbíchm¨k_bíchm¨k£t_°©e


16 *
b£ts
;

18 
libbíchm¨k_bíchm¨k£t_gnu∂Ÿ


19 *
bg
;

21 
lfds711_li°_asu_ñemít


22 *
œsue
 = 
NULL
,

23 *
œsue_numa
 = 
NULL
;

25 
libbíchm¨k_t›ﬁogy_numa_node


26 *
numa_mode
;

28 
	`LFDS711_PAL_ASSERT
–
bss
 !
NULL
 );

29 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

30 
	`LFDS711_PAL_ASSERT
–
gnu∂Ÿ_sy°em_°rög
 !
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
gpo
 !
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
li°_of_gnu∂Ÿ_°rögs
 !
NULL
 );

34 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
li°_of_gnu∂Ÿ_°rögs
, 
NULL
 );

37  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
bss
->
bíchm¨k£ts
,
œsue
) )

39 
b£ts
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

42  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
b£ts
->
numa_modes_li°
,
œsue_numa
) )

44 
numa_mode
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue_numa
 );

46 
bg
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
bss
->
ms
, (
libbíchm¨k_bíchm¨k£t_gnu∂Ÿ
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

48 
	`libbíchm¨k_bíchm¨k£t_gnu∂Ÿ_emô
–
b£ts
, 
rs
, 
gnu∂Ÿ_sy°em_°rög
, 
numa_mode
->
mode
, 
gpo
, 
bg
 );

50 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
bg
->
œsue
, bg );

51 
	`lfds711_li°_asu_ö£π_©_íd
–
li°_of_gnu∂Ÿ_°rögs
, &
bg
->
œsue
 );

56 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_init.c

2 
	~"libbíchm¨k_bíchm¨ksuôe_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4127 )

11 
	$libbíchm¨k_bíchm¨ksuôe_öô
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
,

12 
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

13 
libsh¨ed_mem‹y_°©e
 *
ms
,

14 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

15 
lfds711_∑l_uöt_t
 
›ti⁄s_bômask
,

16 
lfds711_∑l_uöt_t
 
bíchm¨k_duøti⁄_ö_£c⁄ds
 )

18 
libbíchm¨k_bíchm¨kö°™˚_°©e


19 *
bs
;

21 
libbíchm¨k_bíchm¨k£t_°©e


22 *
b£ts_båì_au
,

23 *
b£ts_‰ìli°
,

24 *
b£ts_queue_umm
;

26 
	`LFDS711_PAL_ASSERT
–
bss
 !
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

28 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

29 
	`LFDS711_PAL_ASSERT
–
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
 
‹
Çuma_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 );

33 
bss
->
ts
 =Ås;

34 
bss
->
ms
 = ms;

35 
	`libbíchm¨k_t›ﬁogy_gíî©e_dedu∂iˇãd_logiˇl_¥o˚ss‹_£ts
–
bss
->
ts
, 
ms
, &bss->
Õ£ts
 );

36 
	`libbíchm¨k_t›ﬁogy_gíî©e_numa_modes_li°
–
bss
->
ts
, 
numa_mode
, 
ms
, &bss->
numa_modes_li°
 );

37 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
bss
->
bíchm¨k£ts
, 
NULL
 );

39 if–
›ti⁄s_bômask
 & 
LIBBENCHMARK_BENCHMARKSUITE_OPTION_DURATION
 )

40 
libbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
 = 
bíchm¨k_duøti⁄_ö_£c⁄ds
;

43 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_PROCESSOR_BARRIERS
ánd 
LFDS711_MISC_ATOMIC_SUPPORT_CAS
 )

46 
b£ts_båì_au
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k£t_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

47 
	`libbíchm¨k_bíchm¨k£t_öô
–
b£ts_båì_au
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, &
bss
->
Õ£ts
, &bss->
numa_modes_li°
, bss->
ts
, 
ms
 );

48 
	`libbíchm¨k_bíchm¨ksuôe_add_bíchm¨k£t
–
bss
, 
b£ts_båì_au
 );

50 if–
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC
 )

52 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

53 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_ATOMIC
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_©omic_ªadn_wrôí_˛ónup
 );

54 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

57 if–
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC
 )

59 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

60 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_SYNC
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_gcc_•ölock_sync_ªadn_wrôí_˛ónup
 );

61 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

64 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

65 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_LIBLFDS700_LOCKFREE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_liblfds700_lock‰ì_ªadn_wrôí_˛ónup
 );

66 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

68 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

69 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_LIBLFDS711_LOCKFREE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_liblfds711_lock‰ì_ªadn_wrôí_˛ónup
 );

70 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

72 if–
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK
 )

74 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

75 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_MSVC_SPINLOCK
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_msvc_•ölock_ªadn_wrôí_˛ónup
 );

76 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

79 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX
 )

81 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

82 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_MUTEX
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_muãx_ªadn_wrôí_˛ónup
 );

83 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

86 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK
 )

88 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

89 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_RWLOCK
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_rwlock_ªadn_wrôí_˛ónup
 );

90 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

93 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE
 )

95 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

96 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_PRIVATE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªadn_wrôí_˛ónup
 );

97 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

100 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED
 )

102 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

103 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_SHARED
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªadn_wrôí_˛ónup
 );

104 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

107 if–
LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION
 )

109 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

110 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_WINDOWS_CRITICAL_SECTION
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_wödows_¸ôiˇl_£˘i⁄_ªadn_wrôí_˛ónup
 );

111 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

114 if–
LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX
 )

116 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

117 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_BTREE_AU
, 
LIBBENCHMARK_BENCHMARK_ID_READN_THEN_WRITEN
, 
LIBBENCHMARK_LOCK_ID_WINDOWS_MUTEX
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_öô
, 
libbíchm¨k_bíchm¨k_båì_au_wödows_muãx_ªadn_wrôí_˛ónup
 );

118 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_båì_au
, 
bs
 );

123 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_PROCESSOR_BARRIERS
ánd 
LFDS711_MISC_ATOMIC_SUPPORT_DWCAS
 )

126 
b£ts_‰ìli°
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k£t_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

127 
	`libbíchm¨k_bíchm¨k£t_öô
–
b£ts_‰ìli°
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, &
bss
->
Õ£ts
, &bss->
numa_modes_li°
, bss->
ts
, 
ms
 );

128 
	`libbíchm¨k_bíchm¨ksuôe_add_bíchm¨k£t
–
bss
, 
b£ts_‰ìli°
 );

130 if–
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC
 )

132 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

133 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_ATOMIC
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_©omic_push1_p›1_˛ónup
 );

134 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

137 if–
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC
 )

139 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

140 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_SYNC
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_gcc_•ölock_sync_push1_p›1_˛ónup
 );

141 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

144 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

145 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_LIBLFDS700_LOCKFREE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds700_lock‰ì_push1_p›1_˛ónup
 );

146 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

148 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

149 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_LIBLFDS711_LOCKFREE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_liblfds711_lock‰ì_push1_p›1_˛ónup
 );

150 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

152 if–
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK
 )

154 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

155 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_MSVC_SPINLOCK
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_msvc_•ölock_push1_p›1_˛ónup
 );

156 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

159 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX
 )

161 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

162 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_MUTEX
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_muãx_push1_p›1_˛ónup
 );

163 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

166 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK
 )

168 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

169 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_RWLOCK
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_rwlock_push1_p›1_˛ónup
 );

170 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

173 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE
 )

175 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

176 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_PRIVATE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push1_p›1_˛ónup
 );

177 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

180 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED
 )

182 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

183 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_SHARED
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push1_p›1_˛ónup
 );

184 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

187 if–
LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION
 )

189 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

190 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_WINDOWS_CRITICAL_SECTION
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push1_p›1_˛ónup
 );

191 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

194 if–
LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX
 )

196 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

197 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_FREELIST
, 
LIBBENCHMARK_BENCHMARK_ID_PUSH1_THEN_POP1
, 
LIBBENCHMARK_LOCK_ID_WINDOWS_MUTEX
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_öô
, 
libbíchm¨k_bíchm¨k_‰ìli°_wödows_muãx_push1_p›1_˛ónup
 );

198 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_‰ìli°
, 
bs
 );

203 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_PROCESSOR_BARRIERS
ánd 
LFDS711_MISC_ATOMIC_SUPPORT_DWCAS
 )

206 
b£ts_queue_umm
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨k£t_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

207 
	`libbíchm¨k_bíchm¨k£t_öô
–
b£ts_queue_umm
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, &
bss
->
Õ£ts
, &bss->
numa_modes_li°
, bss->
ts
, 
ms
 );

208 
	`libbíchm¨k_bíchm¨ksuôe_add_bíchm¨k£t
–
bss
, 
b£ts_queue_umm
 );

210 if–
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC
 )

212 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

213 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_ATOMIC
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_©omic_íqueue1_dequeue1_˛ónup
 );

214 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

217 if–
LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC
 )

219 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

220 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_GCC_SPINLOCK_SYNC
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_gcc_•ölock_sync_íqueue1_dequeue1_˛ónup
 );

221 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

224 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

225 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_LIBLFDS700_LOCKFREE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_liblfds700_lock‰ì_íqueue1_dequeue1_˛ónup
 );

226 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

228 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

229 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_LIBLFDS711_LOCKFREE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_liblfds711_lock‰ì_íqueue1_dequeue1_˛ónup
 );

230 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

232 if–
LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK
 )

234 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

235 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_MSVC_SPINLOCK
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_msvc_•ölock_íqueue1_dequeue1_˛ónup
 );

236 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

239 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX
 )

241 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

242 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_MUTEX
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_muãx_íqueue1_dequeue1_˛ónup
 );

243 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

246 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK
 )

248 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

249 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_RWLOCK
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_rwlock_íqueue1_dequeue1_˛ónup
 );

250 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

253 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE
 )

255 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

256 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_PRIVATE
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue1_dequeue1_˛ónup
 );

257 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

260 if–
LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED
 )

262 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

263 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_PTHREAD_SPINLOCK_PROCESS_SHARED
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue1_dequeue1_˛ónup
 );

264 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

267 if–
LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION
 )

269 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

270 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_WINDOWS_CRITICAL_SECTION
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue1_dequeue1_˛ónup
 );

271 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

274 if–
LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX
 )

276 
bs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_bíchm¨kö°™˚_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

277 
	`libbíchm¨k_bíchm¨kö°™˚_öô
–
bs
, 
LIBBENCHMARK_DATASTRUCTURE_ID_QUEUE_UMM
, 
LIBBENCHMARK_BENCHMARK_ID_ENQUEUE_UMM1_THEN_DEQUEUE_UMM1
, 
LIBBENCHMARK_LOCK_ID_WINDOWS_MUTEX
, 
bss
->
ts
, 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_öô
, 
libbíchm¨k_bíchm¨k_queue_umm_wödows_muãx_íqueue1_dequeue1_˛ónup
 );

278 
	`libbíchm¨k_bíchm¨k£t_add_bíchm¨k
–
b£ts_queue_umm
, 
bs
 );

283 
	}
}

285 #¥agm®
w¨nög
(  : 4127 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_run.c

2 
	~"libbíchm¨k_bíchm¨ksuôe_öã∫Æ.h
"

9 
	$libbíchm¨k_bíchm¨ksuôe_run
–
libbíchm¨k_bíchm¨ksuôe_°©e
 *
bss
, 
libbíchm¨k_ªsu…s_°©e
 *
rs
 )

12 *
t›ﬁogy_°rög
;

14 
libbíchm¨k_bíchm¨k£t_°©e


15 *
b£ts
;

17 
lfds711_li°_asu_ñemít


18 *
œsue
 = 
NULL
;

20 
	`LFDS711_PAL_ASSERT
–
bss
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

23 
t›ﬁogy_°rög
 = 
	`libbíchm¨k_t›ﬁogy_gíî©e_°rög
–
bss
->
ts
, bss->
ms
, 
LIBBENCHMARK_TOPOLOGY_STRING_FORMAT_STDOUT
 );

25 
	`libbíchm¨k_∑l_¥öt_°rög
–
t›ﬁogy_°rög
 );

28  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
bss
->
bíchm¨k£ts
,
œsue
) )

30 
b£ts
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

32 
	`libbíchm¨k_bíchm¨k£t_run
–
b£ts
, 
rs
 );

36 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_gcc_spinlock_atomic.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

273 
rv
 = 1;

275 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

276 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

279 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
baus
->
lock
 );

281 *
baue
 = 
baus
->
roŸ
;

283  
absﬁuã_posôi⁄
 )

285 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_ABSOLUTE_POSITION_ROOT
:

288 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

289 if–*
baue
 !
NULL
 )

290  (*
baue
)->
right
 !
NULL
 )

291 *
baue
 = (*baue)->
right
;

294 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

295 if–*
baue
 !
NULL
 )

296  (*
baue
)->
À·
 !
NULL
 )

297 *
baue
 = (*baue)->
À·
;

301 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
baus
->
lock
 );

303 if–*
baue
 =
NULL
 )

304 
rv
 = 0;

306  
rv
;

307 
	}
}

314 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

317 
rv
 = 1;

319 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

320 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

323 if–*
baue
 =
NULL
 )

326 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
baus
->
lock
 );

328  
ªœtive_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_UP
:

331 *
baue
 = (*baue)->
up
;

334 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_LEFT
:

335 *
baue
 = (*baue)->
À·
;

338 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_RIGHT
:

339 *
baue
 = (*baue)->
right
;

342 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

343 *
baue
 = (*baue)->
À·
;

344 if–*
baue
 !
NULL
 )

345  (*
baue
)->
right
 !
NULL
 )

346 *
baue
 = (*baue)->
right
;

349 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

350 *
baue
 = (*baue)->
right
;

351 if–*
baue
 !
NULL
 )

352  (*
baue
)->
À·
 !
NULL
 )

353 *
baue
 = (*baue)->
À·
;

356 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

357 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

360 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_ATOMIC_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

361 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

365 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
baus
->
lock
 );

367 if–*
baue
 =
NULL
 )

368 
rv
 = 0;

370  
rv
;

371 
	}
}

378 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

380 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
 )

382 
libbíchm¨k_d©a°ru˘uª_båì_au_move


383 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

385 
Êag


386 
föished_Êag
 = 
LOWERED
;

388 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


389 *
À·
,

390 *
up
 = 
NULL
,

391 *
up_À·
 = 
NULL
,

392 *
up_right
 = 
NULL
;

394 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

395 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

404 
À·
 = (*
baue
)->left;

405 
up
 = (*
baue
)->up;

406 if–
up
 !
NULL
 )

408 
up_À·
 = (*
baue
)->
up
->
À·
;

409 
up_right
 = (*
baue
)->
up
->
right
;

412 if–
À·
 !
NULL
 )

413 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

415 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

416 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

418 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

419 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

421  
a˘i⁄
 )

423 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

424 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

428 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

429 *
baue
 = 
À·
;

430 if–*
baue
 !
NULL
 )

431  (*
baue
)->
right
 !
NULL
 )

432 *
baue
 = (*baue)->
right
;

435 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

436 *
baue
 = 
up
;

439 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

440  
föished_Êag
 =
LOWERED
 )

442 
up
 = (*
baue
)->up;

443 if–
up
 !
NULL
 )

444 
up_À·
 = (*
baue
)->
up
->
À·
;

446 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

447 *
baue
 = 
up
;

449 
föished_Êag
 = 
RAISED
;

452 *
baue
 = 
up
;

457 
	}
}

459 #¥agm®
w¨nög
(  : 4100 )

466 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

468 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
 )

470 
libbíchm¨k_d©a°ru˘uª_båì_au_move


471 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

473 
Êag


474 
föished_Êag
 = 
LOWERED
;

476 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít


477 *
right
 = 
NULL
,

478 *
up
 = 
NULL
,

479 *
up_À·
 = 
NULL
,

480 *
up_right
 = 
NULL
;

482 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

483 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

485 
right
 = (*
baue
)->right;

486 
up
 = (*
baue
)->up;

487 if–
up
 !
NULL
 )

489 
up_À·
 = (*
baue
)->
up
->
À·
;

490 
up_right
 = (*
baue
)->
up
->
right
;

493 if–
right
 !
NULL
 )

494 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

496 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

497 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

499 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

500 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

502  
a˘i⁄
 )

504 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

505 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

509 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

510 *
baue
 = 
right
;

511 if–*
baue
 !
NULL
 )

512  (*
baue
)->
À·
 !
NULL
 )

513 *
baue
 = (*baue)->
À·
;

516 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

517 *
baue
 = 
up
;

520 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

521  
föished_Êag
 =
LOWERED
 )

523 
up
 = (*
baue
)->up;

524 if–
up
 !
NULL
 )

525 
up_right
 = (*
baue
)->
up
->
right
;

527 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

528 *
baue
 = 
up
;

530 
föished_Êag
 = 
RAISED
;

533 *
baue
 = 
up
;

538 
	}
}

540 #¥agm®
w¨nög
(  : 4100 )

547 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

550 
rv
;

552 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

553 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

557 if–*
baue
 =
NULL
 )

558 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

560 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_©omic_gë_by_ªœtive_posôi⁄
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

562  
rv
;

563 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_gcc_spinlock_sync.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

273 
rv
 = 1;

275 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

276 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

279 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
baus
->
lock
 );

281 *
baue
 = 
baus
->
roŸ
;

283  
absﬁuã_posôi⁄
 )

285 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_ABSOLUTE_POSITION_ROOT
:

288 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

289 if–*
baue
 !
NULL
 )

290  (*
baue
)->
right
 !
NULL
 )

291 *
baue
 = (*baue)->
right
;

294 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

295 if–*
baue
 !
NULL
 )

296  (*
baue
)->
À·
 !
NULL
 )

297 *
baue
 = (*baue)->
À·
;

301 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
baus
->
lock
 );

303 if–*
baue
 =
NULL
 )

304 
rv
 = 0;

306  
rv
;

307 
	}
}

314 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

317 
rv
 = 1;

319 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

320 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

323 if–*
baue
 =
NULL
 )

326 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
baus
->
lock
 );

328  
ªœtive_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_UP
:

331 *
baue
 = (*baue)->
up
;

334 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_LEFT
:

335 *
baue
 = (*baue)->
À·
;

338 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_RIGHT
:

339 *
baue
 = (*baue)->
right
;

342 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

343 *
baue
 = (*baue)->
À·
;

344 if–*
baue
 !
NULL
 )

345  (*
baue
)->
right
 !
NULL
 )

346 *
baue
 = (*baue)->
right
;

349 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

350 *
baue
 = (*baue)->
right
;

351 if–*
baue
 !
NULL
 )

352  (*
baue
)->
À·
 !
NULL
 )

353 *
baue
 = (*baue)->
À·
;

356 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

357 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

360 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_GCC_SPINLOCK_SYNC_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

361 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

365 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
baus
->
lock
 );

367 if–*
baue
 =
NULL
 )

368 
rv
 = 0;

370  
rv
;

371 
	}
}

378 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

380 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
 )

382 
libbíchm¨k_d©a°ru˘uª_båì_au_move


383 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

385 
Êag


386 
föished_Êag
 = 
LOWERED
;

388 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


389 *
À·
 = 
NULL
,

390 *
up
 = 
NULL
,

391 *
up_À·
 = 
NULL
,

392 *
up_right
 = 
NULL
;

394 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

395 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

404 
À·
 = (*
baue
)->left;

405 
up
 = (*
baue
)->up;

406 if–
up
 !
NULL
 )

408 
up_À·
 = (*
baue
)->
up
->
À·
;

409 
up_right
 = (*
baue
)->
up
->
right
;

412 if–
À·
 !
NULL
 )

413 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

415 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

416 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

418 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

419 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

421  
a˘i⁄
 )

423 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

424 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

428 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

429 *
baue
 = 
À·
;

430 if–*
baue
 !
NULL
 )

431  (*
baue
)->
right
 !
NULL
 )

432 *
baue
 = (*baue)->
right
;

435 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

436 *
baue
 = 
up
;

439 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

440  
föished_Êag
 =
LOWERED
 )

442 
up
 = (*
baue
)->up;

443 if–
up
 !
NULL
 )

444 
up_À·
 = (*
baue
)->
up
->
À·
;

446 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

447 *
baue
 = 
up
;

449 
föished_Êag
 = 
RAISED
;

452 *
baue
 = 
up
;

457 
	}
}

459 #¥agm®
w¨nög
(  : 4100 )

466 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

468 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
 )

470 
libbíchm¨k_d©a°ru˘uª_båì_au_move


471 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

473 
Êag


474 
föished_Êag
 = 
LOWERED
;

476 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít


477 *
right
 = 
NULL
,

478 *
up
 = 
NULL
,

479 *
up_À·
 = 
NULL
,

480 *
up_right
 = 
NULL
;

482 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

483 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

485 
right
 = (*
baue
)->right;

486 
up
 = (*
baue
)->up;

487 if–
up
 !
NULL
 )

489 
up_À·
 = (*
baue
)->
up
->
À·
;

490 
up_right
 = (*
baue
)->
up
->
right
;

493 if–
right
 !
NULL
 )

494 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

496 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

497 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

499 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

500 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

502  
a˘i⁄
 )

504 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

505 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

509 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

510 *
baue
 = 
right
;

511 if–*
baue
 !
NULL
 )

512  (*
baue
)->
À·
 !
NULL
 )

513 *
baue
 = (*baue)->
À·
;

516 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

517 *
baue
 = 
up
;

520 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

521  
föished_Êag
 =
LOWERED
 )

523 
up
 = (*
baue
)->up;

524 if–
up
 !
NULL
 )

525 
up_right
 = (*
baue
)->
up
->
right
;

527 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

528 *
baue
 = 
up
;

530 
föished_Êag
 = 
RAISED
;

533 *
baue
 = 
up
;

538 
	}
}

540 #¥agm®
w¨nög
(  : 4100 )

547 
	$libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

550 
rv
;

552 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

553 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

557 if–*
baue
 =
NULL
 )

558 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

560 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_gcc_•ölock_sync_gë_by_ªœtive_posôi⁄
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

562  
rv
;

563 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

5 
	elibbíchm¨k_d©a°ru˘uª_båì_au_move


7 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
,

8 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
,

9 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
,

10 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
,

11 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE


14 
	elibbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


16 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
,

17 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
,

18 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
,

19 
	mLIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT


	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_msvc_spinlock.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

273 
rv
 = 1;

275 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

276 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

279 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
baus
->
lock
 );

281 *
baue
 = 
baus
->
roŸ
;

283  
absﬁuã_posôi⁄
 )

285 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_ABSOLUTE_POSITION_ROOT
:

288 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

289 if–*
baue
 !
NULL
 )

290  (*
baue
)->
right
 !
NULL
 )

291 *
baue
 = (*baue)->
right
;

294 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

295 if–*
baue
 !
NULL
 )

296  (*
baue
)->
À·
 !
NULL
 )

297 *
baue
 = (*baue)->
À·
;

301 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
baus
->
lock
 );

303 if–*
baue
 =
NULL
 )

304 
rv
 = 0;

306  
rv
;

307 
	}
}

314 
	$libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

317 
rv
 = 1;

319 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

320 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

323 if–*
baue
 =
NULL
 )

326 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
baus
->
lock
 );

328  
ªœtive_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_UP
:

331 *
baue
 = (*baue)->
up
;

334 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_LEFT
:

335 *
baue
 = (*baue)->
À·
;

338 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_RIGHT
:

339 *
baue
 = (*baue)->
right
;

342 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

343 *
baue
 = (*baue)->
À·
;

344 if–*
baue
 !
NULL
 )

345  (*
baue
)->
right
 !
NULL
 )

346 *
baue
 = (*baue)->
right
;

349 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

350 *
baue
 = (*baue)->
right
;

351 if–*
baue
 !
NULL
 )

352  (*
baue
)->
À·
 !
NULL
 )

353 *
baue
 = (*baue)->
À·
;

356 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

357 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

360 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MSVC_SPINLOCK_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

361 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

365 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
baus
->
lock
 );

367 if–*
baue
 =
NULL
 )

368 
rv
 = 0;

370  
rv
;

371 
	}
}

378 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

380 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
 )

382 
libbíchm¨k_d©a°ru˘uª_båì_au_move


383 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

385 
Êag


386 
föished_Êag
 = 
LOWERED
;

388 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


389 *
À·
 = 
NULL
,

390 *
up
 = 
NULL
,

391 *
up_À·
 = 
NULL
,

392 *
up_right
 = 
NULL
;

394 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

395 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

404 
À·
 = (*
baue
)->left;

405 
up
 = (*
baue
)->up;

406 if–
up
 !
NULL
 )

408 
up_À·
 = (*
baue
)->
up
->
À·
;

409 
up_right
 = (*
baue
)->
up
->
right
;

412 if–
À·
 !
NULL
 )

413 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

415 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

416 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

418 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

419 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

421  
a˘i⁄
 )

423 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

424 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

428 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

429 *
baue
 = 
À·
;

430 if–*
baue
 !
NULL
 )

431  (*
baue
)->
right
 !
NULL
 )

432 *
baue
 = (*baue)->
right
;

435 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

436 *
baue
 = 
up
;

439 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

440  
föished_Êag
 =
LOWERED
 )

442 
up
 = (*
baue
)->up;

443 if–
up
 !
NULL
 )

444 
up_À·
 = (*
baue
)->
up
->
À·
;

446 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

447 *
baue
 = 
up
;

449 
föished_Êag
 = 
RAISED
;

452 *
baue
 = 
up
;

457 
	}
}

459 #¥agm®
w¨nög
(  : 4100 )

466 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

468 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
 )

470 
libbíchm¨k_d©a°ru˘uª_båì_au_move


471 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

473 
Êag


474 
föished_Êag
 = 
LOWERED
;

476 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít


477 *
right
 = 
NULL
,

478 *
up
 = 
NULL
,

479 *
up_À·
 = 
NULL
,

480 *
up_right
 = 
NULL
;

482 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

483 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

485 
right
 = (*
baue
)->right;

486 
up
 = (*
baue
)->up;

487 if–
up
 !
NULL
 )

489 
up_À·
 = (*
baue
)->
up
->
À·
;

490 
up_right
 = (*
baue
)->
up
->
right
;

493 if–
right
 !
NULL
 )

494 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

496 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

497 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

499 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

500 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

502  
a˘i⁄
 )

504 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

505 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

509 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

510 *
baue
 = 
right
;

511 if–*
baue
 !
NULL
 )

512  (*
baue
)->
À·
 !
NULL
 )

513 *
baue
 = (*baue)->
À·
;

516 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

517 *
baue
 = 
up
;

520 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

521  
föished_Êag
 =
LOWERED
 )

523 
up
 = (*
baue
)->up;

524 if–
up
 !
NULL
 )

525 
up_right
 = (*
baue
)->
up
->
right
;

527 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

528 *
baue
 = 
up
;

530 
föished_Êag
 = 
RAISED
;

533 *
baue
 = 
up
;

538 
	}
}

540 #¥agm®
w¨nög
(  : 4100 )

547 
	$libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

550 
rv
;

552 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

553 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

557 if–*
baue
 =
NULL
 )

558 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

560 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_msvc_•ölock_gë_by_ªœtive_posôi⁄
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

562  
rv
;

563 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_pthread_mutex.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

273 
rv
 = 1;

275 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

276 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

279 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
baus
->
lock
 );

281 *
baue
 = 
baus
->
roŸ
;

283  
absﬁuã_posôi⁄
 )

285 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_ABSOLUTE_POSITION_ROOT
:

288 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

289 if–*
baue
 !
NULL
 )

290  (*
baue
)->
right
 !
NULL
 )

291 *
baue
 = (*baue)->
right
;

294 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

295 if–*
baue
 !
NULL
 )

296  (*
baue
)->
À·
 !
NULL
 )

297 *
baue
 = (*baue)->
À·
;

301 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
baus
->
lock
 );

303 if–*
baue
 =
NULL
 )

304 
rv
 = 0;

306  
rv
;

307 
	}
}

314 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

317 
rv
 = 1;

319 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

320 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

323 if–*
baue
 =
NULL
 )

326 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
baus
->
lock
 );

328  
ªœtive_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_UP
:

331 *
baue
 = (*baue)->
up
;

334 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_LEFT
:

335 *
baue
 = (*baue)->
À·
;

338 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_RIGHT
:

339 *
baue
 = (*baue)->
right
;

342 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

343 *
baue
 = (*baue)->
À·
;

344 if–*
baue
 !
NULL
 )

345  (*
baue
)->
right
 !
NULL
 )

346 *
baue
 = (*baue)->
right
;

349 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

350 *
baue
 = (*baue)->
right
;

351 if–*
baue
 !
NULL
 )

352  (*
baue
)->
À·
 !
NULL
 )

353 *
baue
 = (*baue)->
À·
;

356 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

357 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

360 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_MUTEX_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

361 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

365 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
baus
->
lock
 );

367 if–*
baue
 =
NULL
 )

368 
rv
 = 0;

370  
rv
;

371 
	}
}

378 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

380 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
 )

382 
libbíchm¨k_d©a°ru˘uª_båì_au_move


383 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

385 
Êag


386 
föished_Êag
 = 
LOWERED
;

388 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


389 *
À·
 = 
NULL
,

390 *
up
 = 
NULL
,

391 *
up_À·
 = 
NULL
,

392 *
up_right
 = 
NULL
;

394 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

395 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

404 
À·
 = (*
baue
)->left;

405 
up
 = (*
baue
)->up;

406 if–
up
 !
NULL
 )

408 
up_À·
 = (*
baue
)->
up
->
À·
;

409 
up_right
 = (*
baue
)->
up
->
right
;

412 if–
À·
 !
NULL
 )

413 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

415 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

416 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

418 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

419 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

421  
a˘i⁄
 )

423 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

424 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

428 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

429 *
baue
 = 
À·
;

430 if–*
baue
 !
NULL
 )

431  (*
baue
)->
right
 !
NULL
 )

432 *
baue
 = (*baue)->
right
;

435 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

436 *
baue
 = 
up
;

439 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

440  
föished_Êag
 =
LOWERED
 )

442 
up
 = (*
baue
)->up;

443 if–
up
 !
NULL
 )

444 
up_À·
 = (*
baue
)->
up
->
À·
;

446 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

447 *
baue
 = 
up
;

449 
föished_Êag
 = 
RAISED
;

452 *
baue
 = 
up
;

457 
	}
}

459 #¥agm®
w¨nög
(  : 4100 )

466 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

468 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
 )

470 
libbíchm¨k_d©a°ru˘uª_båì_au_move


471 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

473 
Êag


474 
föished_Êag
 = 
LOWERED
;

476 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít


477 *
right
 = 
NULL
,

478 *
up
 = 
NULL
,

479 *
up_À·
 = 
NULL
,

480 *
up_right
 = 
NULL
;

482 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

483 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

485 
right
 = (*
baue
)->right;

486 
up
 = (*
baue
)->up;

487 if–
up
 !
NULL
 )

489 
up_À·
 = (*
baue
)->
up
->
À·
;

490 
up_right
 = (*
baue
)->
up
->
right
;

493 if–
right
 !
NULL
 )

494 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

496 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

497 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

499 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

500 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

502  
a˘i⁄
 )

504 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

505 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

509 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

510 *
baue
 = 
right
;

511 if–*
baue
 !
NULL
 )

512  (*
baue
)->
À·
 !
NULL
 )

513 *
baue
 = (*baue)->
À·
;

516 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

517 *
baue
 = 
up
;

520 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

521  
föished_Êag
 =
LOWERED
 )

523 
up
 = (*
baue
)->up;

524 if–
up
 !
NULL
 )

525 
up_right
 = (*
baue
)->
up
->
right
;

527 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

528 *
baue
 = 
up
;

530 
föished_Êag
 = 
RAISED
;

533 *
baue
 = 
up
;

538 
	}
}

540 #¥agm®
w¨nög
(  : 4100 )

547 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

550 
rv
;

552 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

553 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

557 if–*
baue
 =
NULL
 )

558 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

560 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_muãx_gë_by_ªœtive_posôi⁄
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

562  
rv
;

563 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_pthread_rwlock.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_absﬁuã_posôi⁄_f‹_ªad
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_ªœtive_posôi⁄_f‹_ªad
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_ªœtive_posôi⁄_f‹_ªad
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_ªœtive_posôi⁄_f‹_ªad
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_ªœtive_posôi⁄_f‹_ªad
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_key_f‹_ªad
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_READ
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_key_f‹_wrôe
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
,

271 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

272 *
key
,

273 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
 )

276 
com∑ª_ªsu…
 = !0,

277 
rv
 = 1;

279 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

282 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

284 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

285 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

287 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
–
baus
->
lock
 );

289 *
baue
 = 
baus
->
roŸ
;

291  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

293 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

295 if–
com∑ª_ªsu…
 < 0 )

296 *
baue
 = (*baue)->
À·
;

298 if–
com∑ª_ªsu…
 > 0 )

299 *
baue
 = (*baue)->
right
;

302 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
baus
->
lock
 );

304 if–*
baue
 =
NULL
 )

305 
rv
 = 0;

307  
rv
;

308 
	}
}

315 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_absﬁuã_posôi⁄_f‹_ªad
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

318 
rv
 = 1;

320 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

321 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

324 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_READ
–
baus
->
lock
 );

326 *
baue
 = 
baus
->
roŸ
;

328  
absﬁuã_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_ABSOLUTE_POSITION_ROOT
:

333 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

334 if–*
baue
 !
NULL
 )

335  (*
baue
)->
right
 !
NULL
 )

336 *
baue
 = (*baue)->
right
;

339 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

340 if–*
baue
 !
NULL
 )

341  (*
baue
)->
À·
 !
NULL
 )

342 *
baue
 = (*baue)->
À·
;

346 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
baus
->
lock
 );

348 if–*
baue
 =
NULL
 )

349 
rv
 = 0;

351  
rv
;

352 
	}
}

359 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_ªœtive_posôi⁄_f‹_ªad
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

362 
rv
 = 1;

364 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

365 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

368 if–*
baue
 =
NULL
 )

371 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_READ
–
baus
->
lock
 );

373  
ªœtive_posôi⁄
 )

375 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_UP
:

376 *
baue
 = (*baue)->
up
;

379 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_LEFT
:

380 *
baue
 = (*baue)->
À·
;

383 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_RIGHT
:

384 *
baue
 = (*baue)->
right
;

387 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

388 *
baue
 = (*baue)->
À·
;

389 if–*
baue
 !
NULL
 )

390  (*
baue
)->
right
 !
NULL
 )

391 *
baue
 = (*baue)->
right
;

394 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

395 *
baue
 = (*baue)->
right
;

396 if–*
baue
 !
NULL
 )

397  (*
baue
)->
À·
 !
NULL
 )

398 *
baue
 = (*baue)->
À·
;

401 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

402 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

405 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_RWLOCK_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

406 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

410 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
baus
->
lock
 );

412 if–*
baue
 =
NULL
 )

413 
rv
 = 0;

415  
rv
;

416 
	}
}

423 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

425 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
 )

427 
libbíchm¨k_d©a°ru˘uª_båì_au_move


428 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

430 
Êag


431 
föished_Êag
 = 
LOWERED
;

433 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


434 *
À·
 = 
NULL
,

435 *
up
 = 
NULL
,

436 *
up_À·
 = 
NULL
,

437 *
up_right
 = 
NULL
;

439 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

440 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

449 
À·
 = (*
baue
)->left;

450 
up
 = (*
baue
)->up;

451 if–
up
 !
NULL
 )

453 
up_À·
 = (*
baue
)->
up
->
À·
;

454 
up_right
 = (*
baue
)->
up
->
right
;

457 if–
À·
 !
NULL
 )

458 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

460 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

461 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

463 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

464 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

466  
a˘i⁄
 )

468 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

469 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

473 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

474 *
baue
 = 
À·
;

475 if–*
baue
 !
NULL
 )

476  (*
baue
)->
right
 !
NULL
 )

477 *
baue
 = (*baue)->
right
;

480 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

481 *
baue
 = 
up
;

484 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

485  
föished_Êag
 =
LOWERED
 )

487 
up
 = (*
baue
)->up;

488 if–
up
 !
NULL
 )

489 
up_À·
 = (*
baue
)->
up
->
À·
;

491 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

492 *
baue
 = 
up
;

494 
föished_Êag
 = 
RAISED
;

497 *
baue
 = 
up
;

502 
	}
}

504 #¥agm®
w¨nög
(  : 4100 )

511 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

513 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
 )

515 
libbíchm¨k_d©a°ru˘uª_båì_au_move


516 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

518 
Êag


519 
föished_Êag
 = 
LOWERED
;

521 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít


522 *
right
 = 
NULL
,

523 *
up
 = 
NULL
,

524 *
up_À·
 = 
NULL
,

525 *
up_right
 = 
NULL
;

527 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

528 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

530 
right
 = (*
baue
)->right;

531 
up
 = (*
baue
)->up;

532 if–
up
 !
NULL
 )

534 
up_À·
 = (*
baue
)->
up
->
À·
;

535 
up_right
 = (*
baue
)->
up
->
right
;

538 if–
right
 !
NULL
 )

539 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

541 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

542 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

544 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

545 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

547  
a˘i⁄
 )

549 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

550 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

554 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

555 *
baue
 = 
right
;

556 if–*
baue
 !
NULL
 )

557  (*
baue
)->
À·
 !
NULL
 )

558 *
baue
 = (*baue)->
À·
;

561 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

562 *
baue
 = 
up
;

565 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

566  
föished_Êag
 =
LOWERED
 )

568 
up
 = (*
baue
)->up;

569 if–
up
 !
NULL
 )

570 
up_right
 = (*
baue
)->
up
->
right
;

572 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

573 *
baue
 = 
up
;

575 
föished_Êag
 = 
RAISED
;

578 *
baue
 = 
up
;

583 
	}
}

585 #¥agm®
w¨nög
(  : 4100 )

592 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

595 
rv
;

597 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

598 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

602 if–*
baue
 =
NULL
 )

603 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_absﬁuã_posôi⁄_f‹_ªad
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

605 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_rwlock_gë_by_ªœtive_posôi⁄_f‹_ªad
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

607  
rv
;

608 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_pthread_spinlock_process_private.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

273 
rv
 = 1;

275 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

276 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

279 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
baus
->
lock
 );

281 *
baue
 = 
baus
->
roŸ
;

283  
absﬁuã_posôi⁄
 )

285 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_ABSOLUTE_POSITION_ROOT
:

288 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

289 if–*
baue
 !
NULL
 )

290  (*
baue
)->
right
 !
NULL
 )

291 *
baue
 = (*baue)->
right
;

294 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

295 if–*
baue
 !
NULL
 )

296  (*
baue
)->
À·
 !
NULL
 )

297 *
baue
 = (*baue)->
À·
;

301 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
baus
->
lock
 );

303 if–*
baue
 =
NULL
 )

304 
rv
 = 0;

306  
rv
;

307 
	}
}

314 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

317 
rv
 = 1;

319 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

320 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

323 if–*
baue
 =
NULL
 )

326 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
baus
->
lock
 );

328  
ªœtive_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_UP
:

331 *
baue
 = (*baue)->
up
;

334 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_LEFT
:

335 *
baue
 = (*baue)->
À·
;

338 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_RIGHT
:

339 *
baue
 = (*baue)->
right
;

342 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

343 *
baue
 = (*baue)->
À·
;

344 if–*
baue
 !
NULL
 )

345  (*
baue
)->
right
 !
NULL
 )

346 *
baue
 = (*baue)->
right
;

349 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

350 *
baue
 = (*baue)->
right
;

351 if–*
baue
 !
NULL
 )

352  (*
baue
)->
À·
 !
NULL
 )

353 *
baue
 = (*baue)->
À·
;

356 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

357 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

360 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

361 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

365 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
baus
->
lock
 );

367 if–*
baue
 =
NULL
 )

368 
rv
 = 0;

370  
rv
;

371 
	}
}

378 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

380 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
 )

382 
libbíchm¨k_d©a°ru˘uª_båì_au_move


383 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

385 
Êag


386 
föished_Êag
 = 
LOWERED
;

388 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


389 *
À·
 = 
NULL
,

390 *
up
 = 
NULL
,

391 *
up_À·
 = 
NULL
,

392 *
up_right
 = 
NULL
;

394 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

395 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

404 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
baus
->
lock
 );

406 
À·
 = (*
baue
)->left;

407 
up
 = (*
baue
)->up;

408 if–
up
 !
NULL
 )

410 
up_À·
 = (*
baue
)->
up
->
À·
;

411 
up_right
 = (*
baue
)->
up
->
right
;

414 if–
À·
 !
NULL
 )

415 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

417 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

418 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

420 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

421 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

423  
a˘i⁄
 )

425 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

426 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

430 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

431 *
baue
 = 
À·
;

432 if–*
baue
 !
NULL
 )

433  (*
baue
)->
right
 !
NULL
 )

434 *
baue
 = (*baue)->
right
;

437 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

438 *
baue
 = 
up
;

441 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

442  
föished_Êag
 =
LOWERED
 )

444 
up
 = (*
baue
)->up;

445 if–
up
 !
NULL
 )

446 
up_À·
 = (*
baue
)->
up
->
À·
;

448 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

449 *
baue
 = 
up
;

451 
föished_Êag
 = 
RAISED
;

454 *
baue
 = 
up
;

458 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
baus
->
lock
 );

461 
	}
}

463 #¥agm®
w¨nög
(  : 4100 )

470 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

472 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
 )

474 
libbíchm¨k_d©a°ru˘uª_båì_au_move


475 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

477 
Êag


478 
föished_Êag
 = 
LOWERED
;

480 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


481 *
right
 = 
NULL
,

482 *
up
 = 
NULL
,

483 *
up_À·
 = 
NULL
,

484 *
up_right
 = 
NULL
;

486 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

487 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

489 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
baus
->
lock
 );

491 
right
 = (*
baue
)->right;

492 
up
 = (*
baue
)->up;

493 if–
up
 !
NULL
 )

495 
up_À·
 = (*
baue
)->
up
->
À·
;

496 
up_right
 = (*
baue
)->
up
->
right
;

499 if–
right
 !
NULL
 )

500 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

502 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

503 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

505 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

506 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

508  
a˘i⁄
 )

510 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

511 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

515 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

516 *
baue
 = 
right
;

517 if–*
baue
 !
NULL
 )

518  (*
baue
)->
À·
 !
NULL
 )

519 *
baue
 = (*baue)->
À·
;

522 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

523 *
baue
 = 
up
;

526 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

527  
föished_Êag
 =
LOWERED
 )

529 
up
 = (*
baue
)->up;

530 if–
up
 !
NULL
 )

531 
up_right
 = (*
baue
)->
up
->
right
;

533 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

534 *
baue
 = 
up
;

536 
föished_Êag
 = 
RAISED
;

539 *
baue
 = 
up
;

543 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
baus
->
lock
 );

546 
	}
}

548 #¥agm®
w¨nög
(  : 4100 )

555 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

558 
rv
;

560 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

561 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

565 if–*
baue
 =
NULL
 )

566 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

568 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_¥iv©e_gë_by_ªœtive_posôi⁄
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

570  
rv
;

571 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_pthread_spinlock_process_shared.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

273 
rv
 = 1;

275 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

276 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

279 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
baus
->
lock
 );

281 *
baue
 = 
baus
->
roŸ
;

283  
absﬁuã_posôi⁄
 )

285 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_ABSOLUTE_POSITION_ROOT
:

288 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

289 if–*
baue
 !
NULL
 )

290  (*
baue
)->
right
 !
NULL
 )

291 *
baue
 = (*baue)->
right
;

294 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

295 if–*
baue
 !
NULL
 )

296  (*
baue
)->
À·
 !
NULL
 )

297 *
baue
 = (*baue)->
À·
;

301 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
baus
->
lock
 );

303 if–*
baue
 =
NULL
 )

304 
rv
 = 0;

306  
rv
;

307 
	}
}

314 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

317 
rv
 = 1;

319 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

320 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

323 if–*
baue
 =
NULL
 )

326 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
baus
->
lock
 );

328  
ªœtive_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_UP
:

331 *
baue
 = (*baue)->
up
;

334 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_LEFT
:

335 *
baue
 = (*baue)->
À·
;

338 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_RIGHT
:

339 *
baue
 = (*baue)->
right
;

342 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

343 *
baue
 = (*baue)->
À·
;

344 if–*
baue
 !
NULL
 )

345  (*
baue
)->
right
 !
NULL
 )

346 *
baue
 = (*baue)->
right
;

349 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

350 *
baue
 = (*baue)->
right
;

351 if–*
baue
 !
NULL
 )

352  (*
baue
)->
À·
 !
NULL
 )

353 *
baue
 = (*baue)->
À·
;

356 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

357 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

360 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_PTHREAD_SPINLOCK_PROCESS_SHARED_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

361 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

365 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
baus
->
lock
 );

367 if–*
baue
 =
NULL
 )

368 
rv
 = 0;

370  
rv
;

371 
	}
}

378 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

380 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
 )

382 
libbíchm¨k_d©a°ru˘uª_båì_au_move


383 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

385 
Êag


386 
föished_Êag
 = 
LOWERED
;

388 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


389 *
À·
 = 
NULL
,

390 *
up
 = 
NULL
,

391 *
up_À·
 = 
NULL
,

392 *
up_right
 = 
NULL
;

394 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

395 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

404 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
baus
->
lock
 );

406 
À·
 = (*
baue
)->left;

407 
up
 = (*
baue
)->up;

408 if–
up
 !
NULL
 )

410 
up_À·
 = (*
baue
)->
up
->
À·
;

411 
up_right
 = (*
baue
)->
up
->
right
;

414 if–
À·
 !
NULL
 )

415 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

417 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

418 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

420 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

421 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

423  
a˘i⁄
 )

425 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

426 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

430 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

431 *
baue
 = 
À·
;

432 if–*
baue
 !
NULL
 )

433  (*
baue
)->
right
 !
NULL
 )

434 *
baue
 = (*baue)->
right
;

437 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

438 *
baue
 = 
up
;

441 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

442  
föished_Êag
 =
LOWERED
 )

444 
up
 = (*
baue
)->up;

445 if–
up
 !
NULL
 )

446 
up_À·
 = (*
baue
)->
up
->
À·
;

448 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

449 *
baue
 = 
up
;

451 
föished_Êag
 = 
RAISED
;

454 *
baue
 = 
up
;

458 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
baus
->
lock
 );

461 
	}
}

463 #¥agm®
w¨nög
(  : 4100 )

470 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

472 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
 )

474 
libbíchm¨k_d©a°ru˘uª_båì_au_move


475 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

477 
Êag


478 
föished_Êag
 = 
LOWERED
;

480 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


481 *
right
 = 
NULL
,

482 *
up
 = 
NULL
,

483 *
up_À·
 = 
NULL
,

484 *
up_right
 = 
NULL
;

486 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

487 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

489 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
baus
->
lock
 );

491 
right
 = (*
baue
)->right;

492 
up
 = (*
baue
)->up;

493 if–
up
 !
NULL
 )

495 
up_À·
 = (*
baue
)->
up
->
À·
;

496 
up_right
 = (*
baue
)->
up
->
right
;

499 if–
right
 !
NULL
 )

500 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

502 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

503 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

505 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

506 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

508  
a˘i⁄
 )

510 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

511 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

515 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

516 *
baue
 = 
right
;

517 if–*
baue
 !
NULL
 )

518  (*
baue
)->
À·
 !
NULL
 )

519 *
baue
 = (*baue)->
À·
;

522 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

523 *
baue
 = 
up
;

526 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

527  
föished_Êag
 =
LOWERED
 )

529 
up
 = (*
baue
)->up;

530 if–
up
 !
NULL
 )

531 
up_right
 = (*
baue
)->
up
->
right
;

533 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

534 *
baue
 = 
up
;

536 
föished_Êag
 = 
RAISED
;

539 *
baue
 = 
up
;

543 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
baus
->
lock
 );

546 
	}
}

548 #¥agm®
w¨nög
(  : 4100 )

555 
	$libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

558 
rv
;

560 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

561 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

565 if–*
baue
 =
NULL
 )

566 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

568 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_±hªad_•ölock_¥o˚ss_sh¨ed_gë_by_ªœtive_posôi⁄
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

570  
rv
;

571 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_windows_critical_section.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

273 
rv
 = 1;

275 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

276 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

279 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
baus
->
lock
 );

281 *
baue
 = 
baus
->
roŸ
;

283  
absﬁuã_posôi⁄
 )

285 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_ABSOLUTE_POSITION_ROOT
:

288 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

289 if–*
baue
 !
NULL
 )

290  (*
baue
)->
right
 !
NULL
 )

291 *
baue
 = (*baue)->
right
;

294 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

295 if–*
baue
 !
NULL
 )

296  (*
baue
)->
À·
 !
NULL
 )

297 *
baue
 = (*baue)->
À·
;

301 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
baus
->
lock
 );

303 if–*
baue
 =
NULL
 )

304 
rv
 = 0;

306  
rv
;

307 
	}
}

314 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

317 
rv
 = 1;

319 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

320 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

323 if–*
baue
 =
NULL
 )

326 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
baus
->
lock
 );

328  
ªœtive_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_UP
:

331 *
baue
 = (*baue)->
up
;

334 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_LEFT
:

335 *
baue
 = (*baue)->
À·
;

338 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_RIGHT
:

339 *
baue
 = (*baue)->
right
;

342 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

343 *
baue
 = (*baue)->
À·
;

344 if–*
baue
 !
NULL
 )

345  (*
baue
)->
right
 !
NULL
 )

346 *
baue
 = (*baue)->
right
;

349 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

350 *
baue
 = (*baue)->
right
;

351 if–*
baue
 !
NULL
 )

352  (*
baue
)->
À·
 !
NULL
 )

353 *
baue
 = (*baue)->
À·
;

356 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

357 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

360 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_CRITICAL_SECTION_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

361 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

365 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
baus
->
lock
 );

367 if–*
baue
 =
NULL
 )

368 
rv
 = 0;

370  
rv
;

371 
	}
}

378 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

380 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
 )

382 
libbíchm¨k_d©a°ru˘uª_båì_au_move


383 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

385 
Êag


386 
föished_Êag
 = 
LOWERED
;

388 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


389 *
À·
 = 
NULL
,

390 *
up
 = 
NULL
,

391 *
up_À·
 = 
NULL
,

392 *
up_right
 = 
NULL
;

394 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

395 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

404 
À·
 = (*
baue
)->left;

405 
up
 = (*
baue
)->up;

406 if–
up
 !
NULL
 )

408 
up_À·
 = (*
baue
)->
up
->
À·
;

409 
up_right
 = (*
baue
)->
up
->
right
;

412 if–
À·
 !
NULL
 )

413 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

415 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

416 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

418 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

419 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

421  
a˘i⁄
 )

423 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

424 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

428 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

429 *
baue
 = 
À·
;

430 if–*
baue
 !
NULL
 )

431  (*
baue
)->
right
 !
NULL
 )

432 *
baue
 = (*baue)->
right
;

435 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

436 *
baue
 = 
up
;

439 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

440  
föished_Êag
 =
LOWERED
 )

442 
up
 = (*
baue
)->up;

443 if–
up
 !
NULL
 )

444 
up_À·
 = (*
baue
)->
up
->
À·
;

446 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

447 *
baue
 = 
up
;

449 
föished_Êag
 = 
RAISED
;

452 *
baue
 = 
up
;

457 
	}
}

459 #¥agm®
w¨nög
(  : 4100 )

465 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

467 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
 )

469 
libbíchm¨k_d©a°ru˘uª_båì_au_move


470 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

472 
Êag


473 
föished_Êag
 = 
LOWERED
;

475 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít


476 *
right
 = 
NULL
,

477 *
up
 = 
NULL
,

478 *
up_À·
 = 
NULL
,

479 *
up_right
 = 
NULL
;

481 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

482 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

484 
right
 = (*
baue
)->right;

485 
up
 = (*
baue
)->up;

486 if–
up
 !
NULL
 )

488 
up_À·
 = (*
baue
)->
up
->
À·
;

489 
up_right
 = (*
baue
)->
up
->
right
;

492 if–
right
 !
NULL
 )

493 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

495 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

496 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

498 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

499 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

501  
a˘i⁄
 )

503 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

504 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

508 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

509 *
baue
 = 
right
;

510 if–*
baue
 !
NULL
 )

511  (*
baue
)->
À·
 !
NULL
 )

512 *
baue
 = (*baue)->
À·
;

515 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

516 *
baue
 = 
up
;

519 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

520  
föished_Êag
 =
LOWERED
 )

522 
up
 = (*
baue
)->up;

523 if–
up
 !
NULL
 )

524 
up_right
 = (*
baue
)->
up
->
right
;

526 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

527 *
baue
 = 
up
;

529 
föished_Êag
 = 
RAISED
;

532 *
baue
 = 
up
;

537 
	}
}

539 #¥agm®
w¨nög
(  : 4100 )

546 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

549 
rv
;

551 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

552 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

556 if–*
baue
 =
NULL
 )

557 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

559 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_¸ôiˇl_£˘i⁄_gë_by_ªœtive_posôi⁄
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

561  
rv
;

562 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_windows_mutex.c

2 
	~"libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ.h
"

5 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
 );

6 
libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
 );

13 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

14 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

15 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_exi°ög_key
 
exi°ög_key
,

16 *
u£r_°©e
 )

18 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
key_com∑ª_fun˘i⁄
 !
NULL
 );

23 
baus
->
roŸ
 = 
NULL
;

24 
baus
->
key_com∑ª_fun˘i⁄
 = key_compare_function;

25 
baus
->
exi°ög_key
 =Éxisting_key;

26 
baus
->
u£r_°©e
 = user_state;

28 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_CREATE
–
baus
->
lock
 );

30 
LFDS711_MISC_BARRIER_STORE
;

32 
	`lfds711_misc_f‹˚_°‹e
();

35 
	}
}

42 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

43 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 *
baue
) )

45 
libbíchm¨k_d©a°ru˘uª_båì_au_dñëe_a˘i⁄


46 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

48 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


49 *
baue
,

50 *
ãmp
;

52 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

55 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

57 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_absﬁuã_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_ABSOLUTE_POSITION_ROOT
 );

59  
baue
 !
NULL
 )

61 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 == NULL )

62 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
;

64 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 == NULL )

65 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
;

67 if–
baue
->
À·
 =
NULL
 
™d
 baue->
right
 != NULL )

68 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
;

70 if–
baue
->
À·
 !
NULL
 
™d
 baue->
right
 != NULL )

71 
dñëe_a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
;

73  
dñëe_a˘i⁄
 )

75 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF
:

77 if–
baue
->
up
 !
NULL
 )

79 if–
baue
->
up
->
À·
 == baue )

80 
baue
->
up
->
À·
 = 
NULL
;

81 if–
baue
->
up
->
right
 == baue )

82 
baue
->
up
->
right
 = 
NULL
;

85 
ãmp
 = 
baue
;

86 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_UP
 );

87 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

90 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_LEFT_CHILD
:

91 
baue
->
À·
->
up
 = baue->up;

92 if–
baue
->
up
 !
NULL
 )

94 if–
baue
->
up
->
À·
 == baue )

95 
baue
->
up
->
À·
 = baue->left;

96 if–
baue
->
up
->
right
 == baue )

97 
baue
->
up
->
right
 = baue->
À·
;

100 
ãmp
 = 
baue
;

101 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_LEFT
 );

102 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

105 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_SELF_REPLACE_WITH_RIGHT_CHILD
:

106 
baue
->
right
->
up
 = baue->up;

107 if–
baue
->
up
 !
NULL
 )

109 if–
baue
->
up
->
À·
 == baue )

110 
baue
->
up
->
À·
 = baue->
right
;

111 if–
baue
->
up
->
right
 == baue )

112 
baue
->
up
->
right
 = baue->right;

115 
ãmp
 = 
baue
;

116 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_RIGHT
 );

117 
	`ñemít_˛ónup_ˇŒback
–
baus
, 
ãmp
 );

120 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_DELETE_MOVE_LEFT
:

121 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_ªœtive_posôi⁄
–
baus
, &
baue
, 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_LEFT
 );

127 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_DESTROY
–
baus
->
lock
 );

130 
	}
}

137 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π_ªsu…
 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ö£π
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

138 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 *
baue
,

139 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
exi°ög_baue
 )

142 
com∑ª_ªsu…
 = 0;

144 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


145 *
baue_√xt
 = 
NULL
,

146 *
baue_∑ª¡
 = 
NULL
,

147 *
baue_ãmp
;

149 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

150 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

153 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
baus
->
lock
 );

155 
baue
->
up
 = baue->
À·
 = baue->
right
 = 
NULL
;

157 
baue_ãmp
 = 
baus
->
roŸ
;

159  
baue_ãmp
 !
NULL
 )

161 
com∑ª_ªsu…
 = 
baus
->
	`key_com∑ª_fun˘i⁄
–
baue
->
key
, 
baue_ãmp
->key );

163 if–
com∑ª_ªsu…
 == 0 )

165 if–
exi°ög_baue
 !
NULL
 )

166 *
exi°ög_baue
 = 
baue_ãmp
;

168  
baus
->
exi°ög_key
 )

170 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_EXISTING_KEY_OVERWRITE
:

171 
	`LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_SET_VALUE_IN_ELEMENT
–*
baus
, *
baue_ãmp
, 
baue
->
vÆue
 );

172  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_SUCCESS_OVERWRITE
;

175 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_EXISTING_KEY_FAIL
:

176  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_FAILURE_EXISTING_KEY
;

181 if–
com∑ª_ªsu…
 < 0 )

182 
baue_√xt
 = 
baue_ãmp
->
À·
;

184 if–
com∑ª_ªsu…
 > 0 )

185 
baue_√xt
 = 
baue_ãmp
->
right
;

187 
baue_∑ª¡
 = 
baue_ãmp
;

188 
baue_ãmp
 = 
baue_√xt
;

191 if–
baue_∑ª¡
 =
NULL
 )

193 
baue
->
up
 = 
baus
->
roŸ
;

194 
baus
->
roŸ
 = 
baue
; }

196 if–
baue_∑ª¡
 !
NULL
 )

198 if–
com∑ª_ªsu…
 <= 0 )

200 
baue
->
up
 = 
baue_∑ª¡
;

201 
baue_∑ª¡
->
À·
 = 
baue
;

204 if–
com∑ª_ªsu…
 > 0 )

206 
baue
->
up
 = 
baue_∑ª¡
;

207 
baue_∑ª¡
->
right
 = 
baue
;

211 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
baus
->
lock
 );

214 if–
exi°ög_baue
 !
NULL
 )

215 *
exi°ög_baue
 = 
NULL
;

217  
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_INSERT_RESULT_SUCCESS
;

218 
	}
}

225 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_key
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
,

226 (*
key_com∑ª_fun˘i⁄
)(c⁄° *
√w_key
, c⁄° *
exi°ög_key
),

227 *
key
,

228 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
 )

231 
com∑ª_ªsu…
 = !0,

232 
rv
 = 1;

234 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

237 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

239 if–
key_com∑ª_fun˘i⁄
 =
NULL
 )

240 
key_com∑ª_fun˘i⁄
 = 
baus
->key_compare_function;

242 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
baus
->
lock
 );

244 *
baue
 = 
baus
->
roŸ
;

246  *
baue
 !
NULL
 
™d
 
com∑ª_ªsu…
 != 0 )

248 
com∑ª_ªsu…
 = 
	`key_com∑ª_fun˘i⁄
–
key
, (*
baue
)->key );

250 if–
com∑ª_ªsu…
 < 0 )

251 *
baue
 = (*baue)->
À·
;

253 if–
com∑ª_ªsu…
 > 0 )

254 *
baue
 = (*baue)->
right
;

257 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
baus
->
lock
 );

259 if–*
baue
 =
NULL
 )

260 
rv
 = 0;

262  
rv
;

263 
	}
}

270 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_absﬁuã_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
 )

273 
rv
 = 1;

275 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

276 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

279 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
baus
->
lock
 );

281 *
baue
 = 
baus
->
roŸ
;

283  
absﬁuã_posôi⁄
 )

285 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_ABSOLUTE_POSITION_ROOT
:

288 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_ABSOLUTE_POSITION_LARGEST_IN_TREE
:

289 if–*
baue
 !
NULL
 )

290  (*
baue
)->
right
 !
NULL
 )

291 *
baue
 = (*baue)->
right
;

294 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_ABSOLUTE_POSITION_SMALLEST_IN_TREE
:

295 if–*
baue
 !
NULL
 )

296  (*
baue
)->
À·
 !
NULL
 )

297 *
baue
 = (*baue)->
À·
;

301 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
baus
->
lock
 );

303 if–*
baue
 =
NULL
 )

304 
rv
 = 0;

306  
rv
;

307 
	}
}

314 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

317 
rv
 = 1;

319 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

320 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

323 if–*
baue
 =
NULL
 )

326 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
baus
->
lock
 );

328  
ªœtive_posôi⁄
 )

330 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_UP
:

331 *
baue
 = (*baue)->
up
;

334 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_LEFT
:

335 *
baue
 = (*baue)->
À·
;

338 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_RIGHT
:

339 *
baue
 = (*baue)->
right
;

342 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_SMALLEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

343 *
baue
 = (*baue)->
À·
;

344 if–*
baue
 !
NULL
 )

345  (*
baue
)->
right
 !
NULL
 )

346 *
baue
 = (*baue)->
right
;

349 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_LARGEST_ELEMENT_BELOW_CURRENT_ELEMENT
:

350 *
baue
 = (*baue)->
right
;

351 if–*
baue
 !
NULL
 )

352  (*
baue
)->
À·
 !
NULL
 )

353 *
baue
 = (*baue)->
À·
;

356 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
:

357 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
baus
, 
baue
 );

360 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_WINDOWS_MUTEX_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
:

361 
	`libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
baus
, 
baue
 );

365 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
baus
->
lock
 );

367 if–*
baue
 =
NULL
 )

368 
rv
 = 0;

370  
rv
;

371 
	}
}

378 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

380 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_œrge°_gë_√xt_smÆÀ°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
 )

382 
libbíchm¨k_d©a°ru˘uª_båì_au_move


383 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

385 
Êag


386 
föished_Êag
 = 
LOWERED
;

388 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


389 *
À·
 = 
NULL
,

390 *
up
 = 
NULL
,

391 *
up_À·
 = 
NULL
,

392 *
up_right
 = 
NULL
;

394 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

395 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

404 
À·
 = (*
baue
)->left;

405 
up
 = (*
baue
)->up;

406 if–
up
 !
NULL
 )

408 
up_À·
 = (*
baue
)->
up
->
À·
;

409 
up_right
 = (*
baue
)->
up
->
right
;

412 if–
À·
 !
NULL
 )

413 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
;

415 if–
À·
 =
NULL
 
™d
 
up
 !NULLánd 
up_right
 =*
baue
 )

416 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

418 if–(
À·
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_À·
 =*
baue
ándÜeft == NULL) )

419 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

421  
a˘i⁄
 )

423 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

424 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

428 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

429 *
baue
 = 
À·
;

430 if–*
baue
 !
NULL
 )

431  (*
baue
)->
right
 !
NULL
 )

432 *
baue
 = (*baue)->
right
;

435 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

436 *
baue
 = 
up
;

439 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

440  
föished_Êag
 =
LOWERED
 )

442 
up
 = (*
baue
)->up;

443 if–
up
 !
NULL
 )

444 
up_À·
 = (*
baue
)->
up
->
À·
;

446 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_À·
 )

447 *
baue
 = 
up
;

449 
föished_Êag
 = 
RAISED
;

452 *
baue
 = 
up
;

457 
	}
}

459 #¥agm®
w¨nög
(  : 4100 )

466 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

468 
	$libbíchm¨k_d©a°ru˘uª_båì_au_öã∫Æ_ö‹dî_wÆk_‰om_smÆÀ°_gë_√xt_œrge°_ñemít
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
 )

470 
libbíchm¨k_d©a°ru˘uª_båì_au_move


471 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
;

473 
Êag


474 
föished_Êag
 = 
LOWERED
;

476 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít


477 *
right
 = 
NULL
,

478 *
up
 = 
NULL
,

479 *
up_À·
 = 
NULL
,

480 *
up_right
 = 
NULL
;

482 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

483 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

485 
right
 = (*
baue
)->right;

486 
up
 = (*
baue
)->up;

487 if–
up
 !
NULL
 )

489 
up_À·
 = (*
baue
)->
up
->
À·
;

490 
up_right
 = (*
baue
)->
up
->
right
;

493 if–
right
 !
NULL
 )

494 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
;

496 if–
right
 =
NULL
 
™d
 
up
 !NULLánd 
up_À·
 =*
baue
 )

497 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
;

499 if–(
right
 =
NULL
 
™d
 
up
 =NULLË
	`‹
 (u∞!NULLánd 
up_right
 =*
baue
ándÑight == NULL) )

500 
a˘i⁄
 = 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
;

502  
a˘i⁄
 )

504 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_INVALID
:

505 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_LARGEST_FROM_LEFT_CHILD
:

509 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_SMALLEST_FROM_RIGHT_CHILD
:

510 *
baue
 = 
right
;

511 if–*
baue
 !
NULL
 )

512  (*
baue
)->
À·
 !
NULL
 )

513 *
baue
 = (*baue)->
À·
;

516 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_GET_PARENT
:

517 *
baue
 = 
up
;

520 
LIBBENCHMARK_DATASTRUCTURE_BTREE_AU_MOVE_MOVE_UP_TREE
:

521  
föished_Êag
 =
LOWERED
 )

523 
up
 = (*
baue
)->up;

524 if–
up
 !
NULL
 )

525 
up_right
 = (*
baue
)->
up
->
right
;

527 if–*
baue
 !
NULL
 
™d
 
up
 !NULLánd *bauê=
up_right
 )

528 *
baue
 = 
up
;

530 
föished_Êag
 = 
RAISED
;

533 *
baue
 = 
up
;

538 
	}
}

540 #¥agm®
w¨nög
(  : 4100 )

547 
	$libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
–
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_°©e
 *
baus
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ñemít
 **
baue
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_absﬁuã_posôi⁄
 
absﬁuã_posôi⁄
, 
libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_ªœtive_posôi⁄
 
ªœtive_posôi⁄
 )

550 
rv
;

552 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

553 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

557 if–*
baue
 =
NULL
 )

558 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_absﬁuã_posôi⁄
–
baus
, 
baue
, 
absﬁuã_posôi⁄
 );

560 
rv
 = 
	`libbíchm¨k_d©a°ru˘uª_båì_au_wödows_muãx_gë_by_ªœtive_posôi⁄
–
baus
, 
baue
, 
ªœtive_posôi⁄
 );

562  
rv
;

563 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_gcc_spinlock_atomic.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_©omic_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_gcc_spinlock_sync.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_gcc_•ölock_sync_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_msvc_spinlock.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_msvc_•ölock_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_pthread_mutex.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_muãx_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_pthread_rwlock.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_rwlock_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_pthread_spinlock_process_private.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_pthread_spinlock_process_shared.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_windows_critical_section.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_windows_mutex.c

2 
	~"libbíchm¨k_d©a°ru˘uª_‰ìli°_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
 *
fs
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

14 
fs
->
t›
 = 
NULL
;

15 
fs
->
u£r_°©e
 = user_state;

17 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_CREATE
–
fs
->
lock
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

24 
	}
}

31 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
 *
fs
, (*
ñemít_p›_ˇŒback
)(libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©ê*fs, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
 *
„
, *
u£r_°©e
) )

33 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít


34 *
„
,

35 *
„_ãmp
;

37 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

40 
LFDS711_MISC_BARRIER_LOAD
;

42 if–
ñemít_p›_ˇŒback
 !
NULL
 )

44 
„
 = 
fs
->
t›
;

46  
„
 !
NULL
 )

48 
„_ãmp
 = 
„
;

49 
„
 = fe->
√xt
;

51 
	`ñemít_p›_ˇŒback
–
fs
, 
„_ãmp
, (*Ëfs->
u£r_°©e
 );

55 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_DESTROY
–
fs
->
lock
 );

58 
	}
}

65 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_push
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
 *
„
 )

67 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

70 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
fs
->
lock
 );

72 
„
->
√xt
 = 
fs
->
t›
;

73 
fs
->
t›
 = 
„
;

75 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
fs
->
lock
 );

78 
	}
}

85 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

87 
	$libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_p›
–
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_°©e
 *
fs
, 
libbíchm¨k_d©a°ru˘uª_‰ìli°_wödows_muãx_ñemít
 **
„
 )

90 
rv
 = 1;

92 
	`LFDS711_PAL_ASSERT
–
fs
 !
NULL
 );

93 
	`LFDS711_PAL_ASSERT
–
„
 !
NULL
 );

95 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
fs
->
lock
 );

97 *
„
 = 
fs
->
t›
;

99 if–
fs
->
t›
 !
NULL
 )

100 
fs
->
t›
 = fs->t›->
√xt
;

102 
rv
 = 0;

104 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
fs
->
lock
 );

106  
rv
;

107 
	}
}

109 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_gcc_spinlock_atomic.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_©omic_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_GET
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_ATOMIC_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_gcc_spinlock_sync.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_gcc_•ölock_sync_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_GET
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_GCC_SPINLOCK_SYNC_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_msvc_spinlock.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_msvc_•ölock_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_GET
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_MSVC_SPINLOCK_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_pthread_mutex.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_muãx_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_GET
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_MUTEX_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_pthread_rwlock.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_rwlock_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_GET_WRITE
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_RWLOCK_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_pthread_spinlock_process_private.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_¥iv©e_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_GET
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_PRIVATE_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_pthread_spinlock_process_shared.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_±hªad_•ölock_¥o˚ss_sh¨ed_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_GET
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_PTHREAD_SPINLOCK_PROCESS_SHARED_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_windows_critical_section.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_¸ôiˇl_£˘i⁄_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_GET
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_CRITICAL_SECTION_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_windows_mutex.c

2 
	~"libbíchm¨k_d©a°ru˘uª_queue_umm_öã∫Æ.h
"

9 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_öô
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 *
qe
, *
u£r_°©e
 )

11 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
u£r_°©e
 =
NULL
 );

15 
qe
->
√xt
 = 
NULL
;

17 
qs
->
íqueue_umm
 = 
qe
;

18 
qs
->
dequeue_umm
 = 
qe
;

20 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_CREATE
–
qs
->
lock_íqueue_umm
 );

21 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_CREATE
–
qs
->
lock_dequeue_umm
 );

23 
qs
->
u£r_°©e
 = user_state;

25 
LFDS711_MISC_BARRIER_STORE
;

27 
	`lfds711_misc_f‹˚_°‹e
();

30 
	}
}

37 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_˛ónup
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
,

38 (*
ñemít_˛ónup_ˇŒback
)(
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 *
qe
, 
Êag
 
dummy_ñemít_Êag
) )

40 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít


41 *
qe
;

43 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

46 
LFDS711_MISC_BARRIER_LOAD
;

48 if–
ñemít_˛ónup_ˇŒback
 !
NULL
 )

49  
	`libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_dequeue_umm
(
qs
, &
qe
) )

50 
	`ñemít_˛ónup_ˇŒback
–
qs
, 
qe
, 
LOWERED
 );

52 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_DESTROY
–
qs
->
lock_íqueue_umm
 );

53 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_DESTROY
–
qs
->
lock_dequeue_umm
 );

56 
	}
}

63 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_íqueue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 *
qe
 )

65 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

66 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

68 
qe
->
√xt
 = 
NULL
;

70 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
qs
->
lock_íqueue_umm
 );

72 
qs
->
íqueue_umm
->
√xt
 = 
qe
;

73 
qs
->
íqueue_umm
 = 
qe
;

75 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
qs
->
lock_íqueue_umm
 );

78 
	}
}

85 
	$libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_dequeue_umm
–
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_°©e
 *
qs
, 
libbíchm¨k_d©a°ru˘uª_queue_umm_wödows_muãx_ñemít
 **
qe
 )

88 
rv
 = 1;

90 
	`LFDS711_PAL_ASSERT
–
qs
 !
NULL
 );

91 
	`LFDS711_PAL_ASSERT
–
qe
 !
NULL
 );

93 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_GET
–
qs
->
lock_dequeue_umm
 );

95 if–
qs
->
dequeue_umm
 =qs->
íqueue_umm
 )

97 *
qe
 = 
NULL
;

98 
rv
 = 0;

102 *
qe
 = 
qs
->
dequeue_umm
;

103 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->key;

104 (*
qe
)->
key
 = 
qs
->
dequeue_umm
->
√xt
->
vÆue
;

105 
qs
->
dequeue_umm
 = qs->dequeue_umm->
√xt
;

108 
	`LIBBENCHMARK_PAL_LOCK_WINDOWS_MUTEX_RELEASE
–
qs
->
lock_dequeue_umm
 );

110  
rv
;

111 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_internal.h

2 
	~"../öc/libbíchm¨k.h
"

5 
	#™d
 &&

	)

6 
	#‹
 ||

	)

8 
	#NO_FLAGS
 0x0

	)

10 
	#NUMBER_UPPERCASE_LETTERS_IN_LATIN_ALPHABET
 26

	)

11 
	#NUMBER_OF_NANOSECONDS_IN_ONE_SECOND
 1000000000LLU

	)

12 
	#TIME_LOOP_COUNT
 1000

	)

13 
	#DEFAULT_BENCHMARK_DURATION_IN_SECONDS
 5

	)

15 
	#ONE_KILOBYTES_IN_BYTES
 1024

	)

17 
	#LIBBENCHMARK_VERSION_STRING
 "7.1.1"

	)

18 
	#LIBBENCHMARK_VERSION_INTEGER
 711

	)

20 
	#RETURN_SUCCESS
 0

	)

21 
	#RETURN_FAILURE
 1

	)

23 #if–
deföed
 
KERNEL_MODE
 )

24 
	#MODE_TYPE_STRING
 "kî√l-mode"

	)

27 #if–!
deföed
 
KERNEL_MODE
 )

28 
	#MODE_TYPE_STRING
 "u£r-mode"

	)

31 #if–
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

32 
	#BUILD_TYPE_STRING
 "ªÀa£"

	)

35 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

36 
	#BUILD_TYPE_STRING
 "debug"

	)

39 #if–!
deföed
 
NDEBUG
 && deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

40 
	#BUILD_TYPE_STRING
 "covîage"

	)

43 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && deföed 
TSAN
 && !deföed 
PROF
 )

44 
	#BUILD_TYPE_STRING
 "thªadßnôizî"

	)

47 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && deföed 
PROF
 )

48 
	#BUILD_TYPE_STRING
 "¥ofûög"

	)

	@test_and_benchmark/libbenchmark/src/libbenchmark_misc/libbenchmark_misc_globals.c

2 
	~"libbíchm¨k_misc_öã∫Æ.h
"

10 * c⁄° 
	glibbíchm¨k_globÆs_d©a°ru˘uª_«mes
[] =

16 * c⁄° 
	glibbíchm¨k_globÆs_bíchm¨k_«mes
[] =

22 * c⁄° 
	glibbíchm¨k_globÆs_lock_«mes
[] =

36 * c⁄° 
	glibbíchm¨k_globÆs_numa_mode_«mes
[] =

43 
lfds711_∑l_uöt_t


44 
	glibbíchm¨k_globÆs_bíchm¨k_duøti⁄_ö_£c⁄ds
 = 
DEFAULT_BENCHMARK_DURATION_IN_SECONDS
;

	@test_and_benchmark/libbenchmark/src/libbenchmark_misc/libbenchmark_misc_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_misc/libbenchmark_misc_pal_helpers.c

2 
	~"libbíchm¨k_misc_öã∫Æ.h
"

9 
	$libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–
libbíchm¨k_t›ﬁogy_node_°©e
 **
äs
,

10 
libsh¨ed_mem‹y_°©e
 *
ms
 )

12 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

15 *
äs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libbíchm¨k_t›ﬁogy_node_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

17 
	`libbíchm¨k_t›ﬁogy_node_öô
–*
äs
 );

20 
	}
}

27 
	$libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

28 
libsh¨ed_mem‹y_°©e
 *
ms
,

29 
lfds711_∑l_uöt_t
 
logiˇl_¥o˚ss‹_numbî
,

30 
Êag
 
wödows_¥o˚ss‹_group_öu£_Êag
,

31 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
 )

33 
libbíchm¨k_t›ﬁogy_node_°©e


34 *
äs_ãmp
;

36 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

37 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

42 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs_ãmp
, 
ms
 );

44 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–*
äs_ãmp
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 );

45 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_LOGICAL_PROCESSOR_NUMBER
–*
äs_ãmp
, 
logiˇl_¥o˚ss‹_numbî
 );

47 if–
wödows_¥o˚ss‹_group_öu£_Êag
 =
RAISED
 )

48 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_WINDOWS_GROUP_NUMBER
–*
äs_ãmp
, 
wödows_¥o˚ss‹_group_numbî
 );

50 
	`LIBBENCHMARK_TOPOLOGY_NODE_UNSET_WINDOWS_GROUP_NUMBER
–*
äs_ãmp
 );

52 
	`LFDS711_LIST_ASO_SET_KEY_IN_ELEMENT
–
äs_ãmp
->
œs€
,Åns_temp );

53 
	`LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–
äs_ãmp
->
œs€
,Åns_temp );

54 
	`lfds711_li°_aso_ö£π
–&
äs
->
logiˇl_¥o˚ss‹_chûdªn
, &
äs_ãmp
->
œs€
, 
NULL
 );

57 
	}
}

64 
	$libbíchm¨k_misc_∑l_hñ≥r_add_sy°em_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

65 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 )

67 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

70 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–*
äs
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_SYSTEM
 );

72 
	`libbíchm¨k_t›ﬁogy_ö£π
–
ts
, 
äs
 );

75 
	}
}

82 
	$libbíchm¨k_misc_∑l_hñ≥r_add_numa_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

83 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

84 
lfds711_∑l_uöt_t
 
numa_node_id
 )

86 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

87 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

90 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–*
äs
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
 );

91 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_NUMA_ID
–*
äs
, 
numa_node_id
 );

93 
	`libbíchm¨k_t›ﬁogy_ö£π
–
ts
, 
äs
 );

96 
	}
}

103 
	$libbíchm¨k_misc_∑l_hñ≥r_add_sockë_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

104 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 )

106 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

107 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

109 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–*
äs
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_SOCKET
 );

111 
	`libbíchm¨k_t›ﬁogy_ö£π
–
ts
, 
äs
 );

114 
	}
}

121 
	$libbíchm¨k_misc_∑l_hñ≥r_add_physiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

122 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 )

124 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

125 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

127 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–*
äs
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_PHYSICAL_PROCESSOR
 );

129 
	`libbíchm¨k_t›ﬁogy_ö£π
–
ts
, 
äs
 );

132 
	}
}

139 
	$libbíchm¨k_misc_∑l_hñ≥r_add_ˇche_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

140 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

141 
lfds711_∑l_uöt_t
 
Àvñ
,

142 
libbíchm¨k_t›ﬁogy_node_ˇche_ty≥
 
ty≥
 )

144 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

145 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

149 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–*
äs
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
 );

150 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_CACHE_LEVEL
–*
äs
, 
Àvñ
 );

151 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_CACHE_TYPE
–*
äs
, 
ty≥
 );

153 
	`libbíchm¨k_t›ﬁogy_ö£π
–
ts
, 
äs
 );

156 
	}
}

163 
	$libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

164 
libsh¨ed_mem‹y_°©e
 *
ms
,

165 
lfds711_∑l_uöt_t
 
logiˇl_¥o˚ss‹_numbî
,

166 
Êag
 
wödows_¥o˚ss‹_group_öu£_Êag
,

167 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
 )

169 
libbíchm¨k_t›ﬁogy_node_°©e


170 *
äs
;

172 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

173 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

178 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

180 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–*
äs
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 );

181 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_LOGICAL_PROCESSOR_NUMBER
–*
äs
, 
logiˇl_¥o˚ss‹_numbî
 );

183 if–
wödows_¥o˚ss‹_group_öu£_Êag
 =
RAISED
 )

184 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_WINDOWS_GROUP_NUMBER
–*
äs
, 
wödows_¥o˚ss‹_group_numbî
 );

186 
	`LIBBENCHMARK_TOPOLOGY_NODE_UNSET_WINDOWS_GROUP_NUMBER
–*
äs
 );

188 
	`libbíchm¨k_t›ﬁogy_ö£π
–
ts
, 
äs
 );

191 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_misc/libbenchmark_misc_query.c

2 
	~"libbíchm¨k_misc_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libbíchm¨k_misc_quîy
–
libbíchm¨k_misc_quîy
 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 )

17  
quîy_ty≥
 )

19 
LIBBENCHMARK_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
:

22 * c⁄° 
buûd_™d_vîsi⁄_°rög
 = "libbíchm¨k " 
LIBBENCHMARK_MISC_VERSION_STRING
 " (" 
BUILD_TYPE_STRING
 ", " 
LIBBENCHMARK_PAL_OS_STRING
 ", " 
MODE_TYPE_STRING
 ")";

24 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

25 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

27 *(c⁄° **Ë
quîy_ouçut
 = 
buûd_™d_vîsi⁄_°rög
;

33 
	}
}

35 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_porting_abstraction_layer/libbenchmark_porting_abstraction_layer_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_porting_abstraction_layer/libbenchmark_porting_abstraction_layer_populate_topology.c

2 
	~"libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_öã∫Æ.h
"

9 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXPSP3
 && NTDDI_VERSION < 
NTDDI_WIN7
 )

11 #ifde‡
LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


12 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libbenchmark_porting_abstraction_layer_populate_topology.c".

15 
	#LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


	)

17 
öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
, 
lfds711_∑l_uöt_t
 
bômask
 );

19 
	$libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_p›uœã_t›ﬁogy
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

20 
libsh¨ed_mem‹y_°©e
 *
ms
 )

22 
BOOL


23 
brv
;

25 
DWORD


26 
¶pi_Àngth
 = 0,

27 
numbî_¶pi
,

28 
lo›
;

30 
libbíchm¨k_t›ﬁogy_node_ˇche_ty≥


31 
¥o˚ss‹_ˇche_ty≥_to_libbíchm¨k_t›ﬁogy_node_ˇche_ty≥
[3] =

33 
LIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_UNIFIED
, 
LIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_INSTRUCTION
, 
LIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_DATA


37 
rv
 = 1;

39 
libbíchm¨k_t›ﬁogy_node_°©e


40 *
äs
;

42 
SYSTEM_LOGICAL_PROCESSOR_INFORMATION


43 *
¶pi
 = 
NULL
;

45 
ULONG_PTR


46 
mask
;

48 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

49 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

52 
brv
 = 
	`GëLogiˇlPro˚ss‹Inf‹m©i⁄
–
¶pi
, &
¶pi_Àngth
 );

53 
¶pi
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, 
¶pi_Àngth
, (
lfds711_∑l_uöt_t
) );

54 
brv
 = 
	`GëLogiˇlPro˚ss‹Inf‹m©i⁄
–
¶pi
, &
¶pi_Àngth
 );

55 
numbî_¶pi
 = 
¶pi_Àngth
 / (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION
);

63 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

65  
lo›
 = 0 ;Üo› < 
numbî_¶pi
 ;Üoop++ )

66 if–(
¶pi
+
lo›
)->
Rñ©i⁄shù
 =
Rñ©i⁄NumaNode
 )

67 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë(
¶pi
+
lo›
)->
Pro˚ss‹Mask
 );

69 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sy°em_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

71  
lo›
 = 0 ;Üo› < 
numbî_¶pi
 ;Üoop++ )

73 if–(
¶pi
+
lo›
)->
Rñ©i⁄shù
 =
Rñ©i⁄NumaNode
 )

75 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

76 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë((
¶pi
+
lo›
)->
Pro˚ss‹Mask
) );

77 
	`libbíchm¨k_misc_∑l_hñ≥r_add_numa_node_to_t›ﬁogy_åì
–
ts
, 
äs
, (
lfds711_∑l_uöt_t
Ë(
¶pi
+
lo›
)->
NumaNode
.
NodeNumbî
 );

80  
mask
 = 1 ; mask != 0 ; mask <<= 1 )

81 if–((
¶pi
+
lo›
)->
Pro˚ss‹Mask
 & 
mask
) == mask )

82 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
ms
, (
lfds711_∑l_uöt_t
Ë((
¶pi
+
lo›
)->
Pro˚ss‹Mask
 & 
mask
), 
LOWERED
, 0 );

85 if–(
¶pi
+
lo›
)->
Rñ©i⁄shù
 =
Rñ©i⁄Pro˚ss‹Package
 )

87 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

88 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë((
¶pi
+
lo›
)->
Pro˚ss‹Mask
) );

89 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sockë_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

92 if–(
¶pi
+
lo›
)->
Rñ©i⁄shù
 =
Rñ©i⁄Pro˚ss‹C‹e
 )

94 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

95 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë((
¶pi
+
lo›
)->
Pro˚ss‹Mask
) );

96 
	`libbíchm¨k_misc_∑l_hñ≥r_add_physiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

99 if–(
¶pi
+
lo›
)->
Rñ©i⁄shù
 =
Rñ©i⁄Cache
 )

101 if–(
¶pi
+
lo›
)->
Cache
.
Ty≥
 =
CacheUnifõd
 
	`‹
 (¶pi+lo›)->Cache.Ty≥ =
CacheIn°ru˘i⁄
 o∏(¶pi+lo›)->Cache.Ty≥ =
CacheD©a
 )

103 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

104 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë(
¶pi
+
lo›
)->
Pro˚ss‹Mask
 );

105 
	`libbíchm¨k_misc_∑l_hñ≥r_add_ˇche_node_to_t›ﬁogy_åì
–
ts
, 
äs
, (
lfds711_∑l_uöt_t
Ë(
¶pi
+
lo›
)->
Cache
.
Levñ
, 
¥o˚ss‹_ˇche_ty≥_to_libbíchm¨k_t›ﬁogy_node_ˇche_ty≥
[(¶pi+lo›)->Cache.
Ty≥
] );

110  
rv
;

111 
	}
}

114 
	$öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
libsh¨ed_mem‹y_°©e
 *
ms
,

115 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

116 
lfds711_∑l_uöt_t
 
bômask
 )

118 
lfds711_∑l_uöt_t


119 
logiˇl_¥o˚ss‹_numbî
 = 1;

121 
libbíchm¨k_t›ﬁogy_node_°©e


122 *
äs_ãmp
;

124 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

125 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

133  
bômask
 != 0 )

135 if–
bômask
 & 0x1 )

136 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 
LOWERED
, 0 );

138 
bômask
 >>= 1;

139 
logiˇl_¥o˚ss‹_numbî
++;

143 
	}
}

152 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WIN7
 )

154 #ifde‡
LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


155 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libbenchmark_porting_abstraction_layer_populate_topology.c".

158 
	#LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


	)

160 
numa_node_id_to_numa_node_id_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

161 
¬a_˛ónup
–
lfds711_båì_au_°©e
 *
baus
, 
lfds711_båì_au_ñemít
 *
baue
 );

162 
öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
, 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
,Üfds711_∑l_uöt_à
bômask
 );

164 
	$libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_p›uœã_t›ﬁogy
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

165 
libsh¨ed_mem‹y_°©e
 *
ms
 )

167 
BOOL


168 
brv
;

170 
DWORD


171 
off£t
 = 0,

172 
¶põ_Àngth
 = 0,

173 
sublo›
;

184 
rv
 = 1;

186 
KAFFINITY


187 
bômask
;

189 
lfds711_∑l_uöt_t


190 
logiˇl_¥o˚ss‹_numbî
;

192 
lfds711_båì_au_ñemít


193 *
baue
;

195 
lfds711_båì_au_°©e


196 
¬a_åì_°©e
;

198 
libbíchm¨k_t›ﬁogy_node_°©e


199 *
äs
;

201 
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX


202 *
¶põ
,

203 *
¶põ_buf„r
 = 
NULL
;

205 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

206 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

209 
brv
 = 
	`GëLogiˇlPro˚ss‹Inf‹m©i⁄Ex
–
Rñ©i⁄AŒ
, 
¶põ_buf„r
, &
¶põ_Àngth
 );

210 
¶põ_buf„r
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, 
¶põ_Àngth
, (
lfds711_∑l_uöt_t
) );

211 
brv
 = 
	`GëLogiˇlPro˚ss‹Inf‹m©i⁄Ex
–
Rñ©i⁄AŒ
, 
¶põ_buf„r
, &
¶põ_Àngth
 );

293 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

295  
off£t
 < 
¶põ_Àngth
 )

297 
¶põ
 = (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
 *Ë–(*Ë
¶põ_buf„r
 + 
off£t
 );

299 
off£t
 +
¶põ
->
Size
;

301 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄NumaNode
 )

302 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë(
¶põ
->
NumaNode
.
GroupMask
.
Group
), (lfds711_∑l_uöt_tË(¶põ->NumaNode.GroupMask.
Mask
) );

305 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sy°em_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

308 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
¬a_åì_°©e
, 
numa_node_id_to_numa_node_id_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
, 
ts
 );

310 
off£t
 = 0;

312  
off£t
 < 
¶põ_Àngth
 )

314 
¶põ
 = (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
 *Ë–(*Ë
¶põ_buf„r
 + 
off£t
 );

316 
off£t
 +
¶põ
->
Size
;

318 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄NumaNode
 )

327 
rv
 = 
	`lfds711_båì_au_gë_by_key
–&
¬a_åì_°©e
, 
NULL
, (*Ë&
¶põ
->
NumaNode
.
NodeNumbî
, &
baue
 );

329 if–
rv
 == 0 )

331 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

332 
baue
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_båì_au_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

333 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–*
baue
, (*Ë&
¶põ
->
NumaNode
.
NodeNumbî
 );

334 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–*
baue
, 
äs
 );

335 
	`lfds711_båì_au_ö£π
–&
¬a_åì_°©e
, 
baue
, 
NULL
 );

339 
äs
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

340 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë
¶põ
->
NumaNode
.
GroupMask
.
Group
, (lfds711_∑l_uöt_tË¶põ->NumaNode.GroupMask.
Mask
 );

343 
logiˇl_¥o˚ss‹_numbî
 = 0;

344 
bômask
 = 
¶põ
->
NumaNode
.
GroupMask
.
Mask
;

346  
bômask
 != 0 )

348 if–
bômask
 & 0x1 )

349 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 
RAISED
, (
¶põ
->
NumaNode
.
GroupMask
.
Group
) );

351 
bômask
 >>= 1;

352 
logiˇl_¥o˚ss‹_numbî
++;

356 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄Group
 )

361 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄Pro˚ss‹Package
 )

363 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

364  
sublo›
 = 0 ; sublo› < 
¶põ
->
Pro˚ss‹
.
GroupCou¡
 ; subloop++ )

365 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë
¶põ
->
Pro˚ss‹
.
GroupMask
[
sublo›
].
Group
, (lfds711_∑l_uöt_tË¶põ->Pro˚ss‹.GroupMask[sublo›].
Mask
 );

366 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sockë_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

369 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄Pro˚ss‹C‹e
 )

371 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

372  
sublo›
 = 0 ; sublo› < 
¶põ
->
Pro˚ss‹
.
GroupCou¡
 ; subloop++ )

373 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë
¶põ
->
Pro˚ss‹
.
GroupMask
[
sublo›
].
Group
, (lfds711_∑l_uöt_tË¶põ->Pro˚ss‹.GroupMask[sublo›].
Mask
 );

374 
	`libbíchm¨k_misc_∑l_hñ≥r_add_physiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

395 
	`lfds711_båì_au_˛ónup
–&
¬a_åì_°©e
, 
¬a_˛ónup
 );

397  
rv
;

398 
	}
}

401 
	$numa_node_id_to_numa_node_id_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

404 
¸
 = 0;

406 
DWORD


407 
numa_node_id_exi°ög
,

408 
numa_node_id_√w
;

410 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

411 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

413 
numa_node_id_√w
 = *(
DWORD
 *Ë
√w_key
;

414 
numa_node_id_exi°ög
 = *(
DWORD
 *Ë
exi°ög_key
;

416 if–
numa_node_id_√w
 < 
numa_node_id_exi°ög
 )

417 
¸
 = -1;

419 if–
numa_node_id_√w
 > 
numa_node_id_exi°ög
 )

420 
¸
 = 1;

422  
¸
;

423 
	}
}

426 
	$¬a_˛ónup
–
lfds711_båì_au_°©e
 *
baus
, 
lfds711_båì_au_ñemít
 *
baue
 )

428 
DWORD


429 *
numa_node_id
;

431 
libbíchm¨k_t›ﬁogy_node_°©e


432 *
äs
;

434 
libbíchm¨k_t›ﬁogy_°©e


435 *
ts
;

437 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

438 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

440 
ts
 = 
	`LFDS711_BTREE_AU_GET_USER_STATE_FROM_STATE
–*
baus
 );

441 
numa_node_id
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

442 
äs
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

444 
	`libbíchm¨k_misc_∑l_hñ≥r_add_numa_node_to_t›ﬁogy_åì
–
ts
, 
äs
, (
lfds711_∑l_uöt_t
Ë*
numa_node_id
 );

447 
	}
}

450 
	$öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
libsh¨ed_mem‹y_°©e
 *
ms
,

451 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

452 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
,

453 
lfds711_∑l_uöt_t
 
bômask
 )

455 
lfds711_∑l_uöt_t


456 
logiˇl_¥o˚ss‹_numbî
 = 0;

458 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

459 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

468  
bômask
 != 0 )

470 if–
bômask
 & 0x1 )

471 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 
RAISED
, 
wödows_¥o˚ss‹_group_numbî
 );

473 
bômask
 >>= 1;

474 
logiˇl_¥o˚ss‹_numbî
++;

478 
	}
}

487 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && NTDDI_VERSION < 
NTDDI_WIN7
 )

489 #ifde‡
LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


490 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libbenchmark_porting_abstraction_layer_populate_topology.c".

493 
	#LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


	)

495 
	$libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_p›uœã_t›ﬁogy
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

496 
libsh¨ed_mem‹y_°©e
 *
ms
 )

498 
CCHAR


499 
lo›
;

501 
libbíchm¨k_t›ﬁogy_node_°©e


502 *
äs
;

504 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

505 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

519 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

520  
lo›
 = 0 ;Üo› < 
KeNumbîPro˚ss‹s
 ;Üoop++ )

521 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
lo›
, 
LOWERED
, 0 );

522 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sy°em_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

525 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

526  
lo›
 = 0 ;Üo› < 
KeNumbîPro˚ss‹s
 ;Üoop++ )

527 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
lo›
, 
LOWERED
, 0 );

528 
	`libbíchm¨k_misc_∑l_hñ≥r_add_numa_node_to_t›ﬁogy_åì
–
ts
, 
äs
, 0 );

531 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

532  
lo›
 = 0 ;Üo› < 
KeNumbîPro˚ss‹s
 ;Üoop++ )

533 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
lo›
, 
LOWERED
, 0 );

534 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sockë_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

537 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

538  
lo›
 = 0 ;Üo› < 
KeNumbîPro˚ss‹s
 ;Üoop++ )

539 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
lo›
, 
LOWERED
, 0 );

540 
	`libbíchm¨k_misc_∑l_hñ≥r_add_physiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

543  
lo›
 = 0 ;Üo› < 
KeNumbîPro˚ss‹s
 ;Üoop++ )

544 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
ms
, 
lo›
, 
LOWERED
, 0 );

547 
	}
}

556 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WIN7
 )

558 #ifde‡
LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


559 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libbenchmark_porting_abstraction_layer_populate_topology.c".

562 
	#LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


	)

564 
numa_node_id_to_numa_node_id_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

565 
¬a_˛ónup
–
lfds711_båì_au_°©e
 *
baus
, 
lfds711_båì_au_ñemít
 *
baue
 );

566 
öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
, 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
,Üfds711_∑l_uöt_à
bômask
 );

568 
	$libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_p›uœã_t›ﬁogy
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

569 
libsh¨ed_mem‹y_°©e
 *
ms
 )

580 
rv
 = 1;

582 
KAFFINITY


583 
bômask
;

585 
lfds711_∑l_uöt_t


586 
logiˇl_¥o˚ss‹_numbî
;

588 
NTSTATUS


589 
brv
;

591 
lfds711_båì_au_ñemít


592 *
baue
;

594 
lfds711_båì_au_°©e


595 
¬a_åì_°©e
;

597 
libbíchm¨k_t›ﬁogy_node_°©e


598 *
äs
;

600 
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX


601 *
¶põ
,

602 *
¶põ_buf„r
 = 
NULL
;

604 
ULONG


605 
off£t
 = 0,

606 
¶põ_Àngth
 = 0,

607 
sublo›
;

609 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

610 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

613 
brv
 = 
	`KeQuîyLogiˇlPro˚ss‹Rñ©i⁄shù
–
NULL
, 
Rñ©i⁄AŒ
, 
¶põ_buf„r
, &
¶põ_Àngth
 );

614 
¶põ_buf„r
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, 
¶põ_Àngth
, (
lfds711_∑l_uöt_t
) );

615 
brv
 = 
	`KeQuîyLogiˇlPro˚ss‹Rñ©i⁄shù
–
NULL
, 
Rñ©i⁄AŒ
, 
¶põ_buf„r
, &
¶põ_Àngth
 );

697 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

699  
off£t
 < 
¶põ_Àngth
 )

701 
¶põ
 = (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
 *Ë–(*Ë
¶põ_buf„r
 + 
off£t
 );

703 
off£t
 +
¶põ
->
Size
;

705 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄NumaNode
 )

706 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë(
¶põ
->
NumaNode
.
GroupMask
.
Group
), (lfds711_∑l_uöt_tË(¶põ->NumaNode.GroupMask.
Mask
) );

709 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sy°em_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

712 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
¬a_åì_°©e
, 
numa_node_id_to_numa_node_id_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
, 
ts
 );

714 
off£t
 = 0;

716  
off£t
 < 
¶põ_Àngth
 )

718 
¶põ
 = (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
 *Ë–(*Ë
¶põ_buf„r
 + 
off£t
 );

720 
off£t
 +
¶põ
->
Size
;

722 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄NumaNode
 )

731 
rv
 = 
	`lfds711_båì_au_gë_by_key
–&
¬a_åì_°©e
, 
NULL
, (*Ë&
¶põ
->
NumaNode
.
NodeNumbî
, &
baue
 );

733 if–
rv
 == 0 )

735 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

736 
baue
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
lfds711_båì_au_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

737 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–*
baue
, (*Ë&
¶põ
->
NumaNode
.
NodeNumbî
 );

738 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–*
baue
, 
äs
 );

739 
	`lfds711_båì_au_ö£π
–&
¬a_åì_°©e
, 
baue
, 
NULL
 );

743 
äs
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

744 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë
¶põ
->
NumaNode
.
GroupMask
.
Group
, (lfds711_∑l_uöt_tË¶põ->NumaNode.GroupMask.
Mask
 );

747 
logiˇl_¥o˚ss‹_numbî
 = 0;

748 
bômask
 = 
¶põ
->
NumaNode
.
GroupMask
.
Mask
;

750  
bômask
 != 0 )

752 if–
bômask
 & 0x1 )

753 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 
RAISED
, (
¶põ
->
NumaNode
.
GroupMask
.
Group
) );

755 
bômask
 >>= 1;

756 
logiˇl_¥o˚ss‹_numbî
++;

760 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄Group
 )

765 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄Pro˚ss‹Package
 )

767 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

768  
sublo›
 = 0 ; sublo› < 
¶põ
->
Pro˚ss‹
.
GroupCou¡
 ; subloop++ )

769 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë
¶põ
->
Pro˚ss‹
.
GroupMask
[
sublo›
].
Group
, (lfds711_∑l_uöt_tË¶põ->Pro˚ss‹.GroupMask[sublo›].
Mask
 );

770 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sockë_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

773 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄Pro˚ss‹C‹e
 )

775 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

776  
sublo›
 = 0 ; sublo› < 
¶põ
->
Pro˚ss‹
.
GroupCou¡
 ; subloop++ )

777 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
ms
, 
äs
, (
lfds711_∑l_uöt_t
Ë
¶põ
->
Pro˚ss‹
.
GroupMask
[
sublo›
].
Group
, (lfds711_∑l_uöt_tË¶põ->Pro˚ss‹.GroupMask[sublo›].
Mask
 );

778 
	`libbíchm¨k_misc_∑l_hñ≥r_add_physiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

799 
	`lfds711_båì_au_˛ónup
–&
¬a_åì_°©e
, 
¬a_˛ónup
 );

801  
rv
;

802 
	}
}

805 
	$numa_node_id_to_numa_node_id_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

808 
¸
 = 0;

810 
ULONG


811 
numa_node_id_exi°ög
,

812 
numa_node_id_√w
;

814 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

815 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

817 
numa_node_id_√w
 = *(
ULONG
 *Ë
√w_key
;

818 
numa_node_id_exi°ög
 = *(
ULONG
 *Ë
exi°ög_key
;

820 if–
numa_node_id_√w
 < 
numa_node_id_exi°ög
 )

821 
¸
 = -1;

823 if–
numa_node_id_√w
 > 
numa_node_id_exi°ög
 )

824 
¸
 = 1;

826  
¸
;

827 
	}
}

830 
	$¬a_˛ónup
–
lfds711_båì_au_°©e
 *
baus
, 
lfds711_båì_au_ñemít
 *
baue
 )

832 
ULONG


833 *
numa_node_id
;

835 
libbíchm¨k_t›ﬁogy_node_°©e


836 *
äs
;

838 
libbíchm¨k_t›ﬁogy_°©e


839 *
ts
;

841 
	`LFDS711_PAL_ASSERT
–
baus
 !
NULL
 );

842 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

844 
ts
 = 
	`LFDS711_BTREE_AU_GET_USER_STATE_FROM_STATE
–*
baus
 );

845 
numa_node_id
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

846 
äs
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

848 
	`libbíchm¨k_misc_∑l_hñ≥r_add_numa_node_to_t›ﬁogy_åì
–
ts
, 
äs
, (
lfds711_∑l_uöt_t
Ë*
numa_node_id
 );

851 
	}
}

854 
	$öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_bômask
–
libsh¨ed_mem‹y_°©e
 *
ms
,

855 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

856 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
,

857 
lfds711_∑l_uöt_t
 
bômask
 )

859 
lfds711_∑l_uöt_t


860 
logiˇl_¥o˚ss‹_numbî
 = 0;

862 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

863 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

872  
bômask
 != 0 )

874 if–
bômask
 & 0x1 )

875 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 
RAISED
, 
wödows_¥o˚ss‹_group_numbî
 );

877 
bômask
 >>= 1;

878 
logiˇl_¥o˚ss‹_numbî
++;

882 
	}
}

891 #if–
deföed
 
__löux__
 && !deföed 
KERNEL_MODE
 && deföed 
__STDC__
 && 
__STDC_HOSTED__
 == 1 )

893 #ifde‡
LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


894 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libbenchmark_porting_abstraction_layer_populate_topology.c".

897 
	#LIBBENCHMARK_PAL_POPULATE_TOPOLOGY


	)

899 
öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_∑th_to_csv_hex
–
libsh¨ed_mem‹y_°©e
 *
ms
,

900 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

901 *
∑th_to_csv_hex
 );

902 
öã∫Æ_vîify_∑ths
–
lfds711_∑l_uöt_t
 
numbî_∑ths
, ... );

903 
öã∫Æ_ªad_°rög_‰om_∑th
–*
∑th
, *
°rög
 );

906 
	$libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_p›uœã_t›ﬁogy
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

907 
libsh¨ed_mem‹y_°©e
 *
ms
 )

910 
numa_node_∑th
[128],

911 
thªad_siblögs_∑th
[128],

912 
c‹e_siblögs_∑th
[128],

913 
ˇche_Àvñ_∑th
[128],

914 
ˇche_ty≥_∑th
[128],

915 
sh¨ed_˝u_m≠_∑th
[128],

916 
ˇche_Àvñ_°rög
[16],

917 
ˇche_ty≥_°rög
[16];

920 
rv
 = 1,

921 
ˇche_ty≥_°rög_to_ty≥_íum_lookup
[
NUMBER_UPPERCASE_LETTERS_IN_LATIN_ALPHABET
] =

923 -1, -1, -1, 
LIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_DATA
, -1, -1, -1, -1, 
LIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_INSTRUCTION
, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 
LIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_UNIFIED
, -1, -1, -1, -1

927 
Àvñ_ãmp
;

929 
lfds711_∑l_uöt_t


930 
numa_node
 = 0,

931 
˝u_numbî
 = 0,

932 
ödex_numbî
,

933 
Àvñ
,

934 
ty≥
;

936 
libbíchm¨k_t›ﬁogy_ôî©e_°©e


937 
tis
;

939 
libbíchm¨k_t›ﬁogy_node_°©e


940 *
äs
,

941 *
äs_Õ
;

943 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

944 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

946 
	`•rötf
–
numa_node_∑th
, "/sys/devi˚s/sy°em/node/node%Œu/˝um≠", (Ë
numa_node
 );

948  
	`öã∫Æ_vîify_∑ths
(1, 
numa_node_∑th
) )

950 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

951 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_∑th_to_csv_hex
–
ms
, 
äs
, 
numa_node_∑th
 );

952 
	`libbíchm¨k_misc_∑l_hñ≥r_add_numa_node_to_t›ﬁogy_åì
–
ts
, 
äs
, (
lfds711_∑l_uöt_t
Ë
numa_node
 );

953 
	`•rötf
–
numa_node_∑th
, "/sys/devi˚s/sy°em/node/node%Œu/˝um≠", (Ë(++
numa_node
) );

956 
	`•rötf
–
thªad_siblögs_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/t›ﬁogy/thªad_siblögs", (Ë
˝u_numbî
 );

957 
	`•rötf
–
c‹e_siblögs_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/t›ﬁogy/c‹e_siblögs", (Ë
˝u_numbî
 );

959  
	`öã∫Æ_vîify_∑ths
(2, 
c‹e_siblögs_∑th
, 
thªad_siblögs_∑th
) )

961 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
ms
, 
˝u_numbî
, 
LOWERED
, 0 );

963 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

964 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_∑th_to_csv_hex
–
ms
, 
äs
, 
thªad_siblögs_∑th
 );

965 
	`libbíchm¨k_misc_∑l_hñ≥r_add_physiˇl_¥o˚ss‹_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

967 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

968 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_∑th_to_csv_hex
–
ms
, 
äs
, 
c‹e_siblögs_∑th
 );

969 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sockë_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

971 
ödex_numbî
 = 0;

973 
	`•rötf
–
ˇche_Àvñ_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/ˇche/ödex%Œu/Àvñ", (Ë
˝u_numbî
, (Ë
ödex_numbî
 );

974 
	`•rötf
–
ˇche_ty≥_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/ˇche/ödex%Œu/ty≥", (Ë
˝u_numbî
, (Ë
ödex_numbî
 );

975 
	`•rötf
–
sh¨ed_˝u_m≠_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/ˇche/ödex%Œu/sh¨ed_˝u_m≠", (Ë
˝u_numbî
, (Ë
ödex_numbî
 );

977  
	`öã∫Æ_vîify_∑ths
(3, 
ˇche_Àvñ_∑th
, 
ˇche_ty≥_∑th
, 
sh¨ed_˝u_m≠_∑th
) )

979 
	`öã∫Æ_ªad_°rög_‰om_∑th
–
ˇche_Àvñ_∑th
, 
ˇche_Àvñ_°rög
 );

980 
	`ssˇnf
–
ˇche_Àvñ_°rög
, "%Œx", &
Àvñ_ãmp
 );

981 
Àvñ
 = (
lfds711_∑l_uöt_t
Ë
Àvñ_ãmp
;

983 
	`öã∫Æ_ªad_°rög_‰om_∑th
–
ˇche_ty≥_∑th
, 
ˇche_ty≥_°rög
 );

984 
ty≥
 = 
ˇche_ty≥_°rög_to_ty≥_íum_lookup
[()(*
ˇche_ty≥_°rög
 - 'A')];

986 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

987 
	`öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_∑th_to_csv_hex
–
ms
, 
äs
, 
sh¨ed_˝u_m≠_∑th
 );

988 
	`libbíchm¨k_misc_∑l_hñ≥r_add_ˇche_node_to_t›ﬁogy_åì
–
ts
, 
äs
, 
Àvñ
, 
ty≥
 );

990 
ödex_numbî
++;

992 
	`•rötf
–
ˇche_Àvñ_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/ˇche/ödex%Œu/Àvñ", (Ë
˝u_numbî
, (Ë
ödex_numbî
 );

993 
	`•rötf
–
ˇche_ty≥_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/ˇche/ödex%Œu/ty≥", (Ë
˝u_numbî
, (Ë
ödex_numbî
 );

994 
	`•rötf
–
sh¨ed_˝u_m≠_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/ˇche/ödex%Œu/sh¨ed_˝u_m≠", (Ë
˝u_numbî
, (Ë
ödex_numbî
 );

997 
˝u_numbî
++;

999 
	`•rötf
–
thªad_siblögs_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/t›ﬁogy/thªad_siblögs", (Ë
˝u_numbî
 );

1000 
	`•rötf
–
c‹e_siblögs_∑th
, "/sys/devi˚s/sy°em/˝u/˝u%Œu/t›ﬁogy/c‹e_siblögs", (Ë
˝u_numbî
 );

1004 
	`libbíchm¨k_misc_∑l_hñ≥r_√w_t›ﬁogy_node
–&
äs
, 
ms
 );

1005 
	`libbíchm¨k_t›ﬁogy_ôî©e_öô
–&
tis
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 );

1006  
	`libbíchm¨k_t›ﬁogy_ôî©e
(
ts
, &
tis
, &
äs_Õ
) )

1007 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
(*
äs_Õ
), 
LOWERED
, 0 );

1008 
	`libbíchm¨k_misc_∑l_hñ≥r_add_sy°em_node_to_t›ﬁogy_åì
–
ts
, 
äs
 );

1010  
rv
;

1011 
	}
}

1014 
	$libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_t›ﬁogy_node_˛ónup
–
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 )

1016 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

1018 
	`lfds711_li°_aso_˛ónup
–&
äs
->
logiˇl_¥o˚ss‹_chûdªn
, 
NULL
 );

1021 
	}
}

1024 
	$öã∫Æ_p›uœã_logiˇl_¥o˚ss‹_¨øy_‰om_∑th_to_csv_hex
–
libsh¨ed_mem‹y_°©e
 *
ms
,

1025 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

1026 *
∑th_to_csv_hex
 )

1029 
diskbuf„r
[
BUFSIZ
],

1030 
°rög
[1024];

1032 
FILE


1033 *
diskfûe
;

1036 
lo›
;

1039 
logiˇl_¥o˚ss‹_foursome
,

1040 
logiˇl_¥o˚ss‹_numbî
 = 0,

1041 
sublo›
;

1043 
lfds711_∑l_uöt_t


1044 
Àngth
 = 0;

1046 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

1047 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

1048 
	`LFDS711_PAL_ASSERT
–
∑th_to_csv_hex
 !
NULL
 );

1056 
diskfûe
 = 
	`f›í
–
∑th_to_csv_hex
, "r" );

1057 
	`£tbuf
–
diskfûe
, 
diskbuf„r
 );

1058 
	`fgës
–
°rög
, 1024, 
diskfûe
 );

1059 
	`f˛o£
–
diskfûe
 );

1061  
°rög
[
Àngth
++] != '\0' );

1063 
Àngth
 -= 2;

1065  
lo›
 = (()
Àngth
)-1 ;Üoop > -1 ;Üoop-- )

1067 if–
°rög
[
lo›
] == ',' )

1070 
	`ssˇnf
–&
°rög
[
lo›
], "%1x", &
logiˇl_¥o˚ss‹_foursome
 );

1072  
sublo›
 = 0 ; subloop < 4 ; subloop++ )

1073 if––(
logiˇl_¥o˚ss‹_foursome
 >> 
sublo›
) & 0x1 ) == 0x1 )

1074 
	`libbíchm¨k_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_t›ﬁogy_node
–
äs
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
 + 
sublo›
, 
LOWERED
, 0 );

1076 
logiˇl_¥o˚ss‹_numbî
 += 4;

1080 
	}
}

1083 
	$öã∫Æ_vîify_∑ths
–
lfds711_∑l_uöt_t
 
numbî_∑ths
, ... )

1085 
FILE


1086 *
diskfûe
;

1089 
rv
 = 1;

1091 
lfds711_∑l_uöt_t


1092 
cou¡
 = 0;

1094 
va_li°


1095 
va
;

1099 
	`va_°¨t
–
va
, 
numbî_∑ths
 );

1101  
rv
 =1 
™d
 
cou¡
++ < 
numbî_∑ths
 )

1102 if–
NULL
 =(
diskfûe
 = 
	`f›í
(
	`va_¨g
(
va
,*), "r")) )

1103 
rv
 = 0;

1105 
	`f˛o£
–
diskfûe
 );

1107 
	`va_íd
–
va
 );

1109  
rv
;

1110 
	}
}

1113 
	$öã∫Æ_ªad_°rög_‰om_∑th
–*
∑th
, *
°rög
 )

1116 
diskbuf„r
[
BUFSIZ
];

1118 
FILE


1119 *
diskfûe
;

1121 
	`LFDS711_PAL_ASSERT
–
∑th
 !
NULL
 );

1122 
	`LFDS711_PAL_ASSERT
–
°rög
 !
NULL
 );

1124 
diskfûe
 = 
	`f›í
–
∑th
, "r" );

1125 
	`£tbuf
–
diskfûe
, 
diskbuf„r
 );

1126 
	`fsˇnf
–
diskfûe
, "%s", 
°rög
 );

1127 
	`f˛o£
–
diskfûe
 );

1130 
	}
}

1139 #if–!
deföed
 
LIBBENCHMARK_PAL_POPULATE_TOPOLOGY
 )

1141 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 "libbenchmark_porting_abstraction_layer_populate_topology.c".

	@test_and_benchmark/libbenchmark/src/libbenchmark_porting_abstraction_layer/libbenchmark_porting_abstraction_layer_print_string.c

2 
	~"libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_öã∫Æ.h
"

9 #if–
deföed
 
_MSC_VER
 )

17 
	#__STDC__
 1

	)

18 
	#__STDC_HOSTED__
 1

	)

26 #if–
deföed
 
__STDC__
 && 
__STDC_HOSTED__
 =1 && !deföed 
KERNEL_MODE
 )

28 
	#LIBBENCHMARK_PAL_PRINT_STRING


	)

30 
	~<°dio.h
>

32 
	$libbíchm¨k_∑l_¥öt_°rög
–c⁄° * c⁄° 
°rög
 )

34 
	`LFDS711_PAL_ASSERT
–
°rög
 !
NULL
 );

36 
	`¥ötf
–"%s", 
°rög
 );

38 
	`fÊush
–
°dout
 );

41 
	}
}

50 #if–!
deföed
 
LIBBENCHMARK_PAL_PRINT_STRING
 )

52 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

54 
	$libbíchm¨k_∑l_¥öt_°rög
–c⁄° * c⁄° 
°rög
 )

56 
	`LFDS711_PAL_ASSERT
–
°rög
 !
NULL
 );

59 
	}
}

61 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_cleanup.c

2 
	~"libbíchm¨k_ªsu…s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libbíchm¨k_ªsu…s_˛ónup
–
libbíchm¨k_ªsu…s_°©e
 *
rs
 )

13 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

16 
	}
}

18 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_compare.c

2 
	~"libbíchm¨k_ªsu…s_öã∫Æ.h
"

9 
	$libbíchm¨k_ªsu…_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

12 
rv
;

14 
libbíchm¨k_ªsu…


15 *
rs_√w
,

16 *
rs_exi°ög
;

18 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

21 
rs_√w
 = (
libbíchm¨k_ªsu…
 *Ë
√w_key
;

22 
rs_exi°ög
 = (
libbíchm¨k_ªsu…
 *Ë
exi°ög_key
;

24 if–
rs_√w
->
d©a°ru˘uª_id
 > 
rs_exi°ög
->datastructure_id )

27 if–
rs_√w
->
d©a°ru˘uª_id
 < 
rs_exi°ög
->datastructure_id )

30 if–
rs_√w
->
bíchm¨k_id
 > 
rs_exi°ög
->benchmark_id )

33 if–
rs_√w
->
bíchm¨k_id
 < 
rs_exi°ög
->benchmark_id )

36 if–
rs_√w
->
lock_id
 > 
rs_exi°ög
->lock_id )

39 if–
rs_√w
->
lock_id
 < 
rs_exi°ög
->lock_id )

42 if–
rs_√w
->
numa_mode
 > 
rs_exi°ög
->numa_mode )

45 if–
rs_√w
->
numa_mode
 < 
rs_exi°ög
->numa_mode )

48 
rv
 = 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_Õ£ts_fun˘i⁄
–
rs_√w
->
Õ£t
, 
rs_exi°ög
->lpset );

50 if–
rv
 != 0 )

51  
rv
;

53 
rv
 = 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
–&
rs_√w
->
äs
, &
rs_exi°ög
->tns );

56  
rv
;

57 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_get_result.c

2 
	~"libbíchm¨k_ªsu…s_öã∫Æ.h
"

9 
	$libbíchm¨k_ªsu…s_gë_ªsu…
–
libbíchm¨k_ªsu…s_°©e
 *
rs
,

10 
libbíchm¨k_d©a°ru˘uª_id
 
d©a°ru˘uª_id
,

11 
libbíchm¨k_bíchm¨k_id
 
bíchm¨k_id
,

12 
libbíchm¨k_lock_id
 
lock_id
,

13 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

14 
lfds711_li°_aso_°©e
 *
Õ£t
,

15 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
,

16 
lfds711_∑l_uöt_t
 *
ªsu…
 )

19 
rv
;

21 
lfds711_båì_au_ñemít


22 *
baue
;

24 
libbíchm¨k_ªsu…


25 *
r
,

26 
£¨ch_key
;

28 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

33 
	`LFDS711_PAL_ASSERT
–
Õ£t
 !
NULL
 );

34 
	`LFDS711_PAL_ASSERT
–
äs
!
NULL
 );

35 
	`LFDS711_PAL_ASSERT
–
ªsu…
 !
NULL
 );

37 
£¨ch_key
.
d©a°ru˘uª_id
 = datastructure_id;

38 
£¨ch_key
.
bíchm¨k_id
 = benchmark_id;

39 
£¨ch_key
.
lock_id
 =Üock_id;

40 
£¨ch_key
.
numa_mode
 =Çuma_mode;

41 
£¨ch_key
.
Õ£t
 =Üpset;

42 
£¨ch_key
.
äs
 = *tns;

44 
rv
 = 
	`lfds711_båì_au_gë_by_key
–&
rs
->
ªsu…s_åì
, 
NULL
, &
£¨ch_key
, &
baue
 );

46 if–
rv
 == 1 )

48 
r
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

49 *
ªsu…
 = 
r
->result;

52  
rv
;

53 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_init.c

2 
	~"libbíchm¨k_ªsu…s_öã∫Æ.h
"

9 
	$libbíchm¨k_ªsu…s_öô
–
libbíchm¨k_ªsu…s_°©e
 *
rs
,

10 
libsh¨ed_mem‹y_°©e
 *
ms
 )

12 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

15 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
rs
->
ªsu…s_åì
, 
libbíchm¨k_ªsu…_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

17 
rs
->
ms
 = ms;

20 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_put_result.c

2 
	~"libbíchm¨k_ªsu…s_öã∫Æ.h
"

9 
	$libbíchm¨k_ªsu…s_put_ªsu…
–
libbíchm¨k_ªsu…s_°©e
 *
rs
,

10 
libbíchm¨k_d©a°ru˘uª_id
 
d©a°ru˘uª_id
,

11 
libbíchm¨k_bíchm¨k_id
 
bíchm¨k_id
,

12 
libbíchm¨k_lock_id
 
lock_id
,

13 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
,

14 
lfds711_li°_aso_°©e
 *
Õ£t
,

15 
lfds711_∑l_uöt_t
 
logiˇl_¥o˚ss‹_numbî
,

16 
lfds711_∑l_uöt_t
 
wödows_logiˇl_¥o˚ss‹_group_numbî
,

17 
lfds711_∑l_uöt_t
 
ªsu…
 )

19 
libbíchm¨k_ªsu…


20 *
r
;

22 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

27 
	`LFDS711_PAL_ASSERT
–
Õ£t
 !
NULL
 );

32 
r
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
rs
->
ms
, (
libbíchm¨k_ªsu…
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

34 
r
->
bíchm¨k_id
 = benchmark_id;

35 
r
->
d©a°ru˘uª_id
 = datastructure_id;

36 
r
->
lock_id
 =Üock_id;

37 
r
->
numa_mode
 =Çuma_mode;

38 
r
->
Õ£t
 =Üpset;

39 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE
–
r
->
äs
, 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 );

40 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_LOGICAL_PROCESSOR_NUMBER
–
r
->
äs
, 
logiˇl_¥o˚ss‹_numbî
 );

41 
	`LIBBENCHMARK_TOPOLOGY_NODE_SET_WINDOWS_GROUP_NUMBER
–
r
->
äs
, 
wödows_logiˇl_¥o˚ss‹_group_numbî
 );

42 
r
->
ªsu…
 =Ñesult;

44 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
r
->
baue
,Ñ );

46 
	`lfds711_båì_au_ö£π
–&
rs
->
ªsu…s_åì
, &
r
->
baue
, 
NULL
 );

49 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_threadset/libbenchmark_threadset_cleanup.c

2 
	~"libbíchm¨k_thªad£t_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libbíchm¨k_thªad£t_˛ónup
–
libbíchm¨k_thªad£t_°©e
 *
±s
 )

13 
	`LFDS711_PAL_ASSERT
–
±s
 !
NULL
 );

18 
	}
}

20 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libbenchmark/src/libbenchmark_threadset/libbenchmark_threadset_init.c

2 
	~"libbíchm¨k_thªad£t_öã∫Æ.h
"

9 
libbíchm¨k_thªad£t_öô
–
libbíchm¨k_thªad£t_°©e
 *
t£ts
,

10 
libbíchm¨k_t›ﬁogy_°©e
 *
ts
,

11 
lfds711_li°_aso_°©e
 *
logiˇl_¥o˚ss‹_£t
,

12 
libsh¨ed_mem‹y_°©e
 *
ms
,

13 
	$libsh¨ed_∑l_thªad_ªtu∫_t
 (
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 *
thªad_fun˘i⁄
)–*
thªad_u£r_°©e
 ),

14 *
u£rs_thªad£t_°©e
 )

16 
lfds711_li°_aso_ñemít


17 *
œs€
 = 
NULL
;

19 
lfds711_li°_asu_ñemít


20 *
œsue
 = 
NULL
;

22 
libbíchm¨k_thªad£t_≥r_numa_°©e


23 *
≤s
 = 
NULL
;

25 
libbíchm¨k_thªad£t_≥r_thªad_°©e


26 *
±s
;

28 
libbíchm¨k_t›ﬁogy_node_°©e


29 *
äs
,

30 *
äs_numa_node
;

32 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

33 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

34 
	`LFDS711_PAL_ASSERT
–
logiˇl_¥o˚ss‹_£t
 !
NULL
 );

35 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

36 
	`LFDS711_PAL_ASSERT
–
thªad_fun˘i⁄
 !
NULL
 );

39 
t£ts
->
thªad£t_°¨t_Êag
 = 
LOWERED
;

41 
t£ts
->
thªad_fun˘i⁄
 =Åhread_function;

42 
t£ts
->
u£rs_thªad£t_°©e
 = users_threadset_state;

43 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
t£ts
->
li°_of_≥r_numa_°©es
, 
NULL
 );

44 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
t£ts
->
li°_of_≥r_thªad_°©es
, 
NULL
 );

51  
	`LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
(*
logiˇl_¥o˚ss‹_£t
,
œs€
) )

53 
äs
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€
 );

57 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
, 
äs
, &
äs_numa_node
 );

59 if–
äs_numa_node
 !
NULL
 )

61 
œsue
 = 
NULL
;

63  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_numa_°©es
,
œsue
) )

65 
≤s
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

67 if–
≤s
->
numa_node_id
 =
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
äs_numa_node
) )

71 if–
œsue
 =
NULL
 )

73 
≤s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
(*
äs_numa_node
), (
libbíchm¨k_thªad£t_≥r_numa_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

75 
≤s
->
numa_node_id
 = 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_NUMA_ID
–*
äs_numa_node
 );

76 
≤s
->
u£rs_≥r_numa_°©e
 = 
NULL
;

77 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
≤s
->
œsue
,Öns );

78 
	`lfds711_li°_asu_ö£π_©_°¨t
–&
t£ts
->
li°_of_≥r_numa_°©es
, &
≤s
->
œsue
 );

83 if–
≤s
 =
NULL
 )

84 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_thªad£t_≥r_thªad_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

86 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
ms
, 
≤s
->
numa_node_id
, (
libbíchm¨k_thªad£t_≥r_thªad_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

88 
±s
->
thªad_ªady_Êag
 = 
LOWERED
;

89 
±s
->
thªad£t_°¨t_Êag
 = &
t£ts
->threadset_start_flag;

90 
±s
->
äs_Õ
 = 
äs
;

91 
±s
->
numa_node_°©e
 = 
≤s
;

92 
±s
->
thªad£t_°©e
 = 
t£ts
;

93 
±s
->
u£rs_≥r_thªad_°©e
 = 
NULL
;

95 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
±s
->
œsue
,Öts );

96 
	`lfds711_li°_asu_ö£π_©_°¨t
–&
t£ts
->
li°_of_≥r_thªad_°©es
, &
±s
->
œsue
 );

99 
LFDS711_MISC_BARRIER_STORE
;

101 
	`lfds711_misc_f‹˚_°‹e
();

104 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_threadset/libbenchmark_threadset_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libbenchmark/src/libbenchmark_threadset/libbenchmark_threadset_operations.c

2 
	~"libbíchm¨k_thªad£t_öã∫Æ.h
"

9 
	$libbíchm¨k_thªad£t_run
–
libbíchm¨k_thªad£t_°©e
 *
t£ts
 )

11 
lfds711_li°_asu_ñemít


12 *
œsue
 = 
NULL
;

14 
libbíchm¨k_thªad£t_≥r_thªad_°©e


15 *
±s
;

17 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

23  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

25 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

27 
±s
->
±i
.
logiˇl_¥o˚ss‹_numbî
 = 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
–*±s->
äs_Õ
 );

28 
±s
->
±i
.
wödows_¥o˚ss‹_group_numbî
 = 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_WINDOWS_GROUP_NUMBER
–*±s->
äs_Õ
 );

29 
±s
->
±i
.
thªad_fun˘i⁄
 = 
t£ts
->thread_function;

30 
±s
->
±i
.
thªad_¨gumít
 =Öts;

32 
	`libsh¨ed_∑l_thªad_°¨t
–&
±s
->
thªad_h™dÀ
, &±s->
±i
 );

35 
t£ts
->
thªad£t_°¨t_Êag
 = 
RAISED
;

37 
	`LFDS711_PAL_ASSERT
–
t£ts
 !
NULL
 );

39  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
t£ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

41 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

42 
	`libsh¨ed_∑l_thªad_waô
–
±s
->
thªad_h™dÀ
 );

46 
	}
}

53 
	$libbíchm¨k_thªad£t_thªad_ªady_™d_waô
–
libbíchm¨k_thªad£t_≥r_thªad_°©e
 *
±s
 )

55 
	`LFDS711_PAL_ASSERT
–
±s
 !
NULL
 );

57 
±s
->
thªad_ªady_Êag
 = 
RAISED
;

59 
LFDS711_MISC_BARRIER_FULL
;

61  *
±s
->
thªad£t_°¨t_Êag
 =
LOWERED
 )

62 
LFDS711_MISC_BARRIER_LOAD
;

65 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_cleanup.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_˛ónup
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
 )

11 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

13 
	`lfds711_båì_au_˛ónup
–&
ts
->
t›ﬁogy_åì
, 
NULL
 );

15 
	`lfds711_båì_au_˛ónup
–&
ts
->
Õ_¥ötög_off£t_lookup_åì
, 
NULL
 );

18 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_compare.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_com∑ª_Õ_¥ötög_off£ts_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

12 
¸
;

14 
libbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t


15 *
épo_⁄e
,

16 *
épo_two
;

18 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

19 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

21 
épo_⁄e
 = (
libbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t
 *Ë
√w_key
;

22 
épo_two
 = (
libbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t
 *Ë
exi°ög_key
;

24 
¸
 = 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
–&
épo_⁄e
->
äs
, &
épo_two
->tns );

26  
¸
;

27 
	}
}

34 
	$libbíchm¨k_t›ﬁogy_com∑ª_node_agaö°_Õ_¥ötög_off£t_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

37 
¸
;

39 
libbíchm¨k_t›ﬁogy_node_°©e


40 *
äs
;

42 
libbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t


43 *
épo
;

45 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

46 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

48 
äs
 = (
libbíchm¨k_t›ﬁogy_node_°©e
 *Ë
√w_key
;

49 
épo
 = (
libbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t
 *Ë
exi°ög_key
;

51 
¸
 = 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
–
äs
, &
épo
->tns );

53  
¸
;

54 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_init.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_öô
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
 )

12 
off£t
 = 0,

13 
rv
;

15 
lfds711_∑l_uöt_t


16 
Õ_cou¡
;

18 
lfds711_båì_au_ñemít


19 *
baue
;

21 
libbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t


22 *
épo
;

24 
libbíchm¨k_t›ﬁogy_node_°©e


25 *
äs
;

27 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

28 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

30 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ts
->
t›ﬁogy_åì
, 
libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

32 
rv
 = 
	`libbíchm¨k_p‹tög_ab°ø˘i⁄_œyî_p›uœã_t›ﬁogy
–
ts
, 
ms
 );

34 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄
–&
ts
->
t›ﬁogy_åì
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
 );

35 
Õ_cou¡
 = 
	`cou¡_of_logiˇl_¥o˚ss‹s_bñow_node
–
baue
 );

36 
ts
->
löe_width
 = (Ë–
Õ_cou¡
 * 3 +Üp_count - 1 );

39 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ts
->
Õ_¥ötög_off£t_lookup_åì
, 
libbíchm¨k_t›ﬁogy_com∑ª_Õ_¥ötög_off£ts_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

41 
baue
 = 
NULL
;

43  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

45 
äs
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

47 if–
äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

49 
épo
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

51 
épo
->
äs
 = *tns;

52 
épo
->
off£t
 = offset;

54 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
épo
->
baue
,Ålpo );

55 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
épo
->
baue
,Ålpo );

57 
	`lfds711_båì_au_ö£π
–&
ts
->
Õ_¥ötög_off£t_lookup_åì
, &
épo
->
baue
, 
NULL
 );

59 
off£t
 += 4;

63  
rv
;

64 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_insert.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_ö£π
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 )

11 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

14 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
äs
->
baue
,Åns );

15 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
äs
->
baue
,Åns );

16 
	`lfds711_båì_au_ö£π
–&
ts
->
t›ﬁogy_åì
, &
äs
->
baue
, 
NULL
 );

19 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

5 
	slibbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t


8 
	moff£t
;

10 
lfds711_båì_au_ñemít


11 
	mbaue
;

13 
libbíchm¨k_t›ﬁogy_node_°©e


14 
	mäs
;

18 
lfds711_∑l_uöt_t
 
cou¡_of_logiˇl_¥o˚ss‹s_bñow_node
–
lfds711_båì_au_ñemít
 *
baue
 );

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_iterate.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_ôî©e_öô
–
libbíchm¨k_t›ﬁogy_ôî©e_°©e
 *
tis
, 
libbíchm¨k_t›ﬁogy_node_ty≥
 
ty≥
 )

11 
	`LFDS711_PAL_ASSERT
–
tis
 !
NULL
 );

14 
tis
->
baue
 = 
NULL
;

15 
tis
->
ty≥
 =Åype;

18 
	}
}

25 
	$libbíchm¨k_t›ﬁogy_ôî©e
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libbíchm¨k_t›ﬁogy_ôî©e_°©e
 *
tis
, 
libbíchm¨k_t›ﬁogy_node_°©e
 **
äs
 )

28 
rv
 = 1;

30 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
tis
 !
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

34  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
tis
->
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

36 *
äs
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
tis
->
baue
 );

38 if–(*
äs
)->
ty≥
 =
tis
->type )

42 if–
tis
->
baue
 =
NULL
 )

44 *
äs
 = 
NULL
;

45 
rv
 = 0;

48  
rv
;

49 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_lpsets.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

5 
libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_⁄e_Õ_≥r_lowe°_Àvñ_ˇche
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 );

6 
libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_⁄e_to_Æl_Õs_≥r_lowe°_Àvñ_ˇche
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 );

7 
libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_Æl_Õs_≥r_lowe°_Àvñ_ˇche
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 );

8 
libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_Æl_Õs
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 );

15 
	$libbíchm¨k_t›ﬁogy_gíî©e_dedu∂iˇãd_logiˇl_¥o˚ss‹_£ts
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 )

18 
¸
;

20 
lfds711_li°_asu_ñemít


21 *
loˇl_œsue
 = 
NULL
,

22 *
œsue
;

24 
lfds711_li°_asu_°©e


25 
throw_Õ_£ts
,

26 
loˇl_Õ_£ts
;

28 
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t


29 *
loˇl_Õs
,

30 *
Õs
,

31 *
√w_Õs
;

33 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

34 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

35 
	`LFDS711_PAL_ASSERT
–
Õ_£ts
 !
NULL
 );

37 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
throw_Õ_£ts
, 
NULL
 );

38 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
loˇl_Õ_£ts
, 
NULL
 );

41 
	`libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_⁄e_Õ_≥r_lowe°_Àvñ_ˇche
–
ts
, 
ms
, &
loˇl_Õ_£ts
 );

42 
	`libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_Æl_Õs_≥r_lowe°_Àvñ_ˇche
–
ts
, 
ms
, &
loˇl_Õ_£ts
 );

43 
	`libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_⁄e_to_Æl_Õs_≥r_lowe°_Àvñ_ˇche
–
ts
, 
ms
, &
loˇl_Õ_£ts
 );

44 
	`libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_Æl_Õs
–
ts
, 
ms
, &
throw_Õ_£ts
 );

72 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
Õ_£ts
, 
NULL
 );

74  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
loˇl_Õ_£ts
, 
loˇl_œsue
) )

76 
loˇl_Õs
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
loˇl_œsue
 );

78 
¸
 = !0;

79 
œsue
 = 
NULL
;

82  
¸
 !0 
™d
 
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
Õ_£ts
, 
œsue
) )

84 
Õs
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

85 
¸
 = 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_Õ£ts_fun˘i⁄
–&
loˇl_Õs
->
logiˇl_¥o˚ss‹s
, &
Õs
->logical_processors );

89 if–
¸
 != 0 )

91 
√w_Õs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

92 
√w_Õs
->
logiˇl_¥o˚ss‹s
 = 
loˇl_Õs
->logical_processors;

93 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
√w_Õs
->
œsue
,Çew_lps );

94 
	`lfds711_li°_asu_ö£π_©_íd
–
Õ_£ts
, &
√w_Õs
->
œsue
 );

98 
	`lfds711_li°_asu_˛ónup
–&
loˇl_Õ_£ts
, 
NULL
 );

101 
	}
}

108 
	$libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_⁄e_Õ_≥r_lowe°_Àvñ_ˇche
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 )

110 
lfds711_∑l_uöt_t


111 
lo›
,

112 
lowe°_Àvñ_ty≥_cou¡
 = 0,

113 
Õs_cou¡
;

115 
lfds711_båì_au_ñemít


116 *
be
 = 
NULL
,

117 *
be_Œc
 = 
NULL
,

118 *
be_Õ
 = 
NULL
;

120 
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t


121 *
Õs
;

123 
libbíchm¨k_t›ﬁogy_node_°©e


124 *
√w_äs
,

125 *
node
 = 
NULL
,

126 *
node_Œc
 = 
NULL
,

127 *
node_Õ
 = 
NULL
;

129 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

130 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

131 
	`LFDS711_PAL_ASSERT
–
Õ_£ts
 !
NULL
 );

147  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be_Œc
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

149 
node_Œc
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be_Œc
 );

151 if–
node_Œc
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_SYSTEM
 
‹
Çode_Œc->ty≥ =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
 o∏node_Œc->ty≥ =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
 )

156  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

158 
node
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be
 );

160 if–0 =
	`libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
(
node
, 
node_Œc
) )

161 
lowe°_Àvñ_ty≥_cou¡
++;

165  
lo›
 = 0 ;Üo› < 
lowe°_Àvñ_ty≥_cou¡
 ;Üoop++ )

171 
Õs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

172 
	`lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
Õs
->
logiˇl_¥o˚ss‹s
, 
libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
, 
LFDS711_LIST_ASO_INSERT_RESULT_FAILURE_EXISTING_KEY
, 
NULL
 );

173 
Õs_cou¡
 = 0;

174 
be
 = 
NULL
;

176  
Õs_cou¡
 < 
lo›
+1 
™d
 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

178 
node
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be
 );

181 if–0 =
	`libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
(
node
, 
node_Œc
) )

184 
be_Õ
 = 
be
;

186  
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
(&
be_Õ
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

188 
node_Õ
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be_Õ
 );

190 if–
node_Õ
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

195 
√w_äs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_node_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

196 *
√w_äs
 = *
node_Õ
;

197 
	`LFDS711_LIST_ASO_SET_KEY_IN_ELEMENT
–
√w_äs
->
œs€
,Çew_tns );

198 
	`LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–
√w_äs
->
œs€
,Çew_tns );

199 
	`lfds711_li°_aso_ö£π
–&
Õs
->
logiˇl_¥o˚ss‹s
, &
√w_äs
->
œs€
, 
NULL
 );

200 
Õs_cou¡
++;

204 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
Õs
->
œsue
,Üps );

205 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
Õs
->
œsue
,Üps );

206 
	`lfds711_li°_asu_ö£π_©_íd
–
Õ_£ts
, &
Õs
->
œsue
 );

210 
	}
}

217 
	$libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_⁄e_to_Æl_Õs_≥r_lowe°_Àvñ_ˇche
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 )

219 
lfds711_∑l_uöt_t


220 
lo›
,

221 
lowe°_Àvñ_ty≥_cou¡
 = 0,

222 
Õ_≥r_Œc
 = 0,

223 
Õ_cou¡
,

224 
Õs_cou¡
;

226 
lfds711_båì_au_ñemít


227 *
be
 = 
NULL
,

228 *
be_Œc
 = 
NULL
,

229 *
be_Õ
 = 
NULL
;

231 
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t


232 *
Õs
;

234 
libbíchm¨k_t›ﬁogy_node_°©e


235 *
√w_Õ
,

236 *
node
 = 
NULL
,

237 *
node_Œc
 = 
NULL
,

238 *
node_Õ
 = 
NULL
;

240 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

241 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

242 
	`LFDS711_PAL_ASSERT
–
Õ_£ts
 !
NULL
 );

259  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be_Œc
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

261 
node_Œc
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be_Œc
 );

263 if–
node_Œc
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_SYSTEM
 
‹
Çode_Œc->ty≥ =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
 o∏node_Œc->ty≥ =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
 )

272 
be_Õ
 = 
be_Œc
;

274  
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
(&
be_Õ
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

276 
node_Õ
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be_Õ
 );

278 if–
node_Õ
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

279 
Õ_≥r_Œc
++;

283  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

285 
node
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be
 );

287 if–0 =
	`libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
(
node
, 
node_Œc
) )

288 
lowe°_Àvñ_ty≥_cou¡
++;

292  
lo›
 = 0 ;Üo› < 
Õ_≥r_Œc
 ;Üoop++ )

298 
Õs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

299 
	`lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
Õs
->
logiˇl_¥o˚ss‹s
, 
libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
, 
LFDS711_LIST_ASO_INSERT_RESULT_FAILURE_EXISTING_KEY
, 
NULL
 );

300 
Õs_cou¡
 = 0;

302 
be
 = 
NULL
;

304  
Õs_cou¡
 < 
lowe°_Àvñ_ty≥_cou¡
*(
lo›
+1Ë
™d
 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

306 
node
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be
 );

309 if–0 =
	`libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
(
node
, 
node_Œc
) )

312 
be_Õ
 = 
be
;

313 
Õ_cou¡
 = 0;

315  
Õ_cou¡
 < 
lo›
+1 
™d
 
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
(&
be_Õ
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

317 
node_Õ
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be_Õ
 );

319 if–
node_Õ
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

321 
√w_Õ
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_node_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

322 *
√w_Õ
 = *
node_Õ
;

323 
	`LFDS711_LIST_ASO_SET_KEY_IN_ELEMENT
–
√w_Õ
->
œs€
,Çew_lp );

324 
	`LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–
√w_Õ
->
œs€
,Çew_lp );

325 
	`lfds711_li°_aso_ö£π
–&
Õs
->
logiˇl_¥o˚ss‹s
, &
√w_Õ
->
œs€
, 
NULL
 );

326 
Õ_cou¡
++;

327 
Õs_cou¡
++;

333 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
Õs
->
œsue
,Üps );

334 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
Õs
->
œsue
,Üps );

335 
	`lfds711_li°_asu_ö£π_©_íd
–
Õ_£ts
, &
Õs
->
œsue
 );

339 
	}
}

346 
	$libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_Æl_Õs_≥r_lowe°_Àvñ_ˇche
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 )

348 
lfds711_∑l_uöt_t


349 
lo›
,

350 
lowe°_Àvñ_ty≥_cou¡
 = 0,

351 
Õ_≥r_Œc
 = 0,

352 
Õs_cou¡
;

354 
lfds711_båì_au_ñemít


355 *
be
 = 
NULL
,

356 *
be_Œc
 = 
NULL
,

357 *
be_Õ
 = 
NULL
;

359 
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t


360 *
Õs
;

362 
libbíchm¨k_t›ﬁogy_node_°©e


363 *
√w_Õ
,

364 *
node
 = 
NULL
,

365 *
node_Œc
 = 
NULL
,

366 *
node_Õ
 = 
NULL
;

368 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

369 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

370 
	`LFDS711_PAL_ASSERT
–
Õ_£ts
 !
NULL
 );

386  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be_Œc
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

388 
node_Œc
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be_Œc
 );

390 if–
node_Œc
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_SYSTEM
 
‹
Çode_Œc->ty≥ =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
 o∏node_Œc->ty≥ =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
 )

399 
be_Õ
 = 
be_Œc
;

401  
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
(&
be_Õ
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

403 
node_Õ
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be_Õ
 );

405 if–
node_Õ
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

406 
Õ_≥r_Œc
++;

410  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

412 
node
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be
 );

414 if–0 =
	`libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
(
node
, 
node_Œc
) )

415 
lowe°_Àvñ_ty≥_cou¡
++;

419  
lo›
 = 0 ;Üo› < 
lowe°_Àvñ_ty≥_cou¡
 ;Üoop++ )

425 
Õs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

426 
	`lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
Õs
->
logiˇl_¥o˚ss‹s
, 
libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
, 
LFDS711_LIST_ASO_INSERT_RESULT_FAILURE_EXISTING_KEY
, 
NULL
 );

427 
Õs_cou¡
 = 0;

428 
be
 = 
NULL
;

430  
Õs_cou¡
 < 
Õ_≥r_Œc
*(
lo›
+1Ë
™d
 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

432 
node
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be
 );

435 if–0 =
	`libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
(
node
, 
node_Œc
) )

438 
be_Õ
 = 
be
;

440  
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
(&
be_Õ
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

442 
node_Õ
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be_Õ
 );

444 if–
node_Õ
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

447 
√w_Õ
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_node_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

448 *
√w_Õ
 = *
node_Õ
;

449 
	`LFDS711_LIST_ASO_SET_KEY_IN_ELEMENT
–
√w_Õ
->
œs€
,Çew_lp );

450 
	`LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–
√w_Õ
->
œs€
,Çew_lp );

451 
	`lfds711_li°_aso_ö£π
–&
Õs
->
logiˇl_¥o˚ss‹s
, &
√w_Õ
->
œs€
, 
NULL
 );

452 
Õs_cou¡
++;

455 if–
node_Õ
->
ty≥
 =
node_Œc
->type )

461 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
Õs
->
œsue
,Üps );

462 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
Õs
->
œsue
,Üps );

463 
	`lfds711_li°_asu_ö£π_©_íd
–
Õ_£ts
, &
Õs
->
œsue
 );

467 
	}
}

474 
	$libbíchm¨k_t›ﬁogy_öã∫Æ_gíî©e_thªad_£t_Æl_Õs
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
Õ_£ts
 )

476 
lfds711_båì_au_ñemít


477 *
be
 = 
NULL
;

479 
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t


480 *
Õs
;

482 
libbíchm¨k_t›ﬁogy_node_°©e


483 *
√w_Õ
,

484 *
node
;

486 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

487 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

488 
	`LFDS711_PAL_ASSERT
–
Õ_£ts
 !
NULL
 );

490 
Õs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_logiˇl_¥o˚ss‹_£t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

491 
	`lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
Õs
->
logiˇl_¥o˚ss‹s
, 
libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
, 
LFDS711_LIST_ASO_INSERT_RESULT_FAILURE_EXISTING_KEY
, 
NULL
 );

494  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
be
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

496 
node
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
be
 );

498 if–
node
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

501 
√w_Õ
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_node_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

502 *
√w_Õ
 = *
node
;

503 
	`LFDS711_LIST_ASO_SET_KEY_IN_ELEMENT
–
√w_Õ
->
œs€
,Çew_lp );

504 
	`LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–
√w_Õ
->
œs€
,Çew_lp );

505 
	`lfds711_li°_aso_ö£π
–&
Õs
->
logiˇl_¥o˚ss‹s
, &
√w_Õ
->
œs€
, 
NULL
 );

509 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
Õs
->
œsue
,Üps );

510 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
Õs
->
œsue
,Üps );

511 
	`lfds711_li°_asu_ö£π_©_íd
–
Õ_£ts
, &
Õs
->
œsue
 );

514 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_numa.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_gíî©e_numa_modes_li°
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libbíchm¨k_t›ﬁogy_numa_mode
 
numa_mode
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_asu_°©e
 *
numa_modes_li°
 )

11 
lfds711_∑l_uöt_t


12 
numa_node_cou¡
;

14 
libbíchm¨k_t›ﬁogy_numa_node


15 *
än
;

17 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

18 
	`LFDS711_PAL_ASSERT
–
numa_mode
 =
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
 
‹
Çuma_modê=
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
 );

19 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

20 
	`LFDS711_PAL_ASSERT
–
numa_modes_li°
 !
NULL
 );

22 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
numa_modes_li°
, 
NULL
 );

24  
numa_mode
 )

26 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
:

27 
än
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_numa_node
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

28 
än
->
mode
 = 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_SMP
;

29 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
än
->
œsue
,Ånn );

30 
	`lfds711_li°_asu_ö£π_©_°¨t
–
numa_modes_li°
, &
än
->
œsue
 );

33 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
:

34 
	`libbíchm¨k_t›ﬁogy_quîy
–
ts
, 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMBER_OF_NODE_TYPE
, (*Ë(
lfds711_∑l_uöt_t
Ë
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
, &
numa_node_cou¡
 );

36 if–
numa_node_cou¡
 == 1 )

38 
än
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_numa_node
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

39 
än
->
mode
 = 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
;

40 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
än
->
œsue
,Ånn );

41 
	`lfds711_li°_asu_ö£π_©_°¨t
–
numa_modes_li°
, &
än
->
œsue
 );

44 if–
numa_node_cou¡
 >= 2 )

46 
än
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_numa_node
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

47 
än
->
mode
 = 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA
;

48 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
än
->
œsue
,Ånn );

49 
	`lfds711_li°_asu_ö£π_©_°¨t
–
numa_modes_li°
, &
än
->
œsue
 );

51 
än
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libbíchm¨k_t›ﬁogy_numa_node
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

52 
än
->
mode
 = 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
;

53 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
än
->
œsue
,Ånn );

54 
	`lfds711_li°_asu_ö£π_©_°¨t
–
numa_modes_li°
, &
än
->
œsue
 );

58 
LIBBENCHMARK_TOPOLOGY_NUMA_MODE_NUMA_BUT_NOT_USED
:

64 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_query.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_quîy
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libbíchm¨k_t›ﬁogy_quîy
 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 )

11 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

17  
quîy_ty≥
 )

19 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMBER_OF_NODE_TYPE
:

21 
libbíchm¨k_t›ﬁogy_node_ty≥


22 
ty≥
;

24 
lfds711_∑l_uöt_t


25 *
cou¡
;

27 
lfds711_båì_au_ñemít


28 *
baue
 = 
NULL
;

30 
libbíchm¨k_t›ﬁogy_node_°©e


31 *
äs
;

34 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

36 
ty≥
 = (
libbíchm¨k_t›ﬁogy_node_ty≥
Ë(
lfds711_∑l_uöt_t
Ë
quîy_öput
;

37 
cou¡
 = (
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
;

39 *
cou¡
 = 0;

41  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

43 
äs
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

45 if–
äs
->
ty≥
 ==Åype )

46 (*
cou¡
)++;

51 
LIBBENCHMARK_TOPOLOGY_QUERY_GET_NUMA_NODE_FOR_LOGICAL_PROCESSOR
:

53 
lfds711_båì_au_ñemít


54 *
baue
;

56 
libbíchm¨k_t›ﬁogy_node_°©e


57 *
äs_Õ
,

58 *
äs
 = 
NULL
;

60 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

63 *(
libbíchm¨k_t›ﬁogy_node_°©e
 **Ë
quîy_ouçut
 = 
NULL
;

65 
äs_Õ
 = (
libbíchm¨k_t›ﬁogy_node_°©e
 *Ë
quîy_öput
;

69 
	`lfds711_båì_au_gë_by_key
–&
ts
->
t›ﬁogy_åì
, 
NULL
, 
äs_Õ
, &
baue
 );

71  
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
(&
baue
,
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

73 
äs
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

75 if–
äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
 )

79 if–
äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
 )

80 *(
libbíchm¨k_t›ﬁogy_node_°©e
 **Ë
quîy_ouçut
 = 
äs
;

86 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_string.c

2 
	~"libbíchm¨k_t›ﬁogy_öã∫Æ.h
"

5 
	#NUMBER_KEY_LINES
 8

	)

8 
	slöe


11 *
	m°rög
;

13 
libbíchm¨k_t›ﬁogy_node_ty≥


14 
	mty≥
;

16 
lfds711_li°_asu_ñemít


17 
	mœsue
;

19 
libbíchm¨k_t›ﬁogy_node_exãnded_öfo


20 
	mexãnded_node_öfo
;

24 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

25 
°rˇt_•a˚s
–*
°rög
, 
lfds711_∑l_uöt_t
 
numbî_width
 );

32 *
	$libbíchm¨k_t›ﬁogy_gíî©e_°rög
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
libbíchm¨k_t›ﬁogy_°rög_f‹m©
 
f‹m©
 )

35 
ˇche_ty≥_íum_to_°rög_lookup
[
LIBBENCHMARK_TOPOLOGY_NODE_CACHE_TYPE_COUNT
] =

39 *c⁄° 
key_°rögs
[
NUMBER_KEY_LINES
] =

50 *c⁄° 
em±y_key_°rög
 = " ";

53 *
t›ﬁogy_°rög
;

56 
föÆ_Àngth
 = 0,

57 
hÆf_•a˚_width
,

58 
lo›
,

59 
•a˚_width
;

61 
lfds711_∑l_uöt_t


62 
key_löe
,

63 
Õ_cou¡
,

64 
numbî_t›ﬁogy_löes
,

65 
numbî_key_™d_t›ﬁogy_löes
;

67 
lfds711_båì_au_ñemít


68 *
baue
;

70 
löe


71 *
löe
;

73 
lfds711_li°_asu_ñemít


74 *
œsue
 = 
NULL
;

76 
lfds711_li°_asu_°©e


77 
löes
;

79 
libbíchm¨k_t›ﬁogy_node_°©e


80 *
äs
;

82 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

83 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

86 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
löes
, 
NULL
 );

88 
baue
 = 
NULL
;

90  
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
ts
->
t›ﬁogy_åì
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_LARGEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

92 
äs
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

99 if–0 =
	`lfds711_li°_asu_gë_by_key
(&
löes
, 
key_com∑ª_fun˘i⁄
, 
äs
, &
œsue
) )

101 
löe
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (löe), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
löe
->
ty≥
 = 
äs
->type;

103 
löe
->
exãnded_node_öfo
 = 
äs
->extended_node_info;

105 
löe
->
°rög
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, 
ts
->
löe_width
+2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

106 *
löe
->
°rög
 = '\0';

107 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
löe
->
œsue
,Üine );

108 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
löe
->
œsue
,Üine );

109 
	`lfds711_li°_asu_ö£π_©_íd
–&
löes
, &
löe
->
œsue
 );

112 
löe
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

114  
äs
->
ty≥
 )

116 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
:

118 
	`libsh¨ed_™si_°rˇt_numbî_wôh_Àadög_zîos
–
löe
->
°rög
, 
	`LIBBENCHMARK_TOPOLOGY_NODE_GET_LOGICAL_PROCESSOR_NUMBER
(*
äs
), 3 );

121 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
:

123 
Õ_cou¡
 = 
	`cou¡_of_logiˇl_¥o˚ss‹s_bñow_node
–
baue
 );

124 
•a˚_width
 = (Ë–
Õ_cou¡
 * 3 +Üp_count - 3 );

125 
hÆf_•a˚_width
 = 
•a˚_width
 / 2;

127 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

128 
	`libsh¨ed_™si_°rˇt
–
löe
->
°rög
, "L" );

129 
	`libsh¨ed_™si_°rˇt_numbî
–
löe
->
°rög
, 
äs
->
exãnded_node_öfo
.
ˇche
.
Àvñ
 );

130 
	`libsh¨ed_™si_°rˇt_ch¨
–
löe
->
°rög
, 
ˇche_ty≥_íum_to_°rög_lookup
[
äs
->
exãnded_node_öfo
.
ˇche
.
ty≥
] );

131 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

135 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_PHYSICAL_PROCESSOR
:

136 
Õ_cou¡
 = 
	`cou¡_of_logiˇl_¥o˚ss‹s_bñow_node
–
baue
 );

137 
•a˚_width
 = (Ë–
Õ_cou¡
 * 3 +Üp_count - 1 );

138 
hÆf_•a˚_width
 = 
•a˚_width
 / 2;

139 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

140 
	`libsh¨ed_™si_°rˇt
–
löe
->
°rög
, "P" );

141 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

144 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_SOCKET
:

145 
Õ_cou¡
 = 
	`cou¡_of_logiˇl_¥o˚ss‹s_bñow_node
–
baue
 );

146 
•a˚_width
 = (Ë–
Õ_cou¡
 * 3 +Üp_count - 1 );

147 
hÆf_•a˚_width
 = 
•a˚_width
 / 2;

148 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

149 
	`libsh¨ed_™si_°rˇt
–
löe
->
°rög
, "S" );

150 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

153 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_NUMA
:

154 
Õ_cou¡
 = 
	`cou¡_of_logiˇl_¥o˚ss‹s_bñow_node
–
baue
 );

155 
•a˚_width
 = (Ë–
Õ_cou¡
 * 3 +Üp_count - 1 );

156 
hÆf_•a˚_width
 = 
•a˚_width
 / 2;

157 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

158 
	`libsh¨ed_™si_°rˇt
–
löe
->
°rög
, "N" );

159 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

162 
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_SYSTEM
:

168 
Õ_cou¡
 = 
	`cou¡_of_logiˇl_¥o˚ss‹s_bñow_node
–
baue
 );

169 
•a˚_width
 = (Ë–
Õ_cou¡
 * 3 +Üp_count - 1 );

170 
hÆf_•a˚_width
 = 
•a˚_width
 / 2;

171 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

172 
	`libsh¨ed_™si_°rˇt
–
löe
->
°rög
, "R" );

173 
	`°rˇt_•a˚s
–
löe
->
°rög
, 
hÆf_•a˚_width
 );

177 
	`libsh¨ed_™si_°rˇt
–
löe
->
°rög
, " " );

190 
	`lfds711_li°_asu_quîy
–&
löes
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_t›ﬁogy_löes
 );

192 if–
numbî_t›ﬁogy_löes
 < 
NUMBER_KEY_LINES
 )

193 
numbî_key_™d_t›ﬁogy_löes
 = 
NUMBER_KEY_LINES
;

195 
numbî_key_™d_t›ﬁogy_löes
 = 
numbî_t›ﬁogy_löes
;

198 
föÆ_Àngth
 = (Ë–(
ts
->
löe_width
 + 39Ë* 
numbî_key_™d_t›ﬁogy_löes
 );

201 
t›ﬁogy_°rög
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, 
föÆ_Àngth
+1, 1 );

202 *
t›ﬁogy_°rög
 = '\0';

206 
key_löe
 = 0;

208 
œsue
 = 
	`LFDS711_LIST_ASU_GET_START
–
löes
 );

210  
œsue
 !
NULL
 
‹
 
key_löe
 < 
NUMBER_KEY_LINES
 )

213 if–
œsue
 =
NULL
 )

214  
lo›
 = 0 ;Üo› < 
ts
->
löe_width
+1 ;Üoop++ )

215 
	`libsh¨ed_™si_°rˇt
–
t›ﬁogy_°rög
, " " );

217 if–
œsue
 !
NULL
 )

219 
löe
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

220 
	`libsh¨ed_™si_°rˇt
–
t›ﬁogy_°rög
, 
löe
->
°rög
 );

221 
œsue
 = 
	`LFDS711_LIST_ASU_GET_NEXT
( *lasue );

225 if–
key_löe
 =
NUMBER_KEY_LINES
 )

226 
	`libsh¨ed_™si_°rˇt
–
t›ﬁogy_°rög
, 
em±y_key_°rög
 );

228 if–
key_löe
 < 
NUMBER_KEY_LINES
 )

229 
	`libsh¨ed_™si_°rˇt
–
t›ﬁogy_°rög
, 
key_°rögs
[
key_löe
++] );

231  
f‹m©
 )

233 
LIBBENCHMARK_TOPOLOGY_STRING_FORMAT_STDOUT
:

234 
	`libsh¨ed_™si_°rˇt
–
t›ﬁogy_°rög
, "\n" );

237 
LIBBENCHMARK_TOPOLOGY_STRING_FORMAT_GNUPLOT
:

238 
	`libsh¨ed_™si_°rˇt
–
t›ﬁogy_°rög
, "\\n\\\n" );

243  
t›ﬁogy_°rög
;

244 
	}
}

251 *
	$libbíchm¨k_t›ﬁogy_gíî©e_Õ£t_°rög
–
libbíchm¨k_t›ﬁogy_°©e
 *
ts
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_li°_aso_°©e
 *
Õ£t
 )

254 *
Õ£t_°rög
 = 
NULL
;

257 
lo›
;

259 
libbíchm¨k_t›ﬁogy_Õ_¥ötög_off£t


260 *
épo
;

262 
libbíchm¨k_t›ﬁogy_node_°©e


263 *
äs
;

265 
lfds711_båì_au_ñemít


266 *
baue
;

268 
lfds711_li°_aso_ñemít


269 *
œs€
 = 
NULL
;

271 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

272 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

273 
	`LFDS711_PAL_ASSERT
–
Õ£t
 !
NULL
 );

275 
Õ£t_°rög
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (Ë* (
ts
->
löe_width
+1), () );

277  
lo›
 = 0 ;Üo› < 
ts
->
löe_width
 ;Üoop++ )

278 
Õ£t_°rög
[
lo›
] = ' ';

279 
Õ£t_°rög
[
lo›
] = '\0';

281  
	`LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
(*
Õ£t
,
œs€
) )

283 
äs
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€
 );

285 
	`lfds711_båì_au_gë_by_key
–&
ts
->
Õ_¥ötög_off£t_lookup_åì
, 
libbíchm¨k_t›ﬁogy_com∑ª_node_agaö°_Õ_¥ötög_off£t_fun˘i⁄
, 
äs
, &
baue
 );

286 
épo
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
baue
 );

288 
Õ£t_°rög
[
épo
->
off£t
+1] = '1';

291  
Õ£t_°rög
;

292 
	}
}

299 
lfds711_∑l_uöt_t
 
	$cou¡_of_logiˇl_¥o˚ss‹s_bñow_node
–
lfds711_båì_au_ñemít
 *
baue
 )

301 
lfds711_∑l_uöt_t


302 
Õ_cou¡
 = 0;

304 
libbíchm¨k_t›ﬁogy_node_°©e


305 *
roŸ_node
,

306 *
äs
;

308 
	`LFDS711_PAL_ASSERT
–
baue
 !
NULL
 );

310 
äs
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

311 
roŸ_node
 = 
äs
;

313  
	`lfds711_båì_au_gë_by_ªœtive_posôi⁄
(&
baue
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_SMALLER_ELEMENT_IN_ENTIRE_TREE
) )

315 
äs
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

317 if–
äs
->
ty≥
 =
roŸ_node
->ty≥ 
™d
Åns->ty≥ !
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
 )

320 if–
äs
->
ty≥
 =
roŸ_node
->ty≥ 
™d
Åns->ty≥ =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
ándÅns->
exãnded_node_öfo
.
ˇche
.ty≥ =roŸ_node->exãnded_node_öfo.ˇche.ty≥ándÅns->exãnded_node_öfo.ˇche.
Àvñ
 ==Ñoot_node->extended_node_info.cache.level )

323 if–
äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 )

324 
Õ_cou¡
++;

327  
Õ_cou¡
;

328 
	}
}

335 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

337 
libbíchm¨k_t›ﬁogy_node_°©e


338 *
äs
;

340 
löe


341 *
löe
;

343 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

344 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

346 
äs
 = (
libbíchm¨k_t›ﬁogy_node_°©e
 *Ë
√w_key
;

347 
löe
 = (löê*Ë
exi°ög_key
;

349 if–
äs
->
ty≥
 > 
löe
->type )

352 if–
äs
->
ty≥
 < 
löe
->type )

355 if–
äs
->
ty≥
 =
löe
->type )

356 if–
äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
 
™d
 
löe
->type == LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE )

358 if–
äs
->
exãnded_node_öfo
.
ˇche
.
Àvñ
 > 
löe
->extended_node_info.cache.level )

361 if–
äs
->
exãnded_node_öfo
.
ˇche
.
Àvñ
 < 
löe
->extended_node_info.cache.level )

364 if–
äs
->
exãnded_node_öfo
.
ˇche
.
Àvñ
 =
löe
->extended_node_info.cache.level )

366 if–
äs
->
exãnded_node_öfo
.
ˇche
.
ty≥
 > 
löe
->extended_node_info.cache.type )

369 if–
äs
->
exãnded_node_öfo
.
ˇche
.
ty≥
 < 
löe
->extended_node_info.cache.type )

372 if–
äs
->
exãnded_node_öfo
.
ˇche
.
ty≥
 =
löe
->extended_node_info.cache.type )

378 
	}
}

385 
	$°rˇt_•a˚s
–*
°rög
, 
lfds711_∑l_uöt_t
 
numbî_width
 )

387 
lfds711_∑l_uöt_t


388 
lo›
;

390 
	`LFDS711_PAL_ASSERT
–
°rög
 !
NULL
 );

393  
lo›
 = 0 ;Üo› < 
numbî_width
 ;Üoop++ )

394 
	`libsh¨ed_™si_°rˇt
–
°rög
, " " );

397 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology_node/libbenchmark_topology_node_cleanup.c

2 
	~"libbíchm¨k_t›ﬁogy_node_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_node_˛ónup
–
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
, (*
ñemít_˛ónup_ˇŒback
)(
lfds711_li°_aso_°©e
 *
œsos
, 
lfds711_li°_aso_ñemít
 *
œs€
) )

11 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

14 
	`lfds711_li°_aso_˛ónup
–&
äs
->
logiˇl_¥o˚ss‹_chûdªn
, 
ñemít_˛ónup_ˇŒback
 );

17 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology_node/libbenchmark_topology_node_compare.c

2 
	~"libbíchm¨k_t›ﬁogy_node_öã∫Æ.h
"

5 
	elibbíchm¨k_t›ﬁogy_node_£t_ty≥


7 
	mLIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUBSET
,

8 
	mLIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SET
,

9 
	mLIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUPERSET
,

10 
	mLIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_NOT_A_SET


18 
	$libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

20 
Êag


21 
föished_Êag
 = 
LOWERED
,

22 
nŸ_a_£t_Êag
 = 
LOWERED
;

24 
libbíchm¨k_t›ﬁogy_node_£t_ty≥


25 
°
 = 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_NOT_A_SET
;

28 
¸
 = 0,

29 
nŸ_a_£t_com∑ª
 = 0,

30 
rv
 = 0;

32 
lfds711_∑l_uöt_t


33 
Õs_⁄e_cou¡
 = 0,

34 
Õs_two_cou¡
 = 0,

35 
sh¨ed_cou¡
 = 0;

37 
lfds711_li°_aso_ñemít


38 *
œs€_⁄e
,

39 *
œs€_two
;

41 
libbíchm¨k_t›ﬁogy_node_°©e


42 *
√w_äs
,

43 *
exi°ög_äs
,

44 *
äs_⁄e
,

45 *
äs_two
;

47 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

48 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

63 
√w_äs
 = (
libbíchm¨k_t›ﬁogy_node_°©e
 *Ë
√w_key
;

64 
exi°ög_äs
 = (
libbíchm¨k_t›ﬁogy_node_°©e
 *Ë
exi°ög_key
;

66 if–
√w_äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 
™d
 
exi°ög_äs
->type == LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR )

68 if–
√w_äs
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 =
exi°ög_äs
->extended_node_info.logical_processor.windows_group_number )

70 if–
√w_äs
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 > 
exi°ög_äs
->extended_node_info.logical_processor.number )

71 
¸
 = 1;

73 if–
√w_äs
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 < 
exi°ög_äs
->extended_node_info.logical_processor.number )

74 
¸
 = -1;

77 if–
√w_äs
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 < 
exi°ög_äs
->extended_node_info.logical_processor.windows_group_number )

78 
¸
 = -1;

80 if–
√w_äs
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 > 
exi°ög_äs
->extended_node_info.logical_processor.windows_group_number )

81 
¸
 = 1;

83 if–
¸
 == -1 )

84 
nŸ_a_£t_com∑ª
 = -1;

86 if–
¸
 == 1 )

87 
nŸ_a_£t_com∑ª
 = 1;

89 if–
¸
 == 0 )

90 
sh¨ed_cou¡
 = 1;

92 
Õs_⁄e_cou¡
 = 
Õs_two_cou¡
 = 1;

95 if–
√w_äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 
™d
 
exi°ög_äs
->type != LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR )

97 
äs_⁄e
 = 
√w_äs
;

99 
œs€_two
 = 
	`LFDS711_LIST_ASO_GET_START
–
exi°ög_äs
->
logiˇl_¥o˚ss‹_chûdªn
 );

101  
œs€_two
 !
NULL
 
™d
 
föished_Êag
 =
LOWERED
 )

103 
äs_two
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€_two
 );

105 
¸
 = 0;

107 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 =
äs_two
->extended_node_info.logical_processor.windows_group_number )

109 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 > 
äs_two
->extended_node_info.logical_processor.number )

110 
¸
 = 1;

112 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 < 
äs_two
->extended_node_info.logical_processor.number )

113 
¸
 = -1;

116 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 < 
äs_two
->extended_node_info.logical_processor.windows_group_number )

117 
¸
 = -1;

119 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 > 
äs_two
->extended_node_info.logical_processor.windows_group_number )

120 
¸
 = 1;

122 if–
¸
 == -1 )

124 
föished_Êag
 = 
RAISED
;

125 if–
nŸ_a_£t_Êag
 =
LOWERED
 )

127 
nŸ_a_£t_com∑ª
 = -1;

128 
nŸ_a_£t_Êag
 = 
RAISED
;

132 if–
¸
 == 1 )

134 
œs€_two
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_two );

135 if–
nŸ_a_£t_Êag
 =
LOWERED
 )

137 
nŸ_a_£t_com∑ª
 = 1;

138 
nŸ_a_£t_Êag
 = 
RAISED
;

142 if–
¸
 == 0 )

144 
sh¨ed_cou¡
++;

145 
föished_Êag
 = 
RAISED
;

149 
Õs_⁄e_cou¡
 = 1;

150 
	`lfds711_li°_aso_quîy
–&
exi°ög_äs
->
logiˇl_¥o˚ss‹_chûdªn
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
Õs_two_cou¡
 );

153 if–
√w_äs
->
ty≥
 !
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 
™d
 
exi°ög_äs
->type == LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR )

155 
äs_two
 = 
exi°ög_äs
;

157 
œs€_⁄e
 = 
	`LFDS711_LIST_ASO_GET_START
–
√w_äs
->
logiˇl_¥o˚ss‹_chûdªn
 );

159  
œs€_⁄e
 !
NULL
 
™d
 
föished_Êag
 =
LOWERED
 )

161 
äs_⁄e
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€_⁄e
 );

163 
¸
 = 0;

165 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 =
äs_two
->extended_node_info.logical_processor.windows_group_number )

167 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 > 
äs_two
->extended_node_info.logical_processor.number )

168 
¸
 = 1;

170 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 < 
äs_two
->extended_node_info.logical_processor.number )

171 
¸
 = -1;

174 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 < 
äs_two
->extended_node_info.logical_processor.windows_group_number )

175 
¸
 = -1;

177 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 > 
äs_two
->extended_node_info.logical_processor.windows_group_number )

178 
¸
 = 1;

180 if–
¸
 == -1 )

182 
œs€_⁄e
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_one );

183 if–
nŸ_a_£t_Êag
 =
LOWERED
 )

185 
nŸ_a_£t_com∑ª
 = -1;

186 
nŸ_a_£t_Êag
 = 
RAISED
;

190 if–
¸
 == 1 )

192 
föished_Êag
 = 
RAISED
;

193 if–
nŸ_a_£t_Êag
 =
LOWERED
 )

195 
nŸ_a_£t_com∑ª
 = 1;

196 
nŸ_a_£t_Êag
 = 
RAISED
;

200 if–
¸
 == 0 )

202 
sh¨ed_cou¡
++;

203 
föished_Êag
 = 
RAISED
;

207 
	`lfds711_li°_aso_quîy
–&
√w_äs
->
logiˇl_¥o˚ss‹_chûdªn
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
Õs_⁄e_cou¡
 );

208 
Õs_two_cou¡
 = 1;

211 if–
√w_äs
->
ty≥
 !
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR
 
™d
 
exi°ög_äs
->type != LIBBENCHMARK_TOPOLOGY_NODE_TYPE_LOGICAL_PROCESSOR )

214 
œs€_⁄e
 = 
	`LFDS711_LIST_ASO_GET_START
–
√w_äs
->
logiˇl_¥o˚ss‹_chûdªn
 );

215 
œs€_two
 = 
	`LFDS711_LIST_ASO_GET_START
–
exi°ög_äs
->
logiˇl_¥o˚ss‹_chûdªn
 );

217  
œs€_⁄e
 !
NULL
 
™d
 
œs€_two
 != NULL )

219 
äs_⁄e
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€_⁄e
 );

220 
äs_two
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€_two
 );

222 
¸
 = 0;

224 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 =
äs_two
->extended_node_info.logical_processor.windows_group_number )

226 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 > 
äs_two
->extended_node_info.logical_processor.number )

227 
¸
 = 1;

229 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 < 
äs_two
->extended_node_info.logical_processor.number )

230 
¸
 = -1;

233 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 < 
äs_two
->extended_node_info.logical_processor.windows_group_number )

234 
¸
 = -1;

236 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 > 
äs_two
->extended_node_info.logical_processor.windows_group_number )

237 
¸
 = 1;

239 if–
¸
 == -1 )

241 
œs€_⁄e
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_one );

242 if–
nŸ_a_£t_Êag
 =
LOWERED
 )

244 
nŸ_a_£t_com∑ª
 = -1;

245 
nŸ_a_£t_Êag
 = 
RAISED
;

249 if–
¸
 == 1 )

251 
œs€_two
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_two );

252 if–
nŸ_a_£t_Êag
 =
LOWERED
 )

254 
nŸ_a_£t_com∑ª
 = 1;

255 
nŸ_a_£t_Êag
 = 
RAISED
;

259 if–
¸
 == 0 )

261 
sh¨ed_cou¡
++;

262 
œs€_⁄e
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_one );

263 
œs€_two
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_two );

267 
	`lfds711_li°_aso_quîy
–&
√w_äs
->
logiˇl_¥o˚ss‹_chûdªn
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
Õs_⁄e_cou¡
 );

268 
	`lfds711_li°_aso_quîy
–&
exi°ög_äs
->
logiˇl_¥o˚ss‹_chûdªn
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
Õs_two_cou¡
 );

272 if–
Õs_⁄e_cou¡
 =
Õs_two_cou¡
 
™d
 
sh¨ed_cou¡
 ==Üps_one_count )

273 
°
 = 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SET
;

276 if–
Õs_⁄e_cou¡
 < 
Õs_two_cou¡
 
™d
 
sh¨ed_cou¡
 ==Üps_one_count )

277 
°
 = 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUBSET
;

280 if–
Õs_⁄e_cou¡
 > 
Õs_two_cou¡
 
™d
 
sh¨ed_cou¡
 ==Üps_two_count )

281 
°
 = 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUPERSET
;

285  
°
 )

287 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUBSET
:

288 
rv
 = -1;

291 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SET
:

292 
rv
 = 
	`libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
–
√w_äs
, 
exi°ög_äs
 );

295 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUPERSET
:

296 
rv
 = 1;

299 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_NOT_A_SET
:

300 
rv
 = 
nŸ_a_£t_com∑ª
;

304  
rv
;

305 
	}
}

312 
	$libbíchm¨k_t›ﬁogy_node_com∑ª_node_ty≥s_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

315 
rv
 = 0;

317 
libbíchm¨k_t›ﬁogy_node_°©e


318 *
√w_äs
,

319 *
exi°ög_äs
;

321 
	`LFDS711_PAL_ASSERT
–
√w_key
 !
NULL
 );

322 
	`LFDS711_PAL_ASSERT
–
exi°ög_key
 !
NULL
 );

324 
√w_äs
 = (
libbíchm¨k_t›ﬁogy_node_°©e
 *Ë
√w_key
;

325 
exi°ög_äs
 = (
libbíchm¨k_t›ﬁogy_node_°©e
 *Ë
exi°ög_key
;

327 if–
√w_äs
->
ty≥
 < 
exi°ög_äs
->type )

330 if–
√w_äs
->
ty≥
 > 
exi°ög_äs
->type )

333 if–
√w_äs
->
ty≥
 =
LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE
 
™d
 
exi°ög_äs
->type == LIBBENCHMARK_TOPOLOGY_NODE_TYPE_CACHE )

335 if–
√w_äs
->
exãnded_node_öfo
.
ˇche
.
Àvñ
 > 
exi°ög_äs
->extended_node_info.cache.level )

336 
rv
 = 1;

338 if–
√w_äs
->
exãnded_node_öfo
.
ˇche
.
Àvñ
 < 
exi°ög_äs
->extended_node_info.cache.level )

339 
rv
 = -1;

341 if–
√w_äs
->
exãnded_node_öfo
.
ˇche
.
Àvñ
 =
exi°ög_äs
->extended_node_info.cache.level )

343 if–
√w_äs
->
exãnded_node_öfo
.
ˇche
.
ty≥
 > 
exi°ög_äs
->extended_node_info.cache.type )

344 
rv
 = 1;

346 if–
√w_äs
->
exãnded_node_öfo
.
ˇche
.
ty≥
 < 
exi°ög_äs
->extended_node_info.cache.type )

347 
rv
 = -1;

351  
rv
;

352 
	}
}

359 
	$libbíchm¨k_t›ﬁogy_node_com∑ª_Õ£ts_fun˘i⁄
–
lfds711_li°_aso_°©e
 *
Õ£t_⁄e
, lfds711_li°_aso_°©ê*
Õ£t_two
 )

361 
Êag


362 
nŸ_a_£t_Êag
 = 
LOWERED
;

364 
libbíchm¨k_t›ﬁogy_node_£t_ty≥


365 
°
 = 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_NOT_A_SET
;

368 
¸
 = 0,

369 
rv
 = 0,

370 
nŸ_a_£t_com∑ª
 = 0;

372 
lfds711_∑l_uöt_t


373 
Õs_⁄e_cou¡
,

374 
Õs_two_cou¡
,

375 
sh¨ed_cou¡
 = 0;

377 
lfds711_li°_aso_ñemít


378 *
œs€_⁄e
,

379 *
œs€_two
;

381 
libbíchm¨k_t›ﬁogy_node_°©e


382 *
äs_⁄e
,

383 *
äs_two
;

385 
	`LFDS711_PAL_ASSERT
–
Õ£t_⁄e
 !
NULL
 );

386 
	`LFDS711_PAL_ASSERT
–
Õ£t_two
 !
NULL
 );

398 
œs€_⁄e
 = 
	`LFDS711_LIST_ASO_GET_START
–*
Õ£t_⁄e
 );

399 
œs€_two
 = 
	`LFDS711_LIST_ASO_GET_START
–*
Õ£t_two
 );

401  
œs€_⁄e
 !
NULL
 
™d
 
œs€_two
 != NULL )

403 
äs_⁄e
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€_⁄e
 );

404 
äs_two
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€_two
 );

406 
¸
 = 0;

408 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 =
äs_two
->extended_node_info.logical_processor.windows_group_number )

410 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 > 
äs_two
->extended_node_info.logical_processor.number )

411 
¸
 = 1;

413 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
numbî
 < 
äs_two
->extended_node_info.logical_processor.number )

414 
¸
 = -1;

417 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 < 
äs_two
->extended_node_info.logical_processor.windows_group_number )

418 
¸
 = -1;

420 if–
äs_⁄e
->
exãnded_node_öfo
.
logiˇl_¥o˚ss‹
.
wödows_group_numbî
 > 
äs_two
->extended_node_info.logical_processor.windows_group_number )

421 
¸
 = 1;

423 if–
¸
 == -1 )

425 
œs€_⁄e
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_one );

426 if–
nŸ_a_£t_Êag
 =
LOWERED
 )

428 
nŸ_a_£t_com∑ª
 = -1;

429 
nŸ_a_£t_Êag
 = 
RAISED
;

433 if–
¸
 == 1 )

435 
œs€_two
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_two );

436 if–
nŸ_a_£t_Êag
 =
LOWERED
 )

438 
nŸ_a_£t_com∑ª
 = 1;

439 
nŸ_a_£t_Êag
 = 
RAISED
;

443 if–
¸
 == 0 )

445 
sh¨ed_cou¡
++;

446 
œs€_⁄e
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_one );

447 
œs€_two
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe_two );

451 
	`lfds711_li°_aso_quîy
–
Õ£t_⁄e
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
Õs_⁄e_cou¡
 );

452 
	`lfds711_li°_aso_quîy
–
Õ£t_two
, 
LFDS711_LIST_ASO_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
Õs_two_cou¡
 );

455 if–
Õs_⁄e_cou¡
 =
Õs_two_cou¡
 
™d
 
sh¨ed_cou¡
 ==Üps_one_count )

456 
°
 = 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SET
;

459 if–
Õs_⁄e_cou¡
 < 
Õs_two_cou¡
 
™d
 
sh¨ed_cou¡
 ==Üps_one_count )

460 
°
 = 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUBSET
;

463 if–
Õs_⁄e_cou¡
 > 
Õs_two_cou¡
 
™d
 
sh¨ed_cou¡
 ==Üps_two_count )

464 
°
 = 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUPERSET
;

466  
°
 )

468 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUBSET
:

469 
rv
 = -1;

472 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SET
:

473 
rv
 = 0;

476 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_SUPERSET
:

477 
rv
 = 1;

480 
LIBBENCHMARK_TOPOLOGY_NODE_SET_TYPE_NOT_A_SET
:

481 
rv
 = 
nŸ_a_£t_com∑ª
;

485  
rv
;

486 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology_node/libbenchmark_topology_node_init.c

2 
	~"libbíchm¨k_t›ﬁogy_node_öã∫Æ.h
"

9 
	$libbíchm¨k_t›ﬁogy_node_öô
–
libbíchm¨k_t›ﬁogy_node_°©e
 *
äs
 )

11 
	`LFDS711_PAL_ASSERT
–
äs
 !
NULL
 );

14 
	`lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
äs
->
logiˇl_¥o˚ss‹_chûdªn
, 
libbíchm¨k_t›ﬁogy_node_com∑ª_nodes_fun˘i⁄
, 
LFDS711_LIST_ASO_EXISTING_KEY_FAIL
, 
NULL
 );

17 
	}
}

	@test_and_benchmark/libbenchmark/src/libbenchmark_topology_node/libbenchmark_topology_node_internal.h

2 
	~"../libbíchm¨k_öã∫Æ.h
"

	@test_and_benchmark/libshared/build/wdk_7.1/driver_entry_renamed_to_avoid_compiler_warning.c

1 
	~"libsh¨ed_öã∫Æ.h
"

8 
DRIVER_INITIALIZE
 
	gDrivîE¡ry
;

15 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

17 
NTSTATUS
 
	$DrivîE¡ry
–
_DRIVER_OBJECT
 *
DrivîObje˘
, 
PUNICODE_STRING
 
Regi°ryP©h
 )

19  
STATUS_SUCCESS
;

20 
	}
}

22 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libshared/inc/libshared.h

1 #i‚de‡
LIBSHARED_H


4 
	#LIBSHARED_H


	)

7 
	eÊag


9 
	mLOWERED
,

10 
	mRAISED


14 
	~"libsh¨ed/libsh¨ed_p‹tög_ab°ø˘i⁄_œyî_›î©ög_sy°em.h
"

17 
	~"../../../liblfds711/öc/liblfds711.h
"

20 
	~"libsh¨ed/libsh¨ed_™si.h
"

21 
	~"libsh¨ed/libsh¨ed_mem‹y.h
"

22 
	~"libsh¨ed/libsh¨ed_misc.h
"

23 
	~"libsh¨ed/libsh¨ed_p‹tög_ab°ø˘i⁄_œyî.h
"

	@test_and_benchmark/libshared/inc/libshared/libshared_ansi.h

8 
lfds711_∑l_uöt_t
 
libsh¨ed_™si_°æí
–c⁄° * c⁄° 
°rög
 );

9 
libsh¨ed_™si_°r˝y
–*
de°ö©i⁄
, c⁄° *
sour˚
 );

10 
libsh¨ed_™si_°rˇt
–*
de°ö©i⁄
, c⁄° * c⁄° 
sour˚
 );

11 
libsh¨ed_™si_°rˇt_numbî
–*
de°ö©i⁄
, 
lfds711_∑l_uöt_t
 
numbî
 );

12 
libsh¨ed_™si_°rˇt_numbî_wôh_Àadög_zîos
–*
de°ö©i⁄
, 
lfds711_∑l_uöt_t
 
numbî
,Üfds711_∑l_uöt_à
möimum_width
 );

13 
libsh¨ed_™si_°rˇt_ch¨
–*
de°ö©i⁄
, c⁄° 
sour˚
 );

	@test_and_benchmark/libshared/inc/libshared/libshared_memory.h

2 
	elibsh¨ed_mem‹y_quîy


4 
	mLIBSHARED_MEMORY_QUERY_GET_AVAILABLE


8 
	slibsh¨ed_mem‹y_ñemít


11 *
	m‹igöÆ
,

12 *
	m‹igöÆ_a·î_me_Æloc
,

13 *
	mcuºít_poöãr
,

14 *
	mrﬁlback
;

16 
Êag


17 
	mknown_numa_node_Êag
;

19 
lfds711_∑l_uöt_t


20 
	mcuºít_mem‹y_size_ö_byãs
,

21 
	mnuma_node_id
,

22 
	m‹igöÆ_mem‹y_size_ö_byãs
,

23 
	m‹igöÆ_a·î_me_Æloc_mem‹y_size_ö_byãs
,

24 
	mrﬁlback_mem‹y_size_ö_byãs
;

26 
lfds711_li°_asu_ñemít


27 
	mœsue
;

30 
	slibsh¨ed_mem‹y_°©e


32 
lfds711_li°_asu_°©e


33 
	mli°_of_Æloˇti⁄s
;

37 
libsh¨ed_mem‹y_öô
–
libsh¨ed_mem‹y_°©e
 *
ms
 );

38 
libsh¨ed_mem‹y_˛ónup
–
libsh¨ed_mem‹y_°©e
 *
ms
,

39 (*
mem‹y_˛ónup_ˇŒback
)(
Êag
 
known_numa_node_Êag
,

40 *
°‹e
,

41 
lfds711_∑l_uöt_t
 
size
) );

43 
	`libsh¨ed_mem‹y_add_mem‹y
–
libsh¨ed_mem‹y_°©e
 *
ms
,

44 *
mem‹y
,

45 
lfds711_∑l_uöt_t
 
mem‹y_size_ö_byãs
 );

46 
	`libsh¨ed_mem‹y_add_mem‹y_‰om_numa_node
–
libsh¨ed_mem‹y_°©e
 *
ms
,

47 
lfds711_∑l_uöt_t
 
numa_node_id
,

48 *
mem‹y
,

49 
lfds711_∑l_uöt_t
 
mem‹y_size_ö_byãs
 );

51 *
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
 );

52 *
	`libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
numa_node_id
,Üfds711_∑l_uöt_à
size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
 );

53 *
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
 );

54 *
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
ñemít_size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
,Üfds711_∑l_uöt_à*
numbî_ñemíts
 );

56 
	`libsh¨ed_mem‹y_£t_rﬁlback
–
libsh¨ed_mem‹y_°©e
 *
ms
 );

57 
	`libsh¨ed_mem‹y_rﬁlback
–
libsh¨ed_mem‹y_°©e
 *
ms
 );

59 
	`libsh¨ed_mem‹y_quîy
–
libsh¨ed_mem‹y_°©e
 *
ms
,

60 
libsh¨ed_mem‹y_quîy
 
quîy_ty≥
,

61 *
quîy_öput
,

62 *
quîy_ouçut
 );

	@test_and_benchmark/libshared/inc/libshared/libshared_misc.h

2 
	#LIBSHARED_MISC_VERSION_STRING
 "7.1.1"

	)

3 
	#LIBSHARED_MISC_VERSION_INTEGER
 711

	)

6 
	elibsh¨ed_misc_quîy


8 
	mLIBSHARED_MISC_QUERY_GET_BUILD_AND_VERSION_STRING


14 
libsh¨ed_misc_quîy
–libsh¨ed_misc_quîy 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 );

	@test_and_benchmark/libshared/inc/libshared/libshared_porting_abstraction_layer.h

2 
	#LIBSHARED_PAL_PTI_GET_LOGICAL_PROCESSOR_NUMBER
–
libsh¨ed_∑l_thªad_öfo
 ) (libsh¨ed_∑l_thªad_öfo).
logiˇl_¥o˚ss‹_numbî


	)

3 
	#LIBSHARED_PAL_PTI_GET_WINDOWS_PROCESSOR_GROUP_NUMBER
–
libsh¨ed_∑l_thªad_öfo
 ) (libsh¨ed_∑l_thªad_öfo).
wödows_¥o˚ss‹_group_numbî


	)

4 
	#LIBSHARED_PAL_PTI_GET_NUMA_NODE_ID
–
libsh¨ed_∑l_thªad_öfo
 ) (libsh¨ed_∑l_thªad_öfo).
numa_node_id


	)

5 
	#LIBSHARED_PAL_PTI_GET_THREAD_FUNCTION
–
libsh¨ed_∑l_thªad_öfo
 ) (libsh¨ed_∑l_thªad_öfo).
thªad_fun˘i⁄


	)

6 
	#LIBSHARED_PAL_PTI_GET_THREAD_ARGUMENT
–
libsh¨ed_∑l_thªad_öfo
 ) (libsh¨ed_∑l_thªad_öfo).
thªad_¨gumít


	)

9 
	slibsh¨ed_∑l_thªad_öfo


13 
lfds711_∑l_uöt_t


14 
	mlogiˇl_¥o˚ss‹_numbî
,

15 
	mnuma_node_id
,

16 
	mwödows_¥o˚ss‹_group_numbî
;

18 
	mlibsh¨ed_∑l_thªad_ªtu∫_t


19 (
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 *
	mthªad_fun˘i⁄
)–*
	mthªad_¨gumít
 );

22 *
	mthªad_¨gumít
;

26 
libsh¨ed_∑l_thªad_°¨t
–
libsh¨ed_∑l_thªad_h™dÀ_t
 *
thªad_h™dÀ
,

27 
libsh¨ed_∑l_thªad_öfo
 *
±i
 );

29 
libsh¨ed_∑l_thªad_waô
–
libsh¨ed_∑l_thªad_h™dÀ_t
 
thªad_h™dÀ
 );

	@test_and_benchmark/libshared/inc/libshared/libshared_porting_abstraction_layer_operating_system.h

2 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && !deföed 
KERNEL_MODE
 )

4 #ifde‡
LIBSHARED_PAL_OPERATING_SYSTEM


5 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_operating_system.h".

8 
	#LIBSHARED_PAL_OPERATING_SYSTEM


	)

10 
	#LIBSHARED_PAL_OS_STRING
 "Wödows"

	)

12 
	~<wödows.h
>

14 
HANDLE
 
	tlibsh¨ed_∑l_thªad_h™dÀ_t
;

15 
DWORD
 
	tlibsh¨ed_∑l_thªad_ªtu∫_t
;

17 
	#LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
WINAPI


	)

18 
	#LIBSHARED_PAL_THREAD_RETURN_TYPE
 
libsh¨ed_∑l_thªad_ªtu∫_t


	)

19 
	#LIBSHARED_PAL_THREAD_RETURN_CAST
–
ªtu∫_vÆue
 ) 
	)
return_value

28 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && deföed 
KERNEL_MODE
 )

30 #ifde‡
LIBSHARED_PAL_OPERATING_SYSTEM


31 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_operating_system.h".

34 
	#LIBSHARED_PAL_OPERATING_SYSTEM


	)

36 
	#LIBSHARED_PAL_OS_STRING
 "Wödows"

	)

38 
	~<wdm.h
>

40 
HANDLE
 
	tlibsh¨ed_∑l_thªad_h™dÀ_t
;

41 
VOID
 
	tlibsh¨ed_∑l_thªad_ªtu∫_t
;

43 
	#LIBSHARED_PAL_THREAD_CALLING_CONVENTION


	)

44 
	#LIBSHARED_PAL_THREAD_RETURN_TYPE
 

	)

45 
	#LIBSHARED_PAL_THREAD_RETURN_CAST
–
ªtu∫_vÆue
 )

	)

54 #if–
deföed
 
__löux__
 && !deföed 
KERNEL_MODE
 )

56 #ifde‡
LIBSHARED_PAL_OPERATING_SYSTEM


57 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_operating_system.h".

60 
	#LIBSHARED_PAL_OPERATING_SYSTEM


	)

62 
	#_GNU_SOURCE


	)

63 
	~<uni°d.h
>

65 
	#LIBSHARED_PAL_OS_STRING
 "Löux"

	)

67 #if–
_POSIX_THREADS
 >= 0 )

68 
	~<±hªad.h
>

69 
	~<sched.h
>

70 
	~<sys/sysˇŒ.h
>

71 
	~<sys/ty≥s.h
>

73 
±hªad_t
 
	tlibsh¨ed_∑l_thªad_h™dÀ_t
;

74 * 
	tlibsh¨ed_∑l_thªad_ªtu∫_t
;

76 
	#LIBSHARED_PAL_THREAD_CALLING_CONVENTION


	)

77 
	#LIBSHARED_PAL_THREAD_RETURN_TYPE
 
libsh¨ed_∑l_thªad_ªtu∫_t


	)

78 
	#LIBSHARED_PAL_THREAD_RETURN_CAST
–
ªtu∫_vÆue
 ) ( (
libsh¨ed_∑l_thªad_ªtu∫_t
Ë‘ëu∫_vÆueË)

	)

81 #if–
_POSIX_THREADS
 == -1 )

82 #îr‹ 
No
 
±hªad
 
suµ‹t
 
undî
 
Löux
 
ö
 
libsh¨ed_p‹tög_ab°ø˘i⁄_œyî_›î©ög_sy°em
.
h


92 #if–
deföed
 
__löux__
 && deföed 
KERNEL_MODE
 )

94 #ifde‡
LIBSHARED_PAL_OPERATING_SYSTEM


95 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
. 
ö
 "libshared_porting_abstraction_layer_operating_system.h".

98 
	#LIBSHARED_PAL_OPERATING_SYSTEM


	)

100 
	#LIBSHARED_PAL_OS_STRING
 "Löux"

	)

102 
	#_GNU_SOURCE


	)

104 
	~<löux/moduÀ.h
>

105 
	~<löux/kthªad.h
>

107 
èsk_°ru˘
 * 
	tlibsh¨ed_∑l_thªad_h™dÀ_t
;

108 
	tlibsh¨ed_∑l_thªad_ªtu∫_t
;

110 
	#LIBSHARED_PAL_THREAD_CALLING_CONVENTION


	)

111 
	#LIBSHARED_PAL_THREAD_RETURN_TYPE
 
libsh¨ed_∑l_thªad_ªtu∫_t


	)

112 
	#LIBSHARED_PAL_THREAD_RETURN_CAST
–
ªtu∫_vÆue
 ) ( (
libsh¨ed_∑l_thªad_ªtu∫_t
Ë‘ëu∫_vÆueË)

	)

121 #if–!
deföed
 
LIBSHARED_PAL_OPERATING_SYSTEM
 )

123 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 "libshared_porting_abstraction_layer_operating_system.h".

	@test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_internal.h

2 
	~"../libsh¨ed_öã∫Æ.h
"

	@test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strcat.c

2 
	~"libsh¨ed_™si_öã∫Æ.h
"

9 
	$libsh¨ed_™si_°rˇt
–*
de°ö©i⁄
, c⁄° * c⁄° 
sour˚
 )

11 
	`LFDS711_PAL_ASSERT
–
de°ö©i⁄
 !
NULL
 );

12 
	`LFDS711_PAL_ASSERT
–
sour˚
 !
NULL
 );

14  *
de°ö©i⁄
++ != '\0' );

16 
	`libsh¨ed_™si_°r˝y
–
de°ö©i⁄
-1, 
sour˚
 );

19 
	}
}

	@test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strcat_char.c

2 
	~"libsh¨ed_™si_öã∫Æ.h
"

9 
	$libsh¨ed_™si_°rˇt_ch¨
–*
de°ö©i⁄
, c⁄° 
sour˚
 )

11 
	`LFDS711_PAL_ASSERT
–
de°ö©i⁄
 !
NULL
 );

14  *
de°ö©i⁄
++ != '\0' );

16 *(
de°ö©i⁄
-1Ë
sour˚
;

17 *
de°ö©i⁄
 = '\0';

20 
	}
}

	@test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strcat_number.c

2 
	~"libsh¨ed_™si_öã∫Æ.h
"

9 
	$libsh¨ed_™si_°rˇt_numbî
–*
de°ö©i⁄
, 
lfds711_∑l_uöt_t
 
numbî
 )

11 
lfds711_∑l_uöt_t


12 
digô
,

13 
Àngth
 = 0,

14 
‹igöÆ_numbî
;

16 
	`LFDS711_PAL_ASSERT
–
de°ö©i⁄
 !
NULL
 );

20  *
de°ö©i⁄
++ != '\0' );

22 
de°ö©i⁄
--;

26 
‹igöÆ_numbî
 = 
numbî
;

30 
digô
 = 
numbî
 % 10;

31 
Àngth
++;

32 
numbî
 -
digô
;

33 
numbî
 /= 10;

35  
numbî
 > 0 );

37 
de°ö©i⁄
[
Àngth
] = '\0';

41 
numbî
 = 
‹igöÆ_numbî
;

45 
digô
 = 
numbî
 % 10;

46 
de°ö©i⁄
[--
Àngth
] = (Ë–
digô
 + '0' );

47 
numbî
 -
digô
;

48 
numbî
 /= 10;

50  
numbî
 > 0 );

53 
	}
}

60 
	$libsh¨ed_™si_°rˇt_numbî_wôh_Àadög_zîos
–*
de°ö©i⁄
, 
lfds711_∑l_uöt_t
 
numbî
,Üfds711_∑l_uöt_à
möimum_width
 )

62 
lfds711_∑l_uöt_t


63 
digô
,

64 
Àngth
 = 0,

65 
lo›
,

66 
‹igöÆ_numbî
;

68 
	`LFDS711_PAL_ASSERT
–
de°ö©i⁄
 !
NULL
 );

73  *
de°ö©i⁄
++ != '\0' );

75 
de°ö©i⁄
--;

79 
‹igöÆ_numbî
 = 
numbî
;

83 
digô
 = 
numbî
 % 10;

84 
Àngth
++;

85 
numbî
 -
digô
;

86 
numbî
 /= 10;

88  
numbî
 > 0 );

90 if–
Àngth
 < 
möimum_width
 )

91  
lo›
 = 0 ;Üo› < 
möimum_width
 - 
Àngth
 ;Üoop++ )

92 *
de°ö©i⁄
++ = '0';

94 
de°ö©i⁄
[
Àngth
] = '\0';

98 
numbî
 = 
‹igöÆ_numbî
;

102 
digô
 = 
numbî
 % 10;

103 
de°ö©i⁄
[--
Àngth
] = (Ë–
digô
 + '0' );

104 
numbî
 -
digô
;

105 
numbî
 /= 10;

107  
numbî
 > 0 );

110 
	}
}

	@test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strcpy.c

2 
	~"libsh¨ed_™si_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4706 )

11 
	$libsh¨ed_™si_°r˝y
–*
de°ö©i⁄
, c⁄° *
sour˚
 )

13 
	`LFDS711_PAL_ASSERT
–
de°ö©i⁄
 !
NULL
 );

14 
	`LFDS711_PAL_ASSERT
–
sour˚
 !
NULL
 );

16  (*
de°ö©i⁄
++ = *
sour˚
++) );

19 
	}
}

21 #¥agm®
w¨nög
(  : 4706 )

	@test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strlen.c

2 
	~"libsh¨ed_™si_öã∫Æ.h
"

9 
lfds711_∑l_uöt_t
 
	$libsh¨ed_™si_°æí
–c⁄° * c⁄° 
°rög
 )

12 *
ãmp
;

14 
	`LFDS711_PAL_ASSERT
–
°rög
 !
NULL
 );

16 
ãmp
 = (c⁄° *Ë
°rög
;

18  *
ãmp
++ != '\0' );

20  (
lfds711_∑l_uöt_t
Ë(
ãmp
-1 - 
°rög
);

21 
	}
}

	@test_and_benchmark/libshared/src/libshared_internal.h

2 
	~"../öc/libsh¨ed.h
"

5 
	#™d
 &&

	)

6 
	#‹
 ||

	)

8 
	#NO_FLAGS
 0x0

	)

10 
	#RETURN_SUCCESS
 0

	)

11 
	#RETURN_FAILURE
 1

	)

13 
	#LIBSHARED_VERSION_STRING
 "7.1.1"

	)

14 
	#LIBSHARED_VERSION_INTEGER
 711

	)

16 #if–
deföed
 
KERNEL_MODE
 )

17 
	#MODE_TYPE_STRING
 "kî√l-mode"

	)

20 #if–!
deföed
 
KERNEL_MODE
 )

21 
	#MODE_TYPE_STRING
 "u£r-mode"

	)

24 #if–
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

25 
	#BUILD_TYPE_STRING
 "ªÀa£"

	)

28 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

29 
	#BUILD_TYPE_STRING
 "debug"

	)

32 #if–!
deföed
 
NDEBUG
 && deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

33 
	#BUILD_TYPE_STRING
 "covîage"

	)

36 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && deföed 
TSAN
 && !deföed 
PROF
 )

37 
	#BUILD_TYPE_STRING
 "thªadßnôizî"

	)

40 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && deföed 
PROF
 )

41 
	#BUILD_TYPE_STRING
 "¥ofûög"

	)

	@test_and_benchmark/libshared/src/libshared_memory/libshared_memory_add.c

2 
	~"libsh¨ed_mem‹y_öã∫Æ.h
"

5 
Æloc_™d_öô_mem‹y_ñemít
–
libsh¨ed_mem‹y_ñemít
 **
me
, *
mem‹y
, 
lfds711_∑l_uöt_t
 
mem‹y_size_ö_byãs
 );

11 
	$libsh¨ed_mem‹y_add_mem‹y_‰om_numa_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
numa_node_id
, *
mem‹y
,Üfds711_∑l_uöt_à
mem‹y_size_ö_byãs
 )

13 
libsh¨ed_mem‹y_ñemít


14 *
me
;

16 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

18 
	`LFDS711_PAL_ASSERT
–
mem‹y
 !
NULL
 );

21 
	`Æloc_™d_öô_mem‹y_ñemít
–&
me
, 
mem‹y
, 
mem‹y_size_ö_byãs
 );

23 
me
->
known_numa_node_Êag
 = 
RAISED
;

24 
me
->
numa_node_id
 =Çuma_node_id;

26 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
me
->
œsue
, me );

27 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
me
->
œsue
, me );

28 
	`lfds711_li°_asu_ö£π_©_°¨t
–&
ms
->
li°_of_Æloˇti⁄s
, &
me
->
œsue
 );

31 
	}
}

38 
	$libsh¨ed_mem‹y_add_mem‹y
–
libsh¨ed_mem‹y_°©e
 *
ms
, *
mem‹y
, 
lfds711_∑l_uöt_t
 
mem‹y_size_ö_byãs
 )

40 
libsh¨ed_mem‹y_ñemít


41 *
me
;

43 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

44 
	`LFDS711_PAL_ASSERT
–
mem‹y
 !
NULL
 );

47 
	`Æloc_™d_öô_mem‹y_ñemít
–&
me
, 
mem‹y
, 
mem‹y_size_ö_byãs
 );

49 
me
->
known_numa_node_Êag
 = 
LOWERED
;

51 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
me
->
œsue
, me );

52 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
me
->
œsue
, me );

53 
	`lfds711_li°_asu_ö£π_©_°¨t
–&
ms
->
li°_of_Æloˇti⁄s
, &
me
->
œsue
 );

56 
	}
}

63 
	$Æloc_™d_öô_mem‹y_ñemít
–
libsh¨ed_mem‹y_ñemít
 **
me
, *
mem‹y
, 
lfds711_∑l_uöt_t
 
mem‹y_size_ö_byãs
 )

65 
lfds711_∑l_uöt_t


66 
Æignmít_bump
,

67 
size_ö_byãs
,

68 
tŸÆ_size_ö_byãs
;

70 
	`LFDS711_PAL_ASSERT
–
me
 !
NULL
 );

71 
	`LFDS711_PAL_ASSERT
–
mem‹y
 !
NULL
 );

74 
Æignmít_bump
 = (
lfds711_∑l_uöt_t
Ë
mem‹y
 % 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
;

76 if–
Æignmít_bump
 != 0 )

77 
Æignmít_bump
 = 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 -álignment_bump;

79 
size_ö_byãs
 = –
libsh¨ed_mem‹y_ñemít
 );

81 
tŸÆ_size_ö_byãs
 = 
size_ö_byãs
 + 
Æignmít_bump
;

83 *
me
 = (
libsh¨ed_mem‹y_ñemít
 *Ë–(*Ë
mem‹y
 + 
Æignmít_bump
 );

85 (*
me
)->
‹igöÆ
 = 
mem‹y
;

86 (*
me
)->
‹igöÆ_mem‹y_size_ö_byãs
 = 
mem‹y_size_ö_byãs
;

88 (*
me
)->
‹igöÆ_a·î_me_Æloc
 = (*me)->
cuºít_poöãr
 = (*Ë
mem‹y
 + 
tŸÆ_size_ö_byãs
;

89 (*
me
)->
‹igöÆ_a·î_me_Æloc_mem‹y_size_ö_byãs
 = (*me)->
cuºít_mem‹y_size_ö_byãs
 = 
mem‹y_size_ö_byãs
 - 
tŸÆ_size_ö_byãs
;

92 
	}
}

	@test_and_benchmark/libshared/src/libshared_memory/libshared_memory_alloc.c

2 
	~"libsh¨ed_mem‹y_öã∫Æ.h
"

5 *
Æloc_‰om_mem‹y_ñemít
–
libsh¨ed_mem‹y_ñemít
 *
me
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
 );

12 *
	$libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
 )

14 
lfds711_li°_asu_ñemít


15 *
œsue
 = 
NULL
;

17 
libsh¨ed_mem‹y_ñemít


18 *
me
;

21 *
Æloˇti⁄
 = 
NULL
;

23 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

27  
Æloˇti⁄
 =
NULL
 
™d
 
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ms
->
li°_of_Æloˇti⁄s
,
œsue
) )

29 
me
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

31 if–
me
->
known_numa_node_Êag
 =
LOWERED
 )

32 
Æloˇti⁄
 = 
	`Æloc_‰om_mem‹y_ñemít
–
me
, 
size_ö_byãs
, 
Æignmít_ö_byãs
 );

35  
Æloˇti⁄
;

36 
	}
}

43 *
	$libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
ñemít_size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
,Üfds711_∑l_uöt_à*
numbî_ñemíts
 )

45 
lfds711_∑l_uöt_t


46 
Æignmít_bump
;

48 
lfds711_li°_asu_ñemít


49 *
œsue
 = 
NULL
;

51 
libsh¨ed_mem‹y_ñemít


52 *
me
 = 
NULL
,

53 *
ãmp_me
;

56 *
Æloˇti⁄
;

58 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
numbî_ñemíts
 !
NULL
 );

68  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ms
->
li°_of_Æloˇti⁄s
,
œsue
) )

70 
ãmp_me
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

72 if–
ãmp_me
->
known_numa_node_Êag
 =
LOWERED
 )

73 if–
me
 =
NULL
 
‹
 
ãmp_me
->
cuºít_mem‹y_size_ö_byãs
 > me->current_memory_size_in_bytes )

74 
me
 = 
ãmp_me
;

77 
Æignmít_bump
 = (
lfds711_∑l_uöt_t
Ë
me
->
cuºít_poöãr
 % 
Æignmít_ö_byãs
;

79 if–
Æignmít_bump
 != 0 )

80 
Æignmít_bump
 = 
Æignmít_ö_byãs
 -álignment_bump;

82 *
numbî_ñemíts
 = (
me
->
cuºít_mem‹y_size_ö_byãs
 - 
Æignmít_bump
Ë/ 
ñemít_size_ö_byãs
;

84 
Æloˇti⁄
 = 
	`Æloc_‰om_mem‹y_ñemít
–
me
, *
numbî_ñemíts
 * 
ñemít_size_ö_byãs
, 
Æignmít_ö_byãs
 );

86  
Æloˇti⁄
;

87 
	}
}

94 *
	$libsh¨ed_mem‹y_Æloc_‰om_•ecific_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
numa_node_id
,Üfds711_∑l_uöt_à
size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
 )

96 
lfds711_li°_asu_ñemít


97 *
œsue
 = 
NULL
;

99 
libsh¨ed_mem‹y_ñemít


100 *
me
;

103 *
Æloˇti⁄
 = 
NULL
;

105 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

110  
Æloˇti⁄
 =
NULL
 
™d
 
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ms
->
li°_of_Æloˇti⁄s
,
œsue
) )

112 
me
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

114 if–
me
->
known_numa_node_Êag
 =
RAISED
 
™d
 me->
numa_node_id
 ==Çuma_node_id )

115 
Æloˇti⁄
 = 
	`Æloc_‰om_mem‹y_ñemít
–
me
, 
size_ö_byãs
, 
Æignmít_ö_byãs
 );

118  
Æloˇti⁄
;

119 
	}
}

126 *
	$libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
 )

128 
lfds711_li°_asu_ñemít


129 *
œsue
 = 
NULL
;

131 
libsh¨ed_mem‹y_ñemít


132 *
me
 = 
NULL
,

133 *
ãmp_me
;

136 *
Æloˇti⁄
;

138 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

143  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ms
->
li°_of_Æloˇti⁄s
,
œsue
) )

145 
ãmp_me
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

147 if–
me
 =
NULL
 
‹
 
ãmp_me
->
cuºít_mem‹y_size_ö_byãs
 > me->current_memory_size_in_bytes )

148 
me
 = 
ãmp_me
;

151 
Æloˇti⁄
 = 
	`Æloc_‰om_mem‹y_ñemít
–
me
, 
size_ö_byãs
, 
Æignmít_ö_byãs
 );

153  
Æloˇti⁄
;

154 
	}
}

161 *
	$Æloc_‰om_mem‹y_ñemít
–
libsh¨ed_mem‹y_ñemít
 *
me
, 
lfds711_∑l_uöt_t
 
size_ö_byãs
,Üfds711_∑l_uöt_à
Æignmít_ö_byãs
 )

163 
lfds711_∑l_uöt_t


164 
Æignmít_bump
,

165 
tŸÆ_size_ö_byãs
;

168 *
Æloˇti⁄
;

170 
	`LFDS711_PAL_ASSERT
–
me
 !
NULL
 );

174 
Æignmít_bump
 = (
lfds711_∑l_uöt_t
Ë
me
->
cuºít_poöãr
 % 
Æignmít_ö_byãs
;

176 if–
Æignmít_bump
 != 0 )

177 
Æignmít_bump
 = 
Æignmít_ö_byãs
 -álignment_bump;

179 
tŸÆ_size_ö_byãs
 = 
size_ö_byãs
 + 
Æignmít_bump
;

181 if–
tŸÆ_size_ö_byãs
 > 
me
->
cuºít_mem‹y_size_ö_byãs
 )

182  
NULL
;

184 
me
->
cuºít_poöãr
 +
Æignmít_bump
;

186 
Æloˇti⁄
 = 
me
->
cuºít_poöãr
;

188 
me
->
cuºít_poöãr
 +
size_ö_byãs
;

190 
me
->
cuºít_mem‹y_size_ö_byãs
 -
tŸÆ_size_ö_byãs
;

192  
Æloˇti⁄
;

193 
	}
}

	@test_and_benchmark/libshared/src/libshared_memory/libshared_memory_cleanup.c

2 
	~"libsh¨ed_mem‹y_öã∫Æ.h
"

9 
	$libsh¨ed_mem‹y_˛ónup
–
libsh¨ed_mem‹y_°©e
 *
ms
, (*
mem‹y_˛ónup_ˇŒback
)(
Êag
 
known_numa_node_Êag
, *
°‹e
, 
lfds711_∑l_uöt_t
 
size
) )

11 
lfds711_li°_asu_ñemít


12 *
œsue
,

13 *
œsue_√xt
;

15 
libsh¨ed_mem‹y_ñemít


16 *
me
;

18 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

21 if–
mem‹y_˛ónup_ˇŒback
 !
NULL
 )

25 
œsue
 = 
	`LFDS711_LIST_ASU_GET_START
–
ms
->
li°_of_Æloˇti⁄s
 );

27  
œsue
 !
NULL
 )

29 
œsue_√xt
 = 
	`LFDS711_LIST_ASU_GET_NEXT
–*
œsue
 );

30 
me
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

31 
	`mem‹y_˛ónup_ˇŒback
–
me
->
known_numa_node_Êag
, me->
‹igöÆ
, me->
‹igöÆ_mem‹y_size_ö_byãs
 );

32 
œsue
 = 
œsue_√xt
;

36 
	`lfds711_li°_asu_˛ónup
–&
ms
->
li°_of_Æloˇti⁄s
, 
NULL
 );

39 
	}
}

	@test_and_benchmark/libshared/src/libshared_memory/libshared_memory_init.c

2 
	~"libsh¨ed_mem‹y_öã∫Æ.h
"

9 
	$libsh¨ed_mem‹y_öô
–
libsh¨ed_mem‹y_°©e
 *
ms
 )

11 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

13 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ms
->
li°_of_Æloˇti⁄s
, 
NULL
 );

16 
	}
}

	@test_and_benchmark/libshared/src/libshared_memory/libshared_memory_internal.h

2 
	~"../libsh¨ed_öã∫Æ.h
"

	@test_and_benchmark/libshared/src/libshared_memory/libshared_memory_query.c

2 
	~"libsh¨ed_mem‹y_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libsh¨ed_mem‹y_quîy
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
libsh¨ed_mem‹y_quîy
 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 )

13 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

16 
LFDS711_MISC_BARRIER_LOAD
;

18  
quîy_ty≥
 )

20 
LIBSHARED_MEMORY_QUERY_GET_AVAILABLE
:

22 
lfds711_∑l_uöt_t


23 
avaûabÀ_byãs
 = 0;

25 
lfds711_li°_asu_ñemít


26 *
œsue
 = 
NULL
;

28 
libsh¨ed_mem‹y_ñemít


29 *
me
;

31 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

34  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ms
->
li°_of_Æloˇti⁄s
,
œsue
) )

36 
me
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

37 
avaûabÀ_byãs
 +
me
->
cuºít_mem‹y_size_ö_byãs
;

40 *(
lfds711_∑l_uöt_t
 *Ë
quîy_ouçut
 = 
avaûabÀ_byãs
;

46 
	}
}

48 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libshared/src/libshared_memory/libshared_memory_rollback.c

2 
	~"libsh¨ed_mem‹y_öã∫Æ.h
"

9 
	$libsh¨ed_mem‹y_£t_rﬁlback
–
libsh¨ed_mem‹y_°©e
 *
ms
 )

11 
lfds711_li°_asu_ñemít


12 *
œsue
 = 
NULL
;

14 
libsh¨ed_mem‹y_ñemít


15 *
me
;

17 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

19  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ms
->
li°_of_Æloˇti⁄s
,
œsue
) )

21 
me
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

23 
me
->
rﬁlback
 = me->
cuºít_poöãr
;

24 
me
->
rﬁlback_mem‹y_size_ö_byãs
 = me->
cuºít_mem‹y_size_ö_byãs
;

28 
	}
}

35 
	$libsh¨ed_mem‹y_rﬁlback
–
libsh¨ed_mem‹y_°©e
 *
ms
 )

37 
lfds711_li°_asu_ñemít


38 *
œsue
 = 
NULL
;

40 
libsh¨ed_mem‹y_ñemít


41 *
me
;

43 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

45  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ms
->
li°_of_Æloˇti⁄s
,
œsue
) )

47 
me
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

49 
me
->
cuºít_poöãr
 = me->
rﬁlback
;

50 
me
->
cuºít_mem‹y_size_ö_byãs
 = me->
rﬁlback_mem‹y_size_ö_byãs
;

54 
	}
}

	@test_and_benchmark/libshared/src/libshared_misc/libshared_misc_internal.h

2 
	~"../libsh¨ed_öã∫Æ.h
"

	@test_and_benchmark/libshared/src/libshared_misc/libshared_misc_query.c

2 
	~"libsh¨ed_misc_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libsh¨ed_misc_quîy
–
libsh¨ed_misc_quîy
 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 )

17  
quîy_ty≥
 )

19 
LIBSHARED_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
:

22 * c⁄° 
buûd_™d_vîsi⁄_°rög
 = "libsh¨ed " 
LIBSHARED_MISC_VERSION_STRING
 " (" 
BUILD_TYPE_STRING
 ", " 
LIBSHARED_PAL_OS_STRING
 ", " 
MODE_TYPE_STRING
 ")";

24 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

25 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

27 *(c⁄° **Ë
quîy_ouçut
 = 
buûd_™d_vîsi⁄_°rög
;

33 
	}
}

35 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libshared/src/libshared_porting_abstraction_layer/libshared_porting_abstraction_layer_internal.h

2 
	~"../libsh¨ed_öã∫Æ.h
"

	@test_and_benchmark/libshared/src/libshared_porting_abstraction_layer/libshared_porting_abstraction_layer_thread_start.c

2 
	~"libsh¨ed_p‹tög_ab°ø˘i⁄_œyî_öã∫Æ.h
"

9 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WIN7
 && !deföed 
KERNEL_MODE
 )

11 #ifde‡
LIBSHARED_PAL_THREAD_START


12 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_start.c".

15 
	#LIBSHARED_PAL_THREAD_START


	)

17 
	$libsh¨ed_∑l_thªad_°¨t
–
libsh¨ed_∑l_thªad_h™dÀ_t
 *
thªad_h™dÀ
,

18 
libsh¨ed_∑l_thªad_öfo
 *
±i
 )

20 
BOOL


21 
brv
;

23 
DWORD


24 
thªad_id
;

26 
GROUP_AFFINITY


27 
ga
;

30 
rv
 = 0;

32 
LPPROC_THREAD_ATTRIBUTE_LIST


33 
©åibuã_li°
;

35 
SIZE_T


36 
©åibuã_li°_Àngth
;

38 
	`LFDS711_PAL_ASSERT
–
thªad_h™dÀ
 !
NULL
 );

39 
	`LFDS711_PAL_ASSERT
–
±i
 !
NULL
 );

45 
brv
 = 
	`InôülizeProcThªadAâribuãLi°
–
NULL
, 1, 0, &
©åibuã_li°_Àngth
 );

46 
©åibuã_li°
 = 
	`VútuÆAŒoc
–
NULL
, 
©åibuã_li°_Àngth
, 
MEM_COMMIT
, 
PAGE_READWRITE
 );

47 
brv
 = 
	`InôülizeProcThªadAâribuãLi°
–
©åibuã_li°
, 1, 0, &
©åibuã_li°_Àngth
 );

49 
ga
.
Mask
 = ( (
KAFFINITY
Ë1 << 
	`LIBSHARED_PAL_PTI_GET_LOGICAL_PROCESSOR_NUMBER
(*
±i
) );

50 
ga
.
Group
 = (
WORD
Ë
	`LIBSHARED_PAL_PTI_GET_WINDOWS_PROCESSOR_GROUP_NUMBER
(*
±i
);

51 
ga
.
Re£rved
[0] = ga.Reserved[1] = ga.Reserved[2] = 0;

53 
brv
 = 
	`Upd©eProcThªadAâribuã
–
©åibuã_li°
, 0, 
PROC_THREAD_ATTRIBUTE_GROUP_AFFINITY
, &
ga
, (
GROUP_AFFINITY
), 
NULL
, NULL );

54 *
thªad_h™dÀ
 = 
	`Cª©eRemŸeThªadEx
–
	`GëCuºítPro˚ss
(), 
NULL
, 0, 
	`LIBSHARED_PAL_PTI_GET_THREAD_FUNCTION
(*
±i
), 
	`LIBSHARED_PAL_PTI_GET_THREAD_ARGUMENT
(*±i), 
NO_FLAGS
, 
©åibuã_li°
, &
thªad_id
 );

56 
	`DñëeProcThªadAâribuãLi°
–
©åibuã_li°
 );

57 
	`VútuÆFªe
–
©åibuã_li°
, 0, 
MEM_RELEASE
 );

59 if–*
thªad_h™dÀ
 !
NULL
 )

60 
rv
 = 1;

62  
rv
;

63 
	}
}

72 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && NTDDI_VERSION < 
NTDDI_WIN7
 && !deföed 
KERNEL_MODE
 )

74 #ifde‡
LIBSHARED_PAL_THREAD_START


75 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_start.c".

78 
	#LIBSHARED_PAL_THREAD_START


	)

80 
	$libsh¨ed_∑l_thªad_°¨t
–
libsh¨ed_∑l_thªad_h™dÀ_t
 *
thªad_h™dÀ
,

81 
libsh¨ed_∑l_thªad_öfo
 *
±i
 )

84 
rv
 = 0;

86 
DWORD


87 
thªad_id
;

89 
DWORD_PTR


90 
afföôy_mask
,

91 
ªsu…
;

93 
	`LFDS711_PAL_ASSERT
–
thªad_h™dÀ
 !
NULL
 );

94 
	`LFDS711_PAL_ASSERT
–
±i
 !
NULL
 );

103 *
thªad_h™dÀ
 = 
	`Cª©eThªad
–
NULL
, 0, 
	`LIBSHARED_PAL_PTI_GET_THREAD_FUNCTION
(*
±i
), 
	`LIBSHARED_PAL_PTI_GET_THREAD_ARGUMENT
(*±i), 
CREATE_SUSPENDED
, &
thªad_id
 );

105 if–*
thªad_h™dÀ
 !
NULL
 )

107 
afföôy_mask
 = (
DWORD_PTR
Ë(1 << 
	`LIBSHARED_PAL_PTI_GET_LOGICAL_PROCESSOR_NUMBER
(*
±i
));

108 
	`SëThªadAfföôyMask
–*
thªad_h™dÀ
, 
afföôy_mask
 );

109 
	`ResumeThªad
–*
thªad_h™dÀ
 );

110 
rv
 = 1;

113  
rv
;

114 
	}
}

124 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && NTDDI_VERSION < 
NTDDI_WIN7
 && deföed 
KERNEL_MODE
 )

126 #ifde‡
LIBSHARED_PAL_THREAD_START


127 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_start.c".

130 
	#LIBSHARED_PAL_THREAD_START


	)

133 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
ã°_∑l_öã∫Æ_thªad_fun˘i⁄
–*
thªad_u£r_°©e
 );

135 
	$libsh¨ed_∑l_thªad_°¨t
–
libsh¨ed_∑l_thªad_h™dÀ_t
 *
thªad_h™dÀ
,

136 
libsh¨ed_∑l_thªad_öfo
 *
±i
 )

139 
rv
 = 0;

141 
NTSTATUS


142 
¡s_¸óã
;

144 
OBJECT_ATTRIBUTES


145 
ﬂ
;

147 
	`as£π
–
thªad_°©e
 !
NULL
 );

149 
	`as£π
–
thªad_fun˘i⁄
 !
NULL
 );

152 
	`InôülizeObje˘Aâribuãs
–&
ﬂ
, 
NULL
, 
OBJ_KERNEL_HANDLE
, NULL, NULL );

154 
¡s_¸óã
 = 
	`PsCª©eSy°emThªad
–
thªad_h™dÀ
, 
THREAD_ALL_ACCESS
, &
ﬂ
, 
	`NtCuºítPro˚ss
(), 
NULL
, 
ã°_∑l_öã∫Æ_thªad_fun˘i⁄
, 
±i
 );

156 if–
¡s_¸óã
 =
STATUS_SUCCESS
 )

157 
rv
 = 1;

159  
rv
;

160 
	}
}

163 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$ã°_∑l_öã∫Æ_thªad_fun˘i⁄
–*
thªad_u£r_°©e
 )

165 
KAFFINITY


166 
afföôy
;

168 
libsh¨ed_∑l_thªad_öfo


169 *
±i
;

171 
	`LFDS711_PAL_ASSERT
–
thªad_u£r_°©e
 !
NULL
 );

173 
±i
 = (
libsh¨ed_∑l_thªad_öfo
 *Ë
thªad_u£r_°©e
;

175 
afföôy
 = 1 << 
	`LIBSHARED_PAL_PTI_GET_LOGICAL_PROCESSOR_NUMBER
(*
±i
);

177 
	`KeSëSy°emAfföôyThªad
–
afföôy
 );

179 
	`LIBSHARED_PAL_PTI_GET_THREAD_FUNCTION
(*
±i
)–
	`LIBSHARED_PAL_PTI_GET_THREAD_ARGUMENT
(*pti) );

182 
	}
}

191 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WIN7
 && deföed 
KERNEL_MODE
 )

193 #ifde‡
LIBSHARED_PAL_THREAD_START


194 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_start.c".

197 
	#LIBSHARED_PAL_THREAD_START


	)

200 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
ã°_∑l_öã∫Æ_thªad_fun˘i⁄
–*
thªad_u£r_°©e
 );

202 
	$libsh¨ed_∑l_thªad_°¨t
–
libsh¨ed_∑l_thªad_h™dÀ_t
 *
thªad_h™dÀ
,

203 
libsh¨ed_∑l_thªad_öfo
 *
±i
 )

206 
rv
 = 0;

208 
NTSTATUS


209 
¡s_¸óã
;

211 
OBJECT_ATTRIBUTES


212 
ﬂ
;

214 
	`as£π
–
thªad_°©e
 !
NULL
 );

216 
	`as£π
–
thªad_fun˘i⁄
 !
NULL
 );

219 
	`InôülizeObje˘Aâribuãs
–&
ﬂ
, 
NULL
, 
OBJ_KERNEL_HANDLE
, NULL, NULL );

221 
¡s_¸óã
 = 
	`PsCª©eSy°emThªad
–
thªad_h™dÀ
, 
THREAD_ALL_ACCESS
, &
ﬂ
, 
	`NtCuºítPro˚ss
(), 
NULL
, 
ã°_∑l_öã∫Æ_thªad_fun˘i⁄
, 
±i
 );

223 if–
¡s_¸óã
 =
STATUS_SUCCESS
 )

224 
rv
 = 1;

226  
rv
;

227 
	}
}

230 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$ã°_∑l_öã∫Æ_thªad_fun˘i⁄
–*
thªad_u£r_°©e
 )

232 
GROUP_AFFINITY


233 
group_afföôy
,

234 
¥evious_group_afföôy
;

236 
libsh¨ed_∑l_thªad_öfo


237 *
±i
;

239 
	`LFDS711_PAL_ASSERT
–
thªad_u£r_°©e
 !
NULL
 );

241 
±i
 = (
libsh¨ed_∑l_thªad_öfo
 *Ë
thªad_u£r_°©e
;

243 
	`KeSëSy°emGroupAfföôyThªad
–&
group_afföôy
, &
¥evious_group_afföôy
 );

245 
group_afföôy
.
Mask
 = ( (
KAFFINITY
Ë1 ) << 
	`LIBSHARED_PAL_PTI_GET_LOGICAL_PROCESSOR_NUMBER
(*
±i
);

247 
group_afföôy
.
Group
 = (
USHORT
Ë
	`LIBSHARED_PAL_PTI_GET_WINDOWS_PROCESSOR_GROUP_NUMBER
(*
±i
);

248 
group_afföôy
.
Re£rved
[0] = group_affinity.Reserved[1] = group_affinity.Reserved[2] = 0;

250 
	`LIBSHARED_PAL_PTI_GET_THREAD_FUNCTION
(*
±i
)–
	`LIBSHARED_PAL_PTI_GET_THREAD_ARGUMENT
(*pti) );

253 
	}
}

262 #if–
deföed
 
__löux__
 && deföed 
_POSIX_THREADS
 && _POSIX_THREADS > 0 && !deföed 
KERNEL_MODE
 )

264 #ifde‡
LIBSHARED_PAL_THREAD_START


265 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_start.c".

268 
	#LIBSHARED_PAL_THREAD_START


	)

271 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
ã°_∑l_öã∫Æ_thªad_fun˘i⁄
–*
thªad_u£r_°©e
 );

274 
	$libsh¨ed_∑l_thªad_°¨t
–
libsh¨ed_∑l_thªad_h™dÀ_t
 *
thªad_h™dÀ
,

275 
libsh¨ed_∑l_thªad_öfo
 *
±i
 )

278 
rv
;

284 
	`LFDS711_PAL_ASSERT
–
thªad_h™dÀ
 !
NULL
 );

285 
	`LFDS711_PAL_ASSERT
–
±i
 !
NULL
 );

287 
rv
 = 
	`±hªad_¸óã
–
thªad_h™dÀ
, 
NULL
, 
ã°_∑l_öã∫Æ_thªad_fun˘i⁄
, 
±i
 );

289 if–
rv
 == 0 )

290 
rv
 = 1;

292  
rv
;

293 
	}
}

296 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$ã°_∑l_öã∫Æ_thªad_fun˘i⁄
–*
thªad_u£r_°©e
 )

298 
˝u_£t_t


299 
˝u£t
;

301 
pid_t


302 
tid
;

304 
libsh¨ed_∑l_thªad_öfo


305 *
±i
;

307 
LIBSHARED_PAL_THREAD_RETURN_TYPE


308 
rv
;

310 
	`LFDS711_PAL_ASSERT
–
thªad_u£r_°©e
 !
NULL
 );

327 
±i
 = (
libsh¨ed_∑l_thªad_öfo
 *Ë
thªad_u£r_°©e
;

329 
	`CPU_ZERO
–&
˝u£t
 );

330 
	`CPU_SET
–
	`LIBSHARED_PAL_PTI_GET_LOGICAL_PROCESSOR_NUMBER
(*
±i
), &
˝u£t
 );

332 
tid
 = 
	`sysˇŒ
–
SYS_gëtid
 );

334 
	`sched_£èfföôy
–
tid
, (
˝u_£t_t
), &
˝u£t
 );

336 
rv
 = 
	`LIBSHARED_PAL_PTI_GET_THREAD_FUNCTION
(*
±i
)–
	`LIBSHARED_PAL_PTI_GET_THREAD_ARGUMENT
(*pti) );

338  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
rv
);

339 
	}
}

348 #if–!
deföed
 
__löux__
 && deföed 
_POSIX_THREADS
 && _POSIX_THREADS > 0 && !deföed 
KERNEL_MODE
 )

350 #ifde‡
LIBSHARED_PAL_THREAD_START


351 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_start.c".

354 
	#LIBSHARED_PAL_THREAD_START


	)

356 
	$libsh¨ed_∑l_thªad_°¨t
–
libsh¨ed_∑l_thªad_h™dÀ_t
 *
thªad_h™dÀ
,

357 
libsh¨ed_∑l_thªad_öfo
 *
±i
 )

360 
rv
 = 0,

361 
rv_¸óã
;

363 
˝u_£t_t


364 
˝u£t
;

366 
±hªad_©å_t


367 
©å
;

369 
	`LFDS711_PAL_ASSERT
–
thªad_h™dÀ
 !
NULL
 );

370 
	`LFDS711_PAL_ASSERT
–
±i
 !
NULL
 );

372 
	`±hªad_©å_öô
–&
©å
 );

374 
	`CPU_ZERO
–&
˝u£t
 );

375 
	`CPU_SET
–
	`LIBSHARED_PAL_PTI_GET_LOGICAL_PROCESSOR_NUMBER
(*
±i
), &
˝u£t
 );

376 
	`±hªad_©å_£èfföôy_≈
–&
©å
, (
˝u£t
), &cpuset );

378 
rv_¸óã
 = 
	`±hªad_¸óã
–
thªad_h™dÀ
, &
©å
, 
	`LIBSHARED_PAL_PTI_GET_THREAD_FUNCTION
(*
±i
), 
	`LIBSHARED_PAL_PTI_GET_THREAD_ARGUMENT
(*pti) );

380 if–
rv_¸óã
 == 0 )

381 
rv
 = 1;

383 
	`±hªad_©å_de°roy
–&
©å
 );

385  
rv
;

386 
	}
}

395 #if–
deföed
 
__löux__
 && deföed 
KERNEL_MODE
 )

397 #ifde‡
LIBSHARED_PAL_THREAD_START


398 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_start.c".

401 
	#LIBSHARED_PAL_THREAD_START


	)

403 
	$libsh¨ed_∑l_thªad_°¨t
–
libsh¨ed_∑l_thªad_h™dÀ_t
 *
thªad_h™dÀ
,

404 
libsh¨ed_∑l_thªad_öfo
 *
±i
 )

406 
	`LFDS711_PAL_ASSERT
–
thªad_h™dÀ
 !
NULL
 );

407 
	`LFDS711_PAL_ASSERT
–
±i
 !
NULL
 );

409 *
thªad_h™dÀ
 = 
	`kthªad_¸óã_⁄_node
–
	`LIBSHARED_PAL_PTI_GET_THREAD_FUNCTION
(*
±i
), 
	`LIBSHARED_PAL_PTI_GET_THREAD_ARGUMENT
(*±i), (Ë
	`LIBSHARED_PAL_PTI_GET_NUMA_NODE_ID
(*pti), "lfds" );

411 
	`kthªad_böd
–*
thªad_h™dÀ
, 
	`LIBSHARED_PAL_PTI_GET_LOGICAL_PROCESSOR_NUMBER
(*
±i
) );

413 
	`wake_up_¥o˚ss
–*
thªad_h™dÀ
 );

416 
	}
}

425 #if–!
deföed
 
LIBSHARED_PAL_THREAD_START
 )

427 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 "libshared_porting_abstraction_layer_thread_start.c".

	@test_and_benchmark/libshared/src/libshared_porting_abstraction_layer/libshared_porting_abstraction_layer_thread_wait.c

2 
	~"libsh¨ed_p‹tög_ab°ø˘i⁄_œyî_öã∫Æ.h
"

9 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 )

11 #ifde‡
LIBSHARED_PAL_THREAD_WAIT


12 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_wait.c".

15 
	#LIBSHARED_PAL_THREAD_WAIT


	)

17 
	$libsh¨ed_∑l_thªad_waô
–
libsh¨ed_∑l_thªad_h™dÀ_t
 
thªad_h™dÀ
 )

21 
	`WaôF‹SögÀObje˘
–
thªad_h™dÀ
, 
INFINITE
 );

24 
	}
}

33 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 )

35 #ifde‡
LIBSHARED_PAL_THREAD_WAIT


36 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_wait.c".

39 
	#LIBSHARED_PAL_THREAD_WAIT


	)

41 
	$libsh¨ed_∑l_thªad_waô
–
libsh¨ed_∑l_thªad_h™dÀ_t
 
thªad_h™dÀ
 )

45 
	`KeWaôF‹SögÀObje˘
–
thªad_h™dÀ
, 
Executive
, 
Kî√lMode
, 
FALSE
, 
NULL
 );

48 
	}
}

57 #if–
deföed
 
_POSIX_THREADS
 && _POSIX_THREADS > 0 && !deföed 
KERNEL_MODE
 )

59 #ifde‡
LIBSHARED_PAL_THREAD_WAIT


60 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_wait.c".

63 
	#LIBSHARED_PAL_THREAD_WAIT


	)

65 
	$libsh¨ed_∑l_thªad_waô
–
libsh¨ed_∑l_thªad_h™dÀ_t
 
thªad_h™dÀ
 )

69 
	`±hªad_joö
–
thªad_h™dÀ
, 
NULL
 );

72 
	}
}

81 #if–
deföed
 
__löux__
 && deföed 
KERNEL_MODE
 )

83 #ifde‡
LIBSHARED_PAL_THREAD_WAIT


84 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libshared_porting_abstraction_layer_thread_wait.c".

87 
	#LIBSHARED_PAL_THREAD_WAIT


	)

89 
	$libsh¨ed_∑l_thªad_waô
–
libsh¨ed_∑l_thªad_h™dÀ_t
 
thªad_h™dÀ
 )

101 
	}
}

110 #if–!
deföed
 
LIBSHARED_PAL_THREAD_WAIT
 )

112 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 "libshared_porting_abstraction_layer_thread_wait.c".

	@test_and_benchmark/libtest/build/wdk_7.1/driver_entry_renamed_to_avoid_compiler_warning.c

1 
	~"libã°_öã∫Æ.h
"

8 
DRIVER_INITIALIZE
 
	gDrivîE¡ry
;

15 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

17 
NTSTATUS
 
	$DrivîE¡ry
–
_DRIVER_OBJECT
 *
DrivîObje˘
, 
PUNICODE_STRING
 
Regi°ryP©h
 )

19  
STATUS_SUCCESS
;

20 
	}
}

22 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/inc/libtest.h

1 #i‚de‡
LIBTEST_H


4 
	#LIBTEST_H


	)

9 
	~"libã°/libã°_p‹tög_ab°ø˘i⁄_œyî_›î©ög_sy°em.h
"

10 
	~"libã°/libã°_p‹tög_ab°ø˘i⁄_œyî_compûî.h
"

13 
	~"../../../liblfds711/öc/liblfds711.h
"

14 
	~"../../libsh¨ed/öc/libsh¨ed.h
"

17 
	~"libã°/libã°_p‹tög_ab°ø˘i⁄_œyî.h
"

18 
	~"libã°/libã°_misc.h
"

19 
	~"libã°/libã°_ã°s.h
"

20 
	~"libã°/libã°_ã°.h
"

21 
	~"libã°/libã°_ªsu…s.h
"

22 
	~"libã°/libã°_ã°suôe.h
"

23 
	~"libã°/libã°_thªad£t.h
"

	@test_and_benchmark/libtest/inc/libtest/libtest_misc.h

2 
	#LIBTEST_MISC_VERSION_STRING
 "7.1.1"

	)

3 
	#LIBTEST_MISC_VERSION_INTEGER
 711

	)

5 
	#LIBTEST_MISC_OFFSETOF
–
°ru˘uª
, 
membî
 ) (
lfds711_∑l_uöt_t
Ë––&–(°ru˘uª *Ë
NULL
 )->membî ) )

	)

8 
	elibã°_misc_dëîmöe_îg_ªsu…


10 
	mLIBTEST_MISC_DETERMINE_ERG_RESULT_SUCCESS
,

11 
	mLIBTEST_MISC_DETERMINE_ERG_RESULT_ONE_PHYSICAL_CORE
,

12 
	mLIBTEST_MISC_DETERMINE_ERG_RESULT_ONE_PHYSICAL_CORE_OR_NO_LLSC
,

13 
	mLIBTEST_MISC_DETERMINE_ERG_RESULT_NO_LLSC
,

14 
	mLIBTEST_MISC_DETERMINE_ERG_RESULT_NOT_SUPPORTED


17 
	elibã°_misc_quîy


19 
	mLIBTEST_MISC_QUERY_GET_BUILD_AND_VERSION_STRING


24 *
libã°_misc_globÆ_vÆidôy_«mes
[];

27 *
libã°_misc_Æig√d_mÆloc
–
lfds711_∑l_uöt_t
 
size
,Üfds711_∑l_uöt_à
Æign_ö_byãs
 );

28 
libã°_misc_Æig√d_‰ì
–*
mem‹y
 );

30 
libã°_misc_dëîmöe_îg
–
libsh¨ed_mem‹y_°©e
 *
ms
,

31 
lfds711_∑l_uöt_t
 (*
cou¡_¨øy
)[10],

32 
libã°_misc_dëîmöe_îg_ªsu…
 *
dî
,

33 
lfds711_∑l_uöt_t
 *
îg_Àngth_ö_byãs
 );

35 
libã°_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_li°_of_logiˇl_¥o˚ss‹s
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

36 
libsh¨ed_mem‹y_°©e
 *
ms
,

37 
lfds711_∑l_uöt_t
 
logiˇl_¥o˚ss‹_numbî
,

38 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
 );

40 
libã°_misc_quîy
–libã°_misc_quîy 
quîy_ty≥
,

41 *
quîy_öput
,

42 *
quîy_ouçut
 );

	@test_and_benchmark/libtest/inc/libtest/libtest_porting_abstraction_layer.h

2 
	#LIBTEST_PAL_SET_LOGICAL_PROCESSOR_NUMBER
–
libã°_logiˇl_¥o˚ss‹
, 
logiˇl_¥o˚ss‹_numbî
 ) (libã°_logiˇl_¥o˚ss‹).logiˇl_¥o˚ss‹_numbî = 
	)
logical_processor_number

3 
	#LIBTEST_PAL_SET_WINDOWS_PROCESSOR_GROUP_NUMBER
–
libã°_logiˇl_¥o˚ss‹
, 
wödows_¥o˚ss‹_group_numbî
 ) (libã°_logiˇl_¥o˚ss‹).wödows_¥o˚ss‹_group_numbî = 
	)
windows_processor_group_number

6 
	slibã°_logiˇl_¥o˚ss‹


8 
lfds711_∑l_uöt_t


9 
	mlogiˇl_¥o˚ss‹_numbî
,

10 
	mwödows_¥o˚ss‹_group_numbî
;

12 
lfds711_li°_asu_ñemít


13 
	mœsue
;

16 
	slibã°_thªad_°©e


18 
libsh¨ed_∑l_thªad_h™dÀ_t


19 
	mthªad_°©e
;

21 
	mlibsh¨ed_∑l_thªad_ªtu∫_t


22 (
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 *
	mthªad_fun˘i⁄
)–*
	mthªad_u£r_°©e
 );

24 
libã°_logiˇl_¥o˚ss‹


25 
	mÕ
;

28 *
	mthªad_u£r_°©e
;

32 
libã°_∑l_gë_fuŒ_logiˇl_¥o˚ss‹_£t
–
lfds711_li°_asu_°©e
 *
œsus
, 
libsh¨ed_mem‹y_°©e
 *
ms
 );

34 *
libã°_∑l_mÆloc
–
lfds711_∑l_uöt_t
 
size
 );

35 
libã°_∑l_‰ì
–*
mem‹y
 );

	@test_and_benchmark/libtest/inc/libtest/libtest_porting_abstraction_layer_compiler.h

2 #if–
deföed
 
__GNUC__
 )

4 #ifde‡
LIBTEST_PAL_COMPILER


5 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_compiler.h".

8 
	#LIBTEST_PAL_COMPILER


	)

10 #if–
deföed
 
__¨m__
 )

12 
	#LIBTEST_PAL_LOAD_LINKED
–
de°ö©i⁄
, 
sour˚
 ) \

14 
__asm__
 
__vﬁ©ûe__
 \

17 : [
Æüs_d°
] "Ù" (
de°ö©i⁄
) \

18 : [
Æüs_§c
] "r" (
sour˚
) \

20 }

	)

23 
	#LIBTEST_PAL_STORE_CONDITIONAL
–
de°ö©i⁄
, 
sour˚
, 
°‹ed_Êag
 ) \

25 
__asm__
 
__vﬁ©ûe__
 \

28 : "=m" (*
de°ö©i⁄
), \

29 [
Æüs_sf
] "=&r" (
°‹ed_Êag
) \

30 : [
Æüs_§c
] "r" (
sour˚
), \

31 [
Æüs_d°
] "r" (
de°ö©i⁄
) \

33 }

	)

43 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 && deföed 
_M_IX86
 )

45 
	#LIBTEST_PAL_PROCESSOR


	)

49 
	#LIBTEST_PAL_STDLIB_CALLBACK_CALLING_CONVENTION
 
__cde˛


	)

58 #if–!
deföed
 
LIBTEST_PAL_PROCESSOR
 )

60 
	#LIBTEST_PAL_STDLIB_CALLBACK_CALLING_CONVENTION


	)

	@test_and_benchmark/libtest/inc/libtest/libtest_porting_abstraction_layer_operating_system.h

2 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && !deföed 
KERNEL_MODE
 )

4 #ifde‡
LIBTEST_PAL_OPERATING_SYSTEM


5 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_operating_system.h".

8 
	#LIBTEST_PAL_OPERATING_SYSTEM


	)

10 
	~<°dlib.h
>

11 
	~<time.h
>

12 
	~<wödows.h
>

14 
	#LIBTEST_PAL_OS_STRING
 "Wödows"

	)

23 #if–
deföed
 
_WIN32
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && deföed 
KERNEL_MODE
 )

25 #ifde‡
LIBTEST_PAL_OPERATING_SYSTEM


26 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_operating_system.h".

29 
	#LIBTEST_PAL_OPERATING_SYSTEM


	)

31 
	~<°dlib.h
>

32 
	~<time.h
>

33 
	~<wdm.h
>

35 
	#LIBTEST_PAL_OS_STRING
 "Wödows"

	)

44 #if–
deföed
 
__löux__
 && !deföed 
KERNEL_MODE
 )

46 #ifde‡
LIBTEST_PAL_OPERATING_SYSTEM


47 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_operating_system.h".

50 
	#LIBTEST_PAL_OPERATING_SYSTEM


	)

52 
	#_GNU_SOURCE


	)

54 
	~<uni°d.h
>

55 
	~<°dio.h
>

56 
	~<°dlib.h
>

57 
	~<time.h
>

59 
	#LIBTEST_PAL_OS_STRING
 "Löux"

	)

68 #if–
deföed
 
__löux__
 && deföed 
KERNEL_MODE
 )

70 #ifde‡
LIBTEST_PAL_OPERATING_SYSTEM


71 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_operating_system.h".

74 
	#LIBTEST_PAL_OPERATING_SYSTEM


	)

76 #îr‹ 
libã°
 
nŸ
 
quôe
 
yë
 
ªady
 
Löux
 
kî√l
 - 
ô
 
u£s
 
time
(Ë
Æl
 
ovî
 
the
 
∂a˚


78 
	#LIBTEST_PAL_OS_STRING
 "Löux"

	)

87 #if–!
deföed
 
LIBTEST_PAL_OPERATING_SYSTEM
 )

89 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 "libtest_porting_abstraction_layer_operating_system.h".

	@test_and_benchmark/libtest/inc/libtest/libtest_results.h

6 
	slibã°_ªsu…s_°©e


8 
lfds711_misc_vÆidôy


9 
	mdvs
[
LIBTEST_TEST_ID_COUNT
];

13 
libã°_ªsu…s_öô
–
libã°_ªsu…s_°©e
 *
rs
 );

14 
libã°_ªsu…s_˛ónup
–
libã°_ªsu…s_°©e
 *
rs
 );

16 
libã°_ªsu…s_put_ªsu…
–
libã°_ªsu…s_°©e
 *
rs
,

17 
libã°_ã°_id
 
ã°_id
,

18 
lfds711_misc_vÆidôy
 
ªsu…
 );

19 
libã°_ªsu…s_gë_ªsu…
–
libã°_ªsu…s_°©e
 *
rs
,

20 
libã°_ã°_id
 
ã°_id
,

21 
lfds711_misc_vÆidôy
 *
ªsu…
 );

	@test_and_benchmark/libtest/inc/libtest/libtest_test.h

4 
	slibã°_ã°_°©e


7 *
	m«me
;

9 
libã°_ã°_id


10 
	mã°_id
;

13 (*
	mã°_fun˘i⁄
)–
lfds711_li°_asu_°©e
 *
	mli°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
	mms
, 
lfds711_misc_vÆidôy
 *
	mdvs
 );

17 
libã°_ã°_öô
–
libã°_ã°_°©e
 *
ts
,

18 *
«me
,

19 
libã°_ã°_id
 
ã°_id
,

20 (*
ã°_fun˘i⁄
)(
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
) );

22 
	`libã°_ã°_˛ónup
–
libã°_ã°_°©e
 *
ts
 );

24 
	`libã°_ã°_run
–
libã°_ã°_°©e
 *
ts
,

25 
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

26 
libsh¨ed_mem‹y_°©e
 *
ms
,

27 
lfds711_misc_vÆidôy
 *
dvs
 );

	@test_and_benchmark/libtest/inc/libtest/libtest_tests.h

2 
	elibã°_ã°_id


4 
	mLIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_ADD
,

5 
	mLIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_CAS
,

6 
	mLIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_DCAS
,

7 
	mLIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_EXCHANGE
,

9 
	mLIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_ALIGNMENT
,

10 
	mLIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_FAIL
,

11 
	mLIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_FAIL_AND_OVERWRITE
,

12 
	mLIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_OVERWRITE
,

14 
	mLIBTEST_TEST_ID_FREELIST_ALIGNMENT
,

15 
	mLIBTEST_TEST_ID_FREELIST_EA_POPPING
,

16 
	mLIBTEST_TEST_ID_FREELIST_EA_POPPING_AND_PUSHING
,

17 
	mLIBTEST_TEST_ID_FREELIST_EA_PUSHING
,

18 
	mLIBTEST_TEST_ID_FREELIST_EA_RAPID_POPPING_AND_PUSHING
,

19 
	mLIBTEST_TEST_ID_FREELIST_WITHOUT_EA_POPPING
,

20 
	mLIBTEST_TEST_ID_FREELIST_WITHOUT_EA_POPPING_AND_PUSHING
,

21 
	mLIBTEST_TEST_ID_FREELIST_WITHOUT_EA_PUSHING
,

22 
	mLIBTEST_TEST_ID_FREELIST_WITHOUT_EA_RAPID_POPPING_AND_PUSHING
,

24 
	mLIBTEST_TEST_ID_HASH_ADDONLY_ALIGNMENT
,

25 
	mLIBTEST_TEST_ID_HASH_ADDONLY_FAIL_AND_OVERWRITE
,

26 
	mLIBTEST_TEST_ID_HASH_ADDONLY_RANDOM_ADDS_FAIL
,

27 
	mLIBTEST_TEST_ID_HASH_ADDONLY_RANDOM_ADDS_OVERWRITE
,

28 
	mLIBTEST_TEST_ID_HASH_ADDONLY_ITERATE
,

30 
	mLIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_ALIGNMENT
,

31 
	mLIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_NEW_ORDERED
,

32 
	mLIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_NEW_ORDERED_WITH_CURSOR
,

34 
	mLIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_ALIGNMENT
,

35 
	mLIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_START
,

36 
	mLIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_END
,

37 
	mLIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_AFTER
,

39 
	mLIBTEST_TEST_ID_PRNG_ALIGNMENT
,

40 
	mLIBTEST_TEST_ID_PRNG_GENERATE
,

42 
	mLIBTEST_TEST_ID_QUEUE_UMM_ALIGNMENT
,

43 
	mLIBTEST_TEST_ID_QUEUE_UMM_DEQUEUING
,

44 
	mLIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING
,

45 
	mLIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING_AND_DEQUEUING
,

46 
	mLIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING_AND_DEQUEUING_ONE_ELEMENT
,

47 
	mLIBTEST_TEST_ID_QUEUE_UMM_RAPID_ENQUEUING_AND_DEQUEUING
,

49 
	mLIBTEST_TEST_ID_QUEUE_BMM_ALIGNMENT
,

50 
	mLIBTEST_TEST_ID_QUEUE_BMM_COUNT
,

51 
	mLIBTEST_TEST_ID_QUEUE_BMM_ENQUEUING
,

52 
	mLIBTEST_TEST_ID_QUEUE_BMM_DEQUEUING
,

53 
	mLIBTEST_TEST_ID_QUEUE_BMM_ENQUEUING_AND_DEQUEUING
,

54 
	mLIBTEST_TEST_ID_QUEUE_BMM_RAPID_ENQUEUING_AND_DEQUEUING
,

56 
	mLIBTEST_TEST_ID_QUEUE_BSS_DEQUEUING
,

57 
	mLIBTEST_TEST_ID_QUEUE_BSS_ENQUEUING
,

58 
	mLIBTEST_TEST_ID_QUEUE_BSS_ENQUEUING_AND_DEQUEUING
,

60 
	mLIBTEST_TEST_ID_RINGBUFFER_READING
,

61 
	mLIBTEST_TEST_ID_RINGBUFFER_WRITING
,

62 
	mLIBTEST_TEST_ID_RINGBUFFER_READING_AND_WRITING
,

64 
	mLIBTEST_TEST_ID_STACK_ALIGNMENT
,

65 
	mLIBTEST_TEST_ID_STACK_POPPING
,

66 
	mLIBTEST_TEST_ID_STACK_POPPING_AND_PUSHING
,

67 
	mLIBTEST_TEST_ID_STACK_PUSHING
,

68 
	mLIBTEST_TEST_ID_STACK_RAPID_POPPING_AND_PUSHING
,

70 
	mLIBTEST_TEST_ID_COUNT


74 
libã°_ã°s_båì_au_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

75 
libã°_ã°s_båì_au_øndom_adds_Áû_⁄_exi°ög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

76 
libã°_ã°s_båì_au_øndom_adds_ovîwrôe_⁄_exi°ög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

77 
libã°_ã°s_båì_au_Áû_™d_ovîwrôe_⁄_exi°ög_key
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

79 
libã°_ã°s_‰ìli°_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

80 
libã°_ã°s_‰ìli°_ó_p›pög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

81 
libã°_ã°s_‰ìli°_ó_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

82 
libã°_ã°s_‰ìli°_ó_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

83 
libã°_ã°s_‰ìli°_ó_øpid_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

84 
libã°_ã°s_‰ìli°_wôhout_ó_p›pög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

85 
libã°_ã°s_‰ìli°_wôhout_ó_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

86 
libã°_ã°s_‰ìli°_wôhout_ó_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

87 
libã°_ã°s_‰ìli°_wôhout_ó_øpid_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

89 
libã°_ã°s_hash_a_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

90 
libã°_ã°s_hash_a_Áû_™d_ovîwrôe_⁄_exi°ög_key
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

91 
libã°_ã°s_hash_a_øndom_adds_Áû_⁄_exi°ög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

92 
libã°_ã°s_hash_a_øndom_adds_ovîwrôe_⁄_exi°ög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

93 
libã°_ã°s_hash_a_ôî©e
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

95 
libã°_ã°s_li°_aso_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

96 
libã°_ã°s_li°_aso_√w_‹dîed
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

97 
libã°_ã°s_li°_aso_√w_‹dîed_wôh_curs‹
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

99 
libã°_ã°s_li°_asu_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

100 
libã°_ã°s_li°_asu_√w_°¨t
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

101 
libã°_ã°s_li°_asu_√w_a·î
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

102 
libã°_ã°s_li°_asu_√w_íd
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

104 
libã°_ã°s_∑l_©omic_add
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

105 
libã°_ã°s_∑l_©omic_ˇs
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

106 
libã°_ã°s_∑l_©omic_dwˇs
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

107 
libã°_ã°s_∑l_©omic_exch™ge
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

109 
libã°_ã°s_¥ng_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

110 
libã°_ã°s_¥ng_gíî©e
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

112 
libã°_ã°s_queue_bmm_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

113 
libã°_ã°s_queue_bmm_cou¡
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

114 
libã°_ã°s_queue_bmm_íqueuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

115 
libã°_ã°s_queue_bmm_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

116 
libã°_ã°s_queue_bmm_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

117 
libã°_ã°s_queue_bmm_øpid_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

119 
libã°_ã°s_queue_bss_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

120 
libã°_ã°s_queue_bss_íqueuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

121 
libã°_ã°s_queue_bss_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

123 
libã°_ã°s_queue_umm_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

124 
libã°_ã°s_queue_umm_íqueuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

125 
libã°_ã°s_queue_umm_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

126 
libã°_ã°s_queue_umm_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

127 
libã°_ã°s_queue_umm_íqueuög_™d_dequeuög_⁄e_ñemít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

128 
libã°_ã°s_queue_umm_øpid_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

130 
libã°_ã°s_rögbuf„r_ªadög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

131 
libã°_ã°s_rögbuf„r_wrôög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

132 
libã°_ã°s_rögbuf„r_ªadög_™d_wrôög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

134 
libã°_ã°s_°ack_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

135 
libã°_ã°s_°ack_p›pög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

136 
libã°_ã°s_°ack_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

137 
libã°_ã°s_°ack_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

138 
libã°_ã°s_°ack_øpid_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 );

	@test_and_benchmark/libtest/inc/libtest/libtest_testsuite.h

6 
	slibã°_ã°suôe_°©e


8 
Êag


9 
	mã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_COUNT
];

11 
lfds711_li°_asu_°©e


12 
	mli°_of_logiˇl_¥o˚ss‹s
;

14 
libsh¨ed_mem‹y_°©e


15 *
	mms
;

17 
libã°_ã°_°©e


18 
	mã°s
[
LIBTEST_TEST_ID_COUNT
];

21 (*
	mˇŒback_ã°_°¨t
)–*
	mã°_«me
 ),

22 (*
	mˇŒback_ã°_föish
)–*
	mªsu…
 );

26 
libã°_ã°suôe_öô
–
libã°_ã°suôe_°©e
 *
ts
,

27 
libsh¨ed_mem‹y_°©e
 *
ms
,

28 (*
ˇŒback_ã°_°¨t
)(*
ã°_«me
),

29 (*
ˇŒback_ã°_föish
)(*
ªsu…
) );

30 
	`libã°_ã°suôe_˛ónup
–
libã°_ã°suôe_°©e
 *
ts
 );

32 
	`libã°_ã°suôe_run
–
libã°_ã°suôe_°©e
 *
ts
,

33 
libã°_ªsu…s_°©e
 *
rs
 );

	@test_and_benchmark/libtest/inc/libtest/libtest_threadset.h

2 
	#LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–
libã°_thªad£t_≥r_thªad_°©e
 ) (libã°_thªad£t_≥r_thªad_°©e).
u£r_°©e


	)

3 
	#LIBTEST_THREADSET_SET_USER_STATE
–
libã°_thªadã°_°©e
, 
u£r°©e
 ) (libã°_thªadã°_°©e).
u£r_°©e
 = 
	)
userstate

6 
	slibã°_thªad£t_≥r_thªad_°©e


8 
Êag
 volatile

9 
	mthªad_ªady_Êag
,

10 *
	mthªad£t_°¨t_Êag
;

12 
libsh¨ed_∑l_thªad_h™dÀ_t


13 
	mthªad_h™dÀ
;

15 
lfds711_li°_asu_ñemít


16 
	mœsue
;

18 
libsh¨ed_∑l_thªad_öfo


19 
	m±i
;

21 
libã°_thªad£t_°©e


22 *
	mts
;

25 *
	mu£r_°©e
;

28 
	slibã°_thªad£t_°©e


30 
Êag
 volatile

31 
	mthªad£t_°¨t_Êag
;

33 
lfds711_li°_asu_°©e


34 
	mli°_of_≥r_thªad_°©es
;

36 
libsh¨ed_mem‹y_°©e


37 *
	mms
;

40 *
	mu£r_°©e
;

44 
libã°_thªad£t_öô
–
libã°_thªad£t_°©e
 *
ts
,

45 *
u£r_°©e
 );

46 
libã°_thªad£t_˛ónup
–
libã°_thªad£t_°©e
 *
ts
 );

48 
libã°_thªad£t_add_thªad
–
libã°_thªad£t_°©e
 *
ts
,

49 
libã°_thªad£t_≥r_thªad_°©e
 *
±s
,

50 
libã°_logiˇl_¥o˚ss‹
 *
Õ
,

51 
	$libsh¨ed_∑l_thªad_ªtu∫_t
 (
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 *
thªad_fun˘i⁄
)–*
thªad_u£r_°©e
 ),

52 *
u£r_°©e
 );

54 
	`libã°_thªad£t_run
–
libã°_thªad£t_°©e
 *
ts
 );

55 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
libã°_thªad£t_≥r_thªad_°©e
 *
±s
 );

	@test_and_benchmark/libtest/src/libtest_internal.h

2 
	~"../öc/libã°.h
"

5 
	#™d
 &&

	)

6 
	#‹
 ||

	)

8 
	#NO_FLAGS
 0x0

	)

10 
	#RETURN_SUCCESS
 0

	)

11 
	#RETURN_FAILURE
 1

	)

13 
	#BITS_PER_BYTE
 8

	)

15 
	#LIBTEST_VERSION_STRING
 "7.1.1"

	)

16 
	#LIBTEST_VERSION_INTEGER
 711

	)

18 #if–
deföed
 
KERNEL_MODE
 )

19 
	#MODE_TYPE_STRING
 "kî√l-mode"

	)

22 #if–!
deföed
 
KERNEL_MODE
 )

23 
	#MODE_TYPE_STRING
 "u£r-mode"

	)

26 #if–
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

27 
	#BUILD_TYPE_STRING
 "ªÀa£"

	)

30 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

31 
	#BUILD_TYPE_STRING
 "debug"

	)

34 #if–!
deföed
 
NDEBUG
 && deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

35 
	#BUILD_TYPE_STRING
 "covîage"

	)

38 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && deföed 
TSAN
 && !deföed 
PROF
 )

39 
	#BUILD_TYPE_STRING
 "thªadßnôizî"

	)

42 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && deföed 
PROF
 )

43 
	#BUILD_TYPE_STRING
 "¥ofûög"

	)

	@test_and_benchmark/libtest/src/libtest_misc/libtest_misc_determine_erg.c

2 
	~"libã°_misc_öã∫Æ.h
"

5 
	#MAX_ARM_ERG_LENGTH_IN_BYTES
 2048

	)

10 #if–
deföed
 
LIBTEST_PAL_LOAD_LINKED
 && deföed 
LIBTEST_PAL_STORE_CONDITIONAL
 )

13 
	sîg_dúe˘‹_°©e


15 
Êag
 volatile

16 
	mquô_Êag
;

18 
	mlfds711_∑l_uöt_t


19 (*
	mcou¡_¨øy
)[10],

20 
	mnumbî_thªads
;

22 
lfds711_∑l_uöt_t
 volatile

23 **
	mack_poöãr_¨øy
,

24 (*
	mmem‹y_poöãr
)[ (
MAX_ARM_ERG_LENGTH_IN_BYTES
+(
lfds711_∑l_uöt_t
)) / (lfds711_pal_uint_t)],

25 *
	mwrôe_poöãr
;

28 
	sîg_hñ≥r_°©e


30 
Êag
 volatile

31 *
	mquô_Êag
;

33 
lfds711_∑l_uöt_t
 volatile

34 **
	mack_poöãr
,

35 **
	mwrôe_poöãr
;

37 
lfds711_∑l_uöt_t


38 
	mthªad_numbî
;

41 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_îg_dúe˘‹
–*
libã°_thªad£t_≥r_thªad_°©e
 );

42 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_îg_hñ≥r
–*
libã°_thªad£t_≥r_thªad_°©e
 );

45 
libã°_misc_dëîmöe_îg
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 (*
cou¡_¨øy
)[10], 
libã°_misc_dëîmöe_îg_ªsu…
 *
dî
,Üfds711_∑l_uöt_à*
îg_Àngth_ö_byãs
 )

47 
lfds711_∑l_uöt_t


48 
	gîg_size
 = 10,

49 
	glo›
 = 0,

50 
	gnumbî_logiˇl_¥o˚ss‹s
;

52 
lfds711_∑l_uöt_t
 vﬁ©ûê
LFDS711_PAL_ALIGN
–
MAX_ARM_ERG_LENGTH_IN_BYTES
 )

53 
	gmem‹y
[ (
MAX_ARM_ERG_LENGTH_IN_BYTES
+(
lfds711_∑l_uöt_t
)) / (lfds711_pal_uint_t)];

55 
îg_dúe˘‹_°©e


56 *
	geds
;

58 
îg_hñ≥r_°©e


59 *
	gehs_¨øy
;

61 
lfds711_li°_asu_ñemít


62 *
	gœsue
 = 
NULL
;

64 
lfds711_li°_asu_°©e


65 
	gli°_of_logiˇl_¥o˚ss‹s
;

67 
libã°_logiˇl_¥o˚ss‹


68 *
	gÕ
;

70 
libã°_thªad£t_≥r_thªad_°©e


71 *
	g±s
;

73 
libã°_thªad£t_°©e


74 
	gts
;

76 
LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

77 
LFDS711_PAL_ASSERT
–
cou¡_¨øy
 !
NULL
 );

78 
LFDS711_PAL_ASSERT
–
dî
 !
NULL
 );

79 
LFDS711_PAL_ASSERT
–
îg_Àngth_ö_byãs
 !
NULL
 );

97  
	glo›
 = 0 ;Üoop < 10 ;Üoop++ )

98 (*
	gcou¡_¨øy
)[
lo›
] = 0;

100 
libã°_∑l_gë_fuŒ_logiˇl_¥o˚ss‹_£t
–&
li°_of_logiˇl_¥o˚ss‹s
, 
ms
 );

102 
lfds711_li°_asu_quîy
–&
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

104 if–
	gnumbî_logiˇl_¥o˚ss‹s
 == 1 )

106 *
dî
 = 
LIBTEST_MISC_DETERMINE_ERG_RESULT_ONE_PHYSICAL_CORE
;

110 
	g±s
 = 
libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

112 
	gehs_¨øy
 = 
libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
îg_hñ≥r_°©e
Ë* (
numbî_logiˇl_¥o˚ss‹s
-1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

113 
	geds
 = 
libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
îg_dúe˘‹_°©e
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

114 
	geds
->
	gack_poöãr_¨øy
 = 
libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
 *Ë* (
numbî_logiˇl_¥o˚ss‹s
-1), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

116 
	geds
->
	gquô_Êag
 = 
LOWERED
;

117 
	geds
->
	gcou¡_¨øy
 = 
cou¡_¨øy
;

118 
	geds
->
	gnumbî_thªads
 = 
numbî_logiˇl_¥o˚ss‹s
 - 1;

119 
	geds
->
	gwrôe_poöãr
 = 
NULL
;

120 
	geds
->
	gmem‹y_poöãr
 = &
mem‹y
;

121  
	glo›
 = 0 ;Üo› < (
	gnumbî_logiˇl_¥o˚ss‹s
-1) ;Üoop++ )

122 
	geds
->
	gack_poöãr_¨øy
[
lo›
] = 
NULL
;

124 
libã°_thªad£t_öô
–&
ts
, 
NULL
 );

126 
	glo›
 = 0;

128  
LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

130 
	gÕ
 = 
LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

132 if–
	glo›
 =
numbî_logiˇl_¥o˚ss‹s
-1 )

133 
libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_îg_dúe˘‹
, (*Ë
eds
 );

136 
	gehs_¨øy
[
lo›
].
	gquô_Êag
 = &
eds
->
quô_Êag
;

137 
	gehs_¨øy
[
lo›
].
	gthªad_numbî
 =Üoop;

138 
	gehs_¨øy
[
lo›
].
	gack_poöãr
 = &
eds
->
ack_poöãr_¨øy
[loop];

139 
	gehs_¨øy
[
lo›
].
	gwrôe_poöãr
 = &
eds
->
wrôe_poöãr
;

140 
libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_îg_hñ≥r
, (*Ë&
ehs_¨øy
[loop] );

143 
	glo›
++;

146 
	gLFDS711_MISC_BARRIER_STORE
;

147 
lfds711_misc_f‹˚_°‹e
();

149 
libã°_thªad£t_run
–&
ts
 );

151 
libã°_thªad£t_˛ónup
–&
ts
 );

153  
	glo›
 = 0 ;Üoop < 10 ;Üoop++ )

154 if–
	gcou¡_¨øy
[
lo›
] > 0 )

155 
	gîg_size
 = 
lo›
;

157 if–
	gîg_size
 == 0 )

158 *
dî
 = 
LIBTEST_MISC_DETERMINE_ERG_RESULT_ONE_PHYSICAL_CORE_OR_NO_LLSC
;

160 if–
	gîg_size
 >1 
™d
 
îg_size
 <= 9 )

162 *
dî
 = 
LIBTEST_MISC_DETERMINE_ERG_RESULT_SUCCESS
;

163 *
	gîg_Àngth_ö_byãs
 = 1UL < (
îg_size
+2);

166 if–
	gîg_size
 == 10 )

167 *
dî
 = 
LIBTEST_MISC_DETERMINE_ERG_RESULT_NO_LLSC
;

173 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_îg_dúe˘‹
–*
libã°_thªad£t_≥r_thªad_°©e
 )

175 
lfds711_∑l_uöt_t


176 
ack_cou¡
,

177 
cou¡_ödex
,

178 
îg_Àngth_ö_byãs
,

179 
lo›
,

180 
ªgi°î_mem‹y_zîo
,

181 
°‹ed_Êag
,

182 
sublo›
;

184 
îg_dúe˘‹_°©e


185 *
eds
;

187 
libã°_thªad£t_≥r_thªad_°©e


188 *
±s
;

190 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

192 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

194 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

196 
eds
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

198 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

200  
lo›
 = 0 ;Üoop < 1024 ;Üoop++ )

201  
îg_Àngth_ö_byãs
 = 
MAX_ARM_ERG_LENGTH_IN_BYTES
, 
cou¡_ödex
 = 9 ;Érg_length_in_bytes >= 4 ;Érg_length_in_bytes /= 2, count_index-- )

203 
	`LIBTEST_PAL_LOAD_LINKED
–
ªgi°î_mem‹y_zîo
, &(*
eds
->
mem‹y_poöãr
)[0] );

205 
eds
->
wrôe_poöãr
 = &(*eds->
mem‹y_poöãr
)[
îg_Àngth_ö_byãs
 / (
lfds711_∑l_uöt_t
)];

210 
ack_cou¡
 = 0;

212  
sublo›
 = 0 ; sublo› < 
eds
->
numbî_thªads
 ; subloop++ )

213 if–
eds
->
ack_poöãr_¨øy
[
sublo›
] =eds->
wrôe_poöãr
 )

215 
LFDS711_MISC_BARRIER_LOAD
;

216 
ack_cou¡
++;

219  
ack_cou¡
 !
eds
->
numbî_thªads
 );

221 
	`LIBTEST_PAL_STORE_CONDITIONAL
–&(*
eds
->
mem‹y_poöãr
)[0], 
ªgi°î_mem‹y_zîo
, 
°‹ed_Êag
 );

223 if–
°‹ed_Êag
 == 0 )

224 (*
eds
->
cou¡_¨øy
)[
cou¡_ödex
]++;

227 
eds
->
quô_Êag
 = 
RAISED
;

229 
LFDS711_MISC_BARRIER_STORE
;

230 
	`lfds711_misc_f‹˚_°‹e
();

232  (
libsh¨ed_∑l_thªad_ªtu∫_t
Ë
RETURN_SUCCESS
;

233 
	}
}

236 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_îg_hñ≥r
–*
libã°_thªad£t_≥r_thªad_°©e
 )

238 
îg_hñ≥r_°©e


239 *
ehs
;

241 
libã°_thªad£t_≥r_thªad_°©e


242 *
±s
;

244 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

246 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

248 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

250 
ehs
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

252 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

254  *
ehs
->
quô_Êag
 =
LOWERED
 )

256 if–*
ehs
->
wrôe_poöãr
 !
NULL
 )

257 **
ehs
->
wrôe_poöãr
 =Éhs->
thªad_numbî
;

258 
LFDS711_MISC_BARRIER_STORE
;

259 *
ehs
->
ack_poöãr
 = *ehs->
wrôe_poöãr
;

262 
LFDS711_MISC_BARRIER_STORE
;

263 
	`lfds711_misc_f‹˚_°‹e
();

265  (
libsh¨ed_∑l_thªad_ªtu∫_t
Ë
RETURN_SUCCESS
;

266 
	}
}

275 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

277 #if–!
deföed
 
LIBTEST_PAL_LOAD_LINKED
 || !deföed 
LIBTEST_PAL_STORE_CONDITIONAL
 )

279 
libã°_misc_dëîmöe_îg
–
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_∑l_uöt_t
 (*
cou¡_¨øy
)[10], 
libã°_misc_dëîmöe_îg_ªsu…
 *
dî
,Üfds711_∑l_uöt_à*
îg_Àngth_ö_byãs
 )

281 
lfds711_∑l_uöt_t


282 
	glo›
;

284 
LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

285 
LFDS711_PAL_ASSERT
–
cou¡_¨øy
 !
NULL
 );

286 
LFDS711_PAL_ASSERT
–
dî
 !
NULL
 );

287 
LFDS711_PAL_ASSERT
–
îg_Àngth_ö_byãs
 !
NULL
 );

289  
	glo›
 = 0 ;Üoop < 10 ;Üoop++ )

290 (*
	gcou¡_¨øy
)[
lo›
] = 0;

292 *
	gdî
 = 
LIBTEST_MISC_DETERMINE_ERG_RESULT_NOT_SUPPORTED
;

299 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_misc/libtest_misc_globals.c

2 
	~"libã°_misc_öã∫Æ.h
"

10 *
	glibã°_misc_globÆ_vÆidôy_«mes
[] =

	@test_and_benchmark/libtest/src/libtest_misc/libtest_misc_internal.h

2 
	~"../libã°_öã∫Æ.h
"

	@test_and_benchmark/libtest/src/libtest_misc/libtest_misc_memory_helpers.c

2 
	~"libã°_misc_öã∫Æ.h
"

9 *
	$libã°_misc_Æig√d_mÆloc
–
lfds711_∑l_uöt_t
 
size
,Üfds711_∑l_uöt_à
Æign_ö_byãs
 )

11 
lfds711_∑l_uöt_t


12 
off£t
;

15 *
mem‹y
,

16 *
‹igöÆ_mem‹y
;

25 
‹igöÆ_mem‹y
 = 
mem‹y
 = 
	`libã°_∑l_mÆloc
–
size
 + (*Ë+ 
Æign_ö_byãs
 );

27 if–
mem‹y
 !
NULL
 )

29 
mem‹y
 = (**) memory + 1;

30 
off£t
 = 
Æign_ö_byãs
 - (
lfds711_∑l_uöt_t
Ë
mem‹y
 %álign_in_bytes;

31 
mem‹y
 = (*Ëmem‹y + 
off£t
;

32 *–(**Ë
mem‹y
 - 1 ) = 
‹igöÆ_mem‹y
;

35  
mem‹y
;

36 
	}
}

43 
	$libã°_misc_Æig√d_‰ì
–*
mem‹y
 )

45 
	`LFDS711_PAL_ASSERT
–
mem‹y
 !
NULL
 );

48 
	`libã°_∑l_‰ì
–*–(**Ë
mem‹y
 - 1 ) );

51 
	}
}

	@test_and_benchmark/libtest/src/libtest_misc/libtest_misc_pal_helpers.c

2 
	~"libã°_misc_öã∫Æ.h
"

9 
	$libã°_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_li°_of_logiˇl_¥o˚ss‹s
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

10 
libsh¨ed_mem‹y_°©e
 *
ms
,

11 
lfds711_∑l_uöt_t
 
logiˇl_¥o˚ss‹_numbî
,

12 
lfds711_∑l_uöt_t
 
wödows_¥o˚ss‹_group_numbî
 )

14 
libã°_logiˇl_¥o˚ss‹


15 *
Õ
;

17 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

18 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
Õ
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, (
libã°_logiˇl_¥o˚ss‹
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

24 
	`LIBTEST_PAL_SET_LOGICAL_PROCESSOR_NUMBER
–*
Õ
, 
logiˇl_¥o˚ss‹_numbî
 );

25 
	`LIBTEST_PAL_SET_WINDOWS_PROCESSOR_GROUP_NUMBER
–*
Õ
, 
wödows_¥o˚ss‹_group_numbî
 );

27 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
Õ
->
œsue
,Üp );

28 
	`lfds711_li°_asu_ö£π_©_°¨t
–
li°_of_logiˇl_¥o˚ss‹s
, &
Õ
->
œsue
 );

31 
	}
}

	@test_and_benchmark/libtest/src/libtest_misc/libtest_misc_query.c

2 
	~"libã°_misc_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libã°_misc_quîy
–
libã°_misc_quîy
 
quîy_ty≥
, *
quîy_öput
, *
quîy_ouçut
 )

17  
quîy_ty≥
 )

19 
LIBTEST_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
:

22 * c⁄° 
buûd_™d_vîsi⁄_°rög
 = "libã° " 
LIBTEST_MISC_VERSION_STRING
 " (" 
BUILD_TYPE_STRING
 ", " 
LIBTEST_PAL_OS_STRING
 ", " 
MODE_TYPE_STRING
 ")";

24 
	`LFDS711_PAL_ASSERT
–
quîy_öput
 =
NULL
 );

25 
	`LFDS711_PAL_ASSERT
–
quîy_ouçut
 !
NULL
 );

27 *(c⁄° **Ë
quîy_ouçut
 = 
buûd_™d_vîsi⁄_°rög
;

33 
	}
}

35 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_porting_abstraction_layer/libtest_porting_abstraction_layer_free.c

2 
	~"libã°_p‹tög_ab°ø˘i⁄_œyî_öã∫Æ.h
"

17 #if–
deföed
 
_MSC_VER
 )

25 
	#__STDC__
 1

	)

26 
	#__STDC_HOSTED__
 1

	)

34 #if–
deföed
 
__STDC__
 && deföed 
__STDC_HOSTED__
 && __STDC_HOSTED__ =1 && !deföed 
KERNEL_MODE
 )

36 #ifde‡
LIBTEST_PAL_FREE


37 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_free.c".

40 
	#LIBTEST_PAL_FREE


	)

42 
	$libã°_∑l_‰ì
–*
mem‹y
 )

44 
	`LFDS711_PAL_ASSERT
–
mem‹y
 !
NULL
 );

46 
	`‰ì
–
mem‹y
 );

49 
	}
}

58 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 )

60 #ifde‡
LIBTEST_PAL_FREE


61 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_free.c".

64 
	#LIBTEST_PAL_FREE


	)

66 
	$libã°_∑l_‰ì
–*
mem‹y
 )

68 
	`LFDS711_PAL_ASSERT
–
mem‹y
 !
NULL
 );

70 
	`ExFªePoﬁWôhTag
–
mem‹y
, 'sdfl' );

73 
	}
}

82 #if–
deföed
 
__löux__
 && deföed 
KERNEL_MODE
 )

84 #ifde‡
LIBTEST_PAL_FREE


85 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_free.c".

88 
	#LIBTEST_PAL_FREE


	)

90 
	$libã°_∑l_‰ì
–*
mem‹y
 )

92 
	`LFDS711_PAL_ASSERT
–
mem‹y
 !
NULL
 );

94 
	`v‰ì
–
mem‹y
 );

97 
	}
}

106 #if–!
deföed
 
LIBTEST_PAL_FREE
 )

108 
	$libã°_∑l_‰ì
–*
mem‹y
 )

110 
	`LFDS711_PAL_ASSERT
–
mem‹y
 !
NULL
 );

113 
	}
}

	@test_and_benchmark/libtest/src/libtest_porting_abstraction_layer/libtest_porting_abstraction_layer_get_full_logical_processor_set.c

2 
	~"libã°_p‹tög_ab°ø˘i⁄_œyî_öã∫Æ.h
"

9 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WIN7
 )

11 #ifde‡
LIBTEST_PAL_GET_LOGICAL_CORE_IDS


12 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_get_full_logical_processor_set.c".

15 
	#LIBTEST_PAL_GET_LOGICAL_CORE_IDS


	)

17 
	$libã°_∑l_gë_fuŒ_logiˇl_¥o˚ss‹_£t
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

18 
libsh¨ed_mem‹y_°©e
 *
ms
 )

20 
BOOL


21 
rv
;

23 
DWORD


24 
off£t
 = 0,

25 
¶põ_Àngth
 = 0;

27 
lfds711_∑l_uöt_t


28 
bômask
,

29 
logiˇl_¥o˚ss‹_numbî
,

30 
wödows_¥o˚ss‹_group_numbî
;

32 
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX


33 *
¶põ
,

34 *
¶põ_buf„r
 = 
NULL
;

36 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

37 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

39 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
li°_of_logiˇl_¥o˚ss‹s
, 
NULL
 );

41 
rv
 = 
	`GëLogiˇlPro˚ss‹Inf‹m©i⁄Ex
–
Rñ©i⁄Group
, 
¶põ_buf„r
, &
¶põ_Àngth
 );

42 
¶põ_buf„r
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, 
¶põ_Àngth
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

43 
rv
 = 
	`GëLogiˇlPro˚ss‹Inf‹m©i⁄Ex
–
Rñ©i⁄Group
, 
¶põ_buf„r
, &
¶põ_Àngth
 );

45  
off£t
 < 
¶põ_Àngth
 )

47 
¶põ
 = (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
 *Ë–(*Ë
¶põ_buf„r
 + 
off£t
 );

49 
off£t
 +
¶põ
->
Size
;

51 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄Group
 )

52  
wödows_¥o˚ss‹_group_numbî
 = 0 ; wödows_¥o˚ss‹_group_numbî < 
¶põ
->
Group
.
A˘iveGroupCou¡
 ; windows_processor_group_number++ )

53  
logiˇl_¥o˚ss‹_numbî
 = 0 ;Üogiˇl_¥o˚ss‹_numbî < (
KAFFINITY
Ë* 
BITS_PER_BYTE
 ;Üogical_processor_number++ )

55 
bômask
 = (
lfds711_∑l_uöt_t
Ë1 << 
logiˇl_¥o˚ss‹_numbî
;

58 if–
¶põ
->
Group
.
GroupInfo
[
wödows_¥o˚ss‹_group_numbî
].
A˘ivePro˚ss‹Mask
 & 
bômask
 )

59 
	`libã°_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_li°_of_logiˇl_¥o˚ss‹s
–
li°_of_logiˇl_¥o˚ss‹s
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 
wödows_¥o˚ss‹_group_numbî
 );

64 
	}
}

73 #if–
deföed
 
_WIN32
 && !deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && NTDDI_VERSION < 
NTDDI_WIN7
 )

75 #ifde‡
LIBTEST_PAL_GET_LOGICAL_CORE_IDS


76 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_get_full_logical_processor_set.c".

79 
	#LIBTEST_PAL_GET_LOGICAL_CORE_IDS


	)

81 
	$libã°_∑l_gë_fuŒ_logiˇl_¥o˚ss‹_£t
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

82 
libsh¨ed_mem‹y_°©e
 *
ms
 )

84 
DWORD


85 
¶pi_Àngth
 = 0;

87 
lfds711_∑l_uöt_t


88 
numbî_¶pi
,

89 
lo›
;

91 
SYSTEM_LOGICAL_PROCESSOR_INFORMATION


92 *
¶pi
 = 
NULL
;

94 
ULONG_PTR


95 
mask
;

97 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

98 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

100 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
li°_of_logiˇl_¥o˚ss‹s
, 
NULL
, NULL );

102 *
numbî_logiˇl_¥o˚ss‹s
 = 0;

104 
	`GëLogiˇlPro˚ss‹Inf‹m©i⁄
–
¶pi
, &
¶pi_Àngth
 );

105 
¶pi
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, 
¶pi_Àngth
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

106 
	`GëLogiˇlPro˚ss‹Inf‹m©i⁄
–
¶pi
, &
¶pi_Àngth
 );

107 
numbî_¶pi
 = 
¶pi_Àngth
 / (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION
);

109  
lo›
 = 0 ;Üo› < 
numbî_¶pi
 ;Üoop++ )

110 if–(
¶pi
+
lo›
)->
Rñ©i⁄shù
 =
Rñ©i⁄Pro˚ss‹C‹e
 )

111  
logiˇl_¥o˚ss‹_numbî
 = 0 ;Üogiˇl_¥o˚ss‹_numbî < (
ULONG_PTR
Ë* 
BITS_PER_BYTE
 ;Üogical_processor_number++ )

113 
bômask
 = 1 << 
logiˇl_¥o˚ss‹_numbî
;

115 if–(
¶pi
+
lo›
)->
Pro˚ss‹Mask
 & 
bômask
 )

116 
	`libã°_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_li°_of_logiˇl_¥o˚ss‹s
–
li°_of_logiˇl_¥o˚ss‹s
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 
wödows_¥o˚ss‹_group_numbî
 );

128 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WIN7
 )

130 #ifde‡
LIBTEST_PAL_GET_LOGICAL_CORE_IDS


131 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_get_full_logical_processor_set.c".

134 
	#LIBTEST_PAL_GET_LOGICAL_CORE_IDS


	)

136 
	`libã°_∑l_gë_fuŒ_logiˇl_¥o˚ss‹_£t
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

137 
libsh¨ed_mem‹y_°©e
 *
ms
 )

139 
lfds711_∑l_uöt_t


140 
bômask
,

141 
logiˇl_¥o˚ss‹_numbî
,

142 
wödows_¥o˚ss‹_group_numbî
;

144 
NTSTATUS


145 
rv
;

147 
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX


148 *
¶põ
,

149 *
¶põ_buf„r
 = 
NULL
;

151 
ULONG


152 
off£t
 = 0,

153 
¶põ_Àngth
 = 0;

155 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

156 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

158 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
li°_of_logiˇl_¥o˚ss‹s
, 
NULL
 );

160 
rv
 = 
	`KeQuîyLogiˇlPro˚ss‹Rñ©i⁄shù
–
NULL
, 
Rñ©i⁄Group
, 
¶põ_buf„r
, &
¶põ_Àngth
 );

161 
¶põ_buf„r
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_mo°_‰ì_•a˚_node
–
ms
, 
¶põ_Àngth
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

162 
rv
 = 
	`KeQuîyLogiˇlPro˚ss‹Rñ©i⁄shù
–
NULL
, 
Rñ©i⁄Group
, 
¶põ_buf„r
, &
¶põ_Àngth
 );

164  
off£t
 < 
¶põ_Àngth
 )

166 
¶põ
 = (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
 *Ë–(*Ë
¶põ_buf„r
 + 
off£t
 );

168 
off£t
 +
¶põ
->
Size
;

170 if–
¶põ
->
Rñ©i⁄shù
 =
Rñ©i⁄Group
 )

171  
wödows_¥o˚ss‹_group_numbî
 = 0 ; wödows_¥o˚ss‹_group_numbî < 
¶põ
->
Group
.
A˘iveGroupCou¡
 ; windows_processor_group_number++ )

172  
logiˇl_¥o˚ss‹_numbî
 = 0 ;Üogiˇl_¥o˚ss‹_numbî < (
KAFFINITY
Ë* 
BITS_PER_BYTE
 ;Üogical_processor_number++ )

174 
bômask
 = (
lfds711_∑l_uöt_t
Ë1 << 
logiˇl_¥o˚ss‹_numbî
;

177 if–
¶põ
->
Group
.
GroupInfo
[
wödows_¥o˚ss‹_group_numbî
].
A˘ivePro˚ss‹Mask
 & 
bômask
 )

178 
	`libã°_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_li°_of_logiˇl_¥o˚ss‹s
–
li°_of_logiˇl_¥o˚ss‹s
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 
wödows_¥o˚ss‹_group_numbî
 );

192 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 && 
NTDDI_VERSION
 >
NTDDI_WINXP
 && NTDDI_VERSION < 
NTDDI_WIN7
 )

194 #ifde‡
LIBTEST_PAL_GET_LOGICAL_CORE_IDS


195 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_get_full_logical_processor_set.c".

198 
	#LIBTEST_PAL_GET_LOGICAL_CORE_IDS


	)

200 
	`libã°_∑l_gë_fuŒ_logiˇl_¥o˚ss‹_£t
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

201 
libsh¨ed_mem‹y_°©e
 *
ms
 )

203 
CCHAR


204 
lo›
;

206 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

207 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

218  
lo›
 = 0 ;Üo› < 
KeNumbîPro˚ss‹s
 ;Üoop++ )

219 
	`libã°_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_li°_of_logiˇl_¥o˚ss‹s
–
li°_of_logiˇl_¥o˚ss‹s
, 
ms
, 
lo›
, 0 );

231 #if–
deföed
 
__löux__
 && deföed 
__STDC__
 
™d
 
__STDC_HOSTED__
 == 1 )

233 #ifde‡
LIBTEST_PAL_GET_LOGICAL_CORE_IDS


234 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_get_full_logical_processor_set.c".

237 
	#LIBTEST_PAL_GET_LOGICAL_CORE_IDS


	)

239 
	`libã°_∑l_gë_fuŒ_logiˇl_¥o˚ss‹_£t
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

240 
libsh¨ed_mem‹y_°©e
 *
ms
 )

243 
diskbuf„r
[
BUFSIZ
],

244 
°rög
[1024];

246 
FILE


247 *
diskfûe
;

250 
logiˇl_¥o˚ss‹_numbî
;

252 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

253 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

255 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–
li°_of_logiˇl_¥o˚ss‹s
, 
NULL
 );

257 
diskfûe
 = 
	`f›í
( "/proc/cpuinfo", "r" );

259 if–
diskfûe
 !
NULL
 )

261 
	`£tbuf
–
diskfûe
, 
diskbuf„r
 );

263  
NULL
 !
	`fgës
(
°rög
, 1024, 
diskfûe
) )

264 if–1 =
	`ssˇnf
(
°rög
, "¥o˚ss‹ : %Œu", &
logiˇl_¥o˚ss‹_numbî
) )

265 
	`libã°_misc_∑l_hñ≥r_add_logiˇl_¥o˚ss‹_to_li°_of_logiˇl_¥o˚ss‹s
–
li°_of_logiˇl_¥o˚ss‹s
, 
ms
, 
logiˇl_¥o˚ss‹_numbî
, 0 );

267 
	`f˛o£
–
diskfûe
 );

280 #if–!
deföed
 
LIBTEST_PAL_GET_LOGICAL_CORE_IDS
 )

282 #îr‹ 
No
 
m©chög
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
ö
 "libtest_porting_abstraction_layer_get_full_logical_processor_set.c".

	@test_and_benchmark/libtest/src/libtest_porting_abstraction_layer/libtest_porting_abstraction_layer_internal.h

2 
	~"../libã°_öã∫Æ.h
"

	@test_and_benchmark/libtest/src/libtest_porting_abstraction_layer/libtest_porting_abstraction_layer_malloc.c

2 
	~"libã°_p‹tög_ab°ø˘i⁄_œyî_öã∫Æ.h
"

17 #if–
deföed
 
_MSC_VER
 )

26 
	#__STDC__
 1

	)

27 
	#__STDC_HOSTED__
 1

	)

35 #if–
deföed
 
__STDC__
 && deföed 
__STDC_HOSTED__
 && __STDC_HOSTED__ =1 && !deföed 
KERNEL_MODE
 )

37 #ifde‡
LIBTEST_PAL_MALLOC


38 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_malloc.c".

41 
	#LIBTEST_PAL_MALLOC


	)

43 *
	$libã°_∑l_mÆloc
–
lfds711_∑l_uöt_t
 
size
 )

46 *
rv
;

50 
rv
 = 
	`mÆloc
–(
size_t
Ë
size
 );

52  
rv
;

53 
	}
}

62 #if–
deföed
 
_WIN32
 && deföed 
KERNEL_MODE
 )

64 #ifde‡
LIBTEST_PAL_MALLOC


65 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_malloc.c".

68 
	#LIBTEST_PAL_MALLOC


	)

70 *
	$libã°_∑l_mÆloc
–
lfds711_∑l_uöt_t
 
size
 )

73 *
rv
;

82 
rv
 = 
	`ExAŒoˇãPoﬁWôhTag
–
N⁄PagedPoﬁ
, 
size
, 'sdfl' );

84  
rv
;

85 
	}
}

95 #if–
deföed
 
__löux__
 && deföed 
KERNEL_MODE
 )

97 #ifde‡
LIBTEST_PAL_MALLOC


98 #îr‹ 
M‹e
 
th™
 
⁄e
 
p‹tög
 
ab°ø˘i⁄
 
œyî
 
m©ches
 
the
 
cuºít
 
∂©f‹m
 
ö
 "libtest_porting_abstraction_layer_malloc.c".

101 
	#LIBTEST_PAL_MALLOC


	)

103 *
	$libã°_∑l_mÆloc
–
lfds711_∑l_uöt_t
 
size
 )

106 *
rv
;

110 
rv
 = 
	`vmÆloc
–(Ë
size
 );

112  
rv
;

113 
	}
}

122 #if–!
deföed
 
LIBTEST_PAL_MALLOC
 )

124 *
	$libã°_∑l_mÆloc
–
lfds711_∑l_uöt_t
 
size
 )

128  
NULL
;

129 
	}
}

	@test_and_benchmark/libtest/src/libtest_results/libtest_results_cleanup.c

2 
	~"libã°_ªsu…s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libã°_ªsu…s_˛ónup
–
libã°_ªsu…s_°©e
 *
rs
 )

13 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

16 
	}
}

18 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_results/libtest_results_get_result.c

2 
	~"libã°_ªsu…s_öã∫Æ.h
"

9 
	$libã°_ªsu…s_gë_ªsu…
–
libã°_ªsu…s_°©e
 *
rs
, 
libã°_ã°_id
 
ã°_id
, 
lfds711_misc_vÆidôy
 *
ªsu…
 )

11 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

13 
	`LFDS711_PAL_ASSERT
–
ªsu…
 !
NULL
 );

15 *
ªsu…
 = 
rs
->
dvs
[
ã°_id
];

18 
	}
}

	@test_and_benchmark/libtest/src/libtest_results/libtest_results_init.c

2 
	~"libã°_ªsu…s_öã∫Æ.h
"

9 
	$libã°_ªsu…s_öô
–
libã°_ªsu…s_°©e
 *
rs
 )

11 
libã°_ã°_id


12 
ã°_id
;

14 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

16  
ã°_id
 = 0 ;Åe°_id < 
LIBTEST_TEST_ID_COUNT
 ;Åest_id++ )

17 
rs
->
dvs
[
ã°_id
] = 
LFDS711_MISC_VALIDITY_UNKNOWN
;

20 
	}
}

	@test_and_benchmark/libtest/src/libtest_results/libtest_results_internal.h

2 
	~"../libã°_öã∫Æ.h
"

	@test_and_benchmark/libtest/src/libtest_results/libtest_results_put_result.c

2 
	~"libã°_ªsu…s_öã∫Æ.h
"

9 
	$libã°_ªsu…s_put_ªsu…
–
libã°_ªsu…s_°©e
 *
rs
, 
libã°_ã°_id
 
ã°_id
, 
lfds711_misc_vÆidôy
 
ªsu…
 )

11 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

15 
rs
->
dvs
[
ã°_id
] = 
ªsu…
;

18 
	}
}

	@test_and_benchmark/libtest/src/libtest_test/libtest_test_cleanup.c

2 
	~"libã°_ã°_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libã°_ã°_˛ónup
–
libã°_ã°_°©e
 *
ts
 )

13 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

18 
	}
}

20 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_test/libtest_test_init.c

2 
	~"libã°_ã°_öã∫Æ.h
"

9 
	$libã°_ã°_öô
–
libã°_ã°_°©e
 *
ts
,

10 *
«me
,

11 
libã°_ã°_id
 
ã°_id
,

12 (*
ã°_fun˘i⁄
)(
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
) )

14 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

15 
	`LFDS711_PAL_ASSERT
–
«me
 !
NULL
 );

17 
	`LFDS711_PAL_ASSERT
–
ã°_fun˘i⁄
 !
NULL
 );

19 
ts
->
«me
 =Çame;

20 
ts
->
ã°_id
 =Åest_id;

21 
ts
->
ã°_fun˘i⁄
 =Åest_function;

24 
	}
}

	@test_and_benchmark/libtest/src/libtest_test/libtest_test_internal.h

2 
	~"../libã°_öã∫Æ.h
"

	@test_and_benchmark/libtest/src/libtest_test/libtest_test_run.c

2 
	~"libã°_ã°_öã∫Æ.h
"

9 
	$libã°_ã°_run
–
libã°_ã°_°©e
 *
ts
,

10 
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
,

11 
libsh¨ed_mem‹y_°©e
 *
ms
,

12 
lfds711_misc_vÆidôy
 *
dvs
 )

14 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

15 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

16 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

17 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

19 
ts
->
	`ã°_fun˘i⁄
–
li°_of_logiˇl_¥o˚ss‹s
, 
ms
, 
dvs
 );

22 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_btree_addonly_unbalanced_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_båì_au_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

20 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

24 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

27 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_båì_au_ñemít
,
up
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

28 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

30 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_båì_au_ñemít
,
À·
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

31 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

33 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_båì_au_ñemít
,
right
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

34 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

36 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_båì_au_ñemít
,
vÆue
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

37 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

42 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_båì_au_°©e
,
roŸ
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

43 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

46 
	}
}

48 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_btree_addonly_unbalanced_random_adds_fail.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_båì_au_ñemít


8 
	mbaue
;

10 
lfds711_∑l_uöt_t


11 
	mkey
;

14 
	sã°_≥r_thªad_°©e


16 
lfds711_∑l_uöt_t


17 
	mö£π_Áû_cou¡
,

18 
	mnumbî_ñemíts_≥r_thªad
;

20 
lfds711_båì_au_°©e


21 *
	mbaus
;

23 
ã°_ñemít


24 *
	mñemít_¨øy
;

28 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_vÆue
, c⁄° *
vÆue_ö_åì
 );

29 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_addög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

36 
	$libã°_ã°s_båì_au_øndom_adds_Áû_⁄_exi°ög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

38 
lfds711_∑l_uöt_t


39 
a˘uÆ_sum_ö£π_Áûuª_cou¡
,

40 
ex≥˘ed_sum_ö£π_Áûuª_cou¡
,

41 
ödex
 = 0,

42 *
key_cou¡_¨øy
,

43 
lo›
 = 0,

44 
numbî_ñemíts
,

45 
numbî_ñemíts_≥r_thªad
,

46 
numbî_logiˇl_¥o˚ss‹s
,

47 
øndom_vÆue
,

48 
sublo›
;

50 
lfds711_li°_asu_ñemít


51 *
œsue
 = 
NULL
;

53 
lfds711_båì_au_ñemít


54 *
baue
 = 
NULL
;

56 
lfds711_båì_au_°©e


57 
baus
;

59 
lfds711_¥ng_°©e


60 
ps
;

62 
lfds711_misc_vÆid©i⁄_öfo


63 
vi
;

65 
libã°_logiˇl_¥o˚ss‹


66 *
Õ
;

68 
libã°_thªad£t_≥r_thªad_°©e


69 *
±s
;

71 
libã°_thªad£t_°©e


72 
ts
;

74 
ã°_ñemít


75 *
ã_¨øy
;

77 
ã°_≥r_thªad_°©e


78 *
çts
;

81 *
key
;

83 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

84 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

85 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

109 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

112 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

113 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

114 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

116 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë+ (
lfds711_∑l_uöt_t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

118 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

119 
key_cou¡_¨øy
 = (
lfds711_∑l_uöt_t
 *Ë–
ã_¨øy
 + 
numbî_ñemíts
 );

121 
	`lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ps
, 
LFDS711_PRNG_SEED
 );

123 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
baus
, 
key_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

126 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

128  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

130 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

131 (
çts
+
lo›
)->
baus
 = &baus;

132 (
çts
+
lo›
)->
ñemít_¨øy
 = 
ã_¨øy
 +Üo› * 
numbî_ñemíts_≥r_thªad
;

133 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

134 (
çts
+
lo›
)->
ö£π_Áû_cou¡
 = 0;

135 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_addög
, &
çts
[loop] );

137  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

139 
	`LFDS711_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

140 ((
çts
+
lo›
)->
ñemít_¨øy
+
sublo›
)->
key
 = (
lfds711_∑l_uöt_t
Ë–(
numbî_ñemíts
/2Ë* ((Ë
øndom_vÆue
 / (Ë
LFDS711_PRNG_MAX
) );

143 
lo›
++;

146 
LFDS711_MISC_BARRIER_STORE
;

148 
	`lfds711_misc_f‹˚_°‹e
();

151 
	`libã°_thªad£t_run
–&
ts
 );

153 
	`libã°_thªad£t_˛ónup
–&
ts
 );

156 
LFDS711_MISC_BARRIER_LOAD
;

165  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

166 *(
key_cou¡_¨øy
+
lo›
) = 0;

168  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

169  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

170 –*(
key_cou¡_¨øy
+–(
çts
+
lo›
)->
ñemít_¨øy
+
sublo›
)->
key
) )++;

173 
vi
.
mö_ñemíts
 = 
numbî_ñemíts
;

175  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

176 if–*(
key_cou¡_¨øy
+
lo›
) == 0 )

177 
vi
.
mö_ñemíts
--;

179 
vi
.
max_ñemíts
 = vi.
mö_ñemíts
;

181 
	`lfds711_båì_au_quîy
–&
baus
, 
LFDS711_BTREE_AU_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
dvs
 );

189 
ex≥˘ed_sum_ö£π_Áûuª_cou¡
 = 0;

191  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

192 if–*(
key_cou¡_¨øy
+
lo›
) != 0 )

193 
ex≥˘ed_sum_ö£π_Áûuª_cou¡
 +*(
key_cou¡_¨øy
+
lo›
) - 1;

195 
a˘uÆ_sum_ö£π_Áûuª_cou¡
 = 0;

197  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

198 
a˘uÆ_sum_ö£π_Áûuª_cou¡
 +(
çts
+
lo›
)->
ö£π_Áû_cou¡
;

200 if–
ex≥˘ed_sum_ö£π_Áûuª_cou¡
 !
a˘uÆ_sum_ö£π_Áûuª_cou¡
 )

201 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

207 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

210  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
baus
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

212 
key
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

214  *(
key_cou¡_¨øy
+
ödex
) == 0 )

215 
ödex
++;

217 if–
ödex
++ !(
lfds711_∑l_uöt_t
Ë
key
 )

218 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

222 
	`lfds711_båì_au_˛ónup
–&
baus
, 
NULL
 );

225 
	}
}

232 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

234 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
key_ö_åì
 )

237 
¸
 = 0;

242 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 < (lfds711_∑l_uöt_tË
key_ö_åì
 )

243 
¸
 = -1;

245 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 > (lfds711_∑l_uöt_tË
key_ö_åì
 )

246 
¸
 = 1;

248  
¸
;

249 
	}
}

251 #¥agm®
w¨nög
(  : 4100 )

258 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_addög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

260 
lfds711_båì_au_ö£π_ªsu…


261 
Ær
;

263 
lfds711_∑l_uöt_t


264 
ödex
 = 0;

266 
libã°_thªad£t_≥r_thªad_°©e


267 *
±s
;

269 
ã°_≥r_thªad_°©e


270 *
çts
;

272 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

274 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

276 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

277 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

279 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

281  
ödex
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

283 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
ödex
)->
baue
, (çts->ñemít_¨øy+ödex)->
key
 );

284 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
ödex
)->
baue
, 0 );

285 
Ær
 = 
	`lfds711_båì_au_ö£π
–
çts
->
baus
, &—±s->
ñemít_¨øy
+
ödex
)->
baue
, 
NULL
 );

287 if–
Ær
 =
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
 )

288 
çts
->
ö£π_Áû_cou¡
++;

290 
ödex
++;

293 
LFDS711_MISC_BARRIER_STORE
;

295 
	`lfds711_misc_f‹˚_°‹e
();

297  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

298 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_btree_addonly_unbalanced_random_adds_fail_and_overwrite.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_vÆue
, c⁄° *
vÆue_ö_åì
 );

12 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

14 
	$libã°_ã°s_båì_au_Áû_™d_ovîwrôe_⁄_exi°ög_key
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

16 
lfds711_båì_au_ö£π_ªsu…


17 
Ær
;

19 
lfds711_båì_au_ñemít


20 
baue_⁄e
,

21 
baue_two
,

22 *
exi°ög_baue
;

24 
lfds711_båì_au_°©e


25 
baus
;

28 *
vÆue
;

30 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

45 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

56 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
baus
, 
key_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_FAIL
, 
NULL
 );

58 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
baue_⁄e
, 0 );

59 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
baue_⁄e
, 1 );

60 
Ær
 = 
	`lfds711_båì_au_ö£π
–&
baus
, &
baue_⁄e
, 
NULL
 );

62 if–
Ær
 !
LFDS711_BTREE_AU_INSERT_RESULT_SUCCESS
 )

63 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

65 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
baue_two
, 0 );

66 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
baue_two
, 2 );

67 
Ær
 = 
	`lfds711_båì_au_ö£π
–&
baus
, &
baue_two
, &
exi°ög_baue
 );

69 if–
Ær
 !
LFDS711_BTREE_AU_INSERT_RESULT_FAILURE_EXISTING_KEY
 )

70 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

72 if–
exi°ög_baue
 !&
baue_⁄e
 )

73 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

75 
vÆue
 = 
	`LFDS711_BTREE_AU_GET_VALUE_FROM_ELEMENT
–*
exi°ög_baue
 );

77 if–(*Ë(
lfds711_∑l_uöt_t
Ë
vÆue
 != (*) (lfds711_pal_uint_t) 1 )

78 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

80 
	`lfds711_båì_au_˛ónup
–&
baus
, 
NULL
 );

91 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
baus
, 
key_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_OVERWRITE
, 
NULL
 );

93 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
baue_⁄e
, 0 );

94 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
baue_⁄e
, 1 );

95 
Ær
 = 
	`lfds711_båì_au_ö£π
–&
baus
, &
baue_⁄e
, 
NULL
 );

97 if–
Ær
 !
LFDS711_BTREE_AU_INSERT_RESULT_SUCCESS
 )

98 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

100 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–
baue_two
, 0 );

101 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–
baue_two
, 2 );

102 
Ær
 = 
	`lfds711_båì_au_ö£π
–&
baus
, &
baue_two
, 
NULL
 );

104 if–
Ær
 !
LFDS711_BTREE_AU_INSERT_RESULT_SUCCESS_OVERWRITE
 )

105 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

107 
	`lfds711_båì_au_˛ónup
–&
baus
, 
NULL
 );

110 
	}
}

112 #¥agm®
w¨nög
(  : 4100 )

119 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
key_ö_åì
 )

122 
¸
 = 0;

127 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 < (lfds711_∑l_uöt_tË
key_ö_åì
 )

128 
¸
 = -1;

130 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 > (lfds711_∑l_uöt_tË
key_ö_åì
 )

131 
¸
 = 1;

133  
¸
;

134 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_btree_addonly_unbalanced_random_adds_overwrite.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_båì_au_ñemít


8 
	mbaue
;

10 
lfds711_∑l_uöt_t


11 
	mkey
;

14 
	sã°_≥r_thªad_°©e


16 
lfds711_∑l_uöt_t


17 
	mö£π_exi°ög_cou¡
,

18 
	mnumbî_ñemíts_≥r_thªad
;

20 
lfds711_båì_au_°©e


21 *
	mbaus
;

23 
ã°_ñemít


24 *
	mñemít_¨øy
;

28 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_vÆue
, c⁄° *
vÆue_ö_åì
 );

29 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_addög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

36 
	$libã°_ã°s_båì_au_øndom_adds_ovîwrôe_⁄_exi°ög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

38 
lfds711_∑l_uöt_t


39 
a˘uÆ_sum_ö£π_exi°ög_cou¡
,

40 
ex≥˘ed_sum_ö£π_exi°ög_cou¡
,

41 
ödex
 = 0,

42 *
key_cou¡_¨øy
,

43 
lo›
 = 0,

44 
numbî_ñemíts
,

45 
numbî_ñemíts_≥r_thªad
,

46 
numbî_logiˇl_¥o˚ss‹s
,

47 
øndom_vÆue
,

48 
sublo›
;

50 
lfds711_li°_asu_ñemít


51 *
œsue
 = 
NULL
;

53 
lfds711_båì_au_ñemít


54 *
baue
 = 
NULL
;

56 
lfds711_båì_au_°©e


57 
baus
;

59 
lfds711_¥ng_°©e


60 
ps
;

62 
lfds711_misc_vÆid©i⁄_öfo


63 
vi
;

65 
libã°_logiˇl_¥o˚ss‹


66 *
Õ
;

68 
libã°_thªad£t_≥r_thªad_°©e


69 *
±s
;

71 
libã°_thªad£t_°©e


72 
ts
;

74 
ã°_ñemít


75 *
ã_¨øy
;

77 
ã°_≥r_thªad_°©e


78 *
çts
;

81 *
key
;

83 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

84 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

85 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

111 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

114 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

115 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

116 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

118 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë+ (
lfds711_∑l_uöt_t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

120 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

121 
key_cou¡_¨øy
 = (
lfds711_∑l_uöt_t
 *Ë–
ã_¨øy
 + 
numbî_ñemíts
 );

123 
	`lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ps
, 
LFDS711_PRNG_SEED
 );

125 
	`lfds711_båì_au_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
baus
, 
key_com∑ª_fun˘i⁄
, 
LFDS711_BTREE_AU_EXISTING_KEY_OVERWRITE
, 
NULL
 );

128 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

130  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

132 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

133 (
çts
+
lo›
)->
baus
 = &baus;

134 (
çts
+
lo›
)->
ñemít_¨øy
 = 
ã_¨øy
 +Üo› * 
numbî_ñemíts_≥r_thªad
;

135 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

136 (
çts
+
lo›
)->
ö£π_exi°ög_cou¡
 = 0;

137 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_addög
, &
çts
[loop] );

139  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

141 
	`LFDS711_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

142 ((
çts
+
lo›
)->
ñemít_¨øy
+
sublo›
)->
key
 = (
lfds711_∑l_uöt_t
Ë–(
numbî_ñemíts
/2Ë* ((Ë
øndom_vÆue
 / (Ë
LFDS711_PRNG_MAX
) );

145 
lo›
++;

148 
LFDS711_MISC_BARRIER_STORE
;

150 
	`lfds711_misc_f‹˚_°‹e
();

153 
	`libã°_thªad£t_run
–&
ts
 );

155 
	`libã°_thªad£t_˛ónup
–&
ts
 );

158 
LFDS711_MISC_BARRIER_LOAD
;

167  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

168 *(
key_cou¡_¨øy
+
lo›
) = 0;

170  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

171  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

172 –*(
key_cou¡_¨øy
+–(
çts
+
lo›
)->
ñemít_¨øy
+
sublo›
)->
key
) )++;

175 
vi
.
mö_ñemíts
 = 
numbî_ñemíts
;

177  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

178 if–*(
key_cou¡_¨øy
+
lo›
) == 0 )

179 
vi
.
mö_ñemíts
--;

181 
vi
.
max_ñemíts
 = vi.
mö_ñemíts
;

183 
	`lfds711_båì_au_quîy
–&
baus
, 
LFDS711_BTREE_AU_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
dvs
 );

191 
ex≥˘ed_sum_ö£π_exi°ög_cou¡
 = 0;

193  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

194 if–*(
key_cou¡_¨øy
+
lo›
) != 0 )

195 
ex≥˘ed_sum_ö£π_exi°ög_cou¡
 +*(
key_cou¡_¨øy
+
lo›
) - 1;

197 
a˘uÆ_sum_ö£π_exi°ög_cou¡
 = 0;

199  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

200 
a˘uÆ_sum_ö£π_exi°ög_cou¡
 +(
çts
+
lo›
)->
ö£π_exi°ög_cou¡
;

202 if–
ex≥˘ed_sum_ö£π_exi°ög_cou¡
 !
a˘uÆ_sum_ö£π_exi°ög_cou¡
 )

203 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

209 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

212  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_båì_au_gë_by_absﬁuã_posôi⁄_™d_thí_by_ªœtive_posôi⁄
(&
baus
, &
baue
, 
LFDS711_BTREE_AU_ABSOLUTE_POSITION_SMALLEST_IN_TREE
, 
LFDS711_BTREE_AU_RELATIVE_POSITION_NEXT_LARGER_ELEMENT_IN_ENTIRE_TREE
) )

214 
key
 = 
	`LFDS711_BTREE_AU_GET_KEY_FROM_ELEMENT
–*
baue
 );

216  *(
key_cou¡_¨øy
+
ödex
) == 0 )

217 
ödex
++;

219 if–
ödex
++ !(
lfds711_∑l_uöt_t
Ë
key
 )

220 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

224 
	`lfds711_båì_au_˛ónup
–&
baus
, 
NULL
 );

227 
	}
}

234 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

236 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
key_ö_åì
 )

239 
¸
 = 0;

244 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 < (lfds711_∑l_uöt_tË
key_ö_åì
 )

245 
¸
 = -1;

247 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 > (lfds711_∑l_uöt_tË
key_ö_åì
 )

248 
¸
 = 1;

250  
¸
;

251 
	}
}

253 #¥agm®
w¨nög
(  : 4100 )

260 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_addög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

262 
lfds711_båì_au_ö£π_ªsu…


263 
Ær
;

265 
lfds711_∑l_uöt_t


266 
ödex
 = 0;

268 
lfds711_båì_au_ñemít


269 *
exi°ög_baue
;

271 
libã°_thªad£t_≥r_thªad_°©e


272 *
±s
;

274 
ã°_≥r_thªad_°©e


275 *
çts
;

277 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

279 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

281 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

282 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

284 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

286  
ödex
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

288 
	`LFDS711_BTREE_AU_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
ödex
)->
baue
, (çts->ñemít_¨øy+ödex)->
key
 );

289 
	`LFDS711_BTREE_AU_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
ödex
)->
baue
, 0 );

290 
Ær
 = 
	`lfds711_båì_au_ö£π
–
çts
->
baus
, &—±s->
ñemít_¨øy
+
ödex
)->
baue
, &
exi°ög_baue
 );

292 if–
Ær
 =
LFDS711_BTREE_AU_INSERT_RESULT_SUCCESS_OVERWRITE
 )

293 
çts
->
ö£π_exi°ög_cou¡
++;

295 
ödex
++;

298 
LFDS711_MISC_BARRIER_STORE
;

300 
	`lfds711_misc_f‹˚_°‹e
();

302  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

303 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_‰ìli°_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

20 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

24 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

27 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_‰ìli°_°©e
,
t›
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

28 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

30 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_‰ìli°_°©e
,
ñimö©i⁄_¨øy_size_ö_ñemíts
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

31 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

34 
	}
}

36 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_ea_popping.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_‰ìli°_°©e


8 *
	mfs
;

10 
lfds711_¥ng_°_°©e


11 
	mp°s
;

14 
	sã°_ñemít


16 
lfds711_‰ìli°_ñemít


17 
	m„
;

19 
Êag


20 
	mp›≥d_Êag
;

24 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

31 
	$libã°_ã°s_‰ìli°_ó_p›pög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

33 
lfds711_∑l_uöt_t


34 
lo›
 = 0,

35 
numbî_ñemíts
,

36 
numbî_ñemíts_ö_‰ìli°
,

37 
numbî_logiˇl_¥o˚ss‹s
,

38 
øi£d_cou¡
 = 0,

39 
øndom_vÆue
,

40 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 = 2,

41 
ãmp_numbî_logiˇl_¥o˚ss‹s
;

43 
lfds711_‰ìli°_ñemít
 * volatile

44 (*
ó
)[
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
];

46 
lfds711_‰ìli°_°©e


47 
fs
;

49 
lfds711_li°_asu_ñemít


50 *
œsue
 = 
NULL
;

52 
lfds711_misc_vÆid©i⁄_öfo


53 
vi
;

55 
lfds711_¥ng_°_°©e


56 
p°s
;

58 
libã°_logiˇl_¥o˚ss‹


59 *
Õ
;

61 
libã°_thªad£t_≥r_thªad_°©e


62 *
±s
;

64 
libã°_thªad£t_°©e


65 
ts
;

67 
ã°_ñemít


68 *
ã_¨øy
;

70 
ã°_≥r_thªad_°©e


71 *
çts
;

73 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

74 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

75 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

96 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

98 
	`lfds711_¥ng_°_öô
–&
p°s
, 
LFDS711_PRNG_SEED
 );

100 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

102 
ãmp_numbî_logiˇl_¥o˚ss‹s
 = 
numbî_logiˇl_¥o˚ss‹s
 >> 2;

103  
ãmp_numbî_logiˇl_¥o˚ss‹s
 != 0 )

105 
ãmp_numbî_logiˇl_¥o˚ss‹s
 >>= 1;

106 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 <<= 1;

110 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

111 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

112 
ó
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_‰ìli°_ñemít
 *Ë* 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 * 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

113 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

115 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
fs
, 
ó
, 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
NULL
 );

117  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

119 (
ã_¨øy
+
lo›
)->
p›≥d_Êag
 = 
LOWERED
;

120 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
„
,Åe_array+loop );

121 
	`lfds711_‰ìli°_push
–&
fs
, &(
ã_¨øy
+
lo›
)->
„
, &
p°s
 );

124 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

126 
lo›
 = 0;

128  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

130 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

131 
çts
[
lo›
].
fs
 = &fs;

132 
	`LFDS711_PRNG_ST_GENERATE
–
p°s
, 
øndom_vÆue
 );

133 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 );

134 
	`lfds711_¥ng_°_öô
–&
çts
[
lo›
].
p°s
, 
øndom_vÆue
 );

136 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_p›pög
, &
çts
[loop] );

138 
lo›
++;

141 
LFDS711_MISC_BARRIER_STORE
;

143 
	`lfds711_misc_f‹˚_°‹e
();

146 
	`libã°_thªad£t_run
–&
ts
 );

148 
	`libã°_thªad£t_˛ónup
–&
ts
 );

151 
LFDS711_MISC_BARRIER_LOAD
;

161 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_GET_COUNT
, 
NULL
, &
numbî_ñemíts_ö_‰ìli°
 );

163 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_ö_‰ìli°
;

165 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

168  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

169 if–(
ã_¨øy
+
lo›
)->
p›≥d_Êag
 =
RAISED
 )

170 
øi£d_cou¡
++;

172 if–
øi£d_cou¡
 !
numbî_ñemíts
 - 
numbî_ñemíts_ö_‰ìli°
 )

173 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

176 
	`lfds711_‰ìli°_˛ónup
–&
fs
, 
NULL
 );

179 
	}
}

186 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

188 
lfds711_‰ìli°_ñemít


189 *
„
;

191 
ã°_≥r_thªad_°©e


192 *
çts
;

194 
libã°_thªad£t_≥r_thªad_°©e


195 *
±s
;

197 
ã°_ñemít


198 *
ã
;

200 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

202 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

204 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

206 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

208 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

210  
	`lfds711_‰ìli°_p›
(
çts
->
fs
, &
„
, &çts->
p°s
) )

212 
ã
 = 
	`LFDS711_FREELIST_GET_VALUE_FROM_ELEMENT
–*
„
 );

213 
ã
->
p›≥d_Êag
 = 
RAISED
;

216 
LFDS711_MISC_BARRIER_STORE
;

218 
	`lfds711_misc_f‹˚_°‹e
();

220  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

221 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_ea_popping_and_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	gã°_ñemít
;

7 
	sã°_≥r_thªad_°©e


9 
lfds711_‰ìli°_°©e


10 
	mfs_thªad_loˇl
,

11 *
	mfs
;

13 
lfds711_¥ng_°_°©e


14 
	mp°s
;

16 
lfds711_∑l_uöt_t


17 
	mnumbî_ñemíts_≥r_thªad
;

20 
	sã°_ñemít


22 
lfds711_‰ìli°_ñemít


23 
	m„
,

24 
	mthªad_loˇl_„
;

26 
lfds711_∑l_uöt_t


27 
	md©um
;

31 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög_™d_pushög_°¨t_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

32 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög_™d_pushög_°¨t_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

39 
	$libã°_ã°s_‰ìli°_ó_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

41 
lfds711_∑l_uöt_t


42 
lo›
,

43 
numbî_ñemíts
,

44 
numbî_ñemíts_≥r_thªad
,

45 
numbî_logiˇl_¥o˚ss‹s
,

46 
øndom_vÆue
,

47 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 = 2,

48 
sublo›
,

49 
ãmp_numbî_logiˇl_¥o˚ss‹s
;

51 
lfds711_‰ìli°_ñemít
 * volatile

52 (**
ó
)[
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
];

54 
lfds711_li°_asu_ñemít


55 *
œsue
 = 
NULL
;

57 
lfds711_‰ìli°_°©e


58 
fs
;

60 
lfds711_misc_vÆid©i⁄_öfo


61 
vi
;

63 
lfds711_¥ng_°_°©e


64 
p°s
;

66 
libã°_logiˇl_¥o˚ss‹


67 *
Õ
;

69 
libã°_thªad£t_≥r_thªad_°©e


70 *
±s
;

72 
libã°_thªad£t_°©e


73 
ts
;

75 
ã°_ñemít


76 *
ã_¨øy
;

78 
ã°_≥r_thªad_°©e


79 *
çts
;

81 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

82 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

83 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

98 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

100 
	`lfds711_¥ng_°_öô
–&
p°s
, 
LFDS711_PRNG_SEED
 );

102 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

104 
ãmp_numbî_logiˇl_¥o˚ss‹s
 = 
numbî_logiˇl_¥o˚ss‹s
 >> 2;

105  
ãmp_numbî_logiˇl_¥o˚ss‹s
 != 0 )

107 
ãmp_numbî_logiˇl_¥o˚ss‹s
 >>= 1;

108 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 <<= 1;

112 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

113 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

114 
ó
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_‰ìli°_ñemít
 **Ë* (
numbî_logiˇl_¥o˚ss‹s
 * 2 + 1), (lfds711_freelist_element *) );

115  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 * 2 + 1 ;Üoop++ )

116 
ó
[
lo›
] = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_‰ìli°_ñemít
 *Ë* 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 * 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

117 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

119 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / (
numbî_logiˇl_¥o˚ss‹s
 * 2);

121 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
fs
, 
ó
[0], 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
NULL
 );

124  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

126 (
ã_¨øy
+
lo›
)->
d©um
 =Üoop;

127 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
„
,Åe_array+loop );

128 
	`lfds711_‰ìli°_push
–&
fs
, &(
ã_¨øy
+
lo›
)->
„
, &
p°s
 );

131 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

133 
lo›
 = 0;

135  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

137 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

140 (
çts
+
lo›
)->
fs
 = &fs;

141 
	`LFDS711_PRNG_ST_GENERATE
–
p°s
, 
øndom_vÆue
 );

142 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 );

143 
	`lfds711_¥ng_°_öô
–&(
çts
+
lo›
)->
p°s
, 
øndom_vÆue
 );

144 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

145 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&(
çts
+
lo›
)->
fs_thªad_loˇl
, 
ó
[lo›+1], 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
NULL
 );

146 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_p›pög_™d_pushög_°¨t_p›pög
, &
çts
[loop] );

149 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
fs
 = &fs;

150 
	`LFDS711_PRNG_ST_GENERATE
–
p°s
, 
øndom_vÆue
 );

151 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 );

152 
	`lfds711_¥ng_°_öô
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
p°s
, 
øndom_vÆue
 );

153 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

154 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
fs_thªad_loˇl
, 
ó
[lo›+1+numbî_logiˇl_¥o˚ss‹s],Çumbî_logiˇl_¥o˚ss‹s, 
NULL
 );

155 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
+
numbî_logiˇl_¥o˚ss‹s
], 
Õ
, 
thªad_p›pög_™d_pushög_°¨t_pushög
, &
çts
[loop+number_logical_processors] );

157  
sublo›
 = 
numbî_ñemíts_≥r_thªad
 * (
numbî_logiˇl_¥o˚ss‹s
 + 
lo›
) ; subloop <Çumber_elements_per_thread * (number_logical_processors +Üoop + 1) ; subloop++ )

159 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
sublo›
)->
thªad_loˇl_„
, (te_array+subloop) );

160 
	`lfds711_‰ìli°_push
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
fs_thªad_loˇl
, &(
ã_¨øy
+
sublo›
)->
thªad_loˇl_„
, &
p°s
 );

163 
lo›
++;

166 
LFDS711_MISC_BARRIER_STORE
;

168 
	`lfds711_misc_f‹˚_°‹e
();

171 
	`libã°_thªad£t_run
–&
ts
 );

173 
	`libã°_thªad£t_˛ónup
–&
ts
 );

176 
LFDS711_MISC_BARRIER_LOAD
;

178 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
 * 2;

180 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
dvs
 );

182 
	`lfds711_‰ìli°_˛ónup
–&
fs
, 
NULL
 );

184  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

186 
	`lfds711_‰ìli°_˛ónup
–&(
çts
+
lo›
)->
fs_thªad_loˇl
, 
NULL
 );

187 
	`lfds711_‰ìli°_˛ónup
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
fs_thªad_loˇl
, 
NULL
 );

191 
	}
}

199 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög_™d_pushög_°¨t_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

201 
lfds711_∑l_uöt_t


202 
cou¡
;

204 
lfds711_‰ìli°_ñemít


205 *
„
;

207 
ã°_≥r_thªad_°©e


208 *
çts
;

210 
libã°_thªad£t_≥r_thªad_°©e


211 *
±s
;

213 
time_t


214 
°¨t_time
;

216 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

218 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

220 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

221 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

223 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

225 
°¨t_time
 = 
	`time
–
NULL
 );

227  
	`time
(
NULL
Ë< 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

229 
cou¡
 = 0;

231  
cou¡
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

232 if–
	`lfds711_‰ìli°_p›
(
çts
->
fs
, &
„
, &çts->
p°s
) )

235 
	`lfds711_‰ìli°_push
–&
çts
->
fs_thªad_loˇl
, 
„
, &çts->
p°s
 );

236 
cou¡
++;

240  
	`lfds711_‰ìli°_p›
(&
çts
->
fs_thªad_loˇl
, &
„
, &çts->
p°s
) )

241 
	`lfds711_‰ìli°_push
–
çts
->
fs
, 
„
, &çts->
p°s
 );

244 
LFDS711_MISC_BARRIER_STORE
;

246 
	`lfds711_misc_f‹˚_°‹e
();

248  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

249 
	}
}

256 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög_™d_pushög_°¨t_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

258 
lfds711_∑l_uöt_t


259 
cou¡
;

261 
lfds711_‰ìli°_ñemít


262 *
„
;

264 
ã°_≥r_thªad_°©e


265 *
çts
;

267 
libã°_thªad£t_≥r_thªad_°©e


268 *
±s
;

270 
time_t


271 
°¨t_time
;

273 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

275 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

277 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

278 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

280 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

282 
°¨t_time
 = 
	`time
–
NULL
 );

284  
	`time
(
NULL
Ë< 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

287  
	`lfds711_‰ìli°_p›
(&
çts
->
fs_thªad_loˇl
, &
„
, &çts->
p°s
) )

288 
	`lfds711_‰ìli°_push
–
çts
->
fs
, 
„
, &çts->
p°s
 );

290 
cou¡
 = 0;

292  
cou¡
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

293 if–
	`lfds711_‰ìli°_p›
(
çts
->
fs
, &
„
, &çts->
p°s
) )

295 
	`lfds711_‰ìli°_push
–&
çts
->
fs_thªad_loˇl
, 
„
, &çts->
p°s
 );

296 
cou¡
++;

301  
	`lfds711_‰ìli°_p›
(&
çts
->
fs_thªad_loˇl
, &
„
, &çts->
p°s
) )

302 
	`lfds711_‰ìli°_push
–
çts
->
fs
, 
„
, &çts->
p°s
 );

304 
LFDS711_MISC_BARRIER_STORE
;

306 
	`lfds711_misc_f‹˚_°‹e
();

308  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

309 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_ea_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_∑l_uöt_t


8 
	mnumbî_ñemíts_≥r_thªad
,

9 
	mthªad_numbî
;

11 
lfds711_‰ìli°_°©e


12 *
	mfs
;

14 
lfds711_¥ng_°_°©e


15 
	mp°s
;

17 
ã°_ñemít


18 *
	mã_¨øy
;

21 
	sã°_ñemít


23 
lfds711_‰ìli°_ñemít


24 
	m„
;

26 
lfds711_∑l_uöt_t


27 
	md©um
,

28 
	mthªad_numbî
;

32 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

39 
	$libã°_ã°s_‰ìli°_ó_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

41 
lfds711_∑l_uöt_t


42 
lo›
 = 0,

43 
numbî_ñemíts
,

44 
numbî_ñemíts_≥r_thªad
,

45 
numbî_logiˇl_¥o˚ss‹s
,

46 
øndom_vÆue
,

47 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 = 2,

48 
ãmp_numbî_logiˇl_¥o˚ss‹s
;

50 
lfds711_‰ìli°_ñemít
 * volatile

51 (*
ó
)[
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
];

53 
lfds711_li°_asu_ñemít


54 *
œsue
 = 
NULL
;

56 
lfds711_‰ìli°_°©e


57 
fs
;

59 
lfds711_misc_vÆid©i⁄_öfo


60 
vi
;

62 
lfds711_¥ng_°_°©e


63 
p°s
;

65 
libã°_logiˇl_¥o˚ss‹


66 *
Õ
;

68 
libã°_thªad£t_≥r_thªad_°©e


69 *
±s
;

71 
libã°_thªad£t_°©e


72 
ts
;

74 
ã°_ñemít


75 *
ã_¨øy
;

77 
ã°_≥r_thªad_°©e


78 *
çts
;

80 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

81 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

82 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

102 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

104 
	`lfds711_¥ng_°_öô
–&
p°s
, 
LFDS711_PRNG_SEED
 );

106 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

108 
ãmp_numbî_logiˇl_¥o˚ss‹s
 = 
numbî_logiˇl_¥o˚ss‹s
 >> 2;

109  
ãmp_numbî_logiˇl_¥o˚ss‹s
 != 0 )

111 
ãmp_numbî_logiˇl_¥o˚ss‹s
 >>= 1;

112 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 <<= 1;

116 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

117 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

118 
ó
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_‰ìli°_ñemít
 *Ë* 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 * 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

121 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

124 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
fs
, 
ó
, 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
NULL
 );

126 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

128  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

130 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

132 (
çts
+
lo›
)->
fs
 = &fs;

133 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

134 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

135 (
çts
+
lo›
)->
ã_¨øy
 =Åe_¨øy +Üo› * 
numbî_ñemíts_≥r_thªad
;

136 
	`LFDS711_PRNG_ST_GENERATE
–
p°s
, 
øndom_vÆue
 );

137 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 );

138 
	`lfds711_¥ng_°_öô
–&(
çts
+
lo›
)->
p°s
, 
øndom_vÆue
 );

140 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_pushög
, &
çts
[loop] );

142 
lo›
++;

145 
LFDS711_MISC_BARRIER_STORE
;

147 
	`lfds711_misc_f‹˚_°‹e
();

150 
	`libã°_thªad£t_run
–&
ts
 );

152 
	`libã°_thªad£t_˛ónup
–&
ts
 );

155 
LFDS711_MISC_BARRIER_LOAD
;

157 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

159 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

161 
	`lfds711_‰ìli°_˛ónup
–&
fs
, 
NULL
 );

164 
	}
}

171 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

173 
lfds711_∑l_uöt_t


174 
lo›
;

176 
ã°_≥r_thªad_°©e


177 *
çts
;

179 
libã°_thªad£t_≥r_thªad_°©e


180 *
±s
;

182 
LFDS711_MISC_BARRIER_LOAD
;

184 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

186 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

188 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

190  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

192 (
çts
->
ã_¨øy
+
lo›
)->
thªad_numbî
 =Åpts->thread_number;

193 (
çts
->
ã_¨øy
+
lo›
)->
d©um
 =Üoop;

196 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

198  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

200 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–(
çts
->
ã_¨øy
+
lo›
)->
„
,Åpts->te_array+loop );

201 
	`lfds711_‰ìli°_push
–
çts
->
fs
, &—±s->
ã_¨øy
+
lo›
)->
„
, &çts->
p°s
 );

204 
LFDS711_MISC_BARRIER_STORE
;

206 
	`lfds711_misc_f‹˚_°‹e
();

208  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

209 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_ea_rapid_popping_and_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_‰ìli°_°©e


8 *
	mfs
;

10 
lfds711_¥ng_°_°©e


11 
	mp°s
;

14 
	sã°_ñemít


16 
lfds711_‰ìli°_ñemít


17 
	m„
;

19 
lfds711_∑l_uöt_t


20 
	md©um
;

24 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_øpid_p›pög_™d_pushög
–*
libsh¨ed_thªads_thªad_°©e
 );

31 
	$libã°_ã°s_‰ìli°_ó_øpid_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

33 
lfds711_∑l_uöt_t


34 
cou¡
,

35 
ó_size_ö_‰ìli°_ñemíts
,

36 
ödex
 = 0,

37 
lo›
,

38 
numbî_logiˇl_¥o˚ss‹s
,

39 
øndom_vÆue
,

40 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 = 2,

41 
ãmp_numbî_logiˇl_¥o˚ss‹s
;

43 
lfds711_‰ìli°_ñemít
 * volatile

44 (*
ó
)[
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
];

46 
lfds711_li°_asu_ñemít


47 *
œsue
 = 
NULL
;

49 
lfds711_misc_vÆid©i⁄_öfo


50 
vi
;

52 
lfds711_¥ng_°_°©e


53 
p°s
;

55 
lfds711_‰ìli°_°©e


56 
fs
;

58 
libã°_logiˇl_¥o˚ss‹


59 *
Õ
;

61 
libã°_thªad£t_≥r_thªad_°©e


62 *
±s
;

64 
libã°_thªad£t_°©e


65 
ts
;

67 
ã°_ñemít


68 *
ã_¨øy
;

70 
ã°_≥r_thªad_°©e


71 *
çts
;

73 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

74 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

75 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

103 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

105 
	`lfds711_¥ng_°_öô
–&
p°s
, 
LFDS711_PRNG_SEED
 );

107 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

109 
ãmp_numbî_logiˇl_¥o˚ss‹s
 = 
numbî_logiˇl_¥o˚ss‹s
 >> 2;

110  
ãmp_numbî_logiˇl_¥o˚ss‹s
 != 0 )

112 
ãmp_numbî_logiˇl_¥o˚ss‹s
 >>= 1;

113 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
 <<= 1;

117 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

118 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
ó
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_‰ìli°_ñemít
 *Ë* 
LFDS711_FREELIST_ELIMINATION_ARRAY_ELEMENT_SIZE_IN_FREELIST_ELEMENTS
 * 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

121 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
fs
, 
ó
, 
smÆÀ°_powî_of_two_œrgî_th™_‹_equÆ_to_numbî_logiˇl_¥o˚ss‹s
, 
NULL
 );

122 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_GET_ELIMINATION_ARRAY_EXTRA_ELEMENTS_IN_FREELIST_ELEMENTS
, 
NULL
, (*Ë&
ó_size_ö_‰ìli°_ñemíts
 );

124 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë* (
numbî_logiˇl_¥o˚ss‹s
 + 
ó_size_ö_‰ìli°_ñemíts
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

126  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

128 
çts
[
lo›
].
fs
 = &fs;

129 
	`LFDS711_PRNG_ST_GENERATE
–
p°s
, 
øndom_vÆue
 );

130 
	`LFDS711_PRNG_ST_MIXING_FUNCTION
–
øndom_vÆue
 );

131 
	`lfds711_¥ng_°_öô
–&
çts
[
lo›
].
p°s
, 
øndom_vÆue
 );

134  
lo›
 = 0 ;Üo› < (
numbî_logiˇl_¥o˚ss‹s
 + 
ó_size_ö_‰ìli°_ñemíts
) ;Üoop++ )

136 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–
ã_¨øy
[
lo›
].
„
, &te_array[loop] );

137 
	`lfds711_‰ìli°_push
–&
fs
, &
ã_¨øy
[
lo›
].
„
, &
p°s
 );

140 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_GET_COUNT
, 
NULL
, (*Ë&
cou¡
 );

143 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

145  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

147 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

148 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
ödex
], 
Õ
, 
thªad_øpid_p›pög_™d_pushög
, &
çts
[index] );

149 
ödex
++;

153 
	`libã°_thªad£t_run
–&
ts
 );

155 
	`libã°_thªad£t_˛ónup
–&
ts
 );

158 
LFDS711_MISC_BARRIER_LOAD
;

160 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = (
numbî_logiˇl_¥o˚ss‹s
 + 
ó_size_ö_‰ìli°_ñemíts
);

162 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

164 
	`lfds711_‰ìli°_˛ónup
–&
fs
, 
NULL
 );

167 
	}
}

174 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_øpid_p›pög_™d_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

176 
lfds711_∑l_uöt_t


177 
time_lo›
 = 0;

179 
lfds711_‰ìli°_ñemít


180 *
„
;

182 
ã°_≥r_thªad_°©e


183 *
çts
;

185 
libã°_thªad£t_≥r_thªad_°©e


186 *
±s
;

188 
time_t


189 
cuºít_time
,

190 
°¨t_time
;

192 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

194 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

196 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

198 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

200 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

202 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

204  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

206 
	`lfds711_‰ìli°_p›
–
çts
->
fs
, &
„
, &çts->
p°s
 );

207 
	`lfds711_‰ìli°_push
–
çts
->
fs
, 
„
, &çts->
p°s
 );

209 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

211 
time_lo›
 = 0;

212 
	`time
–&
cuºít_time
 );

216 
LFDS711_MISC_BARRIER_STORE
;

218 
	`lfds711_misc_f‹˚_°‹e
();

220  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

221 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_without_ea_popping.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_‰ìli°_°©e


8 *
	mfs
;

11 
	sã°_ñemít


13 
lfds711_‰ìli°_ñemít


14 
	m„
;

16 
Êag


17 
	mp›≥d_Êag
;

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

28 
	$libã°_ã°s_‰ìli°_wôhout_ó_p›pög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

30 
lfds711_∑l_uöt_t


31 
lo›
 = 0,

32 
numbî_ñemíts
,

33 
numbî_logiˇl_¥o˚ss‹s
;

35 
lfds711_‰ìli°_°©e


36 
fs
;

38 
lfds711_li°_asu_ñemít


39 *
œsue
 = 
NULL
;

41 
lfds711_misc_vÆid©i⁄_öfo


42 
vi
 = { 0, 0 };

44 
libã°_logiˇl_¥o˚ss‹


45 *
Õ
;

47 
libã°_thªad£t_≥r_thªad_°©e


48 *
±s
;

50 
libã°_thªad£t_°©e


51 
ts
;

53 
ã°_ñemít


54 *
ã_¨øy
;

56 
ã°_≥r_thªad_°©e


57 *
çts
;

59 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

60 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

82 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

84 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

87 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

88 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

89 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

91 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
fs
, 
NULL
, 0, NULL );

93  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

95 (
ã_¨øy
+
lo›
)->
p›≥d_Êag
 = 
LOWERED
;

96 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
„
,Åe_array+loop );

97 
	`lfds711_‰ìli°_push
–&
fs
, &(
ã_¨øy
+
lo›
)->
„
, 
NULL
 );

100 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

102 
lo›
 = 0;

104  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

106 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

107 
çts
[
lo›
].
fs
 = &fs;

109 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_p›pög
, &
çts
[loop] );

111 
lo›
++;

114 
LFDS711_MISC_BARRIER_STORE
;

116 
	`lfds711_misc_f‹˚_°‹e
();

119 
	`libã°_thªad£t_run
–&
ts
 );

121 
	`libã°_thªad£t_˛ónup
–&
ts
 );

124 
LFDS711_MISC_BARRIER_LOAD
;

126 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

129  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

130 if–(
ã_¨øy
+
lo›
)->
p›≥d_Êag
 =
LOWERED
 )

131 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

134 
	`lfds711_‰ìli°_˛ónup
–&
fs
, 
NULL
 );

137 
	}
}

144 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

146 
lfds711_‰ìli°_ñemít


147 *
„
;

149 
ã°_≥r_thªad_°©e


150 *
çts
;

152 
libã°_thªad£t_≥r_thªad_°©e


153 *
±s
;

155 
ã°_ñemít


156 *
ã
;

158 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

160 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

162 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

164 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

166 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

168  
	`lfds711_‰ìli°_p›
(
çts
->
fs
, &
„
, 
NULL
) )

170 
ã
 = 
	`LFDS711_FREELIST_GET_VALUE_FROM_ELEMENT
–*
„
 );

171 
ã
->
p›≥d_Êag
 = 
RAISED
;

174 
LFDS711_MISC_BARRIER_STORE
;

176 
	`lfds711_misc_f‹˚_°‹e
();

178  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

179 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_without_ea_popping_and_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	gã°_ñemít
;

7 
	sã°_≥r_thªad_°©e


9 
lfds711_‰ìli°_°©e


10 
	mfs_thªad_loˇl
,

11 *
	mfs
;

13 
lfds711_∑l_uöt_t


14 
	mnumbî_ñemíts_≥r_thªad
;

17 
	sã°_ñemít


19 
lfds711_‰ìli°_ñemít


20 
	m„
,

21 
	mthªad_loˇl_„
;

23 
lfds711_∑l_uöt_t


24 
	md©um
;

28 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög_™d_pushög_°¨t_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

29 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög_™d_pushög_°¨t_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

36 
	$libã°_ã°s_‰ìli°_wôhout_ó_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

38 
lfds711_∑l_uöt_t


39 
lo›
,

40 
numbî_ñemíts
,

41 
numbî_ñemíts_≥r_thªad
,

42 
numbî_logiˇl_¥o˚ss‹s
,

43 
sublo›
;

45 
lfds711_li°_asu_ñemít


46 *
œsue
 = 
NULL
;

48 
lfds711_‰ìli°_°©e


49 
fs
;

51 
lfds711_misc_vÆid©i⁄_öfo


52 
vi
;

54 
libã°_logiˇl_¥o˚ss‹


55 *
Õ
;

57 
libã°_thªad£t_≥r_thªad_°©e


58 *
±s
;

60 
libã°_thªad£t_°©e


61 
ts
;

63 
ã°_ñemít


64 *
ã_¨øy
;

66 
ã°_≥r_thªad_°©e


67 *
çts
;

69 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

70 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

71 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

86 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

88 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

91 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

92 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

93 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

95 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / (
numbî_logiˇl_¥o˚ss‹s
 * 2);

97 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
fs
, 
NULL
, 0, NULL );

100  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

102 (
ã_¨øy
+
lo›
)->
d©um
 =Üoop;

103 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
„
,Åe_array+loop );

104 
	`lfds711_‰ìli°_push
–&
fs
, &(
ã_¨øy
+
lo›
)->
„
, 
NULL
 );

107 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

109 
lo›
 = 0;

111  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

113 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

116 (
çts
+
lo›
)->
fs
 = &fs;

117 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

118 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&(
çts
+
lo›
)->
fs_thªad_loˇl
, 
NULL
, 0, NULL );

119 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_p›pög_™d_pushög_°¨t_p›pög
, &
çts
[loop] );

122 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
fs
 = &fs;

123 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

124 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
fs_thªad_loˇl
, 
NULL
, 0, NULL );

125 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
+
numbî_logiˇl_¥o˚ss‹s
], 
Õ
, 
thªad_p›pög_™d_pushög_°¨t_pushög
, &
çts
[loop+number_logical_processors] );

127  
sublo›
 = 
numbî_ñemíts_≥r_thªad
 * (
numbî_logiˇl_¥o˚ss‹s
 + 
lo›
) ; subloop <Çumber_elements_per_thread * (number_logical_processors +Üoop + 1) ; subloop++ )

129 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
sublo›
)->
thªad_loˇl_„
, (te_array+subloop) );

130 
	`lfds711_‰ìli°_push
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
fs_thªad_loˇl
, &(
ã_¨øy
+
sublo›
)->
thªad_loˇl_„
, 
NULL
 );

133 
lo›
++;

136 
LFDS711_MISC_BARRIER_STORE
;

138 
	`lfds711_misc_f‹˚_°‹e
();

141 
	`libã°_thªad£t_run
–&
ts
 );

143 
	`libã°_thªad£t_˛ónup
–&
ts
 );

146 
LFDS711_MISC_BARRIER_LOAD
;

148 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
 * 2;

150 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
dvs
 );

152 
	`lfds711_‰ìli°_˛ónup
–&
fs
, 
NULL
 );

154  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

156 
	`lfds711_‰ìli°_˛ónup
–&(
çts
+
lo›
)->
fs_thªad_loˇl
, 
NULL
 );

157 
	`lfds711_‰ìli°_˛ónup
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
fs_thªad_loˇl
, 
NULL
 );

161 
	}
}

169 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög_™d_pushög_°¨t_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

171 
lfds711_∑l_uöt_t


172 
cou¡
;

174 
lfds711_‰ìli°_ñemít


175 *
„
;

177 
ã°_≥r_thªad_°©e


178 *
çts
;

180 
libã°_thªad£t_≥r_thªad_°©e


181 *
±s
;

183 
time_t


184 
°¨t_time
;

186 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

188 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

190 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

191 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

193 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

195 
°¨t_time
 = 
	`time
–
NULL
 );

197  
	`time
(
NULL
Ë< 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

199 
cou¡
 = 0;

201  
cou¡
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

202 if–
	`lfds711_‰ìli°_p›
(
çts
->
fs
, &
„
, 
NULL
) )

204 
	`lfds711_‰ìli°_push
–&
çts
->
fs_thªad_loˇl
, 
„
, 
NULL
 );

205 
cou¡
++;

209  
	`lfds711_‰ìli°_p›
(&
çts
->
fs_thªad_loˇl
, &
„
, 
NULL
) )

210 
	`lfds711_‰ìli°_push
–
çts
->
fs
, 
„
, 
NULL
 );

213 
LFDS711_MISC_BARRIER_STORE
;

215 
	`lfds711_misc_f‹˚_°‹e
();

217  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

218 
	}
}

225 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög_™d_pushög_°¨t_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

227 
lfds711_∑l_uöt_t


228 
cou¡
;

230 
lfds711_‰ìli°_ñemít


231 *
„
;

233 
ã°_≥r_thªad_°©e


234 *
çts
;

236 
libã°_thªad£t_≥r_thªad_°©e


237 *
±s
;

239 
time_t


240 
°¨t_time
;

242 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

244 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

246 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

247 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

249 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

251 
°¨t_time
 = 
	`time
–
NULL
 );

253  
	`time
(
NULL
Ë< 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

256  
	`lfds711_‰ìli°_p›
(&
çts
->
fs_thªad_loˇl
, &
„
, 
NULL
) )

257 
	`lfds711_‰ìli°_push
–
çts
->
fs
, 
„
, 
NULL
 );

259 
cou¡
 = 0;

261  
cou¡
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

262 if–
	`lfds711_‰ìli°_p›
(
çts
->
fs
, &
„
, 
NULL
) )

264 
	`lfds711_‰ìli°_push
–&
çts
->
fs_thªad_loˇl
, 
„
, 
NULL
 );

265 
cou¡
++;

270  
	`lfds711_‰ìli°_p›
(&
çts
->
fs_thªad_loˇl
, &
„
, 
NULL
) )

271 
	`lfds711_‰ìli°_push
–
çts
->
fs
, 
„
, 
NULL
 );

273 
LFDS711_MISC_BARRIER_STORE
;

275 
	`lfds711_misc_f‹˚_°‹e
();

277  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

278 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_without_ea_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_∑l_uöt_t


8 
	mnumbî_ñemíts_≥r_thªad
,

9 
	mthªad_numbî
;

11 
lfds711_‰ìli°_°©e


12 *
	mfs
;

14 
ã°_ñemít


15 *
	mã_¨øy
;

18 
	sã°_ñemít


20 
lfds711_‰ìli°_ñemít


21 
	m„
;

23 
lfds711_∑l_uöt_t


24 
	md©um
,

25 
	mthªad_numbî
;

29 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

36 
	$libã°_ã°s_‰ìli°_wôhout_ó_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

38 
lfds711_∑l_uöt_t


39 
lo›
 = 0,

40 
numbî_ñemíts
,

41 
numbî_ñemíts_≥r_thªad
,

42 
numbî_logiˇl_¥o˚ss‹s
,

43 *
≥r_thªad_cou¡îs
;

45 
lfds711_li°_asu_ñemít


46 *
œsue
 = 
NULL
;

48 
lfds711_‰ìli°_ñemít


49 *
„
;

51 
lfds711_‰ìli°_°©e


52 
fs
;

54 
lfds711_misc_vÆid©i⁄_öfo


55 
vi
;

57 
libã°_logiˇl_¥o˚ss‹


58 *
Õ
;

60 
libã°_thªad£t_≥r_thªad_°©e


61 *
±s
;

63 
libã°_thªad£t_°©e


64 
ts
;

66 
ã°_ñemít


67 *
ã
,

68 *
ã_¨øy
;

70 
ã°_≥r_thªad_°©e


71 *
çts
;

73 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

74 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

75 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

95 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

97 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

100 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, (lfds711_pal_uint_t) );

103 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

105 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

108 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
fs
, 
NULL
, 0, NULL );

110 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

114 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

116 (
çts
+
lo›
)->
fs
 = &fs;

117 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

118 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

119 (
çts
+
lo›
)->
ã_¨øy
 =Åe_¨øy +Üo› * 
numbî_ñemíts_≥r_thªad
;

121 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_pushög
, &
çts
[loop] );

123 
lo›
++;

126 
LFDS711_MISC_BARRIER_STORE
;

128 
	`lfds711_misc_f‹˚_°‹e
();

131 
	`libã°_thªad£t_run
–&
ts
 );

133 
	`libã°_thªad£t_˛ónup
–&
ts
 );

136 
LFDS711_MISC_BARRIER_LOAD
;

142  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

143 *(
≥r_thªad_cou¡îs
+
lo›
Ë
numbî_ñemíts_≥r_thªad
 - 1;

145 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

147 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

153  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_‰ìli°_p›
(&
fs
, &
„
, 
NULL
) )

155 
ã
 = 
	`LFDS711_FREELIST_GET_VALUE_FROM_ELEMENT
–*
„
 );

157 if–
ã
->
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

159 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

163 if–
ã
->
d©um
 > 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

164 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

166 if–
ã
->
d©um
 < 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

167 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

169 if–
ã
->
d©um
 =
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

170 
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
]--;

173 
	`lfds711_‰ìli°_˛ónup
–&
fs
, 
NULL
 );

176 
	}
}

183 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

185 
lfds711_∑l_uöt_t


186 
lo›
;

188 
ã°_≥r_thªad_°©e


189 *
çts
;

191 
libã°_thªad£t_≥r_thªad_°©e


192 *
±s
;

194 
LFDS711_MISC_BARRIER_LOAD
;

196 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

198 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

200 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

202  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

204 (
çts
->
ã_¨øy
+
lo›
)->
thªad_numbî
 =Åpts->thread_number;

205 (
çts
->
ã_¨øy
+
lo›
)->
d©um
 =Üoop;

208 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

210  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

212 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–(
çts
->
ã_¨øy
+
lo›
)->
„
,Åpts->te_array+loop );

213 
	`lfds711_‰ìli°_push
–
çts
->
fs
, &—±s->
ã_¨øy
+
lo›
)->
„
, 
NULL
 );

216 
LFDS711_MISC_BARRIER_STORE
;

218 
	`lfds711_misc_f‹˚_°‹e
();

220  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

221 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_without_ea_rapid_popping_and_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_‰ìli°_°©e


8 *
	mfs
;

11 
	sã°_ñemít


13 
lfds711_‰ìli°_ñemít


14 
	m„
;

16 
lfds711_∑l_uöt_t


17 
	md©um
;

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_øpid_p›pög_™d_pushög
–*
libsh¨ed_thªads_thªad_°©e
 );

28 
	$libã°_ã°s_‰ìli°_wôhout_ó_øpid_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

30 
lfds711_∑l_uöt_t


31 
ödex
 = 0,

32 
lo›
,

33 
numbî_logiˇl_¥o˚ss‹s
;

35 
lfds711_li°_asu_ñemít


36 *
œsue
 = 
NULL
;

38 
lfds711_misc_vÆid©i⁄_öfo


39 
vi
 = { 0, 0 };

41 
lfds711_‰ìli°_°©e


42 
fs
;

44 
libã°_logiˇl_¥o˚ss‹


45 *
Õ
;

47 
libã°_thªad£t_≥r_thªad_°©e


48 *
±s
;

50 
libã°_thªad£t_°©e


51 
ts
;

53 
ã°_ñemít


54 *
ã_¨øy
;

56 
ã°_≥r_thªad_°©e


57 *
çts
;

59 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

60 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

89 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

91 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

94 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

95 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

96 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

98 
	`lfds711_‰ìli°_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
fs
, 
NULL
, 0, NULL );

100  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

101 
çts
[
lo›
].
fs
 = &fs;

103  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

105 
	`LFDS711_FREELIST_SET_VALUE_IN_ELEMENT
–
ã_¨øy
[
lo›
].
„
, &te_array[loop] );

106 
	`lfds711_‰ìli°_push
–&
fs
, &
ã_¨øy
[
lo›
].
„
, 
NULL
 );

110 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

114 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

115 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
ödex
], 
Õ
, 
thªad_øpid_p›pög_™d_pushög
, &
çts
[index] );

116 
ödex
++;

120 
	`libã°_thªad£t_run
–&
ts
 );

122 
	`libã°_thªad£t_˛ónup
–&
ts
 );

125 
LFDS711_MISC_BARRIER_LOAD
;

127 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
;

129 
	`lfds711_‰ìli°_quîy
–&
fs
, 
LFDS711_FREELIST_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

131 
	`lfds711_‰ìli°_˛ónup
–&
fs
, 
NULL
 );

134 
	}
}

141 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_øpid_p›pög_™d_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

143 
lfds711_∑l_uöt_t


144 
time_lo›
 = 0;

146 
lfds711_‰ìli°_ñemít


147 *
„
;

149 
ã°_≥r_thªad_°©e


150 *
çts
;

152 
libã°_thªad£t_≥r_thªad_°©e


153 *
±s
;

155 
time_t


156 
cuºít_time
,

157 
°¨t_time
;

159 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

161 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

163 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

165 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

167 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

169 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

171  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

173 
	`lfds711_‰ìli°_p›
–
çts
->
fs
, &
„
, 
NULL
 );

174 
	`lfds711_‰ìli°_push
–
çts
->
fs
, 
„
, 
NULL
 );

176 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

178 
time_lo›
 = 0;

179 
	`time
–&
cuºít_time
 );

183 
LFDS711_MISC_BARRIER_STORE
;

185 
	`lfds711_misc_f‹˚_°‹e
();

187  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

188 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_hash_a_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

20 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

24 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

27 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_hash_a_ñemít
,
vÆue
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

28 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

31 
	}
}

33 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_fail_and_overwrite.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_vÆue
, c⁄° *
vÆue_ö_åì
 );

6 
key_hash_fun˘i⁄
–c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
 );

13 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

15 
	$libã°_ã°s_hash_a_Áû_™d_ovîwrôe_⁄_exi°ög_key
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

17 
lfds711_hash_a_ö£π_ªsu…


18 
≠r
;

20 
lfds711_hash_a_ñemít


21 
h´_⁄e
,

22 
h´_two
;

24 
lfds711_hash_a_°©e


25 
has
;

27 
lfds711_båì_au_°©e


28 *
baus
;

30 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

34 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

36 
baus
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_båì_au_°©e
Ë* 10, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

39 
	`lfds711_hash_a_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
has
, 
baus
, 10, 
key_com∑ª_fun˘i⁄
, 
key_hash_fun˘i⁄
, 
LFDS711_HASH_A_EXISTING_KEY_FAIL
, 
NULL
 );

41 
	`LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–
h´_⁄e
, 1 );

42 
	`LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–
h´_⁄e
, 0 );

43 
≠r
 = 
	`lfds711_hash_a_ö£π
–&
has
, &
h´_⁄e
, 
NULL
 );

45 if–
≠r
 !
LFDS711_HASH_A_PUT_RESULT_SUCCESS
 )

46 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

48 
	`LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–
h´_two
, 1 );

49 
	`LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–
h´_two
, 1 );

50 
≠r
 = 
	`lfds711_hash_a_ö£π
–&
has
, &
h´_two
, 
NULL
 );

52 if–
≠r
 !
LFDS711_HASH_A_PUT_RESULT_FAILURE_EXISTING_KEY
 )

53 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

55 
	`lfds711_hash_a_˛ónup
–&
has
, 
NULL
 );

58 
	`lfds711_hash_a_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
has
, 
baus
, 10, 
key_com∑ª_fun˘i⁄
, 
key_hash_fun˘i⁄
, 
LFDS711_HASH_A_EXISTING_KEY_OVERWRITE
, 
NULL
 );

60 
	`LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–
h´_⁄e
, 1 );

61 
	`LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–
h´_⁄e
, 1 );

62 
≠r
 = 
	`lfds711_hash_a_ö£π
–&
has
, &
h´_⁄e
, 
NULL
 );

64 if–
≠r
 !
LFDS711_HASH_A_PUT_RESULT_SUCCESS
 )

65 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

67 
	`LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–
h´_two
, 1 );

68 
	`LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–
h´_two
, 1 );

69 
≠r
 = 
	`lfds711_hash_a_ö£π
–&
has
, &
h´_two
, 
NULL
 );

71 if–
≠r
 !
LFDS711_HASH_A_PUT_RESULT_SUCCESS_OVERWRITE
 )

72 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

74 
	`lfds711_hash_a_˛ónup
–&
has
, 
NULL
 );

77 
	}
}

79 #¥agm®
w¨nög
(  : 4100 )

86 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
key_ö_åì
 )

89 
¸
 = 0;

94 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 < (lfds711_∑l_uöt_tË
key_ö_åì
 )

95 
¸
 = -1;

97 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 > (lfds711_∑l_uöt_tË
key_ö_åì
 )

98 
¸
 = 1;

100  
¸
;

101 
	}
}

108 
	$key_hash_fun˘i⁄
–c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
 )

111 
	`LFDS711_PAL_ASSERT
–
hash
 !
NULL
 );

113 *
hash
 = 0;

120 
	`LFDS711_HASH_A_HASH_FUNCTION
–(*Ë&
key
, (
lfds711_∑l_uöt_t
), *
hash
 );

123 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_iterate.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_båì_au_ñemít


8 
	mbaue
;

10 
lfds711_∑l_uöt_t


11 
	md©um
;

15 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

16 
key_hash_fun˘i⁄
–c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
 );

23 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

25 
	$libã°_ã°s_hash_a_ôî©e
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

27 
lfds711_∑l_uöt_t


28 *
cou¡î_¨øy
,

29 
lo›
;

31 
lfds711_hash_a_ñemít


32 *
h´
;

34 
lfds711_hash_a_ôî©e


35 
hai
;

37 
lfds711_hash_a_°©e


38 
has
;

40 
lfds711_hash_a_ñemít


41 *
ñemít_¨øy
;

43 
lfds711_båì_au_°©e


44 *
baus
,

45 *
baus_thoußnd
;

48 *
vÆue
;

50 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

51 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

67 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

69 
cou¡î_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
) * 1000, (lfds711_pal_uint_t) );

70 
ñemít_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_hash_a_ñemít
Ë* 1000, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

71 
baus
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_båì_au_°©e
Ë* 10, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

72 
baus_thoußnd
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_båì_au_°©e
Ë* 1000, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

75 
	`lfds711_hash_a_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
has
, 
baus
, 10, 
key_com∑ª_fun˘i⁄
, 
key_hash_fun˘i⁄
, 
LFDS711_HASH_A_EXISTING_KEY_FAIL
, 
NULL
 );

77  
lo›
 = 0 ;Üoop < 1000 ;Üoop++ )

79 
	`LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–*(
ñemít_¨øy
+
lo›
),Üoop );

80 
	`LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–*(
ñemít_¨øy
+
lo›
),Üoop );

81 
	`lfds711_hash_a_ö£π
–&
has
, 
ñemít_¨øy
+
lo›
, 
NULL
 );

84  
lo›
 = 0 ;Üoop < 1000 ;Üoop++ )

85 *(
cou¡î_¨øy
+
lo›
) = 0;

87 
	`lfds711_hash_a_ôî©e_öô
–&
has
, &
hai
 );

89  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_hash_a_ôî©e
(&
hai
, &
h´
) )

91 
vÆue
 = 
	`LFDS711_HASH_A_GET_VALUE_FROM_ELEMENT
–*
h´
 );

92 –*(
cou¡î_¨øy
 + (
lfds711_∑l_uöt_t
Ë
vÆue
) )++;

95 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

96  
lo›
 = 0 ;Üoop < 1000 ;Üoop++ )

98 if–*(
cou¡î_¨øy
+
lo›
) > 1 )

99 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

101 if–*(
cou¡î_¨øy
+
lo›
) == 0 )

102 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

105 
	`lfds711_hash_a_˛ónup
–&
has
, 
NULL
 );

108 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

110 
	`lfds711_hash_a_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
has
, 
baus_thoußnd
, 10000, 
key_com∑ª_fun˘i⁄
, 
key_hash_fun˘i⁄
, 
LFDS711_HASH_A_EXISTING_KEY_FAIL
, 
NULL
 );

112  
lo›
 = 0 ;Üoop < 1000 ;Üoop++ )

114 
	`LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–*(
ñemít_¨øy
+
lo›
),Üoop );

115 
	`LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–*(
ñemít_¨øy
+
lo›
),Üoop );

116 
	`lfds711_hash_a_ö£π
–&
has
, 
ñemít_¨øy
+
lo›
, 
NULL
 );

119  
lo›
 = 0 ;Üoop < 1000 ;Üoop++ )

120 *(
cou¡î_¨øy
+
lo›
) = 0;

122 
	`lfds711_hash_a_ôî©e_öô
–&
has
, &
hai
 );

124  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_hash_a_ôî©e
(&
hai
, &
h´
) )

126 
vÆue
 = 
	`LFDS711_HASH_A_GET_VALUE_FROM_ELEMENT
–*
h´
 );

127 –*(
cou¡î_¨øy
 + (
lfds711_∑l_uöt_t
Ë
vÆue
 ) )++;

130 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

131  
lo›
 = 0 ;Üoop < 1000 ;Üoop++ )

133 if–*(
cou¡î_¨øy
+
lo›
) > 1 )

134 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

136 if–*(
cou¡î_¨øy
+
lo›
) == 0 )

137 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

140 
	`lfds711_hash_a_˛ónup
–&
has
, 
NULL
 );

144 
	}
}

146 #¥agm®
w¨nög
(  : 4100 )

153 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

156 
¸
 = 0;

161 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 < (lfds711_∑l_uöt_tË
exi°ög_key
 )

162 
¸
 = -1;

164 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 > (lfds711_∑l_uöt_tË
exi°ög_key
 )

165 
¸
 = 1;

167  
¸
;

168 
	}
}

175 
	$key_hash_fun˘i⁄
–c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
 )

178 
	`LFDS711_PAL_ASSERT
–
hash
 !
NULL
 );

180 *
hash
 = 0;

187 
	`LFDS711_HASH_A_HASH_FUNCTION
–(*Ë&
key
, (
lfds711_∑l_uöt_t
), *
hash
 );

190 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_random_adds_fail.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_hash_a_ñemít


8 
	mh´
;

10 
lfds711_∑l_uöt_t


11 
	md©um
,

12 
	mkey
;

15 
	sã°_≥r_thªad_°©e


17 
Êag


18 
	mîr‹_Êag
;

20 
lfds711_∑l_uöt_t


21 
	mnumbî_ñemíts_≥r_thªad
;

23 
lfds711_hash_a_°©e


24 *
	mhas
;

26 
ã°_ñemít


27 *
	mñemít_¨øy
;

31 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_addög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

32 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

33 
key_hash_fun˘i⁄
–c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
 );

40 
	$libã°_ã°s_hash_a_øndom_adds_Áû_⁄_exi°ög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

42 
lfds711_∑l_uöt_t


43 
lo›
,

44 
numbî_ñemíts_≥r_thªad
,

45 
numbî_ñemíts_tŸÆ
,

46 
numbî_logiˇl_¥o˚ss‹s
,

47 
off£t
,

48 
ãmp
,

49 
vÆue
;

51 
lfds711_hash_a_ñemít


52 *
h´
;

54 
lfds711_hash_a_°©e


55 
has
;

57 
lfds711_li°_asu_ñemít


58 *
œsue
 = 
NULL
;

60 
lfds711_båì_au_°©e


61 *
baus
;

63 
lfds711_¥ng_°©e


64 
ps
;

66 
lfds711_misc_vÆid©i⁄_öfo


67 
vi
;

69 
libã°_logiˇl_¥o˚ss‹


70 *
Õ
;

72 
libã°_thªad£t_≥r_thªad_°©e


73 *
±s
;

75 
libã°_thªad£t_°©e


76 
ts
;

78 
ã°_ñemít


79 *
ñemít_¨øy
;

81 
ã°_≥r_thªad_°©e


82 *
çts
;

84 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

85 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

86 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

99 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

102 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

103 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

104 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

105 
baus
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_båì_au_°©e
Ë* 1000, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

106 
ñemít_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts_tŸÆ
 );

109 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts_tŸÆ
 / 
numbî_logiˇl_¥o˚ss‹s
;

110 
numbî_ñemíts_tŸÆ
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

112 
	`lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ps
, 
LFDS711_PRNG_SEED
 );

114 
	`lfds711_hash_a_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
has
, 
baus
, 1000, 
key_com∑ª_fun˘i⁄
, 
key_hash_fun˘i⁄
, 
LFDS711_HASH_A_EXISTING_KEY_FAIL
, 
NULL
 );

117  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

119 (
ñemít_¨øy
+
lo›
)->
key
 =Üoop;

121 (
ñemít_¨øy
+
lo›
)->
d©um
 =Üo› + 
numbî_ñemíts_tŸÆ
;

125  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

127 
	`LFDS711_PRNG_GENERATE
–
ps
, 
off£t
 );

128 
off£t
 %
numbî_ñemíts_tŸÆ
;

129 
ãmp
 = (
ñemít_¨øy
 + 
off£t
)->
key
;

130 (
ñemít_¨øy
 + 
off£t
)->
key
 = (ñemít_¨øy + 
lo›
)->key;

131 (
ñemít_¨øy
 + 
lo›
)->
key
 = 
ãmp
;

135 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

137 
lo›
 = 0;

139  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

141 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

142 (
çts
+
lo›
)->
has
 = &has;

143 (
çts
+
lo›
)->
ñemít_¨øy
 =ÉÀmít_¨øy + 
numbî_ñemíts_≥r_thªad
*loop;

144 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

145 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

146 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_addög
, &
çts
[loop] );

147 
lo›
++;

150 
LFDS711_MISC_BARRIER_STORE
;

152 
	`lfds711_misc_f‹˚_°‹e
();

155 
	`libã°_thªad£t_run
–&
ts
 );

157 
	`libã°_thªad£t_˛ónup
–&
ts
 );

160 
LFDS711_MISC_BARRIER_LOAD
;

163 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_tŸÆ
;

164 
	`lfds711_hash_a_quîy
–&
has
, 
LFDS711_HASH_A_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
dvs
 );

171  
lo›
 = 0 ; *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

172 if–0 =
	`lfds711_hash_a_gë_by_key
(&
has
, 
NULL
, NULL, (*Ë(
çts
->
ñemít_¨øy
+
lo›
)->
key
, &
h´
) )

173 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

176 
vÆue
 = (
lfds711_∑l_uöt_t
Ë
	`LFDS711_HASH_A_GET_VALUE_FROM_ELEMENT
–*
h´
 );

177 if–(
çts
->
ñemít_¨øy
+
lo›
)->
d©um
 !
vÆue
 )

178 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

182 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

183  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

184 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

185 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

188 
	`lfds711_hash_a_˛ónup
–&
has
, 
NULL
 );

191 
	}
}

198 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_addög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

200 
lfds711_hash_a_ö£π_ªsu…


201 
≠r
;

203 
lfds711_∑l_uöt_t


204 
ödex
 = 0;

206 
ã°_≥r_thªad_°©e


207 *
çts
;

209 
libã°_thªad£t_≥r_thªad_°©e


210 *
±s
;

212 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

214 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

216 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

218 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

220 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

222  
ödex
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

224 
	`LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
ödex
)->
h´
, (çts->ñemít_¨øy+ödex)->
key
 );

225 
	`LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
ödex
)->
h´
, (çts->ñemít_¨øy+ödex)->
d©um
 );

226 
≠r
 = 
	`lfds711_hash_a_ö£π
–
çts
->
has
, &—±s->
ñemít_¨øy
+
ödex
)->
h´
, 
NULL
 );

228 if–
≠r
 =
LFDS711_HASH_A_PUT_RESULT_FAILURE_EXISTING_KEY
 )

229 
çts
->
îr‹_Êag
 = 
RAISED
;

231 
ödex
++;

234 
LFDS711_MISC_BARRIER_STORE
;

236 
	`lfds711_misc_f‹˚_°‹e
();

238  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

239 
	}
}

246 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

248 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

251 
¸
 = 0;

256 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 < (lfds711_∑l_uöt_tË
exi°ög_key
 )

257 
¸
 = -1;

259 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 > (lfds711_∑l_uöt_tË
exi°ög_key
 )

260 
¸
 = 1;

262  
¸
;

263 
	}
}

265 #¥agm®
w¨nög
(  : 4100 )

272 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

274 
	$key_hash_fun˘i⁄
–c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
 )

277 
	`LFDS711_PAL_ASSERT
–
hash
 !
NULL
 );

279 *
hash
 = 0;

286 
	`LFDS711_HASH_A_HASH_FUNCTION
–(*Ë&
key
, (
lfds711_∑l_uöt_t
), *
hash
 );

289 
	}
}

291 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_random_adds_overwrite.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_hash_a_ñemít


8 
	mh´
;

10 
lfds711_∑l_uöt_t


11 
	mkey
;

14 
	sã°_≥r_thªad_°©e


16 
lfds711_∑l_uöt_t


17 
	mnumbî_ñemíts_≥r_thªad
,

18 
	movîwrôe_cou¡
;

20 
lfds711_hash_a_°©e


21 *
	mhas
;

23 
ã°_ñemít


24 *
	mñemít_¨øy
;

28 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_addög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

29 
key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 );

30 
key_hash_fun˘i⁄
–c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
 );

31 
LIBTEST_PAL_STDLIB_CALLBACK_CALLING_CONVENTION
 
qs‹t_™d_b£¨ch_key_com∑ª_fun˘i⁄
–c⁄° *
e1
, c⁄° *
e2
 );

38 
	$libã°_ã°s_hash_a_øndom_adds_ovîwrôe_⁄_exi°ög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

41 
rv
;

43 
lfds711_∑l_uöt_t


44 
a˘uÆ_sum_ovîwrôe_exi°ög_cou¡
,

45 
ex≥˘ed_sum_ovîwrôe_exi°ög_cou¡
,

46 *
key_cou¡_¨øy
,

47 
lo›
,

48 
numbî_ñemíts_≥r_thªad
,

49 
numbî_ñemíts_tŸÆ
,

50 
numbî_logiˇl_¥o˚ss‹s
,

51 
øndom_vÆue
;

53 
lfds711_hash_a_ôî©e


54 
hai
;

56 
lfds711_hash_a_ñemít


57 *
h´
;

59 
lfds711_hash_a_°©e


60 
has
;

62 
lfds711_li°_asu_ñemít


63 *
œsue
 = 
NULL
;

65 
lfds711_båì_au_°©e


66 *
baus
;

68 
lfds711_¥ng_°©e


69 
ps
;

71 
lfds711_misc_vÆid©i⁄_öfo


72 
vi
;

74 
libã°_logiˇl_¥o˚ss‹


75 *
Õ
;

77 
libã°_thªad£t_≥r_thªad_°©e


78 *
±s
;

80 
libã°_thªad£t_°©e


81 
ts
;

83 
ã°_ñemít


84 *
ñemít_¨øy
;

86 
ã°_≥r_thªad_°©e


87 *
çts
;

90 *
key_poöãr
,

91 *
key
;

93 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

94 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

95 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

112 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

115 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

116 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

117 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

118 
baus
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_båì_au_°©e
Ë* 1000, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

119 
ñemít_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë+ (
lfds711_∑l_uöt_t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts_tŸÆ
 );

120 
key_cou¡_¨øy
 = (
lfds711_∑l_uöt_t
 *Ë–
ñemít_¨øy
 + 
numbî_ñemíts_tŸÆ
 );

123 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts_tŸÆ
 / 
numbî_logiˇl_¥o˚ss‹s
;

124 
numbî_ñemíts_tŸÆ
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

126 
	`lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ps
, 
LFDS711_PRNG_SEED
 );

128 
	`lfds711_hash_a_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
has
, 
baus
, 1000, 
key_com∑ª_fun˘i⁄
, 
key_hash_fun˘i⁄
, 
LFDS711_HASH_A_EXISTING_KEY_OVERWRITE
, 
NULL
 );

132  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

134 
	`LFDS711_PRNG_GENERATE
–
ps
, 
øndom_vÆue
 );

135 (
ñemít_¨øy
+
lo›
)->
key
 = (
lfds711_∑l_uöt_t
Ë–(
numbî_ñemíts_tŸÆ
/2Ë* ((Ë
øndom_vÆue
 / (Ë
LFDS711_PRNG_MAX
) );

139 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

141 
lo›
 = 0;

143  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

145 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

146 (
çts
+
lo›
)->
has
 = &has;

147 (
çts
+
lo›
)->
ñemít_¨øy
 =ÉÀmít_¨øy + 
numbî_ñemíts_≥r_thªad
*loop;

148 (
çts
+
lo›
)->
ovîwrôe_cou¡
 = 0;

149 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

150 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_addög
, &
çts
[loop] );

151 
lo›
++;

155 
	`libã°_thªad£t_run
–&
ts
 );

157 
	`libã°_thªad£t_˛ónup
–&
ts
 );

160 
LFDS711_MISC_BARRIER_LOAD
;

163  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

164 *(
key_cou¡_¨øy
+
lo›
) = 0;

166  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

167 –*(
key_cou¡_¨øy
 + (
ñemít_¨øy
+
lo›
)->
key
) )++;

169 
vi
.
mö_ñemíts
 = 
numbî_ñemíts_tŸÆ
;

171  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

172 if–*(
key_cou¡_¨øy
+
lo›
) == 0 )

173 
vi
.
mö_ñemíts
--;

175 
vi
.
max_ñemíts
 = vi.
mö_ñemíts
;

177 
	`lfds711_hash_a_quîy
–&
has
, 
LFDS711_HASH_A_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
dvs
 );

179 
ex≥˘ed_sum_ovîwrôe_exi°ög_cou¡
 = 0;

181  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

182 if–*(
key_cou¡_¨øy
+
lo›
) != 0 )

183 
ex≥˘ed_sum_ovîwrôe_exi°ög_cou¡
 +*(
key_cou¡_¨øy
+
lo›
) - 1;

185 
a˘uÆ_sum_ovîwrôe_exi°ög_cou¡
 = 0;

187  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

188 
a˘uÆ_sum_ovîwrôe_exi°ög_cou¡
 +(
çts
+
lo›
)->
ovîwrôe_cou¡
;

190 if–
ex≥˘ed_sum_ovîwrôe_exi°ög_cou¡
 !
a˘uÆ_sum_ovîwrôe_exi°ög_cou¡
 )

191 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

194  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

195 if–*(
key_cou¡_¨øy
+
lo›
) > 0 )

197 
rv
 = 
	`lfds711_hash_a_gë_by_key
–&
has
, 
NULL
, NULL, (*Ë
lo›
, &
h´
 );

199 if–
rv
 != 1 )

200 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

208  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

209 if–*(
key_cou¡_¨øy
+
lo›
) != 0 )

210 *(
key_cou¡_¨øy
+
lo›
) =Üoop;

212 *(
key_cou¡_¨øy
+
lo›
) = 0;

214 
	`qs‹t
–
key_cou¡_¨øy
, 
numbî_ñemíts_tŸÆ
, (
lfds711_∑l_uöt_t
), 
qs‹t_™d_b£¨ch_key_com∑ª_fun˘i⁄
 );

216 
	`lfds711_hash_a_ôî©e_öô
–&
has
, &
hai
 );

218  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_hash_a_ôî©e
(&
hai
, &
h´
) )

220 
key
 = 
	`LFDS711_HASH_A_GET_KEY_FROM_ELEMENT
–*
h´
 );

222 
key_poöãr
 = 
	`b£¨ch
–&
key
, 
key_cou¡_¨øy
, 
numbî_ñemíts_tŸÆ
, (
lfds711_∑l_uöt_t
), 
qs‹t_™d_b£¨ch_key_com∑ª_fun˘i⁄
 );

224 if–
key_poöãr
 =
NULL
 )

225 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

229 
	`lfds711_hash_a_˛ónup
–&
has
, 
NULL
 );

232 
	}
}

239 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_addög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

241 
lfds711_hash_a_ö£π_ªsu…


242 
≠r
;

244 
lfds711_∑l_uöt_t


245 
ödex
 = 0;

247 
ã°_≥r_thªad_°©e


248 *
çts
;

250 
libã°_thªad£t_≥r_thªad_°©e


251 *
±s
;

253 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

255 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

257 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

259 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

261 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

263  
ödex
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

265 
	`LFDS711_HASH_A_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
ödex
)->
h´
, (çts->ñemít_¨øy+ödex)->
key
 );

266 
	`LFDS711_HASH_A_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
ödex
)->
h´
, 0 );

267 
≠r
 = 
	`lfds711_hash_a_ö£π
–
çts
->
has
, &—±s->
ñemít_¨øy
+
ödex
)->
h´
, 
NULL
 );

269 if–
≠r
 =
LFDS711_HASH_A_PUT_RESULT_SUCCESS_OVERWRITE
 )

270 
çts
->
ovîwrôe_cou¡
++;

272 
ödex
++;

275 
LFDS711_MISC_BARRIER_STORE
;

277 
	`lfds711_misc_f‹˚_°‹e
();

279  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

280 
	}
}

287 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

289 
	$key_com∑ª_fun˘i⁄
–c⁄° *
√w_key
, c⁄° *
exi°ög_key
 )

292 
¸
 = 0;

297 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 < (lfds711_∑l_uöt_tË
exi°ög_key
 )

298 
¸
 = -1;

300 if–(
lfds711_∑l_uöt_t
Ë
√w_key
 > (lfds711_∑l_uöt_tË
exi°ög_key
 )

301 
¸
 = 1;

303  
¸
;

304 
	}
}

306 #¥agm®
w¨nög
(  : 4100 )

313 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

315 
	$key_hash_fun˘i⁄
–c⁄° *
key
, 
lfds711_∑l_uöt_t
 *
hash
 )

318 
	`LFDS711_PAL_ASSERT
–
hash
 !
NULL
 );

320 *
hash
 = 0;

327 
	`LFDS711_HASH_A_HASH_FUNCTION
–(*Ë&
key
, (
lfds711_∑l_uöt_t
), *
hash
 );

330 
	}
}

332 #¥agm®
w¨nög
(  : 4100 )

339 
LIBTEST_PAL_STDLIB_CALLBACK_CALLING_CONVENTION
 
	$qs‹t_™d_b£¨ch_key_com∑ª_fun˘i⁄
–c⁄° *
e1
, c⁄° *
e2
 )

342 
¸
 = 0;

344 
lfds711_∑l_uöt_t


345 
s1
,

346 
s2
;

348 
s1
 = *(
lfds711_∑l_uöt_t
 *Ë
e1
;

349 
s2
 = *(
lfds711_∑l_uöt_t
 *Ë
e2
;

351 if–
s1
 > 
s2
 )

352 
¸
 = 1;

354 if–
s1
 < 
s2
 )

355 
¸
 = -1;

357  
¸
;

358 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_internal.h

2 
	~"../libã°_öã∫Æ.h
"

5 
	#TEST_DURATION_IN_SECONDS
 5

	)

6 
	#TIME_LOOP_COUNT
 10000

	)

7 
	#REDUCED_TIME_LOOP_COUNT
 1000

	)

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_ordered_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_li°_aso_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

20 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

24 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

27 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_aso_ñemít
,
√xt
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

28 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

30 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_aso_ñemít
,
vÆue
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

31 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

36 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_aso_°©e
,
dummy_ñemít
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

37 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

39 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_aso_°©e
,
°¨t
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

40 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

43 
	}
}

45 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_ordered_new_ordered.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_li°_aso_ñemít


8 
	mœs€
;

10 
lfds711_∑l_uöt_t


11 
	mñemít_numbî
,

12 
	mthªad_numbî
;

15 
	sã°_≥r_thªad_°©e


17 
lfds711_∑l_uöt_t


18 
	mnumbî_ñemíts_≥r_thªad
;

20 
lfds711_li°_aso_°©e


21 *
	mœsos
;

23 
ã°_ñemít


24 *
	mñemít_¨øy
;

28 
√w_‹dîed_com∑ª_fun˘i⁄
–c⁄° *
vÆue_√w
, c⁄° *
vÆue_ö_li°
 );

29 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
√w_‹dîed_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 );

36 
	$libã°_ã°s_li°_aso_√w_‹dîed
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

38 
lfds711_∑l_uöt_t


39 
lo›
,

40 
ex≥˘ed_ñemít_numbî
,

41 
numbî_ñemíts
,

42 
numbî_ñemíts_≥r_thªad
,

43 
numbî_ñemíts_tŸÆ
,

44 
numbî_logiˇl_¥o˚ss‹s
,

45 
off£t
,

46 
ãmp
;

48 
lfds711_li°_aso_ñemít


49 *
œs€
 = 
NULL
;

51 
lfds711_li°_asu_ñemít


52 *
œsue
 = 
NULL
;

54 
lfds711_li°_aso_°©e


55 
œsos
;

57 
lfds711_¥ng_°©e


58 
ps
;

60 
lfds711_misc_vÆid©i⁄_öfo


61 
vi
;

63 
libã°_logiˇl_¥o˚ss‹


64 *
Õ
;

66 
libã°_thªad£t_≥r_thªad_°©e


67 *
±s
;

69 
libã°_thªad£t_°©e


70 
ts
;

72 
ã°_ñemít


73 *
ñemít_¨øy
,

74 *
ñemít
;

76 
ã°_≥r_thªad_°©e


77 *
çts
;

79 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

80 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

81 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

92 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

94 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

95 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

96 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

97 
ñemít_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

99 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

101 
	`lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ps
, 
LFDS711_PRNG_SEED
 );

103 
	`lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
œsos
, 
√w_‹dîed_com∑ª_fun˘i⁄
, 
LFDS711_LIST_ASO_INSERT_RESULT_FAILURE_EXISTING_KEY
, 
NULL
 );

112 if–
numbî_ñemíts_≥r_thªad
 > 10000 )

113 
numbî_ñemíts_≥r_thªad
 = 10000;

115 
numbî_ñemíts_tŸÆ
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

117  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

118 (
ñemít_¨øy
+
lo›
)->
ñemít_numbî
 =Üoop;

120  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

122 
	`LFDS711_PRNG_GENERATE
–
ps
, 
off£t
 );

123 
off£t
 %
numbî_ñemíts_tŸÆ
;

124 
ãmp
 = (
ñemít_¨øy
 + 
off£t
)->
ñemít_numbî
;

125 (
ñemít_¨øy
 + 
off£t
)->
ñemít_numbî
 = (ñemít_¨øy + 
lo›
)->element_number;

126 (
ñemít_¨øy
 + 
lo›
)->
ñemít_numbî
 = 
ãmp
;

130 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

132 
lo›
 = 0;

134  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

136 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

137 (
çts
+
lo›
)->
œsos
 = &lasos;

138 (
çts
+
lo›
)->
ñemít_¨øy
 =ÉÀmít_¨øy + (lo›*
numbî_ñemíts_≥r_thªad
);

139 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

140 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
√w_‹dîed_thªad
, &
çts
[loop] );

141 
lo›
++;

144 
LFDS711_MISC_BARRIER_STORE
;

146 
	`lfds711_misc_f‹˚_°‹e
();

149 
	`libã°_thªad£t_run
–&
ts
 );

151 
	`libã°_thªad£t_˛ónup
–&
ts
 );

160 
LFDS711_MISC_BARRIER_LOAD
;

162 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_tŸÆ
;

164 
	`lfds711_li°_aso_quîy
–&
œsos
, 
LFDS711_LIST_ASO_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

166 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

168 
ex≥˘ed_ñemít_numbî
 = 0;

171  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`LFDS711_LIST_ASO_GET_START_AND_THEN_NEXT
(
œsos
, 
œs€
) )

173 
ñemít
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€
 );

175 if–
ñemít
->
ñemít_numbî
 !
ex≥˘ed_ñemít_numbî
++ )

176 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

180 
	`lfds711_li°_aso_˛ónup
–&
œsos
, 
NULL
 );

183 
	}
}

190 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

192 
	$√w_‹dîed_com∑ª_fun˘i⁄
–c⁄° *
vÆue_√w
, c⁄° *
vÆue_ö_li°
 )

195 
¸
 = 0;

197 
ã°_ñemít


198 *
e1
,

199 *
e2
;

204 
e1
 = (
ã°_ñemít
 *Ë
vÆue_√w
;

205 
e2
 = (
ã°_ñemít
 *Ë
vÆue_ö_li°
;

207 if–
e1
->
ñemít_numbî
 < 
e2
->element_number )

208 
¸
 = -1;

210 if–
e1
->
ñemít_numbî
 > 
e2
->element_number )

211 
¸
 = 1;

213  
¸
;

214 
	}
}

216 #¥agm®
w¨nög
(  : 4100 )

223 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$√w_‹dîed_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 )

225 
lfds711_∑l_uöt_t


226 
lo›
;

228 
libã°_thªad£t_≥r_thªad_°©e


229 *
±s
;

231 
ã°_≥r_thªad_°©e


232 *
çts
;

234 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

236 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

238 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

239 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

241 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

243  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

245 
	`LFDS711_LIST_ASO_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œs€
,Åpts->element_array+loop );

246 
	`LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œs€
,Åpts->element_array+loop );

247 
	`lfds711_li°_aso_ö£π
–
çts
->
œsos
, &—±s->
ñemít_¨øy
+
lo›
)->
œs€
, 
NULL
 );

250 
LFDS711_MISC_BARRIER_STORE
;

252 
	`lfds711_misc_f‹˚_°‹e
();

254  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

255 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_ordered_new_ordered_with_cursor.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_li°_aso_ñemít


8 
	mœs€
;

10 
lfds711_∑l_uöt_t


11 
	mñemít_numbî
,

12 
	mthªad_numbî
;

15 
	sã°_≥r_thªad_°©e


17 
Êag


18 
	mîr‹_Êag
;

20 
lfds711_∑l_uöt_t


21 
	mnumbî_ñemíts_≥r_thªad
;

23 
lfds711_li°_aso_°©e


24 *
	mœsos
;

26 
ã°_ñemít


27 *
	mñemít_¨øy
;

31 
√w_‹dîed_wôh_curs‹_com∑ª_fun˘i⁄
–c⁄° *
vÆue_√w
, c⁄° *
vÆue_ö_li°
 );

32 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
√w_‹dîed_wôh_curs‹_ö£π_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 );

33 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
√w_‹dîed_wôh_curs‹_curs‹_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 );

40 
	$libã°_ã°s_li°_aso_√w_‹dîed_wôh_curs‹
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

42 
lfds711_∑l_uöt_t


43 
lo›
,

44 
numbî_ñemíts
,

45 
numbî_ñemíts_≥r_thªad
,

46 
numbî_ñemíts_tŸÆ
,

47 
numbî_logiˇl_¥o˚ss‹s
,

48 
off£t
,

49 
ãmp
;

51 
lfds711_li°_aso_°©e


52 
œsos
;

54 
lfds711_li°_asu_ñemít


55 *
œsue
 = 
NULL
;

57 
lfds711_¥ng_°©e


58 
ps
;

60 
lfds711_misc_vÆid©i⁄_öfo


61 
vi
;

63 
libã°_logiˇl_¥o˚ss‹


64 *
Õ
;

66 
libã°_thªad£t_≥r_thªad_°©e


67 *
±s
;

69 
libã°_thªad£t_°©e


70 
ts
;

72 
ã°_ñemít


73 *
ñemít_¨øy
;

75 
ã°_≥r_thªad_°©e


76 *
çts
;

78 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

79 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

80 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

93 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

95 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

96 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

97 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

98 
ñemít_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

100 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

102 
	`lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ps
, 
LFDS711_PRNG_SEED
 );

104 
	`lfds711_li°_aso_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
œsos
, 
√w_‹dîed_wôh_curs‹_com∑ª_fun˘i⁄
, 
LFDS711_LIST_ASO_INSERT_RESULT_FAILURE_EXISTING_KEY
, 
NULL
 );

113 if–
numbî_ñemíts_≥r_thªad
 > 1000 )

114 
numbî_ñemíts_≥r_thªad
 = 1000;

116 
numbî_ñemíts_tŸÆ
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

118  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

119 (
ñemít_¨øy
+
lo›
)->
ñemít_numbî
 =Üoop;

121  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_tŸÆ
 ;Üoop++ )

123 
	`LFDS711_PRNG_GENERATE
–
ps
, 
off£t
 );

124 
off£t
 %
numbî_ñemíts_tŸÆ
;

125 
ãmp
 = (
ñemít_¨øy
 + 
off£t
)->
ñemít_numbî
;

126 (
ñemít_¨øy
 + 
off£t
)->
ñemít_numbî
 = (ñemít_¨øy + 
lo›
)->element_number;

127 (
ñemít_¨øy
 + 
lo›
)->
ñemít_numbî
 = 
ãmp
;

131 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

133 
lo›
 = 0;

135  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

137 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

140 (
çts
+
lo›
)->
œsos
 = &lasos;

141 (
çts
+
lo›
)->
ñemít_¨øy
 =ÉÀmít_¨øy + 
numbî_ñemíts_≥r_thªad
*loop;

142 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

143 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

144 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
√w_‹dîed_wôh_curs‹_ö£π_thªad
, &
çts
[loop] );

147 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
œsos
 = &lasos;

148 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
ñemít_¨øy
 = 
NULL
;

149 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
îr‹_Êag
 = 
LOWERED
;

150 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
+
numbî_logiˇl_¥o˚ss‹s
], 
Õ
, 
√w_‹dîed_wôh_curs‹_curs‹_thªad
, &
çts
[loop+number_logical_processors] );

152 
lo›
++;

155 
LFDS711_MISC_BARRIER_STORE
;

157 
	`lfds711_misc_f‹˚_°‹e
();

159 
	`libã°_thªad£t_run
–&
ts
 );

161 
	`libã°_thªad£t_˛ónup
–&
ts
 );

170 
LFDS711_MISC_BARRIER_LOAD
;

172 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_tŸÆ
;

174 
	`lfds711_li°_aso_quîy
–&
œsos
, 
LFDS711_LIST_ASO_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

176 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

177  
lo›
 = 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop <Çumber_logical_processors * 2 ;Üoop++ )

178 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

179 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ORDER
;

181 
	`lfds711_li°_aso_˛ónup
–&
œsos
, 
NULL
 );

184 
	}
}

191 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

193 
	$√w_‹dîed_wôh_curs‹_com∑ª_fun˘i⁄
–c⁄° *
vÆue_√w
, c⁄° *
vÆue_ö_li°
 )

196 
¸
 = 0;

198 
ã°_ñemít


199 *
e1
,

200 *
e2
;

205 
e1
 = (
ã°_ñemít
 *Ë
vÆue_√w
;

206 
e2
 = (
ã°_ñemít
 *Ë
vÆue_ö_li°
;

208 if–
e1
->
ñemít_numbî
 < 
e2
->element_number )

209 
¸
 = -1;

211 if–
e1
->
ñemít_numbî
 > 
e2
->element_number )

212 
¸
 = 1;

214  
¸
;

215 
	}
}

217 #¥agm®
w¨nög
(  : 4100 )

224 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$√w_‹dîed_wôh_curs‹_ö£π_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 )

226 
lfds711_∑l_uöt_t


227 
lo›
;

229 
libã°_thªad£t_≥r_thªad_°©e


230 *
±s
;

232 
ã°_≥r_thªad_°©e


233 *
çts
;

235 
LFDS711_MISC_BARRIER_LOAD
;

237 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

239 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

240 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

242 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

244  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

246 
	`LFDS711_LIST_ASO_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œs€
,Åpts->element_array+loop );

247 
	`LFDS711_LIST_ASO_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œs€
,Åpts->element_array+loop );

248 
	`lfds711_li°_aso_ö£π
–
çts
->
œsos
, &—±s->
ñemít_¨øy
+
lo›
)->
œs€
, 
NULL
 );

251 
LFDS711_MISC_BARRIER_STORE
;

253 
	`lfds711_misc_f‹˚_°‹e
();

255  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

256 
	}
}

263 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$√w_‹dîed_wôh_curs‹_curs‹_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 )

265 
lfds711_∑l_uöt_t


266 
¥ev_ñemít_numbî
;

268 
lfds711_∑l_uöt_t


269 
time_lo›
 = 0;

271 
lfds711_li°_aso_ñemít


272 *
œs€
;

274 
ã°_ñemít


275 *
ñemít
;

277 
libã°_thªad£t_≥r_thªad_°©e


278 *
±s
;

280 
ã°_≥r_thªad_°©e


281 *
çts
;

283 
time_t


284 
cuºít_time
,

285 
°¨t_time
;

287 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

289 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

291 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

292 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

294 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

296 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

298  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

300 
¥ev_ñemít_numbî
 = 0;

302 
œs€
 = 
	`LFDS711_LIST_ASO_GET_START
–*
çts
->
œsos
 );

305 if–
œs€
 =
NULL
 )

308 
ñemít
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€
 );

310 if–
ñemít
->
ñemít_numbî
 < 
¥ev_ñemít_numbî
 )

311 
çts
->
îr‹_Êag
 = 
RAISED
;

313 
¥ev_ñemít_numbî
 = 
ñemít
->
ñemít_numbî
;

315 
œs€
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe );

317  
œs€
 !
NULL
 )

319 
ñemít
 = 
	`LFDS711_LIST_ASO_GET_VALUE_FROM_ELEMENT
–*
œs€
 );

321 if–
ñemít
->
ñemít_numbî
 <
¥ev_ñemít_numbî
 )

322 
çts
->
îr‹_Êag
 = 
RAISED
;

324 
¥ev_ñemít_numbî
 = 
ñemít
->
ñemít_numbî
;

326 
œs€
 = 
	`LFDS711_LIST_ASO_GET_NEXT
( *lasoe );

329 if–
time_lo›
++ =
REDUCED_TIME_LOOP_COUNT
 )

331 
time_lo›
 = 0;

332 
	`time
–&
cuºít_time
 );

336 
LFDS711_MISC_BARRIER_STORE
;

338 
	`lfds711_misc_f‹˚_°‹e
();

340  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

341 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_unordered_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_li°_asu_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

20 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

24 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

27 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_asu_ñemít
,
√xt
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

28 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

30 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_asu_ñemít
,
vÆue
Ë% 
LFDS711_PAL_ALIGN_SINGLE_POINTER
 != 0 )

31 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

36 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_asu_°©e
,
dummy_ñemít
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

37 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

39 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_asu_°©e
,
íd
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

40 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

42 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_li°_asu_°©e
,
°¨t
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

43 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

46 
	}
}

48 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_unordered_new_after.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_li°_asu_ñemít


8 
	mœsue
;

10 
lfds711_∑l_uöt_t


11 
	mñemít_numbî
,

12 
	mthªad_numbî
;

15 
	sã°_≥r_thªad_°©e


17 
lfds711_∑l_uöt_t


18 
	mnumbî_ñemíts_≥r_thªad
;

20 
lfds711_li°_asu_°©e


21 *
	mœsus
;

23 
ã°_ñemít


24 *
	mñemít_¨øy
;

26 
lfds711_li°_asu_ñemít


27 *
	mfú°_ñemít
;

31 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
√w_a·î_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 );

38 
	$libã°_ã°s_li°_asu_√w_a·î
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

40 
lfds711_∑l_uöt_t


41 
lo›
,

42 
numbî_ñemíts
,

43 
numbî_ñemíts_≥r_thªad
,

44 
numbî_logiˇl_¥o˚ss‹s
,

45 *
≥r_thªad_cou¡îs
,

46 
sublo›
;

48 
lfds711_li°_asu_ñemít


49 *
œsue
 = 
NULL
,

50 
fú°_ñemít
;

52 
lfds711_li°_asu_°©e


53 
œsus
;

55 
lfds711_misc_vÆid©i⁄_öfo


56 
vi
;

58 
libã°_logiˇl_¥o˚ss‹


59 *
Õ
;

61 
libã°_thªad£t_≥r_thªad_°©e


62 *
±s
;

64 
libã°_thªad£t_°©e


65 
ts
;

67 
ã°_ñemít


68 *
ñemít_¨øy
,

69 *
ñemít
;

71 
ã°_≥r_thªad_°©e


72 *
çts
;

74 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

75 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

76 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

87 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

90 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

91 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

92 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

93 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

94 
ñemít_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

96 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

98 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
œsus
, 
NULL
 );

100 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–
fú°_ñemít
, 
NULL
 );

101 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
fú°_ñemít
, 
NULL
 );

102 
	`lfds711_li°_asu_ö£π_©_posôi⁄
–&
œsus
, &
fú°_ñemít
, 
NULL
, 
LFDS711_LIST_ASU_POSITION_START
 );

104  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

105  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

107 (
ñemít_¨øy
+(
lo›
*
numbî_ñemíts_≥r_thªad
)+
sublo›
)->
thªad_numbî
 =Üoop;

108 (
ñemít_¨øy
+(
lo›
*
numbî_ñemíts_≥r_thªad
)+
sublo›
)->
ñemít_numbî
 = subloop;

111 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

113 
lo›
 = 0;

115  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

117 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

119 (
çts
+
lo›
)->
œsus
 = &lasus;

120 (
çts
+
lo›
)->
ñemít_¨øy
 =ÉÀmít_¨øy + (lo›*
numbî_ñemíts_≥r_thªad
);

121 (
çts
+
lo›
)->
fú°_ñemít
 = &first_element;

122 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

124 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
√w_a·î_thªad
, &
çts
[loop] );

126 
lo›
++;

129 
LFDS711_MISC_BARRIER_STORE
;

131 
	`lfds711_misc_f‹˚_°‹e
();

134 
	`libã°_thªad£t_run
–&
ts
 );

136 
	`libã°_thªad£t_˛ónup
–&
ts
 );

143 
LFDS711_MISC_BARRIER_LOAD
;

145 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = (
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
) + 1;

147 
	`lfds711_li°_asu_quîy
–&
œsus
, 
LFDS711_LIST_ASU_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

149  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

150 *(
≥r_thªad_cou¡îs
+
lo›
Ë
numbî_ñemíts_≥r_thªad
 - 1;

157 
œsue
 = 
	`LFDS711_LIST_ASU_GET_START
–
œsus
 );

159 
œsue
 = 
	`LFDS711_LIST_ASU_GET_NEXT
( *lasue );

161  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
œsue
 !
NULL
 )

163 
ñemít
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

165 if–
ñemít
->
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

167 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

171 if–
ñemít
->
ñemít_numbî
 < 
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

172 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

174 if–
ñemít
->
ñemít_numbî
 > 
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

175 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

177 if–
ñemít
->
ñemít_numbî
 =
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

178 
≥r_thªad_cou¡îs
[
ñemít
->
thªad_numbî
]--;

180 
œsue
 = 
	`LFDS711_LIST_ASU_GET_NEXT
( *lasue );

183 
	`lfds711_li°_asu_˛ónup
–&
œsus
, 
NULL
 );

186 
	}
}

193 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$√w_a·î_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 )

195 
lfds711_∑l_uöt_t


196 
lo›
;

198 
libã°_thªad£t_≥r_thªad_°©e


199 *
±s
;

201 
ã°_≥r_thªad_°©e


202 *
çts
;

204 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

206 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

208 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

209 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

211 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

213  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

215 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œsue
,Åpts->element_array+loop );

216 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œsue
,Åpts->element_array+loop );

217 
	`lfds711_li°_asu_ö£π_©_posôi⁄
–
çts
->
œsus
, &—±s->
ñemít_¨øy
+
lo›
)->
œsue
,Å±s->
fú°_ñemít
, 
LFDS711_LIST_ASU_POSITION_AFTER
 );

220 
LFDS711_MISC_BARRIER_STORE
;

222 
	`lfds711_misc_f‹˚_°‹e
();

224  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

225 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_unordered_new_end.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_li°_asu_ñemít


8 
	mœsue
;

10 
lfds711_∑l_uöt_t


11 
	mñemít_numbî
,

12 
	mthªad_numbî
;

15 
	sã°_≥r_thªad_°©e


17 
lfds711_∑l_uöt_t


18 
	mnumbî_ñemíts_≥r_thªad
;

20 
lfds711_li°_asu_°©e


21 *
	mœsus
;

23 
ã°_ñemít


24 *
	mñemít_¨øy
;

28 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
√w_íd_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 );

35 
	$libã°_ã°s_li°_asu_√w_íd
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

37 
lfds711_∑l_uöt_t


38 
lo›
,

39 
numbî_ñemíts
,

40 
numbî_ñemíts_≥r_thªad
,

41 
numbî_logiˇl_¥o˚ss‹s
,

42 *
≥r_thªad_cou¡îs
,

43 
sublo›
;

45 
lfds711_li°_asu_ñemít


46 *
œsue
 = 
NULL
;

48 
lfds711_li°_asu_°©e


49 
œsus
;

51 
lfds711_misc_vÆid©i⁄_öfo


52 
vi
;

54 
libã°_logiˇl_¥o˚ss‹


55 *
Õ
;

57 
libã°_thªad£t_≥r_thªad_°©e


58 *
±s
;

60 
libã°_thªad£t_°©e


61 
ts
;

63 
ã°_ñemít


64 *
ñemít_¨øy
,

65 *
ñemít
;

67 
ã°_≥r_thªad_°©e


68 *
çts
;

70 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

71 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

72 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

81 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

83 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

84 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

85 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

86 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

87 
ñemít_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

89 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

91 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
œsus
, 
NULL
 );

93  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

94  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

96 (
ñemít_¨øy
+(
lo›
*
numbî_ñemíts_≥r_thªad
)+
sublo›
)->
thªad_numbî
 =Üoop;

97 (
ñemít_¨øy
+(
lo›
*
numbî_ñemíts_≥r_thªad
)+
sublo›
)->
ñemít_numbî
 = subloop;

100 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

102 
lo›
 = 0;

104  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

106 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

108 (
çts
+
lo›
)->
œsus
 = &lasus;

109 (
çts
+
lo›
)->
ñemít_¨øy
 =ÉÀmít_¨øy + (lo›*
numbî_ñemíts_≥r_thªad
);

110 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

112 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
√w_íd_thªad
, &
çts
[loop] );

114 
lo›
++;

117 
LFDS711_MISC_BARRIER_STORE
;

119 
	`lfds711_misc_f‹˚_°‹e
();

122 
	`libã°_thªad£t_run
–&
ts
 );

124 
	`libã°_thªad£t_˛ónup
–&
ts
 );

131 
LFDS711_MISC_BARRIER_LOAD
;

133 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

135 
	`lfds711_li°_asu_quîy
–&
œsus
, 
LFDS711_LIST_ASU_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

137  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

138 *(
≥r_thªad_cou¡îs
+
lo›
) = 0;

140 
œsue
 = 
NULL
;

142  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
œsus
, 
œsue
) )

144 
ñemít
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

146 if–
ñemít
->
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

148 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

152 if–
ñemít
->
ñemít_numbî
 > 
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

153 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

155 if–
ñemít
->
ñemít_numbî
 < 
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

156 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

158 if–
ñemít
->
ñemít_numbî
 =
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

159 
≥r_thªad_cou¡îs
[
ñemít
->
thªad_numbî
]++;

162 
	`lfds711_li°_asu_˛ónup
–&
œsus
, 
NULL
 );

165 
	}
}

172 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$√w_íd_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 )

174 
lfds711_∑l_uöt_t


175 
lo›
;

177 
libã°_thªad£t_≥r_thªad_°©e


178 *
±s
;

180 
ã°_≥r_thªad_°©e


181 *
çts
;

183 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

185 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

187 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

188 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

190 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

192  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

194 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œsue
,Åpts->element_array+loop );

195 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œsue
,Åpts->element_array+loop );

196 
	`lfds711_li°_asu_ö£π_©_posôi⁄
–
çts
->
œsus
, &—±s->
ñemít_¨øy
+
lo›
)->
œsue
, 
NULL
, 
LFDS711_LIST_ASU_POSITION_END
 );

199 
LFDS711_MISC_BARRIER_STORE
;

201 
	`lfds711_misc_f‹˚_°‹e
();

203  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

204 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_unordered_new_start.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_li°_asu_ñemít


8 
	mœsue
;

10 
lfds711_∑l_uöt_t


11 
	mñemít_numbî
,

12 
	mthªad_numbî
;

15 
	sã°_≥r_thªad_°©e


17 
lfds711_∑l_uöt_t


18 
	mnumbî_ñemíts_≥r_thªad
;

20 
lfds711_li°_asu_°©e


21 *
	mœsus
;

23 
ã°_ñemít


24 *
	mñemít_¨øy
;

28 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
√w_°¨t_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 );

35 
	$libã°_ã°s_li°_asu_√w_°¨t
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

37 
lfds711_∑l_uöt_t


38 
lo›
,

39 
numbî_ñemíts
,

40 
numbî_ñemíts_≥r_thªad
,

41 
numbî_logiˇl_¥o˚ss‹s
,

42 *
≥r_thªad_cou¡îs
,

43 
sublo›
;

45 
lfds711_li°_asu_ñemít


46 *
œsue
 = 
NULL
;

48 
lfds711_li°_asu_°©e


49 
œsus
;

51 
lfds711_misc_vÆid©i⁄_öfo


52 
vi
;

54 
ã°_ñemít


55 *
ñemít_¨øy
,

56 *
ñemít
;

58 
libã°_logiˇl_¥o˚ss‹


59 *
Õ
;

61 
libã°_thªad£t_≥r_thªad_°©e


62 *
±s
;

64 
libã°_thªad£t_°©e


65 
ts
;

67 
ã°_≥r_thªad_°©e


68 *
çts
;

70 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

71 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

72 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

81 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

83 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

84 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

85 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

86 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

87 
ñemít_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

89 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

91 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
œsus
, 
NULL
 );

93  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

94  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

96 (
ñemít_¨øy
+(
lo›
*
numbî_ñemíts_≥r_thªad
)+
sublo›
)->
thªad_numbî
 =Üoop;

97 (
ñemít_¨øy
+(
lo›
*
numbî_ñemíts_≥r_thªad
)+
sublo›
)->
ñemít_numbî
 = subloop;

100 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

102 
lo›
 = 0;

104  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

106 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

108 (
çts
+
lo›
)->
œsus
 = &lasus;

109 (
çts
+
lo›
)->
ñemít_¨øy
 =ÉÀmít_¨øy + (lo›*
numbî_ñemíts_≥r_thªad
);

110 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

112 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
√w_°¨t_thªad
, &
çts
[loop] );

114 
lo›
++;

117 
LFDS711_MISC_BARRIER_STORE
;

119 
	`lfds711_misc_f‹˚_°‹e
();

122 
	`libã°_thªad£t_run
–&
ts
 );

124 
	`libã°_thªad£t_˛ónup
–&
ts
 );

131 
LFDS711_MISC_BARRIER_LOAD
;

133 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

135 
	`lfds711_li°_asu_quîy
–&
œsus
, 
LFDS711_LIST_ASU_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

137  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

138 *(
≥r_thªad_cou¡îs
+
lo›
Ë
numbî_ñemíts_≥r_thªad
 - 1;

140 
œsue
 = 
NULL
;

142  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
œsus
, 
œsue
) )

144 
ñemít
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

146 if–
ñemít
->
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

148 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

152 if–
ñemít
->
ñemít_numbî
 < 
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

153 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

155 if–
ñemít
->
ñemít_numbî
 > 
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

156 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

158 if–
ñemít
->
ñemít_numbî
 =
≥r_thªad_cou¡îs
[ñemít->
thªad_numbî
] )

159 
≥r_thªad_cou¡îs
[
ñemít
->
thªad_numbî
]--;

162 
	`lfds711_li°_asu_˛ónup
–&
œsus
, 
NULL
 );

165 
	}
}

172 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$√w_°¨t_thªad
–*
libã°_thªad£t_≥r_thªad_°©e
 )

174 
lfds711_∑l_uöt_t


175 
lo›
;

177 
libã°_thªad£t_≥r_thªad_°©e


178 *
±s
;

180 
ã°_≥r_thªad_°©e


181 *
çts
;

183 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

185 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

187 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

188 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

190 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

192  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

194 
	`LFDS711_LIST_ASU_SET_KEY_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œsue
,Åpts->element_array+loop );

195 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–(
çts
->
ñemít_¨øy
+
lo›
)->
œsue
,Åpts->element_array+loop );

196 
	`lfds711_li°_asu_ö£π_©_posôi⁄
–
çts
->
œsus
, &—±s->
ñemít_¨øy
+
lo›
)->
œsue
, 
NULL
, 
LFDS711_LIST_ASU_POSITION_START
 );

199 
LFDS711_MISC_BARRIER_STORE
;

201 
	`lfds711_misc_f‹˚_°‹e
();

203  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

204 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_porting_abstraction_layer_atomic_add.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_add
–*
libã°_thªad£t_≥r_thªad_°©e
 );

6 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_©omic_add
–*
libã°_thªad£t_≥r_thªad_°©e
 );

13 
	$libã°_ã°s_∑l_©omic_add
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

15 
lfds711_∑l_uöt_t
 vﬁ©ûê
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

16 
numbî_logiˇl_¥o˚ss‹s
,

17 
©omic_sh¨ed_cou¡î
,

18 
sh¨ed_cou¡î
;

20 
lfds711_∑l_uöt_t


21 
lo›
 = 0;

23 
lfds711_li°_asu_ñemít


24 *
œsue
 = 
NULL
;

26 
libã°_logiˇl_¥o˚ss‹


27 *
Õ
;

29 
libã°_thªad£t_≥r_thªad_°©e


30 *
±s
;

32 
libã°_thªad£t_°©e


33 
ts
;

35 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

36 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

37 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

61 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

62 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

64 
sh¨ed_cou¡î
 = 0;

65 
©omic_sh¨ed_cou¡î
 = 0;

67 
LFDS711_MISC_BARRIER_STORE
;

71 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

73  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

75 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

76 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_add
, (*Ë&
sh¨ed_cou¡î
 );

77 
lo›
++;

80 
LFDS711_MISC_BARRIER_STORE
;

81 
	`lfds711_misc_f‹˚_°‹e
();

82 
	`libã°_thªad£t_run
–&
ts
 );

83 
	`libã°_thªad£t_˛ónup
–&
ts
 );

87 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

89 
lo›
 = 0;

90 
œsue
 = 
NULL
;

92  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

94 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

95 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_©omic_add
, (*Ë&
©omic_sh¨ed_cou¡î
 );

96 
lo›
++;

99 
LFDS711_MISC_BARRIER_STORE
;

100 
	`lfds711_misc_f‹˚_°‹e
();

101 
	`libã°_thªad£t_run
–&
ts
 );

102 
	`libã°_thªad£t_˛ónup
–&
ts
 );

103 
LFDS711_MISC_BARRIER_LOAD
;

113 if–
numbî_logiˇl_¥o˚ss‹s
 == 1 )

115 if–
sh¨ed_cou¡î
 =(10000000 * 
numbî_logiˇl_¥o˚ss‹s
Ë
™d
 
©omic_sh¨ed_cou¡î
 == (10000000 *Çumber_logical_processors) )

116 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

118 if–
sh¨ed_cou¡î
 !(10000000 * 
numbî_logiˇl_¥o˚ss‹s
Ë
‹
 
©omic_sh¨ed_cou¡î
 != (10000000 *Çumber_logical_processors) )

119 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ATOMIC_FAILED
;

122 if–
numbî_logiˇl_¥o˚ss‹s
 >= 2 )

124 if–
sh¨ed_cou¡î
 < (10000000 * 
numbî_logiˇl_¥o˚ss‹s
Ë
™d
 
©omic_sh¨ed_cou¡î
 == (10000000 *Çumber_logical_processors) )

125 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

127 if–
sh¨ed_cou¡î
 =(10000000 * 
numbî_logiˇl_¥o˚ss‹s
Ë
™d
 
©omic_sh¨ed_cou¡î
 == (10000000 *Çumber_logical_processors) )

128 *
dvs
 = 
LFDS711_MISC_VALIDITY_INDETERMINATE_NONATOMIC_PASSED
;

130 if–
©omic_sh¨ed_cou¡î
 < (10000000 * 
numbî_logiˇl_¥o˚ss‹s
) )

131 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ATOMIC_FAILED
;

135 
	}
}

142 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_add
–*
libã°_thªad£t_≥r_thªad_°©e
 )

144 
libã°_thªad£t_≥r_thªad_°©e


145 *
±s
;

147 
lfds711_∑l_uöt_t
 volatile

148 *
sh¨ed_cou¡î
;

150 
lfds711_∑l_uöt_t
 volatile

151 
cou¡
 = 0;

153 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

155 
LFDS711_MISC_BARRIER_LOAD
;

157 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

158 
sh¨ed_cou¡î
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

160 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

162  
cou¡
++ < 10000000 )

163 (*
sh¨ed_cou¡î
)++;

165  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

166 
	}
}

173 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_©omic_add
–*
libã°_thªad£t_≥r_thªad_°©e
 )

175 
libã°_thªad£t_≥r_thªad_°©e


176 *
±s
;

178 
lfds711_∑l_uöt_t
 volatile

179 
ªsu…
,

180 *
sh¨ed_cou¡î
;

182 
lfds711_∑l_uöt_t
 volatile

183 
cou¡
 = 0;

185 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

187 
LFDS711_MISC_BARRIER_LOAD
;

189 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

190 
sh¨ed_cou¡î
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

192 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

194  
cou¡
++ < 10000000 )

196 
	`LFDS711_PAL_ATOMIC_ADD
–
sh¨ed_cou¡î
, 1, 
ªsu…
, 
lfds711_∑l_uöt_t
 );

197 (Ë
ªsu…
;

200  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

201 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_porting_abstraction_layer_atomic_cas.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	slibã°_ã°s_∑l_©omic_ˇs_°©e


7 
lfds711_∑l_uöt_t


8 
	mloˇl_cou¡î
;

10 
lfds711_∑l_uöt_t
 volatile

11 *
	msh¨ed_cou¡î
;

15 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_ˇs
–*
libã°_thªad£t_≥r_thªad_°©e
 );

22 
	$libã°_ã°s_∑l_©omic_ˇs
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

24 
lfds711_∑l_uöt_t
 vﬁ©ûê
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

25 
sh¨ed_cou¡î
;

27 
lfds711_∑l_uöt_t


28 
loˇl_tŸÆ
 = 0;

30 
lfds711_∑l_uöt_t


31 
lo›
 = 0,

32 
numbî_logiˇl_¥o˚ss‹s
;

34 
lfds711_li°_asu_ñemít


35 *
œsue
 = 
NULL
;

37 
libã°_logiˇl_¥o˚ss‹


38 *
Õ
;

40 
libã°_thªad£t_≥r_thªad_°©e


41 *
±s
;

43 
libã°_thªad£t_°©e


44 
ts
;

46 
libã°_ã°s_∑l_©omic_ˇs_°©e


47 *
©cs
;

49 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

50 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

51 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

65 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

66 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

67 
©cs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_ã°s_∑l_©omic_ˇs_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

69 
sh¨ed_cou¡î
 = 0;

71  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

73 (
©cs
+
lo›
)->
sh¨ed_cou¡î
 = &shared_counter;

74 (
©cs
+
lo›
)->
loˇl_cou¡î
 = 0;

77 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

79 
lo›
 = 0;

81  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

83 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

84 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_ˇs
, 
©cs
+loop );

85 
lo›
++;

88 
LFDS711_MISC_BARRIER_STORE
;

90 
	`lfds711_misc_f‹˚_°‹e
();

93 
	`libã°_thªad£t_run
–&
ts
 );

95 
	`libã°_thªad£t_˛ónup
–&
ts
 );

98 
LFDS711_MISC_BARRIER_LOAD
;

100  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

101 
loˇl_tŸÆ
 +(
©cs
+
lo›
)->
loˇl_cou¡î
;

103 if–
loˇl_tŸÆ
 =
sh¨ed_cou¡î
 )

104 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

106 if–
loˇl_tŸÆ
 !
sh¨ed_cou¡î
 )

107 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

110 
	}
}

117 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_ˇs
–*
libã°_thªad£t_≥r_thªad_°©e
 )

120 
ªsu…
;

122 
lfds711_∑l_uöt_t


123 
lo›
 = 0;

125 
lfds711_∑l_uöt_t
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_SINGLE_POINTER
)

126 
exch™ge
,

127 
com∑ª
;

129 
libã°_ã°s_∑l_©omic_ˇs_°©e


130 *
©cs
;

132 
libã°_thªad£t_≥r_thªad_°©e


133 *
±s
;

135 
LFDS711_MISC_BARRIER_LOAD
;

137 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

139 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

140 
©cs
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

142 
LFDS711_MISC_BARRIER_LOAD
;

144 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

146  
lo›
++ < 10000000 )

148 
com∑ª
 = *
©cs
->
sh¨ed_cou¡î
;

152 
exch™ge
 = 
com∑ª
 + 1;

153 
	`LFDS711_PAL_ATOMIC_CAS
–
©cs
->
sh¨ed_cou¡î
, &
com∑ª
, 
exch™ge
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

155  
ªsu…
 == 0 );

157 
©cs
->
loˇl_cou¡î
++;

160 
LFDS711_MISC_BARRIER_STORE
;

162 
	`lfds711_misc_f‹˚_°‹e
();

164  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

165 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_porting_abstraction_layer_atomic_dwcas.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	slibã°_ã°s_∑l_©omic_dwˇs_°©e


7 
lfds711_∑l_uöt_t


8 
	mloˇl_cou¡î
;

10 
lfds711_∑l_uöt_t
 volatile

11 (*
	msh¨ed_cou¡î
)[2];

15 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_dwˇs
–*
libã°_thªad£t_≥r_thªad_°©e
 );

22 
	$libã°_ã°s_∑l_©omic_dwˇs
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

24 
lfds711_∑l_uöt_t


25 
loˇl_tŸÆ
 = 0,

26 
lo›
,

27 
numbî_logiˇl_¥o˚ss‹s
;

29 
lfds711_∑l_uöt_t
 vﬁ©ûê
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

30 
sh¨ed_cou¡î
[2] = { 0, 0 };

32 
lfds711_li°_asu_ñemít


33 *
œsue
 = 
NULL
;

35 
libã°_logiˇl_¥o˚ss‹


36 *
Õ
;

38 
libã°_thªad£t_≥r_thªad_°©e


39 *
±s
;

41 
libã°_thªad£t_°©e


42 
ts
;

44 
libã°_ã°s_∑l_©omic_dwˇs_°©e


45 *
©ds
;

47 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

48 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

49 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

62 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

63 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

64 
©ds
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_ã°s_∑l_©omic_dwˇs_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

66  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

68 (
©ds
+
lo›
)->
sh¨ed_cou¡î
 = &shared_counter;

69 (
©ds
+
lo›
)->
loˇl_cou¡î
 = 0;

72 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

74 
lo›
 = 0;

76  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

78 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

79 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_dwˇs
, 
©ds
+loop );

80 
lo›
++;

83 
LFDS711_MISC_BARRIER_STORE
;

85 
	`lfds711_misc_f‹˚_°‹e
();

88 
	`libã°_thªad£t_run
–&
ts
 );

90 
	`libã°_thªad£t_˛ónup
–&
ts
 );

93 
LFDS711_MISC_BARRIER_LOAD
;

95  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

96 
loˇl_tŸÆ
 +(
©ds
+
lo›
)->
loˇl_cou¡î
;

98 if–
loˇl_tŸÆ
 =
sh¨ed_cou¡î
[0] )

99 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

101 if–
loˇl_tŸÆ
 !
sh¨ed_cou¡î
[0] )

102 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

105 
	}
}

107 #¥agm®
w¨nög
–
dißbÀ
 : 4702 )

114 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_dwˇs
–*
libã°_thªad£t_≥r_thªad_°©e
 )

117 
ªsu…
;

119 
lfds711_∑l_uöt_t


120 
lo›
 = 0;

122 
lfds711_∑l_uöt_t
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ALIGN_DOUBLE_POINTER
)

123 
exch™ge
[2],

124 
com∑ª
[2];

126 
libã°_ã°s_∑l_©omic_dwˇs_°©e


127 *
©ds
;

129 
libã°_thªad£t_≥r_thªad_°©e


130 *
±s
;

132 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

134 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

135 
©ds
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

137 
LFDS711_MISC_BARRIER_LOAD
;

139 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

141  
lo›
++ < 10000000 )

143 
com∑ª
[0] = (*
©ds
->
sh¨ed_cou¡î
)[0];

144 
com∑ª
[1] = (*
©ds
->
sh¨ed_cou¡î
)[1];

148 
exch™ge
[0] = 
com∑ª
[0] + 1;

149 
exch™ge
[1] = 
com∑ª
[1];

150 
	`LFDS711_PAL_ATOMIC_DWCAS
–(*
©ds
->
sh¨ed_cou¡î
), 
com∑ª
, 
exch™ge
, 
LFDS711_MISC_CAS_STRENGTH_WEAK
, 
ªsu…
 );

152  
ªsu…
 == 0 );

154 
©ds
->
loˇl_cou¡î
++;

157 
LFDS711_MISC_BARRIER_STORE
;

159 
	`lfds711_misc_f‹˚_°‹e
();

161  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

162 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_porting_abstraction_layer_atomic_exchange.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_∑l_uöt_t


8 
	mcou¡î
,

9 *
	mcou¡î_¨øy
,

10 
	mnumbî_ñemíts_≥r_thªad
,

11 
	mnumbî_logiˇl_¥o˚ss‹s
;

13 
lfds711_∑l_uöt_t
 volatile

14 *
	msh¨ed_exch™ge
;

18 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_exch™ge
–*
libã°_thªad£t_≥r_thªad_°©e
 );

19 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_©omic_exch™ge
–*
libã°_thªad£t_≥r_thªad_°©e
 );

26 
	$libã°_ã°s_∑l_©omic_exch™ge
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

28 
Êag


29 
©omic_exch™ge_suc˚ss_Êag
 = 
RAISED
,

30 
exch™ge_suc˚ss_Êag
 = 
RAISED
;

32 
lfds711_∑l_uöt_t


33 
lo›
,

34 *
mîged_cou¡î_¨øys
,

35 
numbî_ñemíts
,

36 
numbî_ñemíts_≥r_thªad
,

37 
numbî_logiˇl_¥o˚ss‹s
,

38 
sublo›
;

40 
lfds711_∑l_uöt_t
 vﬁ©ûê
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

41 
exch™ge
 = 0;

43 
lfds711_li°_asu_ñemít


44 *
œsue
 = 
NULL
;

46 
libã°_logiˇl_¥o˚ss‹


47 *
Õ
;

49 
libã°_thªad£t_≥r_thªad_°©e


50 *
±s
;

52 
libã°_thªad£t_°©e


53 
ts
;

55 
ã°_≥r_thªad_°©e


56 *
çts
;

58 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

59 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

60 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

89 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

92 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

93 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

94 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

95 
mîged_cou¡î_¨øys
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

101 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / (
numbî_logiˇl_¥o˚ss‹s
+1);

105  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

106 *(
mîged_cou¡î_¨øys
+
lo›
) = 0;

108 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

110 
lo›
 = 0;

112  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

114 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

116 (
çts
+
lo›
)->
cou¡î
 =Üoop + 1;

118 (
çts
+
lo›
)->
cou¡î_¨øy
 = 
mîged_cou¡î_¨øys
 + (÷o›+1)*
numbî_ñemíts_≥r_thªad
);

119  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

120 *((
çts
+
lo›
)->
cou¡î_¨øy
+
sublo›
) = 0;

121 (
çts
+
lo›
)->
numbî_logiˇl_¥o˚ss‹s
 =Çumber_logical_processors;

122 (
çts
+
lo›
)->
sh¨ed_exch™ge
 = &
exch™ge
;

123 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

125 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_exch™ge
, &
çts
[loop] );

127 
lo›
++;

130 
LFDS711_MISC_BARRIER_STORE
;

132 
	`lfds711_misc_f‹˚_°‹e
();

135 
	`libã°_thªad£t_run
–&
ts
 );

136 
	`libã°_thªad£t_˛ónup
–&
ts
 );

139 
LFDS711_MISC_BARRIER_LOAD
;

141  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

142  
sublo›
 = 0 ; sublo› < 
numbî_logiˇl_¥o˚ss‹s
 ; subloop++ )

143 *(
mîged_cou¡î_¨øys
+
lo›
Ë+*–(
çts
+
sublo›
)->
cou¡î_¨øy
+loop );

152  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 - 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

153 if–*(
mîged_cou¡î_¨øys
+
lo›
) != 1 )

154 
exch™ge_suc˚ss_Êag
 = 
LOWERED
;

158  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

159 *(
mîged_cou¡î_¨øys
+
lo›
) = 0;

161 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

163  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

164  
sublo›
 = 0 ; sublo› < 
numbî_ñemíts_≥r_thªad
 ; subloop++ )

165 *((
çts
+
lo›
)->
cou¡î_¨øy
+
sublo›
) = 0;

167 
lo›
 = 0;

168 
œsue
 = 
NULL
;

170  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

172 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

174 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_©omic_exch™ge
, &
çts
[loop] );

175 
lo›
++;

178 
exch™ge
 = 0;

180 
LFDS711_MISC_BARRIER_STORE
;

182 
	`lfds711_misc_f‹˚_°‹e
();

184 
	`libã°_thªad£t_run
–&
ts
 );

186 
	`libã°_thªad£t_˛ónup
–&
ts
 );

189 
LFDS711_MISC_BARRIER_LOAD
;

191  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

192  
sublo›
 = 0 ; sublo› < 
numbî_logiˇl_¥o˚ss‹s
 ; subloop++ )

193 *(
mîged_cou¡î_¨øys
+
lo›
Ë+*–(
çts
+
sublo›
)->
cou¡î_¨øy
+loop );

195  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 - 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

196 if–*(
mîged_cou¡î_¨øys
+
lo›
) != 1 )

197 
©omic_exch™ge_suc˚ss_Êag
 = 
LOWERED
;

207 
LFDS711_MISC_BARRIER_LOAD
;

209 if–
numbî_logiˇl_¥o˚ss‹s
 == 1 )

211 if–
exch™ge_suc˚ss_Êag
 =
RAISED
 
™d
 
©omic_exch™ge_suc˚ss_Êag
 == RAISED )

212 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

214 if–
exch™ge_suc˚ss_Êag
 !
RAISED
 
‹
 
©omic_exch™ge_suc˚ss_Êag
 != RAISED )

215 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ATOMIC_FAILED
;

218 if–
numbî_logiˇl_¥o˚ss‹s
 >= 2 )

220 if–
©omic_exch™ge_suc˚ss_Êag
 =
RAISED
 
™d
 
exch™ge_suc˚ss_Êag
 =
LOWERED
 )

221 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

223 if–
©omic_exch™ge_suc˚ss_Êag
 =
RAISED
 
™d
 
exch™ge_suc˚ss_Êag
 == RAISED )

224 *
dvs
 = 
LFDS711_MISC_VALIDITY_INDETERMINATE_NONATOMIC_PASSED
;

226 if–
©omic_exch™ge_suc˚ss_Êag
 =
LOWERED
 )

227 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ATOMIC_FAILED
;

231 
	}
}

238 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_exch™ge
–*
libã°_thªad£t_≥r_thªad_°©e
 )

240 
lfds711_∑l_uöt_t


241 
loˇl_cou¡î
,

242 
exch™ge
;

244 
ã°_≥r_thªad_°©e


245 *
çts
;

247 
libã°_thªad£t_≥r_thªad_°©e


248 *
±s
;

250 
LFDS711_MISC_BARRIER_LOAD
;

252 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

254 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

255 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

257 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

259 
loˇl_cou¡î
 = 
çts
->
cou¡î
;

261  
loˇl_cou¡î
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

263 
exch™ge
 = *
çts
->
sh¨ed_exch™ge
;

264 *
çts
->
sh¨ed_exch™ge
 = 
loˇl_cou¡î
;

266 –*(
çts
->
cou¡î_¨øy
 + 
exch™ge
) )++;

268 
loˇl_cou¡î
 +
çts
->
numbî_logiˇl_¥o˚ss‹s
;

271 
LFDS711_MISC_BARRIER_STORE
;

273 
	`lfds711_misc_f‹˚_°‹e
();

275  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

276 
	}
}

283 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_©omic_exch™ge
–*
libã°_thªad£t_≥r_thªad_°©e
 )

285 
lfds711_∑l_uöt_t


286 
loˇl_cou¡î
,

287 
exch™ge
;

289 
ã°_≥r_thªad_°©e


290 *
çts
;

292 
libã°_thªad£t_≥r_thªad_°©e


293 *
±s
;

295 
LFDS711_MISC_BARRIER_LOAD
;

297 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

299 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

300 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

302 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

304 
loˇl_cou¡î
 = 
çts
->
cou¡î
;

306  
loˇl_cou¡î
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

308 
exch™ge
 = 
loˇl_cou¡î
;

310 
	`LFDS711_PAL_ATOMIC_EXCHANGE
–
çts
->
sh¨ed_exch™ge
, 
exch™ge
, 
lfds711_∑l_uöt_t
 );

313 –*(
çts
->
cou¡î_¨øy
 + 
exch™ge
) )++;

315 
loˇl_cou¡î
 +(
lfds711_∑l_uöt_t
Ë
çts
->
numbî_logiˇl_¥o˚ss‹s
;

318 
LFDS711_MISC_BARRIER_STORE
;

320 
	`lfds711_misc_f‹˚_°‹e
();

322  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

323 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_prng_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_¥ng_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

13 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

14 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

15 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

17 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

20 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_¥ng_°©e
,
íå›y
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

21 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

24 
	}
}

26 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_prng_generate.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_¥ng_°©e


8 *
	mps
;

10 
lfds711_∑l_uöt_t


11 
	mªad_ödex
,

12 *
	mouçut_¨øy
;

16 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_gíî©e
–*
libã°_thªad£t_≥r_thªad_°©e
 );

23 
	$libã°_ã°s_¥ng_gíî©e
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

25 
Êag


26 
du∂iˇã_Êag
 = 
LOWERED
,

27 
föished_Êag
 = 
LOWERED
;

29 
lfds711_∑l_uöt_t


30 *
ouçut_¨øys
,

31 
ödex
 = 0,

32 
lo›
 = 0,

33 
món
 = 0,

34 *
mîged_ouçut_¨øys
,

35 
mîged_wrôe_ödex
 = 0,

36 
numbî_logiˇl_¥o˚ss‹s
,

37 
smÆÀ°_¥ng_vÆue
,

38 
ãn_≥r˚¡
,

39 
thªad_to_bump
 = 0;

41 
lfds711_li°_asu_ñemít


42 *
œsue
 = 
NULL
;

44 
libã°_logiˇl_¥o˚ss‹


45 *
Õ
;

47 
lfds711_¥ng_°©e


48 
ps
;

50 
libã°_thªad£t_≥r_thªad_°©e


51 *
±s
;

53 
libã°_thªad£t_°©e


54 
ts
;

56 
ã°_≥r_thªad_°©e


57 *
çts
;

59 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

60 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

77 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

80 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

81 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

82 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

83 
ouçut_¨øys
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 128 * 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

84 
mîged_ouçut_¨øys
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 128 * 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

86 
	`lfds711_¥ng_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ps
, 
LFDS711_PRNG_SEED
 );

88 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

90  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

92 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

94 (
çts
+
lo›
)->
ps
 = &ps;

95 (
çts
+
lo›
)->
ouçut_¨øy
 = 
ouçut_¨øys
 + (loop * 128);

96 (
çts
+
lo›
)->
ªad_ödex
 = 0;

98 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_gíî©e
, &
çts
[loop] );

100 
lo›
++;

103 
LFDS711_MISC_BARRIER_STORE
;

105 
	`lfds711_misc_f‹˚_°‹e
();

108 
	`libã°_thªad£t_run
–&
ts
 );

109 
	`libã°_thªad£t_˛ónup
–&
ts
 );

112 
LFDS711_MISC_BARRIER_LOAD
;

115  
föished_Êag
 =
LOWERED
 )

117 
smÆÀ°_¥ng_vÆue
 = 
LFDS711_PRNG_MAX
;

118 
föished_Êag
 = 
RAISED
;

120  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

121 if–
çts
[
lo›
].
ªad_ödex
 < 128 
™d
Å±s[lo›].
ouçut_¨øy
[Å±s[lo›].ªad_ödex ] < 
smÆÀ°_¥ng_vÆue
 )

123 
smÆÀ°_¥ng_vÆue
 = 
çts
[
lo›
].
ouçut_¨øy
[Å±s[lo›].
ªad_ödex
 ];

124 
thªad_to_bump
 = 
lo›
;

125 
föished_Êag
 = 
LOWERED
;

128 
çts
[
thªad_to_bump
].
ªad_ödex
++;

129 
mîged_ouçut_¨øys
[ 
mîged_wrôe_ödex
++ ] = 
smÆÀ°_¥ng_vÆue
;

133  
du∂iˇã_Êag
 =
LOWERED
 
™d
 
ödex
 < (128 * 
numbî_logiˇl_¥o˚ss‹s
) - 2 )

135 if–
mîged_ouçut_¨øys
[
ödex
] == merged_output_arrays[index+1] )

136 
du∂iˇã_Êag
 = 
RAISED
;

137 
ödex
++;

140 if–
du∂iˇã_Êag
 =
RAISED
 )

141 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

144  
lo›
 = 0 ;Üo› < 128 * 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

145 
món
 +
mîged_ouçut_¨øys
[
lo›
] / (128*
numbî_logiˇl_¥o˚ss‹s
);

155 
ãn_≥r˚¡
 = 
LFDS711_PRNG_MAX
 / 10;

157 if–
món
 < (
LFDS711_PRNG_MAX
 / 2Ë- 
ãn_≥r˚¡
 
‹
 mean > (LFDS711_PRNG_MAX / 2) +Åen_percent )

158 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

163 
	}
}

170 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_gíî©e
–*
libã°_thªad£t_≥r_thªad_°©e
 )

172 
lfds711_∑l_uöt_t


173 
ödex
 = 0,

174 
time_lo›
 = 0;

176 
ã°_≥r_thªad_°©e


177 *
çts
;

179 
libã°_thªad£t_≥r_thªad_°©e


180 *
±s
;

182 
time_t


183 
cuºít_time
,

184 
°¨t_time
;

186 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

188 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

190 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

191 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

193 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

195 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

197  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

199 
	`LFDS711_PRNG_GENERATE
–*
çts
->
ps
,Å±s->
ouçut_¨øy
[
ödex
] );

202 
ödex
 = ( (index+1) & 0x7F );

204 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

206 
time_lo›
 = 0;

207 
	`time
–&
cuºít_time
 );

211 
LFDS711_MISC_BARRIER_STORE
;

213 
	`lfds711_misc_f‹˚_°‹e
();

215  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

216 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_queue_bmm_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

20 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

24 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

27 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_queue_bmm_°©e
,
ªad_ödex
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

28 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

30 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_queue_bmm_°©e
,
wrôe_ödex
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

31 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

34 
	}
}

36 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_count.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libã°_ã°s_queue_bmm_cou¡
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

14 
rv
;

16 
lfds711_∑l_uöt_t


17 
ex≥˘ed_cou¡
 = 0,

18 
key
,

19 
lo›
,

20 
numbî_ñemíts
,

21 
sublo›
,

22 
vÆue
;

24 
lfds711_queue_bmm_ñemít


25 
qbmme_¨øy
[8];

27 
lfds711_queue_bmm_°©e


28 
qbmms
;

30 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

31 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

32 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

40 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

42 
	`lfds711_queue_bmm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qbmms
, 
qbmme_¨øy
, 8, 
NULL
 );

45  
lo›
 = 0 ;Üoop < 64 ;Üoop++ )

48  
sublo›
 = 0 ; subloop < 2 ; subloop++ )

50 
rv
 = 
	`lfds711_queue_bmm_íqueue
–&
qbmms
, 
NULL
, NULL );

52 if–
rv
 =1 
™d
 
ex≥˘ed_cou¡
 == 8 )

53 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

55 if–
rv
 =1 
™d
 
ex≥˘ed_cou¡
 < 8 )

56 
ex≥˘ed_cou¡
++;

60 
rv
 = 
	`lfds711_queue_bmm_dequeue
–&
qbmms
, (**Ë&
key
, (**Ë&
vÆue
 );

62 if–
rv
 == 1 )

63 
ex≥˘ed_cou¡
--;

65 if–
rv
 == 0 )

66 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

68 
	`lfds711_queue_bmm_quîy
–&
qbmms
, 
LFDS711_QUEUE_BMM_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (*Ë&
numbî_ñemíts
 );

70 if–
numbî_ñemíts
 !
ex≥˘ed_cou¡
 )

71 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

74 
	`lfds711_queue_bmm_˛ónup
–&
qbmms
, 
NULL
 );

77 
	}
}

79 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_dequeuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
Êag


8 
	mîr‹_Êag
;

10 
lfds711_queue_bmm_°©e


11 *
	mqbmms
;

15 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_sim∂e_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

22 
	$libã°_ã°s_queue_bmm_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

24 
lfds711_∑l_uöt_t


25 
cou¡î
 = 0,

26 
lo›
 = 0,

27 
powî_of_two_numbî_ñemíts
 = 1,

28 
numbî_ñemíts
,

29 
numbî_logiˇl_¥o˚ss‹s
;

31 
lfds711_li°_asu_ñemít


32 *
œsue
 = 
NULL
;

34 
lfds711_queue_bmm_ñemít


35 *
qbmme_¨øy
;

37 
lfds711_queue_bmm_°©e


38 
qbmms
;

40 
lfds711_misc_vÆid©i⁄_öfo


41 
vi
;

43 
libã°_logiˇl_¥o˚ss‹


44 *
Õ
;

46 
libã°_thªad£t_≥r_thªad_°©e


47 *
±s
;

49 
libã°_thªad£t_°©e


50 
ts
;

52 
ã°_≥r_thªad_°©e


53 *
çts
;

55 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

56 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

57 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

67 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

69 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

72 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

73 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

74 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

75 
qbmme_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
lfds711_queue_bmm_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

78 
numbî_ñemíts
 >>= 1;

80  
numbî_ñemíts
 != 0 )

82 
numbî_ñemíts
 >>= 1;

83 
powî_of_two_numbî_ñemíts
 <<= 1;

86 
	`lfds711_queue_bmm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qbmms
, 
qbmme_¨øy
, 
powî_of_two_numbî_ñemíts
, 
NULL
 );

89  
	`lfds711_queue_bmm_íqueue
(&
qbmms
, 
NULL
, (*Ë(
cou¡î
++)) );

91 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

93  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

95 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

96 (
çts
+
lo›
)->
qbmms
 = &qbmms;

97 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

98 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_sim∂e_dequeuî
, &
çts
[loop] );

99 
lo›
++;

102 
LFDS711_MISC_BARRIER_STORE
;

104 
	`lfds711_misc_f‹˚_°‹e
();

107 
	`libã°_thªad£t_run
–&
ts
 );

109 
	`libã°_thªad£t_˛ónup
–&
ts
 );

112 
LFDS711_MISC_BARRIER_LOAD
;

118  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

119 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

120 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ORDER
;

122 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

124 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 0;

125 
	`lfds711_queue_bmm_quîy
–&
qbmms
, 
LFDS711_QUEUE_BMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

128 
	`lfds711_queue_bmm_˛ónup
–&
qbmms
, 
NULL
 );

131 
	}
}

138 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_sim∂e_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

140 
lfds711_∑l_uöt_t


141 
cou¡î
 = 0,

142 
key
,

143 
vÆue
;

145 
ã°_≥r_thªad_°©e


146 *
çts
;

148 
libã°_thªad£t_≥r_thªad_°©e


149 *
±s
;

151 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

153 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

155 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

156 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

158 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

160  
	`lfds711_queue_bmm_dequeue
(
çts
->
qbmms
, (*Ë&
key
, (*Ë&
vÆue
) )

162 if–
vÆue
 < 
cou¡î
 )

163 
çts
->
îr‹_Êag
 = 
RAISED
;

165 if–
vÆue
 > 
cou¡î
 )

166 
cou¡î
 = 
vÆue
;

169 
LFDS711_MISC_BARRIER_STORE
;

171 
	`lfds711_misc_f‹˚_°‹e
();

173  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

174 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_enqueuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_∑l_uöt_t


8 
	mthªad_numbî
;

10 
lfds711_queue_bmm_°©e


11 *
	mqbmms
;

15 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_sim∂e_íqueuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

22 
	$libã°_ã°s_queue_bmm_íqueuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

24 
lfds711_∑l_uöt_t


25 
cou¡î_numbî
,

26 
lo›
 = 0,

27 *
≥r_thªad_cou¡îs
,

28 
powî_of_two_numbî_ñemíts
 = 1,

29 
numbî_ñemíts
,

30 
numbî_logiˇl_¥o˚ss‹s
,

31 
thªad_numbî
;

33 
lfds711_li°_asu_ñemít


34 *
œsue
 = 
NULL
;

36 
lfds711_queue_bmm_ñemít


37 *
qbmme_¨øy
;

39 
lfds711_queue_bmm_°©e


40 
qbmms
;

42 
lfds711_misc_vÆid©i⁄_öfo


43 
vi
;

45 
libã°_logiˇl_¥o˚ss‹


46 *
Õ
;

48 
libã°_thªad£t_≥r_thªad_°©e


49 *
±s
;

51 
libã°_thªad£t_°©e


52 
ts
;

54 
ã°_≥r_thªad_°©e


55 *
çts
;

57 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

58 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

59 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

70 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

72 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

75 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

76 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

77 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

78 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

79 
qbmme_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
lfds711_queue_bmm_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

82 
numbî_ñemíts
 >>= 1;

84  
numbî_ñemíts
 != 0 )

86 
numbî_ñemíts
 >>= 1;

87 
powî_of_two_numbî_ñemíts
 <<= 1;

90 
	`lfds711_queue_bmm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qbmms
, 
qbmme_¨øy
, 
powî_of_two_numbî_ñemíts
, 
NULL
 );

92 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

94  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

96 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

97 (
çts
+
lo›
)->
qbmms
 = &qbmms;

98 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

99 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_sim∂e_íqueuî
, &
çts
[loop] );

100 
lo›
++;

103 
LFDS711_MISC_BARRIER_STORE
;

105 
	`lfds711_misc_f‹˚_°‹e
();

108 
	`libã°_thªad£t_run
–&
ts
 );

110 
	`libã°_thªad£t_˛ónup
–&
ts
 );

113 
LFDS711_MISC_BARRIER_LOAD
;

120 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
powî_of_two_numbî_ñemíts
;

122 
	`lfds711_queue_bmm_quîy
–&
qbmms
, 
LFDS711_QUEUE_BMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

124  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

125 *(
≥r_thªad_cou¡îs
+
lo›
) = 0;

127  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_queue_bmm_dequeue
(&
qbmms
, (**Ë&
thªad_numbî
, (**Ë&
cou¡î_numbî
) )

129 if–
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

131 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

135 if–
cou¡î_numbî
 > 
≥r_thªad_cou¡îs
[
thªad_numbî
] )

136 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

138 if–
cou¡î_numbî
 < 
≥r_thªad_cou¡îs
[
thªad_numbî
] )

139 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

141 if–
cou¡î_numbî
 =
≥r_thªad_cou¡îs
[
thªad_numbî
] )

142 
≥r_thªad_cou¡îs
[
thªad_numbî
]++;

145 
	`lfds711_queue_bmm_˛ónup
–&
qbmms
, 
NULL
 );

148 
	}
}

155 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_sim∂e_íqueuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

157 
lfds711_∑l_uöt_t


158 
cou¡î
 = 0;

160 
ã°_≥r_thªad_°©e


161 *
çts
;

163 
libã°_thªad£t_≥r_thªad_°©e


164 *
±s
;

166 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

168 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

170 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

171 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

173 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

175  
	`lfds711_queue_bmm_íqueue
(
çts
->
qbmms
, (*Ë—±s->
thªad_numbî
), (*Ë(
cou¡î
++)) );

177 
LFDS711_MISC_BARRIER_STORE
;

179 
	`lfds711_misc_f‹˚_°‹e
();

181  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

182 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_enqueuing_and_dequeuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
Êag


8 
	mîr‹_Êag
;

10 
lfds711_∑l_uöt_t


11 
	mcou¡î
,

12 
	mnumbî_logiˇl_¥o˚ss‹s
,

13 *
	m≥r_thªad_cou¡îs
,

14 
	mthªad_numbî
;

16 
lfds711_queue_bmm_°©e


17 *
	mqbmms
;

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

28 
	$libã°_ã°s_queue_bmm_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

30 
lfds711_∑l_uöt_t


31 
lo›
,

32 
numbî_ñemíts
,

33 
numbî_logiˇl_¥o˚ss‹s
,

34 *
≥r_thªad_cou¡îs
,

35 
powî_of_two_numbî_ñemíts
 = 1,

36 
sublo›
;

38 
lfds711_li°_asu_ñemít


39 *
œsue
 = 
NULL
;

41 
lfds711_queue_bmm_ñemít


42 *
qbmme_¨øy
;

44 
lfds711_queue_bmm_°©e


45 
qbmms
;

47 
lfds711_misc_vÆid©i⁄_öfo


48 
vi
;

50 
libã°_logiˇl_¥o˚ss‹


51 *
Õ
;

53 
libã°_thªad£t_≥r_thªad_°©e


54 *
±s
;

56 
libã°_thªad£t_°©e


57 
ts
;

59 
ã°_≥r_thªad_°©e


60 *
çts
;

62 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

63 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

64 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

75 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

78 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

79 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

80 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

81 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
 *Çumbî_logiˇl_¥o˚ss‹s, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

82 
qbmme_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
lfds711_queue_bmm_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

85 
numbî_ñemíts
 >>= 1;

87  
numbî_ñemíts
 != 0 )

89 
numbî_ñemíts
 >>= 1;

90 
powî_of_two_numbî_ñemíts
 <<= 1;

98  
powî_of_two_numbî_ñemíts
 > 
numbî_logiˇl_¥o˚ss‹s
 )

99 
powî_of_two_numbî_ñemíts
 >>= 1;

101 
	`lfds711_queue_bmm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qbmms
, 
qbmme_¨øy
, 
powî_of_two_numbî_ñemíts
, 
NULL
 );

104  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

105 
	`lfds711_queue_bmm_íqueue
–&
qbmms
, (*Ë
lo›
, (*) 0 );

107 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

109 
lo›
 = 0;

111  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

113 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

114 (
çts
+
lo›
)->
qbmms
 = &qbmms;

115 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

116 (
çts
+
lo›
)->
cou¡î
 = 0;

117 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

118 (
çts
+
lo›
)->
≥r_thªad_cou¡îs
 =Öî_thªad_cou¡î†+Üo› * 
numbî_logiˇl_¥o˚ss‹s
;

119 (
çts
+
lo›
)->
numbî_logiˇl_¥o˚ss‹s
 =Çumber_logical_processors;

121  
sublo›
 = 0 ; sublo› < 
numbî_logiˇl_¥o˚ss‹s
 ; subloop++ )

122 *((
çts
+
lo›
)->
≥r_thªad_cou¡îs
+
sublo›
) = 0;

124 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_íqueuî_™d_dequeuî
, &
çts
[loop] );

125 
lo›
++;

128 
LFDS711_MISC_BARRIER_STORE
;

130 
	`lfds711_misc_f‹˚_°‹e
();

133 
	`libã°_thªad£t_run
–&
ts
 );

135 
	`libã°_thªad£t_˛ónup
–&
ts
 );

138 
LFDS711_MISC_BARRIER_LOAD
;

140 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
powî_of_two_numbî_ñemíts
;

142 
	`lfds711_queue_bmm_quîy
–&
qbmms
, 
LFDS711_QUEUE_BMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

144  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

145 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

146 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

148 
	`lfds711_queue_bmm_˛ónup
–&
qbmms
, 
NULL
 );

151 
	}
}

158 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

160 
lfds711_∑l_uöt_t


161 
cou¡î
,

162 
thªad_numbî
,

163 
time_lo›
 = 0;

165 
ã°_≥r_thªad_°©e


166 *
çts
;

168 
libã°_thªad£t_≥r_thªad_°©e


169 *
±s
;

171 
time_t


172 
cuºít_time
,

173 
°¨t_time
;

175 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

177 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

179 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

180 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

182 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

184 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

186  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

194  0 =
	`lfds711_queue_bmm_dequeue
(
çts
->
qbmms
, (*Ë&
thªad_numbî
, (*Ë&
cou¡î
) );

196 if–
thªad_numbî
 >
çts
->
numbî_logiˇl_¥o˚ss‹s
 )

197 
çts
->
îr‹_Êag
 = 
RAISED
;

200 if–
cou¡î
 < 
çts
->
≥r_thªad_cou¡îs
[
thªad_numbî
] )

201 
çts
->
îr‹_Êag
 = 
RAISED
;

203 if–
cou¡î
 >
çts
->
≥r_thªad_cou¡îs
[
thªad_numbî
] )

204 
çts
->
≥r_thªad_cou¡îs
[
thªad_numbî
] = 
cou¡î
+1;

207 
thªad_numbî
 = 
çts
->thread_number;

208 
cou¡î
 = ++
çts
->counter;

211  0 =
	`lfds711_queue_bmm_íqueue
(
çts
->
qbmms
, (*Ë
thªad_numbî
, (*Ë
cou¡î
) );

213 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

215 
time_lo›
 = 0;

216 
	`time
–&
cuºít_time
 );

220 
LFDS711_MISC_BARRIER_STORE
;

222 
	`lfds711_misc_f‹˚_°‹e
();

224  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

225 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_rapid_enqueuing_and_dequeuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_∑l_uöt_t


8 
	mthªad_numbî
,

9 
	mtŸÆ_dequeues
,

10 
	mtŸÆ_íqueues
;

12 
lfds711_queue_bmm_°©e


13 *
	mqbmms
;

17 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_øpid_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

24 
	$libã°_ã°s_queue_bmm_øpid_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

26 
lfds711_∑l_uöt_t


27 
cou¡î
,

28 
lo›
,

29 
numbî_logiˇl_¥o˚ss‹s
,

30 *
≥r_thªad_cou¡îs
,

31 
thªad_numbî
;

33 
lfds711_li°_asu_ñemít


34 *
œsue
 = 
NULL
;

36 
lfds711_queue_bmm_ñemít


37 *
qbmme_¨øy
;

39 
lfds711_misc_vÆid©i⁄_öfo


40 
vi
;

42 
lfds711_queue_bmm_°©e


43 
qbmms
;

45 
libã°_logiˇl_¥o˚ss‹


46 *
Õ
;

48 
libã°_thªad£t_≥r_thªad_°©e


49 *
±s
;

51 
libã°_thªad£t_°©e


52 
ts
;

54 
ã°_≥r_thªad_°©e


55 *
çts
;

57 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

58 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

59 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

68 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

70 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

72 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

73 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

74 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

75 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

77 
qbmme_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_queue_bmm_ñemít
Ë* 8192, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

79 
	`lfds711_queue_bmm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qbmms
, 
qbmme_¨øy
, 8192, 
NULL
 );

82  
lo›
 = 0 ;Üoop < 8192 ;Üoop++ )

83 
	`lfds711_queue_bmm_íqueue
–&
qbmms
, (*) 0, (*) 0 );

85 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

87 
lo›
 = 0;

89  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

91 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

92 (
çts
+
lo›
)->
qbmms
 = &qbmms;

93 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

94 (
çts
+
lo›
)->
tŸÆ_dequeues
 = 0;

95 (
çts
+
lo›
)->
tŸÆ_íqueues
 = 0;

96 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_øpid_íqueuî_™d_dequeuî
, &
çts
[loop] );

97 
lo›
++;

101 
	`libã°_thªad£t_run
–&
ts
 );

103 
	`libã°_thªad£t_˛ónup
–&
ts
 );

106 
LFDS711_MISC_BARRIER_LOAD
;

108 
vi
.
mö_ñemíts
 = 8192;

110  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

112 
vi
.
mö_ñemíts
 -
çts
[
lo›
].
tŸÆ_dequeues
;

113 
vi
.
mö_ñemíts
 +
çts
[
lo›
].
tŸÆ_íqueues
;

116 
vi
.
max_ñemíts
 = vi.
mö_ñemíts
;

118 
	`lfds711_queue_bmm_quîy
–&
qbmms
, 
LFDS711_QUEUE_BMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

121  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

122 *(
≥r_thªad_cou¡îs
+
lo›
) = 0;

124  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_queue_bmm_dequeue
(&
qbmms
, (**Ë&
thªad_numbî
, (**Ë&
cou¡î
) )

126 if–
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

128 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

132 if–
≥r_thªad_cou¡îs
[
thªad_numbî
] == 0 )

133 
≥r_thªad_cou¡îs
[
thªad_numbî
] = 
cou¡î
;

135 if–
cou¡î
 > 
≥r_thªad_cou¡îs
[
thªad_numbî
] )

136 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

138 if–
cou¡î
 < 
≥r_thªad_cou¡îs
[
thªad_numbî
] )

139 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

141 if–
cou¡î
 =
≥r_thªad_cou¡îs
[
thªad_numbî
] )

142 
≥r_thªad_cou¡îs
[
thªad_numbî
]++;

145 
	`lfds711_queue_bmm_˛ónup
–&
qbmms
, 
NULL
 );

148 
	}
}

155 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_øpid_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

158 
rv
;

160 
lfds711_∑l_uöt_t


161 
key
,

162 
vÆue
,

163 
time_lo›
 = 0;

165 
ã°_≥r_thªad_°©e


166 *
çts
;

168 
libã°_thªad£t_≥r_thªad_°©e


169 *
±s
;

171 
time_t


172 
cuºít_time
,

173 
°¨t_time
;

175 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

177 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

179 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

180 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

182 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

184 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

186  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

190 
çts
->
tŸÆ_dequeues
 +
	`lfds711_queue_bmm_dequeue
–çts->
qbmms
, (**Ë&
key
, (**Ë&
vÆue
 );

195 
rv
 = 
	`lfds711_queue_bmm_íqueue
–
çts
->
qbmms
, (*Ëçts->
thªad_numbî
, (*Ë—±s->
tŸÆ_íqueues
) );

197 if–
rv
 == 1 )

198 
çts
->
tŸÆ_íqueues
++;

200 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

202 
time_lo›
 = 0;

203 
	`time
–&
cuºít_time
 );

207 
LFDS711_MISC_BARRIER_STORE
;

209 
	`lfds711_misc_f‹˚_°‹e
();

211  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

212 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_singleproducer_singleconsumer_dequeuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libã°_ã°s_queue_bss_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

13 
lfds711_∑l_uöt_t


14 
lo›
;

16 
lfds711_queue_bss_ñemít


17 
ñemít_¨øy
[128];

19 
lfds711_queue_bss_°©e


20 
qs
;

22 
lfds711_misc_vÆid©i⁄_öfo


23 
vi
;

26 *
vÆue
;

28 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

29 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

30 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

39 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

41 
	`lfds711_queue_bss_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qs
, 
ñemít_¨øy
, 128, 
NULL
 );

43  
lo›
 = 0 ;Üoop < 127 ;Üoop++ )

44 
	`lfds711_queue_bss_íqueue
–&
qs
, 
NULL
, (*Ë
lo›
 );

46  
lo›
 = 0 ;Üoop < 127 ;Üoop++ )

48 
	`lfds711_queue_bss_dequeue
–&
qs
, 
NULL
, &
vÆue
 );

49 if–(
lfds711_∑l_uöt_t
Ë
vÆue
 !127 - 
lo›
 )

50 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

53 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 0;

55 
	`lfds711_queue_bss_quîy
–&
qs
, 
LFDS711_QUEUE_BSS_QUERY_VALIDATE
, &
vi
, 
dvs
 );

57 
	`lfds711_queue_bss_˛ónup
–&
qs
, 
NULL
 );

60 
	}
}

62 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_singleproducer_singleconsumer_enqueuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libã°_ã°s_queue_bss_íqueuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

14 
rv
;

16 
lfds711_∑l_uöt_t


17 
lo›
;

19 
lfds711_queue_bss_ñemít


20 
ñemít_¨øy
[128];

22 
lfds711_queue_bss_°©e


23 
qs
;

25 
lfds711_misc_vÆid©i⁄_öfo


26 
vi
;

28 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

29 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

30 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

38 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

40 
	`lfds711_queue_bss_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qs
, 
ñemít_¨øy
, 128, 
NULL
 );

42  
lo›
 = 0 ;Üoop < 127 ;Üoop++ )

43 if–1 !
	`lfds711_queue_bss_íqueue
(&
qs
, 
NULL
, (*Ë
lo›
) )

44 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

47 
rv
 = 
	`lfds711_queue_bss_íqueue
–&
qs
, 
NULL
, (*Ë
lo›
 );

49 if–
rv
 != 0 )

50 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

52 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 127;

54 
	`lfds711_queue_bss_quîy
–&
qs
, 
LFDS711_QUEUE_BSS_QUERY_VALIDATE
, &
vi
, 
dvs
 );

56 
	`lfds711_queue_bss_˛ónup
–&
qs
, 
NULL
 );

59 
	}
}

61 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_singleproducer_singleconsumer_enqueuing_and_dequeuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
Êag


8 
	mîr‹_Êag
;

10 
lfds711_queue_bss_°©e


11 *
	mqs
;

15 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_íqueuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

16 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

23 
	$libã°_ã°s_queue_bss_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

25 
lfds711_∑l_uöt_t


26 
lo›
,

27 
numbî_logiˇl_¥o˚ss‹s
;

29 
lfds711_li°_asu_ñemít


30 *
œsue
;

32 
lfds711_queue_bss_ñemít


33 
ñemít_¨øy
[4];

35 
lfds711_queue_bss_°©e


36 
qs
;

38 
libã°_logiˇl_¥o˚ss‹


39 *
Õ
,

40 *
Õ_fú°
;

42 
libã°_thªad£t_≥r_thªad_°©e


43 *
±s
;

45 
libã°_thªad£t_°©e


46 
ts
;

48 
ã°_≥r_thªad_°©e


49 *
çts
;

51 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

52 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

53 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

77 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

80 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

82 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

83 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

85  
lo›
 = 0 ;Üoop < 2 ;Üoop++ )

87 (
çts
+
lo›
)->
qs
 = &qs;

88 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

95 
œsue
 = 
	`LFDS711_LIST_ASU_GET_START
–*
li°_of_logiˇl_¥o˚ss‹s
 );

96 
Õ_fú°
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

98  
œsue
 !
NULL
 )

100 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

102 
	`lfds711_queue_bss_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qs
, 
ñemít_¨øy
, 4, 
NULL
 );

104 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

106 
LFDS711_MISC_BARRIER_STORE
;

107 
	`lfds711_misc_f‹˚_°‹e
();

109 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[0], 
Õ_fú°
, 
thªad_íqueuî
, &
çts
[0] );

110 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[1], 
Õ
, 
thªad_dequeuî
, &
çts
[1] );

112 
	`libã°_thªad£t_run
–&
ts
 );

113 
	`libã°_thªad£t_˛ónup
–&
ts
 );

115 
LFDS711_MISC_BARRIER_LOAD
;

117 
	`lfds711_queue_bss_˛ónup
–&
qs
, 
NULL
 );

119 
œsue
 = 
	`LFDS711_LIST_ASU_GET_NEXT
( *lasue );

122 if–(
çts
+1)->
îr‹_Êag
 =
RAISED
 )

123 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

126 
	}
}

133 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_íqueuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

136 
rv
;

138 
lfds711_∑l_uöt_t


139 
d©um
 = 0,

140 
time_lo›
 = 0;

142 
libã°_thªad£t_≥r_thªad_°©e


143 *
±s
;

145 
ã°_≥r_thªad_°©e


146 *
çts
;

148 
time_t


149 
cuºít_time
,

150 
°¨t_time
;

152 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

154 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

156 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

157 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

159 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

161 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

163  
cuºít_time
 < 
°¨t_time
 + 2 )

165 
rv
 = 
	`lfds711_queue_bss_íqueue
–
çts
->
qs
, 
NULL
, (*Ë
d©um
 );

167 if–
rv
 == 1 )

168 if–++
d©um
 == 4 )

169 
d©um
 = 0;

171 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

173 
time_lo›
 = 0;

174 
	`time
–&
cuºít_time
 );

178 
LFDS711_MISC_BARRIER_STORE
;

180 
	`lfds711_misc_f‹˚_°‹e
();

182  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

183 
	}
}

190 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

193 
rv
;

195 
lfds711_∑l_uöt_t


196 
d©um
,

197 
ex≥˘ed_d©um
 = 0,

198 
time_lo›
 = 0;

200 
libã°_thªad£t_≥r_thªad_°©e


201 *
±s
;

203 
ã°_≥r_thªad_°©e


204 *
çts
;

206 
time_t


207 
cuºít_time
,

208 
°¨t_time
;

210 
LFDS711_MISC_BARRIER_LOAD
;

212 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

214 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

215 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

217 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

219 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

221  
cuºít_time
 < 
°¨t_time
 + 2 )

223 
rv
 = 
	`lfds711_queue_bss_dequeue
–
çts
->
qs
, 
NULL
, (*Ë&
d©um
 );

225 if–
rv
 == 1 )

227 if–
d©um
 !
ex≥˘ed_d©um
 )

228 
çts
->
îr‹_Êag
 = 
RAISED
;

230 if–++
ex≥˘ed_d©um
 == 4 )

231 
ex≥˘ed_d©um
 = 0;

234 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

236 
time_lo›
 = 0;

237 
	`time
–&
cuºít_time
 );

241 
LFDS711_MISC_BARRIER_STORE
;

243 
	`lfds711_misc_f‹˚_°‹e
();

245  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

246 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_queue_umm_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

20 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

24 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

27 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_queue_umm_ñemít
,
√xt
Ë% 
LFDS711_PAL_ALIGN_DOUBLE_POINTER
 != 0 )

28 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

33 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_queue_umm_°©e
,
íqueue
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

34 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

36 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_queue_umm_°©e
,
dequeue
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

37 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

39 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_queue_umm_°©e
,
aba_cou¡î
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

40 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

42 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_queue_umm_°©e
,
u£r_°©e
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

43 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

46 
	}
}

48 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_dequeuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
Êag


8 
	mîr‹_Êag
;

10 
lfds711_queue_umm_°©e


11 *
	mqs
;

14 
	sã°_ñemít


16 
lfds711_queue_umm_ñemít


17 
	mqe
;

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_sim∂e_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

28 
	$libã°_ã°s_queue_umm_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

30 
lfds711_∑l_uöt_t


31 
lo›
,

32 
numbî_ñemíts
,

33 
numbî_logiˇl_¥o˚ss‹s
;

35 
lfds711_li°_asu_ñemít


36 *
œsue
 = 
NULL
;

38 
lfds711_queue_umm_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

39 
qe_dummy
;

41 
lfds711_queue_umm_°©e


42 
qs
;

44 
lfds711_misc_vÆid©i⁄_öfo


45 
vi
 = { 0, 0 };

47 
libã°_logiˇl_¥o˚ss‹


48 *
Õ
;

50 
libã°_thªad£t_≥r_thªad_°©e


51 *
±s
;

53 
libã°_thªad£t_°©e


54 
ts
;

56 
ã°_ñemít


57 *
ã_¨øy
;

59 
ã°_≥r_thªad_°©e


60 *
çts
;

62 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

63 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

64 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

78 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

81 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

82 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

83 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

84 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

86 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qs
, &
qe_dummy
, 
NULL
 );

88  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

90 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
qe
,Üoop );

91 
	`lfds711_queue_umm_íqueue
–&
qs
, &(
ã_¨øy
+
lo›
)->
qe
 );

94 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

96 
lo›
 = 0;

98  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

100 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

101 (
çts
+
lo›
)->
qs
 = &qs;

102 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

103 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_sim∂e_dequeuî
, &
çts
[loop] );

104 
lo›
++;

107 
LFDS711_MISC_BARRIER_STORE
;

109 
	`lfds711_misc_f‹˚_°‹e
();

112 
	`libã°_thªad£t_run
–&
ts
 );

114 
	`libã°_thªad£t_˛ónup
–&
ts
 );

117 
LFDS711_MISC_BARRIER_LOAD
;

120 
	`lfds711_queue_umm_quîy
–&
qs
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

123  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

124 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

125 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

127 
	`lfds711_queue_umm_˛ónup
–&
qs
, 
NULL
 );

130 
	}
}

137 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_sim∂e_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

139 
lfds711_∑l_uöt_t


140 *
¥ev_vÆue
,

141 *
vÆue
;

143 
lfds711_queue_umm_ñemít


144 *
qe
;

146 
ã°_≥r_thªad_°©e


147 *
çts
;

149 
libã°_thªad£t_≥r_thªad_°©e


150 *
±s
;

152 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

154 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

156 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

157 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

159 
	`lfds711_queue_umm_dequeue
–
çts
->
qs
, &
qe
 );

160 
¥ev_vÆue
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qe
 );

162 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

164  
	`lfds711_queue_umm_dequeue
(
çts
->
qs
, &
qe
) )

166 
vÆue
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qe
 );

168 if–
vÆue
 <
¥ev_vÆue
 )

169 
çts
->
îr‹_Êag
 = 
RAISED
;

171 
¥ev_vÆue
 = 
vÆue
;

174 
LFDS711_MISC_BARRIER_STORE
;

176 
	`lfds711_misc_f‹˚_°‹e
();

178  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

179 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_enqueuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_∑l_uöt_t


8 
	mnumbî_ñemíts_≥r_thªad
,

9 
	mthªad_numbî
;

11 
lfds711_queue_umm_°©e


12 *
	mqs
;

14 
ã°_ñemít


15 *
	mã_¨øy
;

18 
	sã°_ñemít


20 
lfds711_queue_umm_ñemít


21 
	mqe
;

23 
lfds711_∑l_uöt_t


24 
	mcou¡î
,

25 
	mthªad_numbî
;

29 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_sim∂e_íqueuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

36 
	$libã°_ã°s_queue_umm_íqueuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

38 
lfds711_∑l_uöt_t


39 *
≥r_thªad_cou¡îs
,

40 
lo›
 = 0,

41 
numbî_ñemíts
,

42 
numbî_ñemíts_≥r_thªad
,

43 
numbî_logiˇl_¥o˚ss‹s
;

45 
lfds711_li°_asu_ñemít


46 *
œsue
 = 
NULL
;

48 
lfds711_queue_umm_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

49 
dummy_qe
;

51 
lfds711_queue_umm_ñemít


52 *
qe
;

54 
lfds711_queue_umm_°©e


55 
qs
;

57 
lfds711_misc_vÆid©i⁄_öfo


58 
vi
;

60 
libã°_logiˇl_¥o˚ss‹


61 *
Õ
;

63 
libã°_thªad£t_≥r_thªad_°©e


64 *
±s
;

66 
libã°_thªad£t_°©e


67 
ts
;

69 
ã°_ñemít


70 *
ã
,

71 *
ã_¨øy
;

73 
ã°_≥r_thªad_°©e


74 *
çts
;

76 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

77 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

78 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

91 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

93 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

96 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

97 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

98 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

99 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

100 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

102 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

104 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qs
, &
dummy_qe
, 
NULL
 );

106 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

108  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

110 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

111 (
çts
+
lo›
)->
qs
 = &qs;

112 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

113 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

114 (
çts
+
lo›
)->
ã_¨øy
 =Åe_¨øy +Üo› * 
numbî_ñemíts_≥r_thªad
;

115 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_sim∂e_íqueuî
, &
çts
[loop] );

116 
lo›
++;

119 
LFDS711_MISC_BARRIER_STORE
;

121 
	`lfds711_misc_f‹˚_°‹e
();

124 
	`libã°_thªad£t_run
–&
ts
 );

126 
	`libã°_thªad£t_˛ónup
–&
ts
 );

129 
LFDS711_MISC_BARRIER_LOAD
;

137 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

139 
	`lfds711_queue_umm_quîy
–&
qs
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

141  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

142 *(
≥r_thªad_cou¡îs
+
lo›
) = 0;

144  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_queue_umm_dequeue
(&
qs
, &
qe
) )

146 
ã
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qe
 );

148 if–
ã
->
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

150 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

154 if–
ã
->
cou¡î
 > 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

155 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

157 if–
ã
->
cou¡î
 < 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

158 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

160 if–
ã
->
cou¡î
 =
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

161 
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
]++;

164 
	`lfds711_queue_umm_˛ónup
–&
qs
, 
NULL
 );

167 
	}
}

174 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_sim∂e_íqueuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

176 
lfds711_∑l_uöt_t


177 
lo›
;

179 
ã°_≥r_thªad_°©e


180 *
çts
;

182 
libã°_thªad£t_≥r_thªad_°©e


183 *
±s
;

185 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

187 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

189 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

190 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

192  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

194 (
çts
->
ã_¨øy
+
lo›
)->
thªad_numbî
 =Åpts->thread_number;

195 (
çts
->
ã_¨øy
+
lo›
)->
cou¡î
 =Üoop;

198 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

200  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

202 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–(
çts
->
ã_¨øy
+
lo›
)->
qe
,Åpts->te_array+loop );

203 
	`lfds711_queue_umm_íqueue
–
çts
->
qs
, &—±s->
ã_¨øy
+
lo›
)->
qe
 );

206 
LFDS711_MISC_BARRIER_STORE
;

208 
	`lfds711_misc_f‹˚_°‹e
();

210  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

211 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_enqueuing_and_dequeuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
Êag


8 
	mîr‹_Êag
;

10 
lfds711_∑l_uöt_t


11 
	mcou¡î
,

12 
	mnumbî_logiˇl_¥o˚ss‹s
,

13 *
	m≥r_thªad_cou¡îs
,

14 
	mthªad_numbî
;

16 
lfds711_queue_umm_°©e


17 *
	mqs
;

20 
	sã°_ñemít


22 
lfds711_queue_umm_ñemít


23 
	mqe
,

24 *
	mqe_u£
;

26 
lfds711_∑l_uöt_t


27 
	mcou¡î
,

28 
	mthªad_numbî
;

32 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

39 
	$libã°_ã°s_queue_umm_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

41 
lfds711_∑l_uöt_t


42 
lo›
,

43 
numbî_ñemíts
,

44 
numbî_logiˇl_¥o˚ss‹s
,

45 *
≥r_thªad_cou¡îs
,

46 
sublo›
;

48 
lfds711_li°_asu_ñemít


49 *
œsue
 = 
NULL
;

51 
lfds711_queue_umm_°©e


52 
qs
;

54 
lfds711_misc_vÆid©i⁄_öfo


55 
vi
;

57 
libã°_logiˇl_¥o˚ss‹


58 *
Õ
;

60 
libã°_thªad£t_≥r_thªad_°©e


61 *
±s
;

63 
libã°_thªad£t_°©e


64 
ts
;

66 
ã°_ñemít


67 *
ã_¨øy
;

69 
ã°_≥r_thªad_°©e


70 *
çts
;

72 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

73 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

74 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

85 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

88 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

89 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

90 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

91 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
 *Çumbî_logiˇl_¥o˚ss‹s, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

92 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

94 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qs
, &(
ã_¨øy
+
numbî_logiˇl_¥o˚ss‹s
)->
qe
, 
NULL
 );

97  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

99 (
ã_¨øy
+
lo›
)->
thªad_numbî
 =Üoop;

100 (
ã_¨øy
+
lo›
)->
cou¡î
 = 0;

101 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
qe
,Åe_array+loop );

102 
	`lfds711_queue_umm_íqueue
–&
qs
, &(
ã_¨øy
+
lo›
)->
qe
 );

105 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

107 
lo›
 = 0;

109  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

111 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

112 (
çts
+
lo›
)->
qs
 = &qs;

113 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

114 (
çts
+
lo›
)->
cou¡î
 = 0;

115 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

116 (
çts
+
lo›
)->
≥r_thªad_cou¡îs
 =Öî_thªad_cou¡î†+Üo› * 
numbî_logiˇl_¥o˚ss‹s
;

117 (
çts
+
lo›
)->
numbî_logiˇl_¥o˚ss‹s
 =Çumber_logical_processors;

119  
sublo›
 = 0 ; sublo› < 
numbî_logiˇl_¥o˚ss‹s
 ; subloop++ )

120 *((
çts
+
lo›
)->
≥r_thªad_cou¡îs
+
sublo›
) = 0;

122 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_íqueuî_™d_dequeuî
, &
çts
[loop] );

123 
lo›
++;

126 
LFDS711_MISC_BARRIER_STORE
;

128 
	`lfds711_misc_f‹˚_°‹e
();

131 
	`libã°_thªad£t_run
–&
ts
 );

133 
	`libã°_thªad£t_˛ónup
–&
ts
 );

136 
LFDS711_MISC_BARRIER_LOAD
;

138 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
;

140 
	`lfds711_queue_umm_quîy
–&
qs
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

142  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

143 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

144 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

146 
	`lfds711_queue_umm_˛ónup
–&
qs
, 
NULL
 );

149 
	}
}

156 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

158 
lfds711_∑l_uöt_t


159 
time_lo›
 = 0;

161 
lfds711_queue_umm_ñemít


162 *
qe
;

164 
ã°_ñemít


165 *
ã
;

167 
ã°_≥r_thªad_°©e


168 *
çts
;

170 
libã°_thªad£t_≥r_thªad_°©e


171 *
±s
;

173 
time_t


174 
cuºít_time
,

175 
°¨t_time
;

177 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

179 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

181 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

182 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

184 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

186 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

188  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

190 
	`lfds711_queue_umm_dequeue
–
çts
->
qs
, &
qe
 );

191 
ã
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qe
 );

193 if–
ã
->
thªad_numbî
 >
çts
->
numbî_logiˇl_¥o˚ss‹s
 )

194 
çts
->
îr‹_Êag
 = 
RAISED
;

197 if–
ã
->
cou¡î
 < 
çts
->
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

198 
çts
->
îr‹_Êag
 = 
RAISED
;

200 if–
ã
->
cou¡î
 >
çts
->
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

201 
çts
->
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
] =Åe->
cou¡î
+1;

204 
ã
->
thªad_numbî
 = 
çts
->thread_number;

205 
ã
->
cou¡î
 = ++
çts
->counter;

207 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–*
qe
, 
ã
 );

208 
	`lfds711_queue_umm_íqueue
–
çts
->
qs
, 
qe
 );

210 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

212 
time_lo›
 = 0;

213 
	`time
–&
cuºít_time
 );

217 
LFDS711_MISC_BARRIER_STORE
;

219 
	`lfds711_misc_f‹˚_°‹e
();

221  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

222 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_enqueuing_and_dequeuing_one_element.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
Êag


8 
	mîr‹_Êag
;

10 
lfds711_∑l_uöt_t


11 
	mcou¡î
,

12 
	mnumbî_logiˇl_¥o˚ss‹s
,

13 *
	m≥r_thªad_cou¡îs
,

14 
	mthªad_numbî
;

16 
lfds711_queue_umm_°©e


17 *
	mqs
;

20 
	sã°_ñemít


22 
lfds711_queue_umm_ñemít


23 
	mqe
,

24 *
	mqe_u£
;

26 
lfds711_∑l_uöt_t


27 
	mcou¡î
,

28 
	mthªad_numbî
;

32 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

39 
	$libã°_ã°s_queue_umm_íqueuög_™d_dequeuög_⁄e_ñemít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

41 
lfds711_∑l_uöt_t


42 
lo›
,

43 
numbî_logiˇl_¥o˚ss‹s
,

44 *
≥r_thªad_cou¡îs
,

45 
sublo›
;

47 
lfds711_li°_asu_ñemít


48 *
œsue
 = 
NULL
;

50 
lfds711_queue_umm_ñemít


51 
qe_dummy
;

53 
lfds711_queue_umm_°©e


54 
qs
;

56 
lfds711_misc_vÆid©i⁄_öfo


57 
vi
;

59 
libã°_logiˇl_¥o˚ss‹


60 *
Õ
;

62 
libã°_thªad£t_≥r_thªad_°©e


63 *
±s
;

65 
libã°_thªad£t_°©e


66 
ts
;

68 
ã°_ñemít


69 
ã
;

71 
ã°_≥r_thªad_°©e


72 *
çts
;

74 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

75 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

76 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

87 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

90 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

91 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

92 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

93 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
 *Çumbî_logiˇl_¥o˚ss‹s, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

95 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qs
, &
qe_dummy
, 
NULL
 );

98 
ã
.
thªad_numbî
 = 0;

99 
ã
.
cou¡î
 = 0;

100 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–
ã
.
qe
, &te );

101 
	`lfds711_queue_umm_íqueue
–&
qs
, &
ã
.
qe
 );

103 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

105 
lo›
 = 0;

107  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

109 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

110 (
çts
+
lo›
)->
qs
 = &qs;

111 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

112 (
çts
+
lo›
)->
cou¡î
 = 0;

113 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

114 (
çts
+
lo›
)->
≥r_thªad_cou¡îs
 =Öî_thªad_cou¡î†+Üo› * 
numbî_logiˇl_¥o˚ss‹s
;

115 (
çts
+
lo›
)->
numbî_logiˇl_¥o˚ss‹s
 =Çumber_logical_processors;

117  
sublo›
 = 0 ; sublo› < 
numbî_logiˇl_¥o˚ss‹s
 ; subloop++ )

118 *((
çts
+
lo›
)->
≥r_thªad_cou¡îs
+
sublo›
) = 0;

120 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_íqueuî_™d_dequeuî
, &
çts
[loop] );

121 
lo›
++;

124 
LFDS711_MISC_BARRIER_STORE
;

126 
	`lfds711_misc_f‹˚_°‹e
();

129 
	`libã°_thªad£t_run
–&
ts
 );

131 
	`libã°_thªad£t_˛ónup
–&
ts
 );

134 
LFDS711_MISC_BARRIER_LOAD
;

136 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 1;

138 
	`lfds711_queue_umm_quîy
–&
qs
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

140  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

141 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

142 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

144 
	`lfds711_queue_umm_˛ónup
–&
qs
, 
NULL
 );

147 
	}
}

154 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

156 
lfds711_∑l_uöt_t


157 
time_lo›
 = 0;

159 
lfds711_queue_umm_ñemít


160 *
qe
;

162 
ã°_ñemít


163 *
ã
;

165 
ã°_≥r_thªad_°©e


166 *
çts
;

168 
libã°_thªad£t_≥r_thªad_°©e


169 *
±s
;

171 
time_t


172 
cuºít_time
,

173 
°¨t_time
;

175 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

177 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

179 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

180 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

182 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

184 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

186  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

187 if–
	`lfds711_queue_umm_dequeue
(
çts
->
qs
, &
qe
) )

189 
ã
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qe
 );

191 if–
ã
->
thªad_numbî
 >
çts
->
numbî_logiˇl_¥o˚ss‹s
 )

192 
çts
->
îr‹_Êag
 = 
RAISED
;

195 if–
ã
->
cou¡î
 < 
çts
->
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

196 
çts
->
îr‹_Êag
 = 
RAISED
;

198 if–
ã
->
cou¡î
 >
çts
->
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

199 
çts
->
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
] =Åe->
cou¡î
+1;

202 
ã
->
thªad_numbî
 = 
çts
->thread_number;

203 
ã
->
cou¡î
 = ++
çts
->counter;

205 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–*
qe
, 
ã
 );

206 
	`lfds711_queue_umm_íqueue
–
çts
->
qs
, 
qe
 );

208 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

210 
time_lo›
 = 0;

211 
	`time
–&
cuºít_time
 );

215 
LFDS711_MISC_BARRIER_STORE
;

217 
	`lfds711_misc_f‹˚_°‹e
();

219  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

220 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_rapid_enqueuing_and_dequeuing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_∑l_uöt_t


8 
	mcou¡î
,

9 
	mthªad_numbî
;

11 
lfds711_queue_umm_°©e


12 *
	mqs
;

15 
	sã°_ñemít


17 
lfds711_queue_umm_ñemít


18 
	mqe
,

19 *
	mqe_u£
;

21 
lfds711_∑l_uöt_t


22 
	mcou¡î
,

23 
	mthªad_numbî
;

27 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_øpid_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

34 
	$libã°_ã°s_queue_umm_øpid_íqueuög_™d_dequeuög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

36 
lfds711_∑l_uöt_t


37 
lo›
,

38 
numbî_logiˇl_¥o˚ss‹s
,

39 *
≥r_thªad_cou¡îs
;

41 
lfds711_li°_asu_ñemít


42 *
œsue
 = 
NULL
;

44 
lfds711_queue_umm_ñemít
 
	`LFDS711_PAL_ALIGN
(
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
)

45 
qe_dummy
;

47 
lfds711_queue_umm_ñemít


48 *
qe
;

50 
lfds711_misc_vÆid©i⁄_öfo


51 
vi
;

53 
lfds711_queue_umm_°©e


54 
qs
;

56 
libã°_logiˇl_¥o˚ss‹


57 *
Õ
;

59 
libã°_thªad£t_≥r_thªad_°©e


60 *
±s
;

62 
libã°_thªad£t_°©e


63 
ts
;

65 
ã°_ñemít


66 *
ã_¨øy
,

67 *
ã
;

69 
ã°_≥r_thªad_°©e


70 *
çts
;

72 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

73 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

74 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

83 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

85 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

87 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

88 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

89 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

90 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

91 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë* 10000 * 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

93 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 10000;

95 
	`lfds711_queue_umm_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
qs
, &
qe_dummy
, 
NULL
 );

98  
lo›
 = 0 ;Üoop < 10000 ;Üoop++ )

100 (
ã_¨øy
+
lo›
)->
thªad_numbî
 =Üoop;

101 (
ã_¨øy
+
lo›
)->
cou¡î
 = 0;

102 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
qe
,Åe_array+loop );

103 
	`lfds711_queue_umm_íqueue
–&
qs
, &(
ã_¨øy
+
lo›
)->
qe
 );

106 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

108 
lo›
 = 0;

110  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

112 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

113 (
çts
+
lo›
)->
qs
 = &qs;

114 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

115 (
çts
+
lo›
)->
cou¡î
 = 0;

116 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_øpid_íqueuî_™d_dequeuî
, &
çts
[loop] );

117 
lo›
++;

121 
	`libã°_thªad£t_run
–&
ts
 );

123 
	`libã°_thªad£t_˛ónup
–&
ts
 );

126 
LFDS711_MISC_BARRIER_LOAD
;

128 
	`lfds711_queue_umm_quîy
–&
qs
, 
LFDS711_QUEUE_UMM_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

131  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

132 *(
≥r_thªad_cou¡îs
+
lo›
) = 0;

134  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_queue_umm_dequeue
(&
qs
, &
qe
) )

136 
ã
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qe
 );

138 if–
ã
->
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

140 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

144 if–
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
] == 0 )

145 
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
] =Åe->
cou¡î
;

147 if–
ã
->
cou¡î
 > 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

148 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

150 if–
ã
->
cou¡î
 < 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

151 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

153 if–
ã
->
cou¡î
 =
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

154 
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
]++;

157 
	`lfds711_queue_umm_˛ónup
–&
qs
, 
NULL
 );

160 
	}
}

167 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_øpid_íqueuî_™d_dequeuî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

169 
lfds711_∑l_uöt_t


170 
time_lo›
 = 0;

172 
lfds711_queue_umm_ñemít


173 *
qe
;

175 
ã°_ñemít


176 *
ã
;

178 
ã°_≥r_thªad_°©e


179 *
çts
;

181 
libã°_thªad£t_≥r_thªad_°©e


182 *
±s
;

184 
time_t


185 
cuºít_time
,

186 
°¨t_time
;

188 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

190 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

192 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

193 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

195 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

197 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

199  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

201 
	`lfds711_queue_umm_dequeue
–
çts
->
qs
, &
qe
 );

202 
ã
 = 
	`LFDS711_QUEUE_UMM_GET_VALUE_FROM_ELEMENT
–*
qe
 );

204 
ã
->
thªad_numbî
 = 
çts
->thread_number;

205 
ã
->
cou¡î
 = 
çts
->counter++;

207 
	`LFDS711_QUEUE_UMM_SET_VALUE_IN_ELEMENT
–*
qe
, 
ã
 );

208 
	`lfds711_queue_umm_íqueue
–
çts
->
qs
, 
qe
 );

210 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

212 
time_lo›
 = 0;

213 
	`time
–&
cuºít_time
 );

217 
LFDS711_MISC_BARRIER_STORE
;

219 
	`lfds711_misc_f‹˚_°‹e
();

221  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

222 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_ringbuffer_reading.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
Êag


8 
	mîr‹_Êag
;

10 
lfds711_∑l_uöt_t


11 
	mªad_cou¡
;

13 
lfds711_rögbuf„r_°©e


14 *
	mrs
;

18 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_sim∂e_ªadî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

25 
	$libã°_ã°s_rögbuf„r_ªadög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

27 
lfds711_misc_vÆidôy


28 
loˇl_dvs
[2] = { 
LFDS711_MISC_VALIDITY_VALID
, LFDS711_MISC_VALIDITY_VALID };

30 
lfds711_∑l_uöt_t


31 
lo›
,

32 
numbî_ñemíts
,

33 
numbî_logiˇl_¥o˚ss‹s
,

34 
tŸÆ_ªad
 = 0;

36 
lfds711_li°_asu_ñemít


37 *
œsue
 = 
NULL
;

39 
lfds711_rögbuf„r_ñemít


40 *
ª_¨øy
;

42 
lfds711_rögbuf„r_°©e


43 
rs
;

45 
lfds711_misc_vÆid©i⁄_öfo


46 
vi
;

48 
libã°_logiˇl_¥o˚ss‹


49 *
Õ
;

51 
libã°_thªad£t_≥r_thªad_°©e


52 *
±s
;

54 
libã°_thªad£t_°©e


55 
ts
;

57 
ã°_≥r_thªad_°©e


58 *
çts
;

60 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

62 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

78 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

80 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

83 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

84 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

85 
ª_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
lfds711_rögbuf„r_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

87 
vi
.
mö_ñemíts
 = 0;

88 
vi
.
max_ñemíts
 = 
numbî_ñemíts
 - 1;

90 
	`lfds711_rögbuf„r_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
rs
, 
ª_¨øy
, 
numbî_ñemíts
, 
NULL
 );

93  
lo›
 = 1 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

94 
	`lfds711_rögbuf„r_wrôe
–&
rs
, 
NULL
, (*Ë(
lfds711_∑l_uöt_t
Ë
lo›
, NULL, NULL, NULL );

96 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

98 
lo›
 = 0;

100  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

102 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

103 (
çts
+
lo›
)->
rs
 = &rs;

104 (
çts
+
lo›
)->
ªad_cou¡
 = 0;

105 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

107 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_sim∂e_ªadî
, &
çts
[loop] );

109 
lo›
++;

113 
	`libã°_thªad£t_run
–&
ts
 );

115 
	`libã°_thªad£t_˛ónup
–&
ts
 );

118 
LFDS711_MISC_BARRIER_LOAD
;

120 
	`lfds711_rögbuf„r_quîy
–&
rs
, 
LFDS711_RINGBUFFER_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
loˇl_dvs
 );

122 if–
loˇl_dvs
[0] !
LFDS711_MISC_VALIDITY_VALID
 )

123 *
dvs
 = 
loˇl_dvs
[0];

125 if–
loˇl_dvs
[1] !
LFDS711_MISC_VALIDITY_VALID
 )

126 *
dvs
 = 
loˇl_dvs
[1];

128 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

131  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

132 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

133 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

136  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

137 
tŸÆ_ªad
 +(
çts
+
lo›
)->
ªad_cou¡
;

139 if–
tŸÆ_ªad
 < 
numbî_ñemíts
 - 1 )

140 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

142 if–
tŸÆ_ªad
 > 
numbî_ñemíts
 - 1 )

143 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

146 
	`lfds711_rögbuf„r_˛ónup
–&
rs
, 
NULL
 );

149 
	}
}

156 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_sim∂e_ªadî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

158 
lfds711_∑l_uöt_t


159 *
¥ev_vÆue
,

160 *
vÆue
;

162 
ã°_≥r_thªad_°©e


163 *
çts
;

165 
libã°_thªad£t_≥r_thªad_°©e


166 *
±s
;

168 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

170 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

172 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

173 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

175 
	`lfds711_rögbuf„r_ªad
–
çts
->
rs
, 
NULL
, (**Ë&
¥ev_vÆue
 );

176 
çts
->
ªad_cou¡
++;

178 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

180  
	`lfds711_rögbuf„r_ªad
(
çts
->
rs
, 
NULL
, (**Ë&
vÆue
) )

182 if–
vÆue
 <
¥ev_vÆue
 )

183 
çts
->
îr‹_Êag
 = 
RAISED
;

185 
¥ev_vÆue
 = 
vÆue
;

187 
çts
->
ªad_cou¡
++;

190 
LFDS711_MISC_BARRIER_STORE
;

192 
	`lfds711_misc_f‹˚_°‹e
();

194  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

195 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_ringbuffer_reading_and_writing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
Êag


8 
	mîr‹_Êag
;

10 
lfds711_∑l_uöt_t


11 
	mcou¡î
,

12 
	mnumbî_logiˇl_¥o˚ss‹s
,

13 *
	m≥r_thªad_cou¡îs
,

14 
	mthªad_numbî
;

16 
lfds711_rögbuf„r_°©e


17 *
	mrs
;

20 
	sã°_ñemít


22 
lfds711_∑l_uöt_t


23 
	md©um
,

24 
	mthªad_numbî
;

28 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_ªadî_wrôî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

35 
	$libã°_ã°s_rögbuf„r_ªadög_™d_wrôög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

37 
lfds711_misc_vÆidôy


38 
loˇl_dvs
[2] = { 
LFDS711_MISC_VALIDITY_VALID
, LFDS711_MISC_VALIDITY_VALID };

40 
lfds711_∑l_uöt_t


41 *
cou¡îs
,

42 
lo›
,

43 
numbî_ñemíts
,

44 
numbî_logiˇl_¥o˚ss‹s
,

45 
sublo›
;

47 
lfds711_li°_asu_ñemít


48 *
œsue
 = 
NULL
;

50 
lfds711_rögbuf„r_ñemít


51 *
ª_¨øy
;

53 
lfds711_rögbuf„r_°©e


54 
rs
;

56 
lfds711_misc_vÆid©i⁄_öfo


57 
vi
;

59 
libã°_logiˇl_¥o˚ss‹


60 *
Õ
;

62 
libã°_thªad£t_≥r_thªad_°©e


63 *
±s
;

65 
libã°_thªad£t_°©e


66 
ts
;

68 
ã°_ñemít


69 *
ã_¨øy
;

71 
ã°_≥r_thªad_°©e


72 *
çts
;

74 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

75 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

76 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

95 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

97 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

100 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

102 
cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
 *Çumbî_logiˇl_¥o˚ss‹s, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

103 
ª_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë+ (
lfds711_rögbuf„r_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

104 
ã_¨øy
 = (
ã°_ñemít
 *Ë–
ª_¨øy
 + 
numbî_ñemíts
 );

106 
vi
.
mö_ñemíts
 = 0;

107 
vi
.
max_ñemíts
 = 
numbî_ñemíts
;

109 
	`lfds711_rögbuf„r_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
rs
, 
ª_¨øy
, 
numbî_ñemíts
, 
NULL
 );

112  
lo›
 = 1 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

114 
ã_¨øy
[
lo›
].
thªad_numbî
 = 0;

115 
ã_¨øy
[
lo›
].
d©um
 = (
lfds711_∑l_uöt_t
) -1 ;

116 
	`lfds711_rögbuf„r_wrôe
–&
rs
, 
NULL
, &
ã_¨øy
[
lo›
], NULL, NULL, NULL );

119 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

121 
lo›
 = 0;

123  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

125 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

127 (
çts
+
lo›
)->
rs
 = &rs;

128 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

129 (
çts
+
lo›
)->
cou¡î
 = 0;

130 (
çts
+
lo›
)->
numbî_logiˇl_¥o˚ss‹s
 =Çumber_logical_processors;

131 (
çts
+
lo›
)->
îr‹_Êag
 = 
LOWERED
;

132 (
çts
+
lo›
)->
≥r_thªad_cou¡îs
 = 
cou¡îs
 +Üo› * 
numbî_logiˇl_¥o˚ss‹s
;

134  
sublo›
 = 0 ; sublo› < 
numbî_logiˇl_¥o˚ss‹s
 ; subloop++ )

135 *((
çts
+
lo›
)->
≥r_thªad_cou¡îs
+
sublo›
) = 0;

137 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_ªadî_wrôî
, &
çts
[loop] );

139 
lo›
++;

143 
	`libã°_thªad£t_run
–&
ts
 );

145 
	`libã°_thªad£t_˛ónup
–&
ts
 );

148 
LFDS711_MISC_BARRIER_LOAD
;

150 
	`lfds711_rögbuf„r_quîy
–&
rs
, 
LFDS711_RINGBUFFER_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
loˇl_dvs
 );

152 if–
loˇl_dvs
[0] !
LFDS711_MISC_VALIDITY_VALID
 )

153 *
dvs
 = 
loˇl_dvs
[0];

155 if–
loˇl_dvs
[1] !
LFDS711_MISC_VALIDITY_VALID
 )

156 *
dvs
 = 
loˇl_dvs
[1];

158 if–*
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 )

159  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

160 if–(
çts
+
lo›
)->
îr‹_Êag
 =
RAISED
 )

161 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

163 
	`lfds711_rögbuf„r_˛ónup
–&
rs
, 
NULL
 );

166 
	}
}

173 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_ªadî_wrôî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

175 
lfds711_∑l_uöt_t


176 
time_lo›
 = 0;

178 
ã°_ñemít


179 *
ã
;

181 
ã°_≥r_thªad_°©e


182 *
çts
;

184 
libã°_thªad£t_≥r_thªad_°©e


185 *
±s
;

187 
time_t


188 
cuºít_time
,

189 
°¨t_time
;

191 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

193 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

195 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

196 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

198 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

200 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

202  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

204 
	`lfds711_rögbuf„r_ªad
–
çts
->
rs
, 
NULL
, (**Ë&
ã
 );

206 if–
ã
->
thªad_numbî
 >
çts
->
numbî_logiˇl_¥o˚ss‹s
 )

207 
çts
->
îr‹_Êag
 = 
RAISED
;

210 if–
ã
->
d©um
 < 
çts
->
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

211 
çts
->
îr‹_Êag
 = 
RAISED
;

213 if–
ã
->
d©um
 >
çts
->
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

214 
çts
->
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
] =Åe->
d©um
+1;

217 
ã
->
thªad_numbî
 = 
çts
->thread_number;

218 
ã
->
d©um
 = 
çts
->
cou¡î
++;

220 
	`lfds711_rögbuf„r_wrôe
–
çts
->
rs
, 
NULL
, 
ã
, NULL, NULL, NULL );

222 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

224 
time_lo›
 = 0;

225 
	`time
–&
cuºít_time
 );

229 
LFDS711_MISC_BARRIER_STORE
;

231 
	`lfds711_misc_f‹˚_°‹e
();

233  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

234 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_ringbuffer_writing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_∑l_uöt_t


8 
	mthªad_numbî
,

9 
	md©um
;

12 
	sã°_≥r_thªad_°©e


14 
lfds711_∑l_uöt_t


15 
	mthªad_numbî
,

16 
	mwrôe_cou¡
;

18 
ã°_ñemít


19 
	mã
;

21 
lfds711_rögbuf„r_°©e


22 *
	mrs
;

26 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_sim∂e_wrôî
–*
libã°_thªad£t_≥r_thªad_°©e
 );

33 
	$libã°_ã°s_rögbuf„r_wrôög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

35 
lfds711_misc_vÆidôy


36 
loˇl_dvs
[2] = { 
LFDS711_MISC_VALIDITY_VALID
, LFDS711_MISC_VALIDITY_VALID };

38 
lfds711_∑l_uöt_t


39 
lo›
,

40 
numbî_ñemíts
,

41 
numbî_logiˇl_¥o˚ss‹s
,

42 *
≥r_thªad_cou¡îs
;

44 
lfds711_li°_asu_ñemít


45 *
œsue
 = 
NULL
;

47 
lfds711_rögbuf„r_ñemít


48 *
ª_¨øy
;

50 
lfds711_rögbuf„r_°©e


51 
rs
;

53 
lfds711_misc_vÆid©i⁄_öfo


54 
vi
;

56 
libã°_logiˇl_¥o˚ss‹


57 *
Õ
;

59 
libã°_thªad£t_≥r_thªad_°©e


60 *
±s
;

62 
libã°_thªad£t_°©e


63 
ts
;

65 
ã°_ñemít


66 *
ã
,

67 *
ã_¨øy
;

69 
ã°_≥r_thªad_°©e


70 *
çts
;

72 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

73 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

74 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

97 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

99 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

102 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

103 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

104 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

105 
ª_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë+ (
lfds711_rögbuf„r_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

106 
ã_¨øy
 = (
ã°_ñemít
 *Ë–
ª_¨øy
 + 
numbî_ñemíts
 );

108 
vi
.
mö_ñemíts
 = 
numbî_ñemíts
;

109 
vi
.
max_ñemíts
 = 
numbî_ñemíts
;

111 
	`lfds711_rögbuf„r_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
rs
, 
ª_¨øy
, 
numbî_ñemíts
, 
NULL
 );

114  
lo›
 = 1 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

116 
ã_¨øy
[
lo›
].
thªad_numbî
 = 0;

117 
ã_¨øy
[
lo›
].
d©um
 = 0;

118 
	`lfds711_rögbuf„r_wrôe
–&
rs
, 
NULL
, &
ã_¨øy
[
lo›
], NULL, NULL, NULL );

121 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

123 
lo›
 = 0;

125  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

127 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

128 (
çts
+
lo›
)->
rs
 = &rs;

129 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

130 (
çts
+
lo›
)->
wrôe_cou¡
 = 0;

132 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_sim∂e_wrôî
, &
çts
[loop] );

134 
lo›
++;

138 
	`libã°_thªad£t_run
–&
ts
 );

140 
	`libã°_thªad£t_˛ónup
–&
ts
 );

143 
LFDS711_MISC_BARRIER_LOAD
;

146  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

147 *(
≥r_thªad_cou¡îs
+
lo›
) = 0;

149 
	`lfds711_rögbuf„r_quîy
–&
rs
, 
LFDS711_RINGBUFFER_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, (*Ë
loˇl_dvs
 );

151 if–
loˇl_dvs
[0] !
LFDS711_MISC_VALIDITY_VALID
 )

152 *
dvs
 = 
loˇl_dvs
[0];

154 if–
loˇl_dvs
[1] !
LFDS711_MISC_VALIDITY_VALID
 )

155 *
dvs
 = 
loˇl_dvs
[1];

157  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_rögbuf„r_ªad
(&
rs
, 
NULL
, (**Ë&
ã
) )

159 if–
ã
->
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

161 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

165 if–
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
] == 0 )

166 
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
] =Åe->
d©um
;

168 if–
ã
->
d©um
 < 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

169 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

171 if–
ã
->
d©um
 >
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

172 
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
] =Åe->
d©um
+1;

175 
	`lfds711_rögbuf„r_˛ónup
–&
rs
, 
NULL
 );

178 
	}
}

185 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_sim∂e_wrôî
–*
libã°_thªad£t_≥r_thªad_°©e
 )

187 
lfds711_misc_Êag


188 
ovîwrôe_occuºed_Êag
;

190 
lfds711_∑l_uöt_t


191 
time_lo›
 = 0;

193 
libã°_thªad£t_≥r_thªad_°©e


194 *
±s
;

196 
ã°_ñemít


197 *
ã
;

199 
ã°_≥r_thªad_°©e


200 *
çts
;

202 
time_t


203 
cuºít_time
,

204 
°¨t_time
;

206 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

208 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

210 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

211 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

213 
çts
->
ã
.
thªad_numbî
 = 0;

214 
çts
->
ã
.
d©um
 = 0;

216 
	`lfds711_rögbuf„r_wrôe
–
çts
->
rs
, 
NULL
, &çts->
ã
, &
ovîwrôe_occuºed_Êag
, NULL, (**) &te );

218 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

220 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

222  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

224 
ã
->
thªad_numbî
 = 
çts
->thread_number;

225 
ã
->
d©um
 = 
çts
->
wrôe_cou¡
++;

227 
	`lfds711_rögbuf„r_wrôe
–
çts
->
rs
, 
NULL
, 
ã
, &
ovîwrôe_occuºed_Êag
, NULL, (**) &te );

229 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

231 
time_lo›
 = 0;

232 
	`time
–&
cuºít_time
 );

236 
LFDS711_MISC_BARRIER_STORE
;

238 
	`lfds711_misc_f‹˚_°‹e
();

240  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

241 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_alignment.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 4127 )

11 
	$libã°_ã°s_°ack_Æignmít
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

20 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

21 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

22 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

24 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

27 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_°ack_°©e
,
t›
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

28 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

30 if–
	`LIBTEST_MISC_OFFSETOF
(
lfds711_°ack_°©e
,
u£r_°©e
Ë% 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 != 0 )

31 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

34 
	}
}

36 #¥agm®
w¨nög
(  : 4100 4127 )

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_popping.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_°ack_°©e


8 *
	mss
;

11 
	sã°_ñemít


13 
lfds711_°ack_ñemít


14 
	m£
;

16 
Êag


17 
	mp›≥d_Êag
;

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

28 
	$libã°_ã°s_°ack_p›pög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

30 
lfds711_∑l_uöt_t


31 
lo›
 = 0,

32 
numbî_ñemíts
,

33 
numbî_logiˇl_¥o˚ss‹s
;

35 
lfds711_°ack_°©e


36 
ss
;

38 
lfds711_li°_asu_ñemít


39 *
œsue
 = 
NULL
;

41 
lfds711_misc_vÆid©i⁄_öfo


42 
vi
 = { 0, 0 };

44 
libã°_logiˇl_¥o˚ss‹


45 *
Õ
;

47 
libã°_thªad£t_≥r_thªad_°©e


48 *
±s
;

50 
libã°_thªad£t_°©e


51 
ts
;

53 
ã°_ñemít


54 *
ã_¨øy
;

56 
ã°_≥r_thªad_°©e


57 *
çts
;

59 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

60 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

82 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

85 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

86 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

87 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

88 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

90 
	`lfds711_°ack_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ss
, 
NULL
 );

92  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

94 (
ã_¨øy
+
lo›
)->
p›≥d_Êag
 = 
LOWERED
;

95 
	`LFDS711_STACK_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
£
,Åe_array+loop );

96 
	`lfds711_°ack_push
–&
ss
, &(
ã_¨øy
+
lo›
)->
£
 );

99 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

101 
lo›
 = 0;

103  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

105 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

106 
çts
[
lo›
].
ss
 = &ss;

108 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_p›pög
, &
çts
[loop] );

110 
lo›
++;

113 
LFDS711_MISC_BARRIER_STORE
;

115 
	`lfds711_misc_f‹˚_°‹e
();

118 
	`libã°_thªad£t_run
–&
ts
 );

120 
	`libã°_thªad£t_˛ónup
–&
ts
 );

123 
LFDS711_MISC_BARRIER_LOAD
;

125 
	`lfds711_°ack_quîy
–&
ss
, 
LFDS711_STACK_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

128  
lo›
 = 0 ;Üo› < 
numbî_ñemíts
 ;Üoop++ )

129 if–(
ã_¨øy
+
lo›
)->
p›≥d_Êag
 =
LOWERED
 )

130 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

133 
	`lfds711_°ack_˛ónup
–&
ss
, 
NULL
 );

136 
	}
}

143 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

145 
lfds711_°ack_ñemít


146 *
£
;

148 
ã°_≥r_thªad_°©e


149 *
çts
;

151 
libã°_thªad£t_≥r_thªad_°©e


152 *
±s
;

154 
ã°_ñemít


155 *
ã
;

157 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

159 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

161 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

163 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

165 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

167  
	`lfds711_°ack_p›
(
çts
->
ss
, &
£
) )

169 
ã
 = 
	`LFDS711_STACK_GET_VALUE_FROM_ELEMENT
–*
£
 );

170 
ã
->
p›≥d_Êag
 = 
RAISED
;

173 
LFDS711_MISC_BARRIER_STORE
;

175 
	`lfds711_misc_f‹˚_°‹e
();

177  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

178 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_popping_and_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_ñemít


7 
lfds711_°ack_ñemít


8 
	m£
,

9 
	mthªad_loˇl_£
;

11 
lfds711_∑l_uöt_t


12 
	md©um
;

15 
	sã°_≥r_thªad_°©e


17 
lfds711_°ack_°©e


18 
	mss_thªad_loˇl
,

19 *
	mss
;

21 
lfds711_∑l_uöt_t


22 
	mnumbî_ñemíts_≥r_thªad
;

26 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög_™d_pushög_°¨t_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

27 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_p›pög_™d_pushög_°¨t_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

34 
	$libã°_ã°s_°ack_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

36 
lfds711_∑l_uöt_t


37 
lo›
,

38 
numbî_ñemíts
,

39 
numbî_ñemíts_≥r_thªad
,

40 
numbî_logiˇl_¥o˚ss‹s
,

41 
sublo›
;

43 
lfds711_li°_asu_ñemít


44 *
œsue
 = 
NULL
;

46 
lfds711_°ack_°©e


47 
ss
;

49 
lfds711_misc_vÆid©i⁄_öfo


50 
vi
;

52 
libã°_logiˇl_¥o˚ss‹


53 *
Õ
;

55 
libã°_thªad£t_≥r_thªad_°©e


56 *
±s
;

58 
libã°_thªad£t_°©e


59 
ts
;

61 
ã°_ñemít


62 *
ã_¨øy
;

64 
ã°_≥r_thªad_°©e


65 *
çts
;

67 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

68 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

69 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

85 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

86 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

87 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
 * 2, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

88 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

90 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / (
numbî_logiˇl_¥o˚ss‹s
 * 2);

92 
	`lfds711_°ack_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ss
, 
NULL
 );

95  
lo›
 = 0 ;Üo› < 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

97 (
ã_¨øy
+
lo›
)->
d©um
 =Üoop;

98 
	`LFDS711_STACK_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
lo›
)->
£
,Åe_array+loop );

99 
	`lfds711_°ack_push
–&
ss
, &(
ã_¨øy
+
lo›
)->
£
 );

102 
lo›
 = 0;

104 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

106  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

108 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

111 (
çts
+
lo›
)->
ss
 = &ss;

112 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

113 
	`lfds711_°ack_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&(
çts
+
lo›
)->
ss_thªad_loˇl
, 
NULL
 );

114 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_p›pög_™d_pushög_°¨t_p›pög
, &
çts
[loop] );

117 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
ss
 = &ss;

118 (
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

119 
	`lfds711_°ack_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
ss_thªad_loˇl
, 
NULL
 );

120 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
+
numbî_logiˇl_¥o˚ss‹s
], 
Õ
, 
thªad_p›pög_™d_pushög_°¨t_pushög
, &
çts
[loop+number_logical_processors] );

122  
sublo›
 = 
numbî_ñemíts_≥r_thªad
 * (
numbî_logiˇl_¥o˚ss‹s
 + 
lo›
) ; subloop <Çumber_elements_per_thread * (number_logical_processors +Üoop + 1) ; subloop++ )

124 
	`LFDS711_STACK_SET_VALUE_IN_ELEMENT
–(
ã_¨øy
+
sublo›
)->
thªad_loˇl_£
, (te_array+subloop) );

125 
	`lfds711_°ack_push
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
ss_thªad_loˇl
, &(
ã_¨øy
+
sublo›
)->
thªad_loˇl_£
 );

128 
lo›
++;

131 
LFDS711_MISC_BARRIER_STORE
;

133 
	`lfds711_misc_f‹˚_°‹e
();

136 
	`libã°_thªad£t_run
–&
ts
 );

138 
	`libã°_thªad£t_˛ónup
–&
ts
 );

141 
LFDS711_MISC_BARRIER_LOAD
;

143 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
 * 2;

145 
	`lfds711_°ack_quîy
–&
ss
, 
LFDS711_STACK_QUERY_SINGLETHREADED_VALIDATE
, (*Ë&
vi
, (*Ë
dvs
 );

147 
	`lfds711_°ack_˛ónup
–&
ss
, 
NULL
 );

149  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

151 
	`lfds711_°ack_˛ónup
–&(
çts
+
lo›
)->
ss_thªad_loˇl
, 
NULL
 );

152 
	`lfds711_°ack_˛ónup
–&(
çts
+
lo›
+
numbî_logiˇl_¥o˚ss‹s
)->
ss_thªad_loˇl
, 
NULL
 );

156 
	}
}

164 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög_™d_pushög_°¨t_p›pög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

166 
lfds711_∑l_uöt_t


167 
cou¡
;

169 
lfds711_°ack_ñemít


170 *
£
;

172 
ã°_≥r_thªad_°©e


173 *
çts
;

175 
libã°_thªad£t_≥r_thªad_°©e


176 *
±s
;

178 
time_t


179 
°¨t_time
;

181 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

183 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

185 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

186 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

188 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

190 
°¨t_time
 = 
	`time
–
NULL
 );

192  
	`time
(
NULL
Ë< 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

194 
cou¡
 = 0;

196  
cou¡
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

197 if–
	`lfds711_°ack_p›
(
çts
->
ss
, &
£
) )

200 
	`lfds711_°ack_push
–&
çts
->
ss_thªad_loˇl
, 
£
 );

201 
cou¡
++;

205  
	`lfds711_°ack_p›
(&
çts
->
ss_thªad_loˇl
, &
£
) )

206 
	`lfds711_°ack_push
–
çts
->
ss
, 
£
 );

209 
LFDS711_MISC_BARRIER_STORE
;

211 
	`lfds711_misc_f‹˚_°‹e
();

213  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

214 
	}
}

221 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_p›pög_™d_pushög_°¨t_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

223 
lfds711_∑l_uöt_t


224 
cou¡
;

226 
lfds711_°ack_ñemít


227 *
£
;

229 
ã°_≥r_thªad_°©e


230 *
çts
;

232 
libã°_thªad£t_≥r_thªad_°©e


233 *
±s
;

235 
time_t


236 
°¨t_time
;

238 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

240 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

242 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

243 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

245 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

247 
°¨t_time
 = 
	`time
–
NULL
 );

249  
	`time
(
NULL
Ë< 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

252  
	`lfds711_°ack_p›
(&
çts
->
ss_thªad_loˇl
, &
£
) )

253 
	`lfds711_°ack_push
–
çts
->
ss
, 
£
 );

255 
cou¡
 = 0;

257  
cou¡
 < 
çts
->
numbî_ñemíts_≥r_thªad
 )

258 if–
	`lfds711_°ack_p›
(
çts
->
ss
, &
£
) )

260 
	`lfds711_°ack_push
–&
çts
->
ss_thªad_loˇl
, 
£
 );

261 
cou¡
++;

266  
	`lfds711_°ack_p›
(&
çts
->
ss_thªad_loˇl
, &
£
) )

267 
	`lfds711_°ack_push
–
çts
->
ss
, 
£
 );

269 
LFDS711_MISC_BARRIER_STORE
;

271 
	`lfds711_misc_f‹˚_°‹e
();

273  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

274 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_∑l_uöt_t


8 
	mnumbî_ñemíts_≥r_thªad
,

9 
	mthªad_numbî
;

11 
lfds711_°ack_°©e


12 *
	mss
;

14 
ã°_ñemít


15 *
	mã_¨øy
;

18 
	sã°_ñemít


20 
lfds711_°ack_ñemít


21 
	m£
;

23 
lfds711_∑l_uöt_t


24 
	md©um
,

25 
	mthªad_numbî
;

29 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

36 
	$libã°_ã°s_°ack_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

38 
lfds711_∑l_uöt_t


39 
lo›
 = 0,

40 
numbî_ñemíts
,

41 
numbî_ñemíts_≥r_thªad
,

42 
numbî_logiˇl_¥o˚ss‹s
,

43 *
≥r_thªad_cou¡îs
;

45 
lfds711_li°_asu_ñemít


46 *
œsue
 = 
NULL
;

48 
lfds711_°ack_ñemít


49 *
£
;

51 
lfds711_°ack_°©e


52 
ss
;

54 
lfds711_misc_vÆid©i⁄_öfo


55 
vi
;

57 
libã°_logiˇl_¥o˚ss‹


58 *
Õ
;

60 
libã°_thªad£t_≥r_thªad_°©e


61 *
±s
;

63 
libã°_thªad£t_°©e


64 
ts
;

66 
ã°_ñemít


67 *
ã
,

68 *
ã_¨øy
;

70 
ã°_≥r_thªad_°©e


71 *
çts
;

73 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

74 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

75 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

95 *
dvs
 = 
LFDS711_MISC_VALIDITY_VALID
;

98 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

99 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

100 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

101 
≥r_thªad_cou¡îs
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
lfds711_∑l_uöt_t
Ë* 
numbî_logiˇl_¥o˚ss‹s
, (lfds711_pal_uint_t) );

102 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_œrge°_possibÀ_¨øy_‰om_unknown_node
–
ms
, (
ã°_ñemít
), 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
, &
numbî_ñemíts
 );

104 
numbî_ñemíts_≥r_thªad
 = 
numbî_ñemíts
 / 
numbî_logiˇl_¥o˚ss‹s
;

107 
	`lfds711_°ack_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ss
, 
NULL
 );

109 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

111  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
, 
œsue
) )

113 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

115 (
çts
+
lo›
)->
ss
 = &ss;

116 (
çts
+
lo›
)->
thªad_numbî
 =Üoop;

117 (
çts
+
lo›
)->
numbî_ñemíts_≥r_thªad
 =Çumber_elements_per_thread;

118 (
çts
+
lo›
)->
ã_¨øy
 =Åe_¨øy +Üo› * 
numbî_ñemíts_≥r_thªad
;

120 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
lo›
], 
Õ
, 
thªad_pushög
, &
çts
[loop] );

122 
lo›
++;

125 
LFDS711_MISC_BARRIER_STORE
;

127 
	`lfds711_misc_f‹˚_°‹e
();

130 
	`libã°_thªad£t_run
–&
ts
 );

132 
	`libã°_thªad£t_˛ónup
–&
ts
 );

135 
LFDS711_MISC_BARRIER_LOAD
;

137  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

138 *(
≥r_thªad_cou¡îs
+
lo›
Ë
numbî_ñemíts_≥r_thªad
 - 1;

140 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_ñemíts_≥r_thªad
 * 
numbî_logiˇl_¥o˚ss‹s
;

142 
	`lfds711_°ack_quîy
–&
ss
, 
LFDS711_STACK_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

144  *
dvs
 =
LFDS711_MISC_VALIDITY_VALID
 
™d
 
	`lfds711_°ack_p›
(&
ss
, &
£
) )

146 
ã
 = 
	`LFDS711_STACK_GET_VALUE_FROM_ELEMENT
–*
£
 );

148 if–
ã
->
thªad_numbî
 >
numbî_logiˇl_¥o˚ss‹s
 )

150 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_TEST_DATA
;

154 if–
ã
->
d©um
 > 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

155 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_ADDITIONAL_ELEMENTS
;

157 if–
ã
->
d©um
 < 
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

158 *
dvs
 = 
LFDS711_MISC_VALIDITY_INVALID_MISSING_ELEMENTS
;

160 if–
ã
->
d©um
 =
≥r_thªad_cou¡îs
[ã->
thªad_numbî
] )

161 
≥r_thªad_cou¡îs
[
ã
->
thªad_numbî
]--;

164 
	`lfds711_°ack_˛ónup
–&
ss
, 
NULL
 );

167 
	}
}

174 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

176 
lfds711_∑l_uöt_t


177 
lo›
;

179 
ã°_≥r_thªad_°©e


180 *
çts
;

182 
libã°_thªad£t_≥r_thªad_°©e


183 *
±s
;

185 
LFDS711_MISC_BARRIER_LOAD
;

187 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

189 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

191 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

193  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

195 (
çts
->
ã_¨øy
+
lo›
)->
thªad_numbî
 =Åpts->thread_number;

196 (
çts
->
ã_¨øy
+
lo›
)->
d©um
 =Üoop;

199 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

201  
lo›
 = 0 ;Üo› < 
çts
->
numbî_ñemíts_≥r_thªad
 ;Üoop++ )

203 
	`LFDS711_STACK_SET_VALUE_IN_ELEMENT
–(
çts
->
ã_¨øy
+
lo›
)->
£
,Åpts->te_array+loop );

204 
	`lfds711_°ack_push
–
çts
->
ss
, &—±s->
ã_¨øy
+
lo›
)->
£
 );

207 
LFDS711_MISC_BARRIER_STORE
;

209 
	`lfds711_misc_f‹˚_°‹e
();

211  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

212 
	}
}

	@test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_rapid_popping_and_pushing.c

2 
	~"libã°_ã°s_öã∫Æ.h
"

5 
	sã°_≥r_thªad_°©e


7 
lfds711_°ack_°©e


8 *
	mss
;

11 
	sã°_ñemít


13 
lfds711_°ack_ñemít


14 
	m£
;

16 
lfds711_∑l_uöt_t


17 
	md©um
;

21 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
thªad_øpid_p›pög_™d_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 );

28 
	$libã°_ã°s_°ack_øpid_p›pög_™d_pushög
–
lfds711_li°_asu_°©e
 *
li°_of_logiˇl_¥o˚ss‹s
, 
libsh¨ed_mem‹y_°©e
 *
ms
, 
lfds711_misc_vÆidôy
 *
dvs
 )

30 
lfds711_∑l_uöt_t


31 
ödex
 = 0,

32 
lo›
,

33 
numbî_logiˇl_¥o˚ss‹s
;

35 
lfds711_li°_asu_ñemít


36 *
œsue
 = 
NULL
;

38 
lfds711_misc_vÆid©i⁄_öfo


39 
vi
 = { 0, 0 };

41 
lfds711_°ack_°©e


42 
ss
;

44 
libã°_logiˇl_¥o˚ss‹


45 *
Õ
;

47 
libã°_thªad£t_≥r_thªad_°©e


48 *
±s
;

50 
libã°_thªad£t_°©e


51 
ts
;

53 
ã°_ñemít


54 *
ã_¨øy
;

56 
ã°_≥r_thªad_°©e


57 *
çts
;

59 
	`LFDS711_PAL_ASSERT
–
li°_of_logiˇl_¥o˚ss‹s
 !
NULL
 );

60 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

61 
	`LFDS711_PAL_ASSERT
–
dvs
 !
NULL
 );

90 
	`lfds711_li°_asu_quîy
–
li°_of_logiˇl_¥o˚ss‹s
, 
LFDS711_LIST_ASU_QUERY_GET_POTENTIALLY_INACCURATE_COUNT
, 
NULL
, (**Ë&
numbî_logiˇl_¥o˚ss‹s
 );

91 
çts
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

92 
±s
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
libã°_thªad£t_≥r_thªad_°©e
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

93 
ã_¨øy
 = 
	`libsh¨ed_mem‹y_Æloc_‰om_unknown_node
–
ms
, (
ã°_ñemít
Ë* 
numbî_logiˇl_¥o˚ss‹s
, 
LFDS711_PAL_ATOMIC_ISOLATION_IN_BYTES
 );

95 
	`lfds711_°ack_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ss
, 
NULL
 );

97  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

98 
çts
[
lo›
].
ss
 = &ss;

100  
lo›
 = 0 ;Üo› < 
numbî_logiˇl_¥o˚ss‹s
 ;Üoop++ )

102 
	`LFDS711_STACK_SET_VALUE_IN_ELEMENT
–
ã_¨øy
[
lo›
].
£
, &te_array[loop] );

103 
	`lfds711_°ack_push
–&
ss
, &
ã_¨øy
[
lo›
].
£
 );

107 
	`libã°_thªad£t_öô
–&
ts
, 
NULL
 );

109  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(*
li°_of_logiˇl_¥o˚ss‹s
,
œsue
) )

111 
Õ
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

112 
	`libã°_thªad£t_add_thªad
–&
ts
, &
±s
[
ödex
], 
Õ
, 
thªad_øpid_p›pög_™d_pushög
, &
çts
[index] );

113 
ödex
++;

117 
	`libã°_thªad£t_run
–&
ts
 );

119 
	`libã°_thªad£t_˛ónup
–&
ts
 );

122 
LFDS711_MISC_BARRIER_LOAD
;

124 
vi
.
mö_ñemíts
 = vi.
max_ñemíts
 = 
numbî_logiˇl_¥o˚ss‹s
;

126 
	`lfds711_°ack_quîy
–&
ss
, 
LFDS711_STACK_QUERY_SINGLETHREADED_VALIDATE
, &
vi
, 
dvs
 );

128 
	`lfds711_°ack_˛ónup
–&
ss
, 
NULL
 );

131 
	}
}

138 
libsh¨ed_∑l_thªad_ªtu∫_t
 
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 
	$thªad_øpid_p›pög_™d_pushög
–*
libã°_thªad£t_≥r_thªad_°©e
 )

140 
lfds711_∑l_uöt_t


141 
time_lo›
 = 0;

143 
lfds711_°ack_ñemít


144 *
£
;

146 
libã°_thªad£t_≥r_thªad_°©e


147 *
±s
;

149 
ã°_≥r_thªad_°©e


150 *
çts
;

152 
time_t


153 
cuºít_time
,

154 
°¨t_time
;

156 
LFDS711_MISC_MAKE_VALID_ON_CURRENT_LOGICAL_CORE_INITS_COMPLETED_BEFORE_NOW_ON_ANY_OTHER_LOGICAL_CORE
;

158 
	`LFDS711_PAL_ASSERT
–
libã°_thªad£t_≥r_thªad_°©e
 !
NULL
 );

160 
±s
 = (
libã°_thªad£t_≥r_thªad_°©e
 *)Üibtest_threadset_per_thread_state;

161 
çts
 = 
	`LIBTEST_THREADSET_GET_USER_STATE_FROM_PER_THREAD_STATE
–*
±s
 );

163 
	`libã°_thªad£t_thªad_ªady_™d_waô
–
±s
 );

165 
cuºít_time
 = 
°¨t_time
 = 
	`time
–
NULL
 );

167  
cuºít_time
 < 
°¨t_time
 + 
TEST_DURATION_IN_SECONDS
 )

169 
	`lfds711_°ack_p›
–
çts
->
ss
, &
£
 );

170 
	`lfds711_°ack_push
–
çts
->
ss
, 
£
 );

172 if–
time_lo›
++ =
TIME_LOOP_COUNT
 )

174 
time_lo›
 = 0;

175 
	`time
–&
cuºít_time
 );

179 
LFDS711_MISC_BARRIER_STORE
;

181 
	`lfds711_misc_f‹˚_°‹e
();

183  
	`LIBSHARED_PAL_THREAD_RETURN_CAST
(
RETURN_SUCCESS
);

184 
	}
}

	@test_and_benchmark/libtest/src/libtest_testsuite/libtest_testsuite_cleanup.c

2 
	~"libã°_ã°suôe_öã∫Æ.h
"

9 
	$libã°_ã°suôe_˛ónup
–
libã°_ã°suôe_°©e
 *
ts
 )

11 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

13 
	`lfds711_li°_asu_˛ónup
–&
ts
->
li°_of_logiˇl_¥o˚ss‹s
, 
NULL
 );

16 
	}
}

	@test_and_benchmark/libtest/src/libtest_testsuite/libtest_testsuite_init.c

2 
	~"libã°_ã°suôe_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4127 )

11 
	$libã°_ã°suôe_öô
–
libã°_ã°suôe_°©e
 *
ts
,

12 
libsh¨ed_mem‹y_°©e
 *
ms
,

13 (*
ˇŒback_ã°_°¨t
)(*
ã°_«me
),

14 (*
ˇŒback_ã°_föish
)(*
ªsu…
) )

16 
libã°_ã°_id


17 
ã°_id
;

19 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

20 
	`LFDS711_PAL_ASSERT
–
ms
 !
NULL
 );

26 
	`libã°_∑l_gë_fuŒ_logiˇl_¥o˚ss‹_£t
–&
ts
->
li°_of_logiˇl_¥o˚ss‹s
, 
ms
 );

27 
ts
->
ms
 = ms;

28 
ts
->
ˇŒback_ã°_°¨t
 = callback_test_start;

29 
ts
->
ˇŒback_ã°_föish
 = callback_test_finish;

31  
ã°_id
 = 0 ;Åe°_id < 
LIBTEST_TEST_ID_COUNT
 ;Åest_id++ )

32 
ts
->
ã°_avaûabÀ_Êag
[
ã°_id
] = 
LOWERED
;

34 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_ADD
 )

36 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_PRNG_ALIGNMENT
], "PRNGálignmít", LIBTEST_TEST_ID_PRNG_ALIGNMENT, 
libã°_ã°s_¥ng_Æignmít
 );

37 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_PRNG_GENERATE
], "PRNG gíî©i⁄", LIBTEST_TEST_ID_PRNG_GENERATE, 
libã°_ã°s_¥ng_gíî©e
 );

38 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_PRNG_ALIGNMENT
] = 
RAISED
;

39 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_PRNG_GENERATE
] = 
RAISED
;

42 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_PROCESSOR_BARRIERS
 )

44 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BSS_DEQUEUING
], "Queuê(bounded, sögÀÖrodu˚r, sögÀ c⁄sumîËdequeuög", LIBTEST_TEST_ID_QUEUE_BSS_DEQUEUING, 
libã°_ã°s_queue_bss_dequeuög
 );

45 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BSS_ENQUEUING
], "Queuê(bounded, sögÀÖrodu˚r, sögÀ c⁄sumîËíqueuög", LIBTEST_TEST_ID_QUEUE_BSS_ENQUEUING, 
libã°_ã°s_queue_bss_íqueuög
 );

46 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BSS_ENQUEUING_AND_DEQUEUING
], "Queuê(bounded, sögÀÖrodu˚r, sögÀ c⁄sumîËíqueuögánd dequeuög", LIBTEST_TEST_ID_QUEUE_BSS_ENQUEUING_AND_DEQUEUING, 
libã°_ã°s_queue_bss_íqueuög_™d_dequeuög
 );

47 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BSS_DEQUEUING
] = 
RAISED
;

48 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BSS_ENQUEUING
] = 
RAISED
;

49 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BSS_ENQUEUING_AND_DEQUEUING
] = 
RAISED
;

52 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_PROCESSOR_BARRIERS
ánd 
LFDS711_MISC_ATOMIC_SUPPORT_CAS
 )

54 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_ALIGNMENT
], "BTªê◊dd⁄ly, unbÆ™˚dËÆignmít", LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_ALIGNMENT, 
libã°_ã°s_båì_au_Æignmít
 );

55 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_FAIL
], "BTªê◊dd⁄ly, unbÆ™˚dËadd†™d wÆkög (Áû o¿exi°ög key)", LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_FAIL, 
libã°_ã°s_båì_au_øndom_adds_Áû_⁄_exi°ög
 );

56 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_FAIL_AND_OVERWRITE
], "BTªê◊dd⁄ly, unbÆ™˚dËadd†™d wÆkög (ovewrôê⁄Éxi°ög key)", LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_FAIL_AND_OVERWRITE, 
libã°_ã°s_båì_au_øndom_adds_ovîwrôe_⁄_exi°ög
 );

57 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_OVERWRITE
], "BTªê◊dd⁄ly, unbÆ™˚dËÁûánd ovîwrôê⁄Éxi°ög key", LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_OVERWRITE, 
libã°_ã°s_båì_au_Áû_™d_ovîwrôe_⁄_exi°ög_key
 );

58 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_ALIGNMENT
] = 
RAISED
;

59 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_FAIL
] = 
RAISED
;

60 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_FAIL_AND_OVERWRITE
] = 
RAISED
;

61 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_BTREE_ADDONLY_UNBALANCED_RANDOM_ADDS_OVERWRITE
] = 
RAISED
;

63 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_HASH_ADDONLY_ALIGNMENT
], "Hash (add⁄lyËÆignmít", LIBTEST_TEST_ID_HASH_ADDONLY_ALIGNMENT, 
libã°_ã°s_hash_a_Æignmít
 );

64 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_HASH_ADDONLY_FAIL_AND_OVERWRITE
], "Hash (add⁄lyËÁûánd ovîwrôe", LIBTEST_TEST_ID_HASH_ADDONLY_FAIL_AND_OVERWRITE, 
libã°_ã°s_hash_a_Áû_™d_ovîwrôe_⁄_exi°ög_key
 );

65 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_HASH_ADDONLY_RANDOM_ADDS_FAIL
], "Hash (add⁄lyËøndomádd†(Áû o¿exi°ög key)", LIBTEST_TEST_ID_HASH_ADDONLY_RANDOM_ADDS_FAIL, 
libã°_ã°s_hash_a_øndom_adds_Áû_⁄_exi°ög
 );

66 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_HASH_ADDONLY_RANDOM_ADDS_OVERWRITE
], "Hash (add⁄lyËøndomádd†(ovîwrôê⁄Éxi°ög key)", LIBTEST_TEST_ID_HASH_ADDONLY_RANDOM_ADDS_OVERWRITE, 
libã°_ã°s_hash_a_øndom_adds_ovîwrôe_⁄_exi°ög
 );

67 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_HASH_ADDONLY_ITERATE
], "Hash (add⁄lyËôî©e", LIBTEST_TEST_ID_HASH_ADDONLY_ITERATE, 
libã°_ã°s_hash_a_ôî©e
 );

68 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_HASH_ADDONLY_ALIGNMENT
] = 
RAISED
;

69 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_HASH_ADDONLY_FAIL_AND_OVERWRITE
] = 
RAISED
;

70 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_HASH_ADDONLY_RANDOM_ADDS_FAIL
] = 
RAISED
;

71 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_HASH_ADDONLY_RANDOM_ADDS_OVERWRITE
] = 
RAISED
;

72 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_HASH_ADDONLY_ITERATE
] = 
RAISED
;

74 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_ALIGNMENT
], "Li° (add⁄ly, ordîed, söglylökedËÆignmít", LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_ALIGNMENT, 
libã°_ã°s_li°_aso_Æignmít
 );

75 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_NEW_ORDERED
], "Li° (add⁄ly, ordîed, söglylökedË√w ordîed", LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_NEW_ORDERED, 
libã°_ã°s_li°_aso_√w_‹dîed
 );

76 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_NEW_ORDERED_WITH_CURSOR
], "Li° (add⁄ly, ordîed, söglylökedË√w ordîed wôh curs‹", LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_NEW_ORDERED_WITH_CURSOR, 
libã°_ã°s_li°_aso_√w_‹dîed_wôh_curs‹
 );

77 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_ALIGNMENT
] = 
RAISED
;

78 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_NEW_ORDERED
] = 
RAISED
;

79 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_NEW_ORDERED_WITH_CURSOR
] = 
RAISED
;

81 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_ALIGNMENT
], "Li° (add⁄ly, söglylöked, un‹dîedËÆignmít", 
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_ORDERED_ALIGNMENT
, 
libã°_ã°s_li°_asu_Æignmít
 );

82 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_START
], "Li° (add⁄ly, söglylöked, un‹dîedË√w sèπ", LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_START, 
libã°_ã°s_li°_asu_√w_°¨t
 );

83 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_END
], "Li° (add⁄ly, söglylöked, un‹dîedË√wÉnd", LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_END, 
libã°_ã°s_li°_asu_√w_íd
 );

84 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_AFTER
], "Li° (add⁄ly, söglylöked, un‹dîedË√wá·î", LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_AFTER, 
libã°_ã°s_li°_asu_√w_a·î
 );

85 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_ALIGNMENT
] = 
RAISED
;

86 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_START
] = 
RAISED
;

87 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_END
] = 
RAISED
;

88 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_LIST_ADDONLY_SINGLYLINKED_UNORDERED_NEW_AFTER
] = 
RAISED
;

90 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BMM_ALIGNMENT
], "Queuê(bounded, m™y c⁄sumî, m™yÖrodu˚rËÆignmít", LIBTEST_TEST_ID_QUEUE_BMM_ALIGNMENT, 
libã°_ã°s_queue_bmm_Æignmít
 );

91 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BMM_COUNT
], "Queuê(bounded, m™y c⁄sumî, m™yÖrodu˚rËcou¡", LIBTEST_TEST_ID_QUEUE_BMM_COUNT, 
libã°_ã°s_queue_bmm_cou¡
 );

92 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BMM_ENQUEUING
], "Queuê(bounded, m™y c⁄sumî, m™yÖrodu˚rËíqueuög", LIBTEST_TEST_ID_QUEUE_BMM_ENQUEUING, 
libã°_ã°s_queue_bmm_íqueuög
 );

93 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BMM_DEQUEUING
], "Queuê(bounded, m™y c⁄sumî, m™yÖrodu˚rËdequeuög", LIBTEST_TEST_ID_QUEUE_BMM_DEQUEUING, 
libã°_ã°s_queue_bmm_dequeuög
 );

94 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BMM_ENQUEUING_AND_DEQUEUING
], "Queuê(bounded, m™y c⁄sumî, m™yÖrodu˚rËíqueuögánd dequeuög", LIBTEST_TEST_ID_QUEUE_BMM_ENQUEUING_AND_DEQUEUING, 
libã°_ã°s_queue_bmm_íqueuög_™d_dequeuög
 );

95 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_BMM_RAPID_ENQUEUING_AND_DEQUEUING
], "Queuê(bounded, m™y c⁄sumî, m™yÖrodu˚rËøpidÉnqueuögánd dequeuög", LIBTEST_TEST_ID_QUEUE_BMM_RAPID_ENQUEUING_AND_DEQUEUING, 
libã°_ã°s_queue_bmm_øpid_íqueuög_™d_dequeuög
 );

96 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BMM_ALIGNMENT
] = 
RAISED
;

97 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BMM_COUNT
] = 
RAISED
;

98 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BMM_ENQUEUING
] = 
RAISED
;

99 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BMM_DEQUEUING
] = 
RAISED
;

100 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BMM_ENQUEUING_AND_DEQUEUING
] = 
RAISED
;

101 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_BMM_RAPID_ENQUEUING_AND_DEQUEUING
] = 
RAISED
;

104 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_PROCESSOR_BARRIERS
ánd 
LFDS711_MISC_ATOMIC_SUPPORT_DWCAS
 )

106 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_ALIGNMENT
], "Fªñi°álignmít", LIBTEST_TEST_ID_FREELIST_ALIGNMENT, 
libã°_ã°s_‰ìli°_Æignmít
 );

107 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_ALIGNMENT
] = 
RAISED
;

109 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_EA_POPPING
], "Fªñi° (wôh EAËp›pög", LIBTEST_TEST_ID_FREELIST_EA_POPPING, 
libã°_ã°s_‰ìli°_ó_p›pög
 );

110 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_EA_POPPING_AND_PUSHING
], "Fªñi° (wôh EAËp›pögándÖushög", LIBTEST_TEST_ID_FREELIST_EA_POPPING_AND_PUSHING, 
libã°_ã°s_‰ìli°_ó_p›pög_™d_pushög
 );

111 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_EA_PUSHING
], "Fªñi° (wôh EAËpushög", LIBTEST_TEST_ID_FREELIST_EA_PUSHING, 
libã°_ã°s_‰ìli°_ó_pushög
 );

112 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_EA_RAPID_POPPING_AND_PUSHING
], "Fªñi° (wôh EAËøpidÖ›pögándÖushög", LIBTEST_TEST_ID_FREELIST_EA_RAPID_POPPING_AND_PUSHING, 
libã°_ã°s_‰ìli°_ó_øpid_p›pög_™d_pushög
 );

113 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_EA_POPPING
] = 
RAISED
;

114 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_EA_POPPING_AND_PUSHING
] = 
RAISED
;

115 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_EA_PUSHING
] = 
RAISED
;

116 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_EA_RAPID_POPPING_AND_PUSHING
] = 
RAISED
;

117 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_POPPING
], "Fªñi° (wôhouàEAËp›pög", LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_POPPING, 
libã°_ã°s_‰ìli°_wôhout_ó_p›pög
 );

118 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_POPPING_AND_PUSHING
], "Fªñi° (wôhouàEAËp›pögándÖushög", LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_POPPING_AND_PUSHING, 
libã°_ã°s_‰ìli°_wôhout_ó_p›pög_™d_pushög
 );

119 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_PUSHING
], "Fªñi° (wôhouàEAËpushög", LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_PUSHING, 
libã°_ã°s_‰ìli°_wôhout_ó_pushög
 );

120 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_RAPID_POPPING_AND_PUSHING
], "Fªñi° (wôhouàEAËøpidÖ›pögándÖushög", LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_RAPID_POPPING_AND_PUSHING, 
libã°_ã°s_‰ìli°_wôhout_ó_øpid_p›pög_™d_pushög
 );

121 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_POPPING
] = 
RAISED
;

122 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_POPPING_AND_PUSHING
] = 
RAISED
;

123 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_PUSHING
] = 
RAISED
;

124 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_FREELIST_WITHOUT_EA_RAPID_POPPING_AND_PUSHING
] = 
RAISED
;

126 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_RINGBUFFER_READING
], "Rögbuf„∏ªadög", LIBTEST_TEST_ID_RINGBUFFER_READING, 
libã°_ã°s_rögbuf„r_ªadög
 );

127 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_RINGBUFFER_WRITING
], "Rögbuf„∏wrôög", LIBTEST_TEST_ID_RINGBUFFER_WRITING, 
libã°_ã°s_rögbuf„r_wrôög
 );

128 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_RINGBUFFER_READING_AND_WRITING
], "Rögbuf„∏ªadögánd wrôög", LIBTEST_TEST_ID_RINGBUFFER_READING_AND_WRITING, 
libã°_ã°s_rögbuf„r_ªadög_™d_wrôög
 );

129 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_RINGBUFFER_READING
] = 
RAISED
;

130 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_RINGBUFFER_WRITING
] = 
RAISED
;

131 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_RINGBUFFER_READING_AND_WRITING
] = 
RAISED
;

133 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_STACK_ALIGNMENT
], "Sèckálignmít", LIBTEST_TEST_ID_STACK_ALIGNMENT, 
libã°_ã°s_°ack_Æignmít
 );

134 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_STACK_POPPING
], "SèckÖ›pög", LIBTEST_TEST_ID_STACK_POPPING, 
libã°_ã°s_°ack_p›pög
 );

135 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_STACK_POPPING_AND_PUSHING
], "SèckÖ›pögándÖushög", LIBTEST_TEST_ID_STACK_POPPING_AND_PUSHING, 
libã°_ã°s_°ack_p›pög_™d_pushög
 );

136 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_STACK_PUSHING
], "SèckÖushög", LIBTEST_TEST_ID_STACK_PUSHING, 
libã°_ã°s_°ack_pushög
 );

137 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_STACK_RAPID_POPPING_AND_PUSHING
], "SèckÑ≠idÖ›pögándÖushög", LIBTEST_TEST_ID_STACK_RAPID_POPPING_AND_PUSHING, 
libã°_ã°s_°ack_øpid_p›pög_™d_pushög
 );

138 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_STACK_ALIGNMENT
] = 
RAISED
;

139 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_STACK_POPPING
] = 
RAISED
;

140 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_STACK_POPPING_AND_PUSHING
] = 
RAISED
;

141 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_STACK_PUSHING
] = 
RAISED
;

142 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_STACK_RAPID_POPPING_AND_PUSHING
] = 
RAISED
;

144 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_UMM_ALIGNMENT
], "Queuê(unbounded, m™yÖrodu˚r, m™y c⁄sumîËÆignmít", LIBTEST_TEST_ID_QUEUE_UMM_ALIGNMENT, 
libã°_ã°s_queue_umm_Æignmít
 );

145 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING
], "Queuê(unbounded, m™yÖrodu˚r, m™y c⁄sumîËíqueuög", LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING, 
libã°_ã°s_queue_umm_íqueuög
 );

146 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_UMM_DEQUEUING
], "Queuê(unbounded, m™yÖrodu˚r, m™y c⁄sumîËdequeuög", LIBTEST_TEST_ID_QUEUE_UMM_DEQUEUING, 
libã°_ã°s_queue_umm_dequeuög
 );

147 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING_AND_DEQUEUING
], "Queuê(unbounded, m™yÖrodu˚r, m™y c⁄sumîËíqueuögánd dequeuög", LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING_AND_DEQUEUING, 
libã°_ã°s_queue_umm_íqueuög_™d_dequeuög
 );

148 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING_AND_DEQUEUING_ONE_ELEMENT
], "Queuê(unbounded, m™yÖrodu˚r, m™y c⁄sumîËíqueuögánd dequeuög o√ÉÀmít", LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING_AND_DEQUEUING_ONE_ELEMENT, 
libã°_ã°s_queue_umm_íqueuög_™d_dequeuög_⁄e_ñemít
 );

149 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_QUEUE_UMM_RAPID_ENQUEUING_AND_DEQUEUING
], "Queuê(unbounded, m™yÖrodu˚r, m™y c⁄sumîËøpidÉnqueuögánd dequeuög", LIBTEST_TEST_ID_QUEUE_UMM_RAPID_ENQUEUING_AND_DEQUEUING, 
libã°_ã°s_queue_umm_øpid_íqueuög_™d_dequeuög
 );

150 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_UMM_ALIGNMENT
] = 
RAISED
;

151 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING
] = 
RAISED
;

152 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_UMM_DEQUEUING
] = 
RAISED
;

153 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING_AND_DEQUEUING
] = 
RAISED
;

154 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_UMM_ENQUEUING_AND_DEQUEUING_ONE_ELEMENT
] = 
RAISED
;

155 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_QUEUE_UMM_RAPID_ENQUEUING_AND_DEQUEUING
] = 
RAISED
;

158 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_ADD
 )

160 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_ADD
], "Atomi¯add", LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_ADD, 
libã°_ã°s_∑l_©omic_add
 );

161 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_ADD
] = 
RAISED
;

164 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_CAS
 )

166 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_CAS
], "Atomi¯CAS", LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_CAS, 
libã°_ã°s_∑l_©omic_ˇs
 );

167 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_CAS
] = 
RAISED
;

170 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_DWCAS
 )

172 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_DCAS
], "Atomi¯DWCAS", LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_DCAS, 
libã°_ã°s_∑l_©omic_dwˇs
 );

173 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_DCAS
] = 
RAISED
;

176 if–
LFDS711_MISC_ATOMIC_SUPPORT_COMPILER_BARRIERS
 
™d
 
LFDS711_MISC_ATOMIC_SUPPORT_EXCHANGE
 )

178 
	`libã°_ã°_öô
–&
ts
->
ã°s
[
LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_EXCHANGE
], "Atomi¯exch™ge", LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_EXCHANGE, 
libã°_ã°s_∑l_©omic_exch™ge
 );

179 
ts
->
ã°_avaûabÀ_Êag
[
LIBTEST_TEST_ID_PORTING_ABSTRACTION_LAYER_EXCHANGE
] = 
RAISED
;

183 
	}
}

185 #¥agm®
w¨nög
(  : 4127 )

	@test_and_benchmark/libtest/src/libtest_testsuite/libtest_testsuite_internal.h

2 
	~"../libã°_öã∫Æ.h
"

	@test_and_benchmark/libtest/src/libtest_testsuite/libtest_testsuite_run.c

2 
	~"libã°_ã°suôe_öã∫Æ.h
"

9 
	$libã°_ã°suôe_run
–
libã°_ã°suôe_°©e
 *
ts
, 
libã°_ªsu…s_°©e
 *
rs
 )

11 
libã°_ã°_id


12 
ã°_id
;

14 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

15 
	`LFDS711_PAL_ASSERT
–
rs
 !
NULL
 );

17  
ã°_id
 = 0 ;Åe°_id < 
LIBTEST_TEST_ID_COUNT
 ;Åest_id++ )

18 if–
ts
->
ã°_avaûabÀ_Êag
[
ã°_id
] =
RAISED
 )

20 
	`libsh¨ed_mem‹y_£t_rﬁlback
–
ts
->
ms
 );

22 if–
ts
->
ˇŒback_ã°_°¨t
 !
NULL
 )

23 
ts
->
	`ˇŒback_ã°_°¨t
–ts->
ã°s
[
ã°_id
].
«me
 );

25 
	`libã°_ã°_run
–&
ts
->
ã°s
[
ã°_id
], &ts->
li°_of_logiˇl_¥o˚ss‹s
,Ås->
ms
, &
rs
->
dvs
[test_id] );

27 if–
ts
->
ˇŒback_ã°_föish
 !
NULL
 )

28 
ts
->
	`ˇŒback_ã°_föish
–
libã°_misc_globÆ_vÆidôy_«mes
[ 
rs
->
dvs
[
ã°_id
] ] );

30 
	`libsh¨ed_mem‹y_rﬁlback
–
ts
->
ms
 );

34 
	}
}

	@test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_add.c

2 
	~"libã°_thªad£t_öã∫Æ.h
"

9 
libã°_thªad£t_add_thªad
–
libã°_thªad£t_°©e
 *
ts
,

10 
libã°_thªad£t_≥r_thªad_°©e
 *
±s
,

11 
libã°_logiˇl_¥o˚ss‹
 *
Õ
,

12 
	$libsh¨ed_∑l_thªad_ªtu∫_t
 (
LIBSHARED_PAL_THREAD_CALLING_CONVENTION
 *
thªad_fun˘i⁄
)–*
thªad_u£r_°©e
 ),

13 *
u£r_°©e
 )

15 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

16 
	`LFDS711_PAL_ASSERT
–
±s
 !
NULL
 );

17 
	`LFDS711_PAL_ASSERT
–
Õ
 !
NULL
 );

18 
	`LFDS711_PAL_ASSERT
–
thªad_fun˘i⁄
 !
NULL
 );

21 
±s
->
thªad_ªady_Êag
 = 
LOWERED
;

22 
±s
->
thªad£t_°¨t_Êag
 = &
ts
->threadset_start_flag;

23 
±s
->
±i
.
logiˇl_¥o˚ss‹_numbî
 = 
Õ
->logical_processor_number;

24 
±s
->
±i
.
wödows_¥o˚ss‹_group_numbî
 = 
Õ
->windows_processor_group_number;

25 
±s
->
±i
.
thªad_fun˘i⁄
 =Åhread_function;

26 
±s
->
ts
 =Ås;

27 
±s
->
±i
.
thªad_¨gumít
 =Öts;

28 
±s
->
u£r_°©e
 = user_state;

30 
	`LFDS711_LIST_ASU_SET_VALUE_IN_ELEMENT
–
±s
->
œsue
,Öts );

31 
	`lfds711_li°_asu_ö£π_©_°¨t
–&
ts
->
li°_of_≥r_thªad_°©es
, &
±s
->
œsue
 );

34 
	}
}

	@test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_cleanup.c

2 
	~"libã°_thªad£t_öã∫Æ.h
"

9 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

11 
	$libã°_thªad£t_˛ónup
–
libã°_thªad£t_°©e
 *
ts
 )

13 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

18 
	}
}

20 #¥agm®
w¨nög
(  : 4100 )

	@test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_init.c

2 
	~"libã°_thªad£t_öã∫Æ.h
"

9 
	$libã°_thªad£t_öô
–
libã°_thªad£t_°©e
 *
ts
,

10 *
u£r_°©e
 )

12 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

15 
ts
->
thªad£t_°¨t_Êag
 = 
LOWERED
;

16 
ts
->
u£r_°©e
 = user_state;

18 
	`lfds711_li°_asu_öô_vÆid_⁄_cuºít_logiˇl_c‹e
–&
ts
->
li°_of_≥r_thªad_°©es
, 
NULL
 );

21 
	}
}

	@test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_internal.h

2 
	~"../libã°_öã∫Æ.h
"

	@test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_operations.c

2 
	~"libã°_thªad£t_öã∫Æ.h
"

9 
	$libã°_thªad£t_run
–
libã°_thªad£t_°©e
 *
ts
 )

11 
lfds711_li°_asu_ñemít


12 *
œsue
 = 
NULL
;

14 
libã°_thªad£t_≥r_thªad_°©e


15 *
±s
;

17 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

19 
LFDS711_MISC_BARRIER_STORE
;

21 
	`lfds711_misc_f‹˚_°‹e
();

23  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

25 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

26 
	`libsh¨ed_∑l_thªad_°¨t
–&
±s
->
thªad_h™dÀ
, &±s->
±i
 );

29 
ts
->
thªad£t_°¨t_Êag
 = 
RAISED
;

31 
	`LFDS711_PAL_ASSERT
–
ts
 !
NULL
 );

33  
	`LFDS711_LIST_ASU_GET_START_AND_THEN_NEXT
(
ts
->
li°_of_≥r_thªad_°©es
,
œsue
) )

35 
±s
 = 
	`LFDS711_LIST_ASU_GET_VALUE_FROM_ELEMENT
–*
œsue
 );

36 
	`libsh¨ed_∑l_thªad_waô
–
±s
->
thªad_h™dÀ
 );

40 
	}
}

47 
	$libã°_thªad£t_thªad_ªady_™d_waô
–
libã°_thªad£t_≥r_thªad_°©e
 *
±s
 )

49 
	`LFDS711_PAL_ASSERT
–
±s
 !
NULL
 );

51 
±s
->
thªad_ªady_Êag
 = 
RAISED
;

53 
LFDS711_MISC_BARRIER_FULL
;

55  *
±s
->
thªad£t_°¨t_Êag
 =
LOWERED
 )

56 
LFDS711_MISC_BARRIER_LOAD
;

59 
	}
}

	@test_and_benchmark/test/src/callbacks.c

2 
	~"öã∫Æ.h
"

9 
	$ˇŒback_ã°_°¨t
–*
ã°_«me
 )

11 
	`as£π
–
ã°_«me
 !
NULL
 );

13 
	`¥ötf
–"%s...", 
ã°_«me
 );

14 
	`fÊush
–
°dout
 );

17 
	}
}

24 
	$ˇŒback_ã°_föish
–*
ªsu…
 )

26 
	`as£π
–
ªsu…
 !
NULL
 );

28 
	`¥ötf
–"%s\n", 
ªsu…
 );

31 
	}
}

	@test_and_benchmark/test/src/internal.h

2 
	~<as£π.h
>

3 
	~<˘y≥.h
>

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	~"../../../liblfds711/öc/liblfds711.h
"

7 
	~"../../libã°/öc/libã°.h
"

8 
	~"utû_cmdlöe.h
"

11 
	#™d
 &&

	)

12 
	#‹
 ||

	)

14 
	#BITS_PER_BYTE
 8

	)

16 
	#NO_FLAGS
 0x0

	)

18 
	#TEST_DEFAULT_TEST_MEMORY_IN_MEGABYTES
 512

	)

19 
	#ONE_MEGABYTE_IN_BYTES
 (1024 * 1024)

	)

21 
	#TEST_VERSION_STRING
 "7.1.1"

	)

22 
	#TEST_VERSION_INTEGER
 711

	)

24 #if–
deföed
 
KERNEL_MODE
 )

25 
	#MODE_TYPE_STRING
 "kî√l-mode"

	)

28 #if–!
deföed
 
KERNEL_MODE
 )

29 
	#MODE_TYPE_STRING
 "u£r-mode"

	)

32 #if–
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

33 
	#BUILD_TYPE_STRING
 "ªÀa£"

	)

36 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

37 
	#BUILD_TYPE_STRING
 "debug"

	)

40 #if–!
deföed
 
NDEBUG
 && deföed 
COVERAGE
 && !deföed 
TSAN
 && !deföed 
PROF
 )

41 
	#BUILD_TYPE_STRING
 "covîage"

	)

44 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && deföed 
TSAN
 && !deföed 
PROF
 )

45 
	#BUILD_TYPE_STRING
 "thªadßnôizî"

	)

48 #if–!
deföed
 
NDEBUG
 && !deföed 
COVERAGE
 && !deföed 
TSAN
 && deföed 
PROF
 )

49 
	#BUILD_TYPE_STRING
 "¥ofûög"

	)

59 
maö
–
¨gc
, **
¨gv
 );

61 
ˇŒback_ã°_°¨t
–*
ã°_«me
 );

62 
ˇŒback_ã°_föish
–*
ªsu…
 );

64 
öã∫Æ_show_vîsi⁄
();

65 
öã∫Æ_logiˇl_c‹e_id_ñemít_˛ónup_ˇŒback
–
lfds711_li°_asu_°©e
 *
œsus
, 
lfds711_li°_asu_ñemít
 *
œsue
 );

	@test_and_benchmark/test/src/main.c

2 
	~"öã∫Æ.h
"

9 
	$maö
–
¨gc
, **
¨gv
 )

11 
Êag


12 
dëîmöe_îg_Êag
 = 
LOWERED
,

13 
run_Êag
 = 
LOWERED
,

14 
show_îr‹_Êag
 = 
LOWERED
,

15 
show_hñp_Êag
 = 
LOWERED
,

16 
show_vîsi⁄_Êag
 = 
LOWERED
;

19 
rv
;

21 
lfds711_∑l_uöt_t


22 
lo›
,

23 
ôî©i⁄s
 = 1,

24 
mem‹y_ö_megabyãs
 = 
TEST_DEFAULT_TEST_MEMORY_IN_MEGABYTES
;

26 
utû_cmdlöe_°©e


27 
cs
;

29 
utû_cmdlöe_¨g_d©a


30 *
¨g_d©a
;

32 
	`as£π
–
¨gc
 >= 1 );

33 
	`as£π
–
¨gv
 !
NULL
 );

35 
	`utû_cmdlöe_öô
–&
cs
 );

37 
	`utû_cmdlöe_add_¨g
–&
cs
, 'e', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

38 
	`utû_cmdlöe_add_¨g
–&
cs
, 'h', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

39 
	`utû_cmdlöe_add_¨g
–&
cs
, 'i', 
UTIL_CMDLINE_ARG_TYPE_INTEGER
 );

40 
	`utû_cmdlöe_add_¨g
–&
cs
, 'm', 
UTIL_CMDLINE_ARG_TYPE_INTEGER
 );

41 
	`utû_cmdlöe_add_¨g
–&
cs
, 'r', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

42 
	`utû_cmdlöe_add_¨g
–&
cs
, 'v', 
UTIL_CMDLINE_ARG_TYPE_FLAG
 );

44 
rv
 = 
	`utû_cmdlöe_¥o˚ss_¨gs
–&
cs
, 
¨gc
, 
¨gv
 );

46 if–
rv
 == 0 )

47 
show_îr‹_Êag
 = 
RAISED
;

49 if–
rv
 == 1 )

51 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'e', &
¨g_d©a
 );

52 if–
¨g_d©a
 !
NULL
 )

53 
dëîmöe_îg_Êag
 = 
RAISED
;

55 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'h', &
¨g_d©a
 );

56 if–
¨g_d©a
 !
NULL
 )

57 
show_hñp_Êag
 = 
RAISED
;

59 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'i', &
¨g_d©a
 );

60 if–
¨g_d©a
 !
NULL
 )

62 if–
¨g_d©a
->
öãgî
.integer < 1 )

64 
	`puts
( "Number of iterationsÇeedsÅo be 1 or greater." );

65 
	`exô
–
EXIT_FAILURE
 );

68 
ôî©i⁄s
 = (
lfds711_∑l_uöt_t
Ë
¨g_d©a
->
öãgî
.integer;

71 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'm', &
¨g_d©a
 );

72 if–
¨g_d©a
 !
NULL
 )

74 if–
¨g_d©a
->
öãgî
.integer < 32 )

76 
	`puts
( "Memory forÅestsÇeedsÅo be 32 or greater." );

77 
	`exô
–
EXIT_FAILURE
 );

80 
mem‹y_ö_megabyãs
 = (
lfds711_∑l_uöt_t
Ë
¨g_d©a
->
öãgî
.integer;

83 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'r', &
¨g_d©a
 );

84 if–
¨g_d©a
 !
NULL
 )

85 
run_Êag
 = 
RAISED
;

87 
	`utû_cmdlöe_gë_¨g_d©a
–&
cs
, 'v', &
¨g_d©a
 );

88 if–
¨g_d©a
 !
NULL
 )

89 
show_vîsi⁄_Êag
 = 
RAISED
;

92 
	`utû_cmdlöe_˛ónup
–&
cs
 );

94 if–
¨gc
 =1 
	`‹
 (
run_Êag
 =
LOWERED
 
™d
 
show_vîsi⁄_Êag
 == LOWERED) )

95 
show_hñp_Êag
 = 
RAISED
;

97 if–
show_îr‹_Êag
 =
RAISED
 )

99 
	`¥ötf
( "\nInvalidárguments. Sorry - it'sá simpleÖarser, soÇo clues.\n"

102  
EXIT_SUCCESS
;

105 if–
dëîmöe_îg_Êag
 =
RAISED
 )

107 
libã°_misc_dëîmöe_îg_ªsu…


108 
dî
;

110 
lfds711_∑l_uöt_t


111 
cou¡_¨øy
[10],

112 
îg_size_ö_byãs
;

114 
libsh¨ed_mem‹y_°©e


115 
ms
;

118 *
mem‹y
;

120 
mem‹y
 = 
	`mÆloc
–
ONE_MEGABYTE_IN_BYTES
 );

122 
	`libsh¨ed_mem‹y_öô
–&
ms
 );

124 
	`libsh¨ed_mem‹y_add_mem‹y
–&
ms
, 
mem‹y
, 
ONE_MEGABYTE_IN_BYTES
 );

126 
	`libã°_misc_dëîmöe_îg
–&
ms
, &
cou¡_¨øy
, &
dî
, &
îg_size_ö_byãs
 );

128 if–
dî
 =
LIBTEST_MISC_DETERMINE_ERG_RESULT_NOT_SUPPORTED
 )

129 
	`¥ötf
( "Determine ERGÇot supported onÅhe currentÖlatform.\n" );

132 
	`¥ötf
( "\n"

137 
	`¥ötf
( " ERGÜength in bytes : Number successful LL/SC ops\n"

140  
lo›
 = 0 ;Üoop < 10 ;Üoop++ )

141 
	`¥ötf
–" %lu byã†: %Œu\n", 1UL << (
lo›
+2), (Ë
cou¡_¨øy
[loop] );

143 
	`¥ötf
( "\n"

148  
dî
 )

150 
LIBTEST_MISC_DETERMINE_ERG_RESULT_SUCCESS
:

151 
	`¥ötf
( " The smallest ERG size with successfulÑesults is %llu bytes, which\n"

159 (Ë
îg_size_ö_byãs
,

160 (Ë
îg_size_ö_byãs
,

161 (Ë
îg_size_ö_byãs
 );

164 
LIBTEST_MISC_DETERMINE_ERG_RESULT_ONE_PHYSICAL_CORE
:

165 
	`¥ötf
( " This system has only oneÖhysical core,ándás suchÅhis\n"

169 
LIBTEST_MISC_DETERMINE_ERG_RESULT_ONE_PHYSICAL_CORE_OR_NO_LLSC
:

170 
	`¥ötf
( " TheÑesultsáre indeterminate. EitherÅhis system has only one\n"

175 
LIBTEST_MISC_DETERMINE_ERG_RESULT_NO_LLSC
:

176 
	`¥ötf
( " ThereáppearsÅo beÇo LL/SC support onÅhe currentÖlatform.\n" );

179 
LIBTEST_MISC_DETERMINE_ERG_RESULT_NOT_SUPPORTED
:

180 
	`¥ötf
( " Determine ERGÇot supported onÅhe currentÖlatform.\n" );

184 
	`¥ötf
( "\n"

215  
EXIT_SUCCESS
;

218 if–
show_hñp_Êag
 =
RAISED
 )

220 
	`¥ötf
( "test -e -h -i [n] -m [n] -r -v\n"

227 " -v : vîsi⁄\n", (Ë
TEST_DEFAULT_TEST_MEMORY_IN_MEGABYTES
 );

229  
EXIT_SUCCESS
;

232 if–
show_vîsi⁄_Êag
 =
RAISED
 )

234 
	`öã∫Æ_show_vîsi⁄
();

235  
EXIT_SUCCESS
;

238 if–
run_Êag
 =
RAISED
 )

240 
libsh¨ed_mem‹y_°©e


241 
ms
;

243 
libã°_ªsu…s_°©e


244 
rs
;

246 
libã°_ã°suôe_°©e


247 
ts
;

250 *
ã°_mem‹y
;

252 
ã°_mem‹y
 = 
	`mÆloc
–
mem‹y_ö_megabyãs
 * 
ONE_MEGABYTE_IN_BYTES
 );

254 
	`libsh¨ed_mem‹y_öô
–&
ms
 );

256 
	`libsh¨ed_mem‹y_add_mem‹y
–&
ms
, 
ã°_mem‹y
, 
mem‹y_ö_megabyãs
 * 
ONE_MEGABYTE_IN_BYTES
 );

258 
	`libã°_ã°suôe_öô
–&
ts
, &
ms
, 
ˇŒback_ã°_°¨t
, 
ˇŒback_ã°_föish
 );

260  
lo›
 = 0 ;Üo› < (
lfds711_∑l_uöt_t
Ë
ôî©i⁄s
 ;Üoop++ )

262 
	`libã°_ªsu…s_öô
–&
rs
 );

264 
	`¥ötf
( "\n"

266 "=================\n", (Ë(
lo›
+1) );

268 
	`libã°_ã°suôe_run
–&
ts
, &
rs
 );

270 
	`libã°_ªsu…s_˛ónup
–&
rs
 );

273 
	`libã°_ã°suôe_˛ónup
–&
ts
 );

275 
	`libsh¨ed_mem‹y_˛ónup
–&
ms
, 
NULL
 );

277 
	`‰ì
–
ã°_mem‹y
 );

280  
EXIT_SUCCESS
;

281 
	}
}

	@test_and_benchmark/test/src/misc.c

2 
	~"öã∫Æ.h
"

9 
	$öã∫Æ_show_vîsi⁄
()

12 *
vîsi⁄_™d_buûd_°rög
;

15 * c⁄° 
loˇl_buûd_™d_vîsi⁄_°rög
 = "ã° " 
TEST_VERSION_STRING
 " (" 
BUILD_TYPE_STRING
 ", " 
MODE_TYPE_STRING
 ")";

17 
	`¥ötf
–"%s\n", 
loˇl_buûd_™d_vîsi⁄_°rög
 );

19 
	`libsh¨ed_misc_quîy
–
LIBSHARED_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
vîsi⁄_™d_buûd_°rög
 );

21 
	`¥ötf
–"%s\n", 
vîsi⁄_™d_buûd_°rög
 );

23 
	`libã°_misc_quîy
–
LIBTEST_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
vîsi⁄_™d_buûd_°rög
 );

25 
	`¥ötf
–"%s\n", 
vîsi⁄_™d_buûd_°rög
 );

27 
	`lfds711_misc_quîy
–
LFDS711_MISC_QUERY_GET_BUILD_AND_VERSION_STRING
, 
NULL
, (**Ë&
vîsi⁄_™d_buûd_°rög
 );

29 
	`¥ötf
–"%s\n", 
vîsi⁄_™d_buûd_°rög
 );

32 
	}
}

	@test_and_benchmark/test/src/util_cmdline.c

2 
	~"öã∫Æ.h
"

9 
	$utû_cmdlöe_öô
–
utû_cmdlöe_°©e
 *
cs
 )

11 
lfds711_∑l_uöt_t


12 
lo›
;

14 
	`as£π
–
cs
 !
NULL
 );

16  
lo›
 = 0 ;Üo› < 
NUMBER_OF_LOWERCASE_LETTERS_IN_LATIN_ALPHABET
 ;Üoop++ )

18 
cs
->
¨gs
[
lo›
].
¨g_ty≥
 = 
UTIL_CMDLINE_ARG_TYPE_UNSET
;

19 
cs
->
¨gs
[
lo›
].
¥o˚s£d_Êag
 = 
LOWERED
;

23 
	}
}

30 #¥agm®
w¨nög
–
dißbÀ
 : 4100 )

32 
	$utû_cmdlöe_˛ónup
–
utû_cmdlöe_°©e
 *
cs
 )

34 
	`as£π
–
cs
 !
NULL
 );

37 
	}
}

39 #¥agm®
w¨nög
(  : 4100 )

46 
	$utû_cmdlöe_add_¨g
–
utû_cmdlöe_°©e
 *
cs
, 
¨g_Àâî
, 
utû_cmdlöe_¨g_ty≥
 
¨g_ty≥
 )

48 
lfds711_∑l_uöt_t


49 
ödex
;

51 
	`as£π
–
cs
 !
NULL
 );

52 
	`as£π
–
¨g_Àâî
 >'a' 
™d
árg_letter <= 'z' );

55 
ödex
 = 
¨g_Àâî
 - 'a';

57 
cs
->
¨gs
[
ödex
].
¨g_ty≥
 =árg_type;

59 if–
¨g_ty≥
 =
UTIL_CMDLINE_ARG_TYPE_FLAG
 )

60 
cs
->
¨gs
[
ödex
].
¨g_d©a
.
Êag
.Êag = 
LOWERED
;

63 
	}
}

70 
	$utû_cmdlöe_¥o˚ss_¨gs
–
utû_cmdlöe_°©e
 *
cs
, 
¨gc
, **
¨gv
 )

73 *
¨g
;

76 
¨g_Àâî
,

77 
cc
,

78 
lo›
,

79 
rv
 = 1;

81 
lfds711_∑l_uöt_t


82 
ödex
;

84 
	`as£π
–
cs
 !
NULL
 );

85 
	`as£π
–
¨gc
 >= 1 );

86 
	`as£π
–
¨gv
 !
NULL
 );

88  
lo›
 = 1 ;Üo› < 
¨gc
 ;Üoop++ )

90 
¨g
 = *(
¨gv
+
lo›
);

92  *
¨g
 )

95 
¨g_Àâî
 = 
	`tﬁowî
–*(
¨g
+1) );

97 if–
¨g_Àâî
 >'a' 
™d
árg_letter <= 'z' )

99 
ödex
 = 
¨g_Àâî
 - 'a';

101  
cs
->
¨gs
[
ödex
].
¨g_ty≥
 )

103 
UTIL_CMDLINE_ARG_TYPE_INTEGER_RANGE
:

104 if–
lo›
+1 >
¨gc
 )

105 
rv
 = 0;

107 if–
lo›
+1 < 
¨gc
 )

109 
cc
 = 
	`ssˇnf
–*(
¨gv
+
lo›
+1), "%Œu-%Œu", &
cs
->
¨gs
[
ödex
].
¨g_d©a
.
öãgî_ønge
.
öãgî_°¨t
, &cs->¨gs[ödex].¨g_d©a.öãgî_ønge.
öãgî_íd
 );

111 if–
cc
 != 2 )

112 
rv
 = 0;

114 if–
cc
 == 2 )

116 
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 = 
RAISED
;

117 
lo›
++;

122 
UTIL_CMDLINE_ARG_TYPE_INTEGER
:

123 if–
lo›
+1 >
¨gc
 )

124 
rv
 = 0;

126 if–
lo›
+1 < 
¨gc
 )

128 
cc
 = 
	`ssˇnf
–*(
¨gv
+
lo›
+1), "%Œu", &
cs
->
¨gs
[
ödex
].
¨g_d©a
.
öãgî
.integer );

130 if–
cc
 != 1 )

131 
rv
 = 0;

133 if–
cc
 == 1 )

135 
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 = 
RAISED
;

136 
lo›
++;

141 
UTIL_CMDLINE_ARG_TYPE_FLAG
:

142 
cs
->
¨gs
[
ödex
].
¨g_d©a
.
Êag
.Êag = 
RAISED
;

143 
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 = 
RAISED
;

146 
UTIL_CMDLINE_ARG_TYPE_UNSET
:

153 
rv
 = 0;

158  
rv
;

159 
	}
}

166 
	$utû_cmdlöe_gë_¨g_d©a
–
utû_cmdlöe_°©e
 *
cs
, 
¨g_Àâî
, 
utû_cmdlöe_¨g_d©a
 **
¨g_d©a
 )

168 
lfds711_∑l_uöt_t


169 
ödex
;

171 
	`as£π
–
cs
 !
NULL
 );

172 
	`as£π
–
¨g_Àâî
 >'a' 
™d
árg_letter <= 'z' );

173 
	`as£π
–
¨g_d©a
 !
NULL
 );

175 
ödex
 = 
¨g_Àâî
 - 'a';

177 if–
cs
->
¨gs
[
ödex
].
¥o˚s£d_Êag
 =
RAISED
 )

178 *
¨g_d©a
 = &
cs
->
¨gs
[
ödex
].arg_data;

180 *
¨g_d©a
 = 
NULL
;

183 
	}
}

	@test_and_benchmark/test/src/util_cmdline.h

2 
	#NUMBER_OF_LOWERCASE_LETTERS_IN_LATIN_ALPHABET
 26

	)

5 
	eutû_cmdlöe_¨g_ty≥


7 
	mUTIL_CMDLINE_ARG_TYPE_INTEGER_RANGE
,

8 
	mUTIL_CMDLINE_ARG_TYPE_INTEGER
,

9 
	mUTIL_CMDLINE_ARG_TYPE_FLAG
,

10 
	mUTIL_CMDLINE_ARG_TYPE_UNSET


14 
	sutû_cmdlöe_¨g_öãgî_ønge


17 
	möãgî_°¨t
,

18 
	möãgî_íd
;

21 
	sutû_cmdlöe_¨g_öãgî


24 
	möãgî
;

27 
	sutû_cmdlöe_¨g_Êag


29 
Êag


30 
	mÊag
;

33 
	uutû_cmdlöe_¨g_d©a


35 
utû_cmdlöe_¨g_öãgî_ønge


36 
	möãgî_ønge
;

38 
utû_cmdlöe_¨g_öãgî


39 
	möãgî
;

41 
utû_cmdlöe_¨g_Êag


42 
	mÊag
;

45 
	sutû_cmdlöe_¨g_Àâî_™d_d©a


47 
utû_cmdlöe_¨g_ty≥


48 
	m¨g_ty≥
;

50 
Êag


51 
	m¥o˚s£d_Êag
;

53 
utû_cmdlöe_¨g_d©a


54 
	m¨g_d©a
;

57 
	sutû_cmdlöe_°©e


59 
utû_cmdlöe_¨g_Àâî_™d_d©a


60 
	m¨gs
[
NUMBER_OF_LOWERCASE_LETTERS_IN_LATIN_ALPHABET
];

64 
utû_cmdlöe_öô
–
utû_cmdlöe_°©e
 *
cs
 );

65 
utû_cmdlöe_˛ónup
–
utû_cmdlöe_°©e
 *
cs
 );

66 
utû_cmdlöe_add_¨g
–
utû_cmdlöe_°©e
 *
cs
, 
¨g_Àâî
, 
utû_cmdlöe_¨g_ty≥
 
¨g_ty≥
 );

67 
utû_cmdlöe_¥o˚ss_¨gs
–
utû_cmdlöe_°©e
 *
cs
, 
¨gc
, **
¨gv
 );

68 
utû_cmdlöe_gë_¨g_d©a
–
utû_cmdlöe_°©e
 *
cs
, 
¨g_Àâî
, 
utû_cmdlöe_¨g_d©a
 **
¨g_d©a
 );

	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #unde‡
_ASSERT_H


25 #unde‡
as£π


26 #unde‡
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #unde‡
as£π_≥º‹


34 
	#_ASSERT_H
 1

	)

35 
	~<„©uªs.h
>

37 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
°©ic_ˇ°
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£π
(
ex¥
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£π_≥º‹
(
î∫um
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #i‚de‡
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£π_Áû
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
,

70 
__löe
, c⁄° *
__fun˘i⁄
)

71 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

74 
	$__as£π_≥º‹_Áû
 (
__î∫um
, c⁄° *
__fûe
,

75 
__löe
, c⁄° *
__fun˘i⁄
)

76 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

81 
	$__as£π
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
, 
__löe
)

82 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

85 
__END_DECLS


88 
	#as£π
(
ex¥
) \

89 ((
ex¥
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£π_Áû
 (#ex¥, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£π_≥º‹
(
î∫um
) \

95 (!(
î∫um
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£π_≥º‹_Áû
 ((
î∫um
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #i‡
deföed
 
__˝lu•lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((c⁄° *Ë0)

	)

118 #i‡
deföed
 
__USE_ISOC11
 && !deföed 
__˝lu•lus


119 #unde‡
°©ic_as£π


120 
	#°©ic_as£π
 
_Sètic_as£π


	)

	@/usr/include/ctype.h

22 #i‚def 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 
	g__BEGIN_DECLS


30 #i‚de‡
_ISbô


39 
	~<ídün.h
>

40 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


41 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

43 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

48 
	m_ISuµî
 = 
_ISbô
 (0),

49 
	m_ISlowî
 = 
_ISbô
 (1),

50 
	m_ISÆpha
 = 
_ISbô
 (2),

51 
	m_ISdigô
 = 
_ISbô
 (3),

52 
	m_ISxdigô
 = 
_ISbô
 (4),

53 
	m_IS•a˚
 = 
_ISbô
 (5),

54 
	m_IS¥öt
 = 
_ISbô
 (6),

55 
	m_ISgøph
 = 
_ISbô
 (7),

56 
	m_ISbœnk
 = 
_ISbô
 (8),

57 
	m_IS˙ål
 = 
_ISbô
 (9),

58 
	m_ISpun˘
 = 
_ISbô
 (10),

59 
	m_ISÆnum
 = 
_ISbô
 (11)

79 c⁄° **
	$__˘y≥_b_loc
 ()

80 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

81 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

82 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

83 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

84 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

87 #i‚de‡
__˝lu•lus


88 
	#__is˘y≥
(
c
, 
ty≥
) \

89 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

90 #ñi‡
deföed
 
__USE_EXTERN_INLINES


91 
	#__is˘y≥_f
(
ty≥
) \

92 
__exã∫_ölöe
 \

93 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

95  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

96 
	}

	)
}

99 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

100 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

102 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__ex˘y≥
 (
iß um
);

111 
__ex˘y≥
 (
ißÕha
);

112 
__ex˘y≥
 (
is˙ål
);

113 
__ex˘y≥
 (
isdigô
);

114 
__ex˘y≥
 (
i¶owî
);

115 
__ex˘y≥
 (
isgøph
);

116 
__ex˘y≥
 (
i•röt
);

117 
__ex˘y≥
 (
i•un˘
);

118 
__ex˘y≥
 (
is•a˚
);

119 
__ex˘y≥
 (
isuµî
);

120 
__ex˘y≥
 (
isxdigô
);

124 
	$tﬁowî
 (
__c
Ë
__THROW
;

127 
	$touµî
 (
__c
Ë
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__ex˘y≥
 (
isbœnk
);

138 
__END_NAMESPACE_C99


141 #ifde‡
__USE_GNU


143 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

146 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


150 
	$ißscii
 (
__c
Ë
__THROW
;

154 
	$tﬂscii
 (
__c
Ë
__THROW
;

158 
	`__ex˘y≥
 (
_touµî
);

159 
	`__ex˘y≥
 (
_tﬁowî
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

164 (
__exãnsi⁄__
 \

165 ({ 
__ªs
; \

166 i‡( (
c
) > 1) \

168 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

174 
__ªs
 = 
f
 
¨gs
; \

177 
__ªs
 = (
a
)[(Ë(
c
)]; \

178 
__ªs
; 
	}
}))

	)

180 #i‡!
deföed
 
__NO_CTYPE


181 #ifde‡
__is˘y≥_f


182 
	$__is˘y≥_f
 (
Ænum
)

183 
	$__is˘y≥_f
 (
Æpha
)

184 
	$__is˘y≥_f
 (
˙ål
)

185 
	$__is˘y≥_f
 (
digô
)

186 
	$__is˘y≥_f
 (
lowî
)

187 
	$__is˘y≥_f
 (
gøph
)

188 
	$__is˘y≥_f
 (
¥öt
)

189 
	$__is˘y≥_f
 (
pun˘
)

190 
	$__is˘y≥_f
 (
•a˚
)

191 
	$__is˘y≥_f
 (
uµî
)

192 
	$__is˘y≥_f
 (
xdigô
)

193 #ifde‡
__USE_ISOC99


194 
	$__is˘y≥_f
 (
bœnk
)

196 #ñi‡
deföed
 
__is˘y≥


197 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

198 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

199 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

200 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

201 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

202 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

203 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

204 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

205 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

206 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

207 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

208 #ifde‡
__USE_ISOC99


209 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

213 #ifde‡
__USE_EXTERN_INLINES


214 
__exã∫_ölöe
 

215 
	`__NTH
 (
	$tﬁowî
 (
__c
))

217  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

218 
	}
}

220 
__exã∫_ölöe
 

221 
__NTH
 (
	$touµî
 (
__c
))

223  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

224 
	}
}

227 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


228 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

229 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

232 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


233 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

234 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

236 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

237 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

243 #ifde‡
__USE_XOPEN2K8


257 
	~<xloˇÀ.h
>

261 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

262 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

264 
	#__ex˘y≥_l
(
«me
) \

265 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

271 
__ex˘y≥_l
 (
iß um_l
);

272 
__ex˘y≥_l
 (
ißÕha_l
);

273 
__ex˘y≥_l
 (
is˙ål_l
);

274 
__ex˘y≥_l
 (
isdigô_l
);

275 
__ex˘y≥_l
 (
i¶owî_l
);

276 
__ex˘y≥_l
 (
isgøph_l
);

277 
__ex˘y≥_l
 (
i•röt_l
);

278 
__ex˘y≥_l
 (
i•un˘_l
);

279 
__ex˘y≥_l
 (
is•a˚_l
);

280 
__ex˘y≥_l
 (
isuµî_l
);

281 
__ex˘y≥_l
 (
isxdigô_l
);

283 
__ex˘y≥_l
 (
isbœnk_l
);

287 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

288 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

291 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

294 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


295 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

296 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

297 
	#__touµî_l
(
c
, 
loˇÀ
) \

298 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

299 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

300 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

304 #i‚de‡
__NO_CTYPE


305 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

306 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

307 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

308 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

309 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

310 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

311 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

312 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

313 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

314 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

315 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

317 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

319 #ifde‡
__USE_MISC


320 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

321 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

324 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

325 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

326 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

327 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

328 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

329 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

330 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

331 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

332 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

333 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

334 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

336 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

338 #ifde‡
__USE_MISC


339 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

340 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/numa.h

17 #i‚de‡
_NUMA_H


18 
	#_NUMA_H
 1

	)

21 
	#LIBNUMA_API_VERSION
 2

	)

25 
	~<°ddef.h
>

26 
	~<°rög.h
>

27 
	~<sys/ty≥s.h
>

28 
	~<°dlib.h
>

30 #i‡
deföed
(
__x86_64__
Ë|| deföed(
__i386__
)

31 
	#NUMA_NUM_NODES
 128

	)

33 
	#NUMA_NUM_NODES
 2048

	)

36 #ifde‡
__˝lu•lus


41 
n
[
NUMA_NUM_NODES
/(()*8)];

42 } 
	tnodemask_t
;

44 
	sbômask
 {

45 
size
;

46 *
maskp
;

50 
numa_bômask_isbô£t
(c⁄° 
bômask
 *, );

51 
bômask
 *
numa_bômask_£èŒ
(bitmask *);

52 
bômask
 *
numa_bômask_˛óøŒ
(bitmask *);

53 
bômask
 *
numa_bômask_£tbô
(bitmask *, );

54 
bômask
 *
numa_bômask_˛órbô
(bitmask *, );

55 
numa_bômask_nbyãs
(
bômask
 *);

56 
numa_bômask_weight
(c⁄° 
bômask
 *);

57 
bômask
 *
numa_bômask_Æloc
();

58 
numa_bômask_‰ì
(
bômask
 *);

59 
numa_bômask_equÆ
(c⁄° 
bômask
 *, const bitmask *);

60 
c›y_nodemask_to_bômask
(
nodemask_t
 *, 
bômask
 *);

61 
c›y_bômask_to_nodemask
(
bômask
 *, 
nodemask_t
 *);

62 
c›y_bômask_to_bômask
(
bômask
 *, bitmask *);

66 
ölöe
 
nodemask_zîo
(
nodemask_t
 *
mask
)

68 
bômask
 
tmp
;

70 
tmp
.
maskp
 = (*)
mask
;

71 
tmp
.
size
 = (
nodemask_t
) * 8;

72 
numa_bômask_˛óøŒ
(&
tmp
);

75 
ölöe
 
nodemask_zîo_com∑t
(
nodemask_t
 *
mask
)

77 
bômask
 
tmp
;

79 
tmp
.
maskp
 = (*)
mask
;

80 
tmp
.
size
 = (
nodemask_t
) * 8;

81 
numa_bômask_˛óøŒ
(&
tmp
);

84 
ölöe
 
nodemask_£t_com∑t
(
nodemask_t
 *
mask
, 
node
)

86 
mask
->
n
[
node
 / (8*())] |=

87 (1UL<<(
node
%(8*())));

90 
ölöe
 
nodemask_˛r_com∑t
(
nodemask_t
 *
mask
, 
node
)

92 
mask
->
n
[
node
 / (8*())] &=

93 ~(1UL<<(
node
%(8*())));

96 
ölöe
 
nodemask_is£t_com∑t
(c⁄° 
nodemask_t
 *
mask
, 
node
)

98 i‡(()
node
 >
NUMA_NUM_NODES
)

100 i‡(
mask
->
n
[
node
 / (8*())] &

101 (1UL<<(
node
%(8*()))))

106 
ölöe
 
nodemask_equÆ
(c⁄° 
nodemask_t
 *
a
, c⁄°Çodemask_à*
b
)

108 
bômask
 
tmp_a
, 
tmp_b
;

110 
tmp_a
.
maskp
 = (*)
a
;

111 
tmp_a
.
size
 = (
nodemask_t
) * 8;

113 
tmp_b
.
maskp
 = (*)
b
;

114 
tmp_b
.
size
 = (
nodemask_t
) * 8;

116  
numa_bômask_equÆ
(&
tmp_a
, &
tmp_b
);

119 
ölöe
 
nodemask_equÆ_com∑t
(c⁄° 
nodemask_t
 *
a
, c⁄°Çodemask_à*
b
)

121 
bômask
 
tmp_a
, 
tmp_b
;

123 
tmp_a
.
maskp
 = (*)
a
;

124 
tmp_a
.
size
 = (
nodemask_t
) * 8;

126 
tmp_b
.
maskp
 = (*)
b
;

127 
tmp_b
.
size
 = (
nodemask_t
) * 8;

129  
numa_bômask_equÆ
(&
tmp_a
, &
tmp_b
);

134 
numa_avaûabÀ
();

139 
numa_max_node
();

140 
numa_max_possibÀ_node
();

142 
numa_¥e„ºed
();

145 
numa_node_size64
(
node
, *
‰ìp
);

146 
numa_node_size
(
node
, *
‰ìp
);

148 
numa_∑gesize
();

152 
bômask
 *
numa_Æl_nodes_±r
;

155 
bômask
 *
numa_nodes_±r
;

158 
nodemask_t
 
numa_Æl_nodes
;

161 
bômask
 *
numa_Æl_˝us_±r
;

164 
bômask
 *
numa_no_nodes_±r
;

167 
nodemask_t
 
numa_no_nodes
;

170 
numa_böd
(
bômask
 *
nodes
);

173 
numa_£t_öãæóve_mask
(
bômask
 *
nodemask
);

176 
bômask
 *
numa_gë_öãæóve_mask
();

179 
bômask
 *
numa_Æloˇã_nodemask
();

181 
ölöe
 
numa_‰ì_nodemask
(
bômask
 *
b
)

183 
numa_bômask_‰ì
(
b
);

187 
numa_£t_¥e„ºed
(
node
);

190 
numa_£t_loˇœŒoc
();

193 
numa_£t_memböd
(
bômask
 *
nodemask
);

196 
bômask
 *
numa_gë_memböd
();

199 
bômask
 *
numa_gë_mems_Ælowed
();

201 
numa_gë_öãæóve_node
();

207 *
numa_Æloc_öãæóved_sub£t
(
size_t
 
size
, 
bômask
 *
nodemask
);

209 *
numa_Æloc_öãæóved
(
size_t
 
size
);

211 *
numa_Æloc_⁄node
(
size_t
 
size
, 
node
);

213 *
numa_Æloc_loˇl
(
size_t
 
size
);

215 *
numa_Æloc
(
size_t
 
size
);

217 *
numa_ªÆloc
(*
ﬁd_addr
, 
size_t
 
ﬁd_size
, size_à
√w_size
);

219 
numa_‰ì
(*
mem
, 
size_t
 
size
);

225 
numa_öãæóve_mem‹y
(*
mem
, 
size_t
 
size
, 
bômask
 *
mask
);

228 
numa_t⁄ode_mem‹y
(*
°¨t
, 
size_t
 
size
, 
node
);

231 
numa_t⁄odemask_mem‹y
(*
mem
, 
size_t
 
size
, 
bômask
 *
mask
);

234 
numa_£éoˇl_mem‹y
(*
°¨t
, 
size_t
 
size
);

237 
numa_pﬁi˚_mem‹y
(*
°¨t
, 
size_t
 
size
);

240 
numa_run_⁄_node_mask
(
bômask
 *
mask
);

242 
numa_run_⁄_node_mask_Æl
(
bômask
 *
mask
);

244 
numa_run_⁄_node
(
node
);

246 
bômask
 * 
numa_gë_run_node_mask
();

249 
numa_£t_böd_pﬁicy
(
°ri˘
);

252 
numa_£t_°ri˘
(
Êag
);

255 
numa_num_possibÀ_nodes
();

258 
numa_num_possibÀ_˝us
();

261 
numa_num_c⁄figuªd_nodes
();

264 
numa_num_c⁄figuªd_˝us
();

267 
numa_num_èsk_˝us
();

268 
numa_num_thªad_˝us
();

271 
numa_num_èsk_nodes
();

272 
numa_num_thªad_nodes
();

275 
bômask
 *
numa_Æloˇã_˝umask
();

277 
ölöe
 
numa_‰ì_˝umask
(
bômask
 *
b
)

279 
numa_bômask_‰ì
(
b
);

283 
numa_node_to_˝us
(, 
bômask
 *);

286 
numa_node_of_˝u
(
˝u
);

289 
numa_di°™˚
(
node1
, 
node2
);

295 
numa_îr‹
(*
whîe
);

299 
numa_exô_⁄_îr‹
;

302 
numa_w¨n
(
num
, *
fmt
, ...);

305 
numa_exô_⁄_w¨n
;

307 
numa_migøã_∑ges
(
pid
, 
bômask
 *
‰om
, bômask *
to
);

309 
numa_move_∑ges
(
pid
, 
cou¡
, **
∑ges
,

310 c⁄° *
nodes
, *
°©us
, 
Êags
);

312 
numa_sched_gëafföôy
(
pid_t
, 
bômask
 *);

313 
numa_sched_£èfföôy
(
pid_t
, 
bômask
 *);

316 
bômask
 *
numa_∑r£_node°rög
(const *);

320 
bômask
 *
numa_∑r£_node°rög_Æl
(const *);

323 
bômask
 *
numa_∑r£_˝u°rög
(const *);

327 
bômask
 *
numa_∑r£_˝u°rög_Æl
(const *);

335 
ölöe
 
numa_£t_öãæóve_mask_com∑t
(
nodemask_t
 *
nodemask
)

337 
bômask
 
	gtmp
;

339 
	gtmp
.
	gmaskp
 = (*)
nodemask
;

340 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

341 
numa_£t_öãæóve_mask
(&
tmp
);

344 
ölöe
 
nodemask_t
 
numa_gë_öãæóve_mask_com∑t
()

346 
bômask
 *
	gç
;

347 
nodemask_t
 
	gmask
;

349 
	gç
 = 
numa_gë_öãæóve_mask
();

350 
c›y_bômask_to_nodemask
(
ç
, &
mask
);

351 
numa_bômask_‰ì
(
ç
);

352  
	gmask
;

355 
ölöe
 
numa_böd_com∑t
(
nodemask_t
 *
mask
)

357 
bômask
 *
	gç
;

359 
	gç
 = 
numa_Æloˇã_nodemask
();

360 
c›y_nodemask_to_bômask
(
mask
, 
ç
);

361 
numa_böd
(
ç
);

362 
numa_bômask_‰ì
(
ç
);

365 
ölöe
 
numa_£t_memböd_com∑t
(
nodemask_t
 *
mask
)

367 
bômask
 
	gtmp
;

369 
	gtmp
.
	gmaskp
 = (*)
mask
;

370 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

371 
numa_£t_memböd
(&
tmp
);

374 
ölöe
 
nodemask_t
 
numa_gë_memböd_com∑t
()

376 
bômask
 *
	gç
;

377 
nodemask_t
 
	gmask
;

379 
	gç
 = 
numa_gë_memböd
();

380 
c›y_bômask_to_nodemask
(
ç
, &
mask
);

381 
numa_bômask_‰ì
(
ç
);

382  
	gmask
;

385 
ölöe
 *
numa_Æloc_öãæóved_sub£t_com∑t
(
size_t
 
size
,

386 c⁄° 
nodemask_t
 *
mask
)

388 
bômask
 
	gtmp
;

390 
	gtmp
.
	gmaskp
 = (*)
mask
;

391 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

392  
numa_Æloc_öãæóved_sub£t
(
size
, &
tmp
);

395 
ölöe
 
numa_run_⁄_node_mask_com∑t
(c⁄° 
nodemask_t
 *
mask
)

397 
bômask
 
	gtmp
;

399 
	gtmp
.
	gmaskp
 = (*)
mask
;

400 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

401  
numa_run_⁄_node_mask
(&
tmp
);

404 
ölöe
 
nodemask_t
 
numa_gë_run_node_mask_com∑t
()

406 
bômask
 *
	gç
;

407 
nodemask_t
 
	gmask
;

409 
	gç
 = 
numa_gë_run_node_mask
();

410 
c›y_bômask_to_nodemask
(
ç
, &
mask
);

411 
numa_bômask_‰ì
(
ç
);

412  
	gmask
;

415 
ölöe
 
numa_öãæóve_mem‹y_com∑t
(*
mem
, 
size_t
 
size
,

416 c⁄° 
nodemask_t
 *
mask
)

418 
bômask
 
	gtmp
;

420 
	gtmp
.
	gmaskp
 = (*)
mask
;

421 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

422 
numa_öãæóve_mem‹y
(
mem
, 
size
, &
tmp
);

425 
ölöe
 
numa_t⁄odemask_mem‹y_com∑t
(*
mem
, 
size_t
 
size
,

426 c⁄° 
nodemask_t
 *
mask
)

428 
bômask
 
	gtmp
;

430 
	gtmp
.
	gmaskp
 = (*)
mask
;

431 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

432 
numa_t⁄odemask_mem‹y
(
mem
, 
size
, &
tmp
);

435 
ölöe
 
numa_sched_gëafföôy_com∑t
(
pid_t
 
pid
, 
Àn
,

436 *
mask
)

438 
bômask
 
	gtmp
;

440 
	gtmp
.
	gmaskp
 = (*)
mask
;

441 
	gtmp
.
	gsize
 = 
Àn
 * 8;

442  
numa_sched_gëafföôy
(
pid
, &
tmp
);

445 
ölöe
 
numa_sched_£èfföôy_com∑t
(
pid_t
 
pid
, 
Àn
,

446 *
mask
)

448 
bômask
 
	gtmp
;

450 
	gtmp
.
	gmaskp
 = (*)
mask
;

451 
	gtmp
.
	gsize
 = 
Àn
 * 8;

452  
numa_sched_£èfföôy
(
pid
, &
tmp
);

455 
ölöe
 
numa_node_to_˝us_com∑t
(
node
, *
buf„r
,

456 
buf„r_Àn
)

458 
bômask
 
	gtmp
;

460 
	gtmp
.
	gmaskp
 = (*)
buf„r
;

461 
	gtmp
.
	gsize
 = 
buf„r_Àn
 * 8;

462  
numa_node_to_˝us
(
node
, &
tmp
);

471 #ifde‡
NUMA_VERSION1_COMPATIBILITY


472 
	~<numacom∑t1.h
>

475 #ifde‡
__˝lu•lus


	@/usr/include/pthread.h

18 #i‚de‡
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<ídün.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<bôs/±hªadty≥s.h
>

27 
	~<bôs/£tjmp.h
>

28 
	~<bôs/w‹dsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifde‡
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifde‡
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


85 #ifde‡
__PTHREAD_MUTEX_HAVE_PREV


86 
	#PTHREAD_MUTEX_INITIALIZER
 \

87 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

88 #ifde‡
__USE_GNU


89 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

90 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

91 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

92 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

93 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

94 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

98 
	#PTHREAD_MUTEX_INITIALIZER
 \

99 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

100 #ifde‡
__USE_GNU


101 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

102 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

103 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

105 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

113 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


116 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

117 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

119 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


125 #i‚de‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


126 #i‡
__WORDSIZE
 == 64

127 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

132 
	#PTHREAD_RWLOCK_INITIALIZER
 \

133 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

134 #ifde‡
__USE_GNU


135 #ifde‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


136 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

137 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, \

138 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

140 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


141 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

142 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

143 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

145 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

146 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

147 0 } }

	)

157 
	mPTHREAD_INHERIT_SCHED
,

158 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

159 
	mPTHREAD_EXPLICIT_SCHED


160 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

167 
	mPTHREAD_SCOPE_SYSTEM
,

168 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

169 
	mPTHREAD_SCOPE_PROCESS


170 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

177 
	mPTHREAD_PROCESS_PRIVATE
,

178 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

179 
	mPTHREAD_PROCESS_SHARED


180 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

186 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*Ë0, 0, 0 } }

	)

190 
	s_±hªad_˛ónup_buf„r


192 (*
	m__routöe
) (*);

193 *
	m__¨g
;

194 
	m__ˇn˚…y≥
;

195 
_±hªad_˛ónup_buf„r
 *
	m__¥ev
;

201 
	mPTHREAD_CANCEL_ENABLE
,

202 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

203 
	mPTHREAD_CANCEL_DISABLE


204 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

208 
	mPTHREAD_CANCEL_DEFERRED
,

209 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

210 
	mPTHREAD_CANCEL_ASYNCHRONOUS


211 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

213 
	#PTHREAD_CANCELED
 ((*Ë-1)

	)

217 
	#PTHREAD_ONCE_INIT
 0

	)

220 #ifde‡
__USE_XOPEN2K


224 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

228 
__BEGIN_DECLS


233 
	$±hªad_¸óã
 (
±hªad_t
 *
__ª°ri˘
 
__√wthªad
,

234 c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

235 *(*
__°¨t_routöe
) (*),

236 *
__ª°ri˘
 
__¨g
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 3));

242 
	$±hªad_exô
 (*
__ªtvÆ
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

250 
	`±hªad_joö
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
);

252 #ifde‡
__USE_GNU


255 
	$±hªad_åyjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
Ë
__THROW
;

263 
	`±hªad_timedjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
,

264 c⁄° 
time•ec
 *
__ab°ime
);

271 
	$±hªad_dëach
 (
±hªad_t
 
__th
Ë
__THROW
;

275 
±hªad_t
 
	$±hªad_£lf
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

278 
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
)

279 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

287 
	$±hªad_©å_öô
 (
±hªad_©å_t
 *
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

290 
	$±hªad_©å_de°roy
 (
±hªad_©å_t
 *
__©å
)

291 
__THROW
 
	`__n⁄nuŒ
 ((1));

294 
	$±hªad_©å_gëdëach°©e
 (c⁄° 
±hªad_©å_t
 *
__©å
,

295 *
__dëach°©e
)

296 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

299 
	$±hªad_©å_£tdëach°©e
 (
±hªad_©å_t
 *
__©å
,

300 
__dëach°©e
)

301 
__THROW
 
	`__n⁄nuŒ
 ((1));

305 
	$±hªad_©å_gëgu¨dsize
 (c⁄° 
±hªad_©å_t
 *
__©å
,

306 
size_t
 *
__gu¨dsize
)

307 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

310 
	$±hªad_©å_£tgu¨dsize
 (
±hªad_©å_t
 *
__©å
,

311 
size_t
 
__gu¨dsize
)

312 
__THROW
 
	`__n⁄nuŒ
 ((1));

316 
	$±hªad_©å_gësched∑øm
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

317 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

318 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

321 
	$±hªad_©å_£tsched∑øm
 (
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

322 c⁄° 
sched_∑øm
 *
__ª°ri˘


323 
__∑øm
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

326 
	$±hªad_©å_gëschedpﬁicy
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


327 
__©å
, *
__ª°ri˘
 
__pﬁicy
)

328 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

331 
	$±hªad_©å_£tschedpﬁicy
 (
±hªad_©å_t
 *
__©å
, 
__pﬁicy
)

332 
__THROW
 
	`__n⁄nuŒ
 ((1));

335 
	$±hªad_©å_gëöhîôsched
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


336 
__©å
, *
__ª°ri˘
 
__öhîô
)

337 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

340 
	$±hªad_©å_£töhîôsched
 (
±hªad_©å_t
 *
__©å
,

341 
__öhîô
)

342 
__THROW
 
	`__n⁄nuŒ
 ((1));

346 
	$±hªad_©å_gësc›e
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

347 *
__ª°ri˘
 
__sc›e
)

348 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

351 
	$±hªad_©å_£tsc›e
 (
±hªad_©å_t
 *
__©å
, 
__sc›e
)

352 
__THROW
 
	`__n⁄nuŒ
 ((1));

355 
	$±hªad_©å_gë°ackaddr
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


356 
__©å
, **
__ª°ri˘
 
__°ackaddr
)

357 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__©åibuã_dïªˇãd__
;

363 
	$±hªad_©å_£t°ackaddr
 (
±hªad_©å_t
 *
__©å
,

364 *
__°ackaddr
)

365 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
;

368 
	$±hªad_©å_gë°acksize
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


369 
__©å
, 
size_t
 *
__ª°ri˘
 
__°acksize
)

370 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

375 
	$±hªad_©å_£t°acksize
 (
±hªad_©å_t
 *
__©å
,

376 
size_t
 
__°acksize
)

377 
__THROW
 
	`__n⁄nuŒ
 ((1));

379 #ifde‡
__USE_XOPEN2K


381 
	$±hªad_©å_gë°ack
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

382 **
__ª°ri˘
 
__°ackaddr
,

383 
size_t
 *
__ª°ri˘
 
__°acksize
)

384 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

389 
	$±hªad_©å_£t°ack
 (
±hªad_©å_t
 *
__©å
, *
__°ackaddr
,

390 
size_t
 
__°acksize
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 #ifde‡
__USE_GNU


396 
	$±hªad_©å_£èfföôy_≈
 (
±hªad_©å_t
 *
__©å
,

397 
size_t
 
__˝u£tsize
,

398 c⁄° 
˝u_£t_t
 *
__˝u£t
)

399 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

403 
	$±hªad_©å_gëafföôy_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
,

404 
size_t
 
__˝u£tsize
,

405 
˝u_£t_t
 *
__˝u£t
)

406 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

409 
	$±hªad_gë©å_deÁu…_≈
 (
±hªad_©å_t
 *
__©å
)

410 
__THROW
 
	`__n⁄nuŒ
 ((1));

414 
	$±hªad_£èâr_deÁu…_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
)

415 
__THROW
 
	`__n⁄nuŒ
 ((1));

420 
	$±hªad_gë©å_≈
 (
±hªad_t
 
__th
, 
±hªad_©å_t
 *
__©å
)

421 
__THROW
 
	`__n⁄nuŒ
 ((2));

429 
	$±hªad_£tsched∑øm
 (
±hªad_t
 
__èrgë_thªad
, 
__pﬁicy
,

430 c⁄° 
sched_∑øm
 *
__∑øm
)

431 
__THROW
 
	`__n⁄nuŒ
 ((3));

434 
	$±hªad_gësched∑øm
 (
±hªad_t
 
__èrgë_thªad
,

435 *
__ª°ri˘
 
__pﬁicy
,

436 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

437 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

440 
	$±hªad_£tsched¥io
 (
±hªad_t
 
__èrgë_thªad
, 
__¥io
)

441 
__THROW
;

444 #ifde‡
__USE_GNU


446 
	$±hªad_gë«me_≈
 (
±hªad_t
 
__èrgë_thªad
, *
__buf
,

447 
size_t
 
__buÊí
)

448 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$±hªad_£äame_≈
 (
±hªad_t
 
__èrgë_thªad
, c⁄° *
__«me
)

452 
__THROW
 
	`__n⁄nuŒ
 ((2));

456 #ifde‡
__USE_UNIX98


458 
	$±hªad_gëc⁄cuºícy
 (Ë
__THROW
;

461 
	$±hªad_£tc⁄cuºícy
 (
__Àvñ
Ë
__THROW
;

464 #ifde‡
__USE_GNU


469 
	$±hªad_yõld
 (Ë
__THROW
;

474 
	$±hªad_£èfföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

475 c⁄° 
˝u_£t_t
 *
__˝u£t
)

476 
__THROW
 
	`__n⁄nuŒ
 ((3));

479 
	$±hªad_gëafföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

480 
˝u_£t_t
 *
__˝u£t
)

481 
__THROW
 
	`__n⁄nuŒ
 ((3));

494 
	$±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

495 (*
__öô_routöe
Ë()Ë
	`__n⁄nuŒ
 ((1, 2));

506 
	`±hªad_£tˇn˚l°©e
 (
__°©e
, *
__ﬁd°©e
);

510 
	`±hªad_£tˇn˚…y≥
 (
__ty≥
, *
__ﬁdty≥
);

513 
	`±hªad_ˇn˚l
 (
±hªad_t
 
__th
);

518 
	`±hªad_ã°ˇn˚l
 ();

527 
__jmp_buf
 
__ˇn˚l_jmp_buf
;

528 
__mask_was_ßved
;

529 } 
__ˇn˚l_jmp_buf
[1];

530 *
__∑d
[4];

531 } 
	t__±hªad_unwöd_buf_t
 
	t__©åibuã__
 ((
	t__Æig√d__
));

534 #i‚de‡
__˛ónup_f˘_©åibuã


535 
	#__˛ónup_f˘_©åibuã


	)

540 
	s__±hªad_˛ónup_‰ame


542 (*
__ˇn˚l_routöe
) (*);

543 *
__ˇn˚l_¨g
;

544 
__do_ô
;

545 
__ˇn˚l_ty≥
;

548 #i‡
deföed
 
__GNUC__
 && deföed 
__EXCEPTIONS


549 #ifde‡
__˝lu•lus


551 ˛as†
	c__±hªad_˛ónup_˛ass


553 (*
__ˇn˚l_routöe
) (*);

554 *
__ˇn˚l_¨g
;

555 
__do_ô
;

556 
__ˇn˚l_ty≥
;

558 
public
:

559 
	$__±hªad_˛ónup_˛ass
 ((*
__f˘
Ë(*), *
__¨g
)

560 : 
	`__ˇn˚l_routöe
 (
__f˘
), 
	`__ˇn˚l_¨g
 (
__¨g
), 
	$__do_ô
 (1) { }

561 ~
	$__±hªad_˛ónup_˛ass
 (Ë{ i‡(
__do_ô
Ë
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); 
	}
}

562 
	$__£tdoô
 (
__√wvÆ
Ë{ 
__do_ô
 = __√wvÆ; 
	}
}

563 
	$__de„r
 (Ë{ 
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
,

564 &
__ˇn˚l_ty≥
); 
	}
}

565 
	$__ª°‹e
 (Ëc⁄° { 
	`±hªad_£tˇn˚…y≥
 (
__ˇn˚l_ty≥
, 0); 
	}
}

575 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

577 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
)

	)

581 
	#±hªad_˛ónup_p›
(
execuã
) \

582 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

583 } 0)

	)

585 #ifde‡
__USE_GNU


589 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

591 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
); \

592 
__˛‰ame
.
	`__de„r
 ()

	)

597 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

598 
__˛‰ame
.
	`__ª°‹e
 (); \

599 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

600 } 0)

	)

607 
__exã∫_ölöe
 

608 
	$__±hªad_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
__‰ame
)

610 i‡(
__‰ame
->
__do_ô
)

611 
__‰ame
->
	`__ˇn˚l_routöe
 (__‰ame->
__ˇn˚l_¨g
);

612 
	}
}

621 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

623 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

624 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

625 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

626 .
__do_ô
 = 1 };

	)

630 
	#±hªad_˛ónup_p›
(
execuã
) \

631 
__˛‰ame
.
__do_ô
 = (
execuã
); \

632 } 0)

	)

634 #ifde‡
__USE_GNU


638 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

640 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

641 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

642 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

643 .
__do_ô
 = 1 }; \

644 (Ë
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
, \

645 &
__˛‰ame
.
__ˇn˚l_ty≥
)

	)

650 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

651 (Ë
	`±hªad_£tˇn˚…y≥
 (
__˛‰ame
.
__ˇn˚l_ty≥
, 
NULL
); \

652 
__˛‰ame
.
__do_ô
 = (
execuã
); \

653 } 0)

	)

664 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

666 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

667 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

668 *
__ˇn˚l_¨g
 = (
¨g
); \

669 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

670 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

671 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

673 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

674 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

678 
	`__±hªad_ªgi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

679 dÿ{

	)

680 
__±hªad_ªgi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

681 
__˛ónup_f˘_©åibuã
;

685 
	#±hªad_˛ónup_p›
(
execuã
) \

688 
	`__±hªad_uƒegi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

689 i‡(
execuã
) \

690 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

691 } 0)

	)

692 
	$__±hªad_uƒegi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

693 
__˛ónup_f˘_©åibuã
;

695 #ifde‡
__USE_GNU


699 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

701 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

702 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

703 *
__ˇn˚l_¨g
 = (
¨g
); \

704 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

705 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

706 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

708 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

709 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

713 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (&
__ˇn˚l_buf
); \

714 dÿ{

	)

715 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (
__±hªad_unwöd_buf_t
 *
__buf
)

716 
__˛ónup_f˘_©åibuã
;

721 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

724 
	`__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (&
__ˇn˚l_buf
); \

725 i‡(
execuã
) \

726 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

727 
	}
} 0)

	)

728 
	$__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (
__±hªad_unwöd_buf_t
 *
__buf
)

729 
__˛ónup_f˘_©åibuã
;

733 
	$__±hªad_unwöd_√xt
 (
__±hªad_unwöd_buf_t
 *
__buf
)

734 
__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
__n‹ëu∫__
))

735 #i‚de‡
SHARED


736 
	`__©åibuã__
 ((
__wók__
))

742 
__jmp_buf_èg
;

743 
	$__sig£tjmp
 (
__jmp_buf_èg
 *
__ív
, 
__ßvemask
Ë
__THROWNL
;

749 
	$±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

750 c⁄° 
±hªad_muãx©å_t
 *
__muãx©å
)

751 
__THROW
 
	`__n⁄nuŒ
 ((1));

754 
	$±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
)

755 
__THROW
 
	`__n⁄nuŒ
 ((1));

758 
	$±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
)

759 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

762 
	$±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
)

763 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

765 #ifde‡
__USE_XOPEN2K


767 
	$±hªad_muãx_timedlock
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

768 c⁄° 
time•ec
 *
__ª°ri˘


769 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

773 
	$±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
)

774 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

778 
	$±hªad_muãx_gë¥io˚ûög
 (c⁄° 
±hªad_muãx_t
 *

779 
__ª°ri˘
 
__muãx
,

780 *
__ª°ri˘
 
__¥io˚ûög
)

781 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

785 
	$±hªad_muãx_£çrio˚ûög
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

786 
__¥io˚ûög
,

787 *
__ª°ri˘
 
__ﬁd_˚ûög
)

788 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

791 #ifde‡
__USE_XOPEN2K8


793 
	$±hªad_muãx_c⁄si°ít
 (
±hªad_muãx_t
 *
__muãx
)

794 
__THROW
 
	`__n⁄nuŒ
 ((1));

795 #ifde‡
__USE_GNU


796 
	$±hªad_muãx_c⁄si°ít_≈
 (
±hªad_muãx_t
 *
__muãx
)

797 
__THROW
 
	`__n⁄nuŒ
 ((1));

806 
	$±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
)

807 
__THROW
 
	`__n⁄nuŒ
 ((1));

810 
	$±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
)

811 
__THROW
 
	`__n⁄nuŒ
 ((1));

814 
	$±hªad_muãx©å_gëpsh¨ed
 (c⁄° 
±hªad_muãx©å_t
 *

815 
__ª°ri˘
 
__©å
,

816 *
__ª°ri˘
 
__psh¨ed
)

817 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

820 
	$±hªad_muãx©å_£çsh¨ed
 (
±hªad_muãx©å_t
 *
__©å
,

821 
__psh¨ed
)

822 
__THROW
 
	`__n⁄nuŒ
 ((1));

824 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


826 
	$±hªad_muãx©å_gëty≥
 (c⁄° 
±hªad_muãx©å_t
 *
__ª°ri˘


827 
__©å
, *
__ª°ri˘
 
__köd
)

828 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

833 
	$±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
, 
__köd
)

834 
__THROW
 
	`__n⁄nuŒ
 ((1));

838 
	$±hªad_muãx©å_gë¥Ÿocﬁ
 (c⁄° 
±hªad_muãx©å_t
 *

839 
__ª°ri˘
 
__©å
,

840 *
__ª°ri˘
 
__¥Ÿocﬁ
)

841 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

845 
	$±hªad_muãx©å_£çrŸocﬁ
 (
±hªad_muãx©å_t
 *
__©å
,

846 
__¥Ÿocﬁ
)

847 
__THROW
 
	`__n⁄nuŒ
 ((1));

850 
	$±hªad_muãx©å_gë¥io˚ûög
 (c⁄° 
±hªad_muãx©å_t
 *

851 
__ª°ri˘
 
__©å
,

852 *
__ª°ri˘
 
__¥io˚ûög
)

853 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

856 
	$±hªad_muãx©å_£çrio˚ûög
 (
±hªad_muãx©å_t
 *
__©å
,

857 
__¥io˚ûög
)

858 
__THROW
 
	`__n⁄nuŒ
 ((1));

860 #ifde‡
__USE_XOPEN2K


862 
	$±hªad_muãx©å_gërobu°
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

863 *
__robu°√ss
)

864 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

865 #ifde‡
__USE_GNU


866 
	$±hªad_muãx©å_gërobu°_≈
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

867 *
__robu°√ss
)

868 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

872 
	$±hªad_muãx©å_£åobu°
 (
±hªad_muãx©å_t
 *
__©å
,

873 
__robu°√ss
)

874 
__THROW
 
	`__n⁄nuŒ
 ((1));

875 #ifde‡
__USE_GNU


876 
	$±hªad_muãx©å_£åobu°_≈
 (
±hªad_muãx©å_t
 *
__©å
,

877 
__robu°√ss
)

878 
__THROW
 
	`__n⁄nuŒ
 ((1));

883 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


888 
	$±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

889 c⁄° 
±hªad_rwlock©å_t
 *
__ª°ri˘


890 
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

893 
	$±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
)

894 
__THROW
 
	`__n⁄nuŒ
 ((1));

897 
	$±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

898 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

901 
	$±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

902 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

904 #ifde‡
__USE_XOPEN2K


906 
	$±hªad_rwlock_timedrdlock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

907 c⁄° 
time•ec
 *
__ª°ri˘


908 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

912 
	$±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

916 
	$±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
)

917 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

919 #ifde‡
__USE_XOPEN2K


921 
	$±hªad_rwlock_timedwæock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

922 c⁄° 
time•ec
 *
__ª°ri˘


923 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

927 
	$±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

934 
	$±hªad_rwlock©å_öô
 (
±hªad_rwlock©å_t
 *
__©å
)

935 
__THROW
 
	`__n⁄nuŒ
 ((1));

938 
	$±hªad_rwlock©å_de°roy
 (
±hªad_rwlock©å_t
 *
__©å
)

939 
__THROW
 
	`__n⁄nuŒ
 ((1));

942 
	$±hªad_rwlock©å_gëpsh¨ed
 (c⁄° 
±hªad_rwlock©å_t
 *

943 
__ª°ri˘
 
__©å
,

944 *
__ª°ri˘
 
__psh¨ed
)

945 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

948 
	$±hªad_rwlock©å_£çsh¨ed
 (
±hªad_rwlock©å_t
 *
__©å
,

949 
__psh¨ed
)

950 
__THROW
 
	`__n⁄nuŒ
 ((1));

953 
	$±hªad_rwlock©å_gëköd_≈
 (c⁄° 
±hªad_rwlock©å_t
 *

954 
__ª°ri˘
 
__©å
,

955 *
__ª°ri˘
 
__¥ef
)

956 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

959 
	$±hªad_rwlock©å_£tköd_≈
 (
±hªad_rwlock©å_t
 *
__©å
,

960 
__¥ef
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

968 
	$±hªad_c⁄d_öô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

969 c⁄° 
±hªad_c⁄d©å_t
 *
__ª°ri˘
 
__c⁄d_©å
)

970 
__THROW
 
	`__n⁄nuŒ
 ((1));

973 
	$±hªad_c⁄d_de°roy
 (
±hªad_c⁄d_t
 *
__c⁄d
)

974 
__THROW
 
	`__n⁄nuŒ
 ((1));

977 
	$±hªad_c⁄d_sig«l
 (
±hªad_c⁄d_t
 *
__c⁄d
)

978 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

981 
	$±hªad_c⁄d_brﬂdˇ°
 (
±hªad_c⁄d_t
 *
__c⁄d
)

982 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

989 
	$±hªad_c⁄d_waô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

990 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
)

991 
	`__n⁄nuŒ
 ((1, 2));

1000 
	$±hªad_c⁄d_timedwaô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

1001 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

1002 c⁄° 
time•ec
 *
__ª°ri˘
 
__ab°ime
)

1003 
	`__n⁄nuŒ
 ((1, 2, 3));

1008 
	$±hªad_c⁄d©å_öô
 (
±hªad_c⁄d©å_t
 *
__©å
)

1009 
__THROW
 
	`__n⁄nuŒ
 ((1));

1012 
	$±hªad_c⁄d©å_de°roy
 (
±hªad_c⁄d©å_t
 *
__©å
)

1013 
__THROW
 
	`__n⁄nuŒ
 ((1));

1016 
	$±hªad_c⁄d©å_gëpsh¨ed
 (c⁄° 
±hªad_c⁄d©å_t
 *

1017 
__ª°ri˘
 
__©å
,

1018 *
__ª°ri˘
 
__psh¨ed
)

1019 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1022 
	$±hªad_c⁄d©å_£çsh¨ed
 (
±hªad_c⁄d©å_t
 *
__©å
,

1023 
__psh¨ed
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1025 #ifde‡
__USE_XOPEN2K


1027 
	$±hªad_c⁄d©å_gë˛ock
 (c⁄° 
±hªad_c⁄d©å_t
 *

1028 
__ª°ri˘
 
__©å
,

1029 
__˛ockid_t
 *
__ª°ri˘
 
__˛ock_id
)

1030 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1033 
	$±hªad_c⁄d©å_£t˛ock
 (
±hªad_c⁄d©å_t
 *
__©å
,

1034 
__˛ockid_t
 
__˛ock_id
)

1035 
__THROW
 
	`__n⁄nuŒ
 ((1));

1039 #ifde‡
__USE_XOPEN2K


1044 
	$±hªad_•ö_öô
 (
±hªad_•ölock_t
 *
__lock
, 
__psh¨ed
)

1045 
__THROW
 
	`__n⁄nuŒ
 ((1));

1048 
	$±hªad_•ö_de°roy
 (
±hªad_•ölock_t
 *
__lock
)

1049 
__THROW
 
	`__n⁄nuŒ
 ((1));

1052 
	$±hªad_•ö_lock
 (
±hªad_•ölock_t
 *
__lock
)

1053 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1056 
	$±hªad_•ö_åylock
 (
±hªad_•ölock_t
 *
__lock
)

1057 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1060 
	$±hªad_•ö_u∆ock
 (
±hªad_•ölock_t
 *
__lock
)

1061 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1068 
	$±hªad_b¨rõr_öô
 (
±hªad_b¨rõr_t
 *
__ª°ri˘
 
__b¨rõr
,

1069 c⁄° 
±hªad_b¨rõøâr_t
 *
__ª°ri˘


1070 
__©å
, 
__cou¡
)

1071 
__THROW
 
	`__n⁄nuŒ
 ((1));

1074 
	$±hªad_b¨rõr_de°roy
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1075 
__THROW
 
	`__n⁄nuŒ
 ((1));

1078 
	$±hªad_b¨rõr_waô
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1079 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1083 
	$±hªad_b¨rõøâr_öô
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1084 
__THROW
 
	`__n⁄nuŒ
 ((1));

1087 
	$±hªad_b¨rõøâr_de°roy
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1088 
__THROW
 
	`__n⁄nuŒ
 ((1));

1091 
	$±hªad_b¨rõøâr_gëpsh¨ed
 (c⁄° 
±hªad_b¨rõøâr_t
 *

1092 
__ª°ri˘
 
__©å
,

1093 *
__ª°ri˘
 
__psh¨ed
)

1094 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1097 
	$±hªad_b¨rõøâr_£çsh¨ed
 (
±hªad_b¨rõøâr_t
 *
__©å
,

1098 
__psh¨ed
)

1099 
__THROW
 
	`__n⁄nuŒ
 ((1));

1111 
	$±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

1112 (*
__de°r_fun˘i⁄
) (*))

1113 
__THROW
 
	`__n⁄nuŒ
 ((1));

1116 
	$±hªad_key_dñëe
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1119 *
	$±hªad_gë•ecific
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1122 
	$±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

1123 c⁄° *
__poöãr
Ë
__THROW
 ;

1126 #ifde‡
__USE_XOPEN2K


1128 
	$±hªad_gë˝u˛ockid
 (
±hªad_t
 
__thªad_id
,

1129 
__˛ockid_t
 *
__˛ock_id
)

1130 
__THROW
 
	`__n⁄nuŒ
 ((2));

1145 
	$±hªad_©f‹k
 ((*
__¥ï¨e
) (),

1146 (*
__∑ª¡
) (),

1147 (*
__chûd
Ë()Ë
__THROW
;

1150 #ifde‡
__USE_EXTERN_INLINES


1152 
__exã∫_ölöe
 

1153 
	`__NTH
 (
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
))

1155  
__thªad1
 =
__thªad2
;

1156 
	}
}

1159 
	g__END_DECLS


	@/usr/include/sched.h

19 #i‚def 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<„©uªs.h
>

25 
	~<bôs/ty≥s.h
>

27 
	#__√ed_size_t


	)

28 
	~<°ddef.h
>

30 #ifde‡
__USE_XOPEN2K


31 
	#__√ed_time_t


	)

32 
	#__√ed_time•ec


	)

34 
	~<time.h
>

36 #i‚de‡
__pid_t_deföed


37 
__pid_t
 
	tpid_t
;

38 
	#__pid_t_deföed


	)

43 
	~<bôs/sched.h
>

45 
	#sched_¥i‹ôy
 
__sched_¥i‹ôy


	)

48 
__BEGIN_DECLS


51 
	$sched_£ç¨am
 (
__pid_t
 
__pid
, c⁄° 
sched_∑øm
 *
__∑øm
)

52 
__THROW
;

55 
	$sched_gë∑øm
 (
__pid_t
 
__pid
, 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

58 
	$sched_£tscheduÀr
 (
__pid_t
 
__pid
, 
__pﬁicy
,

59 c⁄° 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

62 
	$sched_gëscheduÀr
 (
__pid_t
 
__pid
Ë
__THROW
;

65 
	$sched_yõld
 (Ë
__THROW
;

68 
	$sched_gë_¥i‹ôy_max
 (
__Æg‹ôhm
Ë
__THROW
;

71 
	$sched_gë_¥i‹ôy_mö
 (
__Æg‹ôhm
Ë
__THROW
;

74 
	$sched_º_gë_öãrvÆ
 (
__pid_t
 
__pid
, 
time•ec
 *
__t
Ë
__THROW
;

77 #ifde‡
__USE_GNU


79 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

80 
	#CPU_SET
(
˝u
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

81 
	#CPU_CLR
(
˝u
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

82 
	#CPU_ISSET
(
˝u
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (˝u,  (
˝u_£t_t
), \

83 
˝u£ç
)

	)

84 
	#CPU_ZERO
(
˝u£ç
Ë
	`__CPU_ZERO_S
 ( (
˝u_£t_t
), cpu£ç)

	)

85 
	#CPU_COUNT
(
˝u£ç
Ë
	`__CPU_COUNT_S
 ( (
˝u_£t_t
), cpu£ç)

	)

87 
	#CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u, sësize, cpu£ç)

	)

88 
	#CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u, sësize, cpu£ç)

	)

89 
	#CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (cpu, setsize, \

90 
˝u£ç
)

	)

91 
	#CPU_ZERO_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_ZERO_S
 (£tsize, cpu£ç)

	)

92 
	#CPU_COUNT_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_COUNT_S
 (£tsize, cpu£ç)

	)

94 
	#CPU_EQUAL
(
˝u£ç1
, 
˝u£ç2
) \

95 
	`__CPU_EQUAL_S
 ( (
˝u_£t_t
), 
˝u£ç1
, 
˝u£ç2
)

	)

96 
	#CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

97 
	`__CPU_EQUAL_S
 (
£tsize
, 
˝u£ç1
, 
˝u£ç2
)

	)

99 
	#CPU_AND
(
de°£t
, 
§c£t1
, 
§c£t2
) \

100 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

101 
	#CPU_OR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

102 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

103 
	#CPU_XOR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

104 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

105 
	#CPU_AND_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

107 
	#CPU_OR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

109 
	#CPU_XOR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

110 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

112 
	#CPU_ALLOC_SIZE
(
cou¡
Ë
	`__CPU_ALLOC_SIZE
 (cou¡)

	)

113 
	#CPU_ALLOC
(
cou¡
Ë
	`__CPU_ALLOC
 (cou¡)

	)

114 
	#CPU_FREE
(
˝u£t
Ë
	`__CPU_FREE
 (˝u£t)

	)

118 
	$sched_£èfföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

119 c⁄° 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

122 
	$sched_gëafföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

123 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

126 
__END_DECLS


	@/usr/include/stdio.h

23 #i‚de‡
_STDIO_H


25 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	~<bôs/ty≥s.h
>

36 
	#__√ed_FILE


	)

37 
	#__√ed___FILE


	)

41 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_POSIX
 \

51 || 
deföed
 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

52 || 
deföed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_deföed
 1

	)

58 #unde‡
__√ed_FILE


61 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_deföed
 1

	)

68 #unde‡
__√ed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


77 #ifde‡
__GNUC__


78 #i‚de‡
_VA_LIST_DEFINED


79 
_G_va_li°
 
	tva_li°
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<°d¨g.h
>

87 #ifde‡
__USE_XOPEN2K8


88 #i‚de‡
__off_t_deföed


89 #i‚de‡
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_deföed


	)

96 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_deföed


	)

101 #i‚de‡
__ssize_t_deföed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_deföed


	)

108 
__BEGIN_NAMESPACE_STD


109 #i‚de‡
__USE_FILE_OFFSET64


110 
_G_Âos_t
 
	tÂos_t
;

112 
_G_Âos64_t
 
	tÂos_t
;

114 
__END_NAMESPACE_STD


115 #ifde‡
__USE_LARGEFILE64


116 
_G_Âos64_t
 
	tÂos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #i‚de‡
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #i‚de‡
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifde‡
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


151 
	#P_tmpdú
 "/tmp"

	)

164 
	~<bôs/°dio_lim.h
>

168 
_IO_FILE
 *
°dö
;

169 
_IO_FILE
 *
°dout
;

170 
_IO_FILE
 *
°dîr
;

172 
	#°dö
 
°dö


	)

173 
	#°dout
 
°dout


	)

174 
	#°dîr
 
°dîr


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$ªmove
 (c⁄° *
__fûíame
Ë
__THROW
;

180 
	$ª«me
 (c⁄° *
__ﬁd
, c⁄° *
__√w
Ë
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifde‡
__USE_ATFILE


185 
	$ª«mót
 (
__ﬁdfd
, c⁄° *
__ﬁd
, 
__√wfd
,

186 c⁄° *
__√w
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #i‚de‡
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

197 #ifde‡
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

200 
	#tmpfûe
 
tmpfûe64


	)

204 #ifde‡
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

209 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifde‡
__USE_MISC


215 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

219 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


227 *
	$ãm≤am
 (c⁄° *
__dú
, c⁄° *
__pfx
)

228 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`f˛o£
 (
FILE
 *
__°ªam
);

242 
	`fÊush
 (
FILE
 *
__°ªam
);

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_MISC


252 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

255 #ifde‡
__USE_GNU


262 
	`f˛o£Æl
 ();

266 
__BEGIN_NAMESPACE_STD


267 #i‚de‡
__USE_FILE_OFFSET64


272 
FILE
 *
	$f›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

273 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

278 
FILE
 *
	$‰e›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

279 c⁄° *
__ª°ri˘
 
__modes
,

280 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

282 #ifde‡
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
f›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

284 c⁄° *
__ª°ri˘
 
__modes
), 
f›í64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

287 c⁄° *
__ª°ri˘
 
__modes
,

288 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

289 
__wur
;

291 
	#f›í
 
f›í64


	)

292 
	#‰e›í
 
‰e›í64


	)

295 
__END_NAMESPACE_STD


296 #ifde‡
__USE_LARGEFILE64


297 
FILE
 *
	$f›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

298 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

299 
FILE
 *
	$‰e›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

300 c⁄° *
__ª°ri˘
 
__modes
,

301 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fd›í
 (
__fd
, c⁄° *
__modes
Ë
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

313 c⁄° *
__ª°ri˘
 
__modes
,

314 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

317 #ifde‡
__USE_XOPEN2K8


319 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, c⁄° *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

337 
__modes
, 
size_t
 
__n
Ë
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_MISC


343 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

344 
size_t
 
__size
Ë
__THROW
;

347 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

357 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

362 
	`¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

364 
	$•rötf
 (*
__ª°ri˘
 
__s
,

365 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

371 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

372 
_G_va_li°
 
__¨g
);

377 
	`v¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

379 
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

380 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

387 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

388 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

390 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

391 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

392 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifde‡
__USE_GNU


399 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__f
,

400 
_G_va_li°
 
__¨g
)

401 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

402 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

403 c⁄° *
__ª°ri˘
 
__fmt
, ...)

404 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

405 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

406 c⁄° *
__ª°ri˘
 
__fmt
, ...)

407 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

410 #ifde‡
__USE_XOPEN2K8


412 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
,

413 
_G_va_li°
 
__¨g
)

414 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

415 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

426 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

431 
	$sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

434 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

436 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

437 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

438 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

439 #ifde‡
__REDIRECT


443 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

444 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

445 
__isoc99_fsˇnf
Ë
__wur
;

446 
	`__REDIRECT
 (
sˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_sˇnf
Ë
__wur
;

448 
	`__REDIRECT_NTH
 (
ssˇnf
, (c⁄° *
__ª°ri˘
 
__s
,

449 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

450 
__isoc99_ssˇnf
);

452 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

453 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

454 
	$__isoc99_sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

455 
	$__isoc99_ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

456 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

457 
	#fsˇnf
 
__isoc99_fsˇnf


	)

458 
	#sˇnf
 
__isoc99_sˇnf


	)

459 
	#ssˇnf
 
__isoc99_ssˇnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

472 
_G_va_li°
 
__¨g
)

473 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

479 
	$vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

480 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

483 
	$vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

484 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

485 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

487 #i‡!
deföed
 
__USE_GNU
 \

488 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

489 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

490 #ifde‡
__REDIRECT


494 
	`__REDIRECT
 (
vfsˇnf
,

495 (
FILE
 *
__ª°ri˘
 
__s
,

496 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

497 
__isoc99_vfsˇnf
)

498 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

499 
	`__REDIRECT
 (
vsˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
,

500 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

501 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

502 
	`__REDIRECT_NTH
 (
vssˇnf
,

503 (c⁄° *
__ª°ri˘
 
__s
,

504 c⁄° *
__ª°ri˘
 
__f‹m©
,

505 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

506 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

508 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

509 c⁄° *
__ª°ri˘
 
__f‹m©
,

510 
_G_va_li°
 
__¨g
Ë
__wur
;

511 
	$__isoc99_vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

514 c⁄° *
__ª°ri˘
 
__f‹m©
,

515 
_G_va_li°
 
__¨g
Ë
__THROW
;

516 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

517 
	#vsˇnf
 
__isoc99_vsˇnf


	)

518 
	#vssˇnf
 
__isoc99_vssˇnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fgëc
 (
FILE
 *
__°ªam
);

532 
	`gëc
 (
FILE
 *
__°ªam
);

538 
	`gëch¨
 ();

539 
__END_NAMESPACE_STD


543 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

545 #ifde‡
__USE_POSIX


550 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

551 
	`gëch¨_u∆ocked
 ();

554 #ifde‡
__USE_MISC


561 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

565 
__BEGIN_NAMESPACE_STD


573 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

574 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putch¨
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

587 #ifde‡
__USE_MISC


594 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

597 #ifde‡
__USE_POSIX


602 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 
	`putch¨_u∆ocked
 (
__c
);

607 #i‡
deföed
 
__USE_MISC
 \

608 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

610 
	`gëw
 (
FILE
 *
__°ªam
);

613 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

623 
__wur
;

625 #i‡!
deföed
 
__USE_ISOC11
 \

626 || (
deföed
 
__˝lu•lus
 && __cplusplus <= 201103L)

638 *
	$gës
 (*
__s
Ë
__wur
 
__©åibuã_dïªˇãd__
;

640 
__END_NAMESPACE_STD


642 #ifde‡
__USE_GNU


649 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

650 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

668 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

669 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

670 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

678 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

679 
size_t
 *
__ª°ri˘
 
__n
,

680 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`Âuts
 (c⁄° *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

695 
	`puts
 (c⁄° *
__s
);

702 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

709 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

715 
size_t
 
	`fwrôe
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

716 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifde‡
__USE_GNU


726 
	`Âuts_u∆ocked
 (c⁄° *
__ª°ri˘
 
__s
,

727 
FILE
 *
__ª°ri˘
 
__°ªam
);

730 #ifde‡
__USE_MISC


737 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

739 
size_t
 
	`fwrôe_u∆ocked
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

740 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

754 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

759 
	`ªwöd
 (
FILE
 *
__°ªam
);

760 
__END_NAMESPACE_STD


767 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


768 #i‚de‡
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

778 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

780 #ifde‡
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#·ñlo
 
·ñlo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #i‚de‡
__USE_FILE_OFFSET64


798 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

803 
	`f£ços
 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
);

805 #ifde‡
__REDIRECT


806 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

807 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

808 
	`__REDIRECT
 (
f£ços
,

809 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
), 
f£ços64
);

811 
	#fgëpos
 
fgëpos64


	)

812 
	#f£ços
 
f£ços64


	)

815 
__END_NAMESPACE_STD


817 #ifde‡
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

819 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

820 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

821 
	`f£ços64
 (
FILE
 *
__°ªam
, c⁄° 
Âos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifde‡
__USE_MISC


835 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

836 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

837 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`≥º‹
 (c⁄° *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<bôs/sys_îæi°.h
>

856 #ifdef 
__USE_POSIX


858 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

861 #ifde‡
__USE_MISC


863 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

867 #ifde‡
__USE_POSIX2


872 
FILE
 *
	$p›í
 (c⁄° *
__comm™d
, c⁄° *
__modes
Ë
__wur
;

878 
	`p˛o£
 (
FILE
 *
__°ªam
);

882 #ifdef 
__USE_POSIX


884 *
	$˘îmid
 (*
__s
Ë
__THROW
;

888 #ifde‡
__USE_XOPEN


890 *
	`cu£rid
 (*
__s
);

894 #ifdef 
__USE_GNU


895 
ob°ack
;

898 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

899 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

900 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

901 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

902 c⁄° *
__ª°ri˘
 
__f‹m©
,

903 
_G_va_li°
 
__¨gs
)

904 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

908 #ifde‡
__USE_POSIX


912 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

916 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

919 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

922 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


926 
	#__√ed_gë›t


	)

927 
	~<gë›t.h
>

932 #ifde‡
__USE_EXTERN_INLINES


933 
	~<bôs/°dio.h
>

935 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


936 
	~<bôs/°dio2.h
>

938 #ifde‡
__LDBL_COMPAT


939 
	~<bôs/°dio-ldbl.h
>

942 
__END_DECLS


	@/usr/include/stdlib.h

22 #i‚def 
_STDLIB_H


24 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


29 
	#__√ed_wch¨_t


	)

30 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

34 
	g__BEGIN_DECLS


36 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


37 
	#_STDLIB_H
 1

	)

39 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


41 
	~<bôs/waôÊags.h
>

42 
	~<bôs/waô°©us.h
>

44 #ifde‡
__USE_MISC


49 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


50 
	#__WAIT_INT
(
°©us
) \

51 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

52 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

54 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

62 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
waô
 *
	m__u±r
;

70 *
	m__ùå
;

71 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

85 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

90 #ifde‡
__WIFCONTINUED


91 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquŸ
;

100 
	mªm
;

101 } 
	tdiv_t
;

104 #i‚de‡
__ldiv_t_deföed


107 
	mquŸ
;

108 
	mªm
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_deföed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


115 
__BEGIN_NAMESPACE_C99


117 
__exãnsi⁄__
 struct

119 
	mquŸ
;

120 
	mªm
;

121 } 
	tŒdiv_t
;

122 
	#__Œdiv_t_deföed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

139 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (c⁄° *
__≈å
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

147 
	$©oi
 (c⁄° *
__≈å
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

150 
	$©ﬁ
 (c⁄° *
__≈å
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

152 
__END_NAMESPACE_STD


154 #ifde‡
__USE_ISOC99


155 
__BEGIN_NAMESPACE_C99


157 
__exãnsi⁄__
 
	$©ﬁl
 (c⁄° *
__≈å
)

158 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$°πod
 (c⁄° *
__ª°ri˘
 
__≈å
,

165 **
__ª°ri˘
 
__íd±r
)

166 
__THROW
 
	`__n⁄nuŒ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$°πof
 (c⁄° *
__ª°ri˘
 
__≈å
,

173 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

175 
	$°πﬁd
 (c⁄° *
__ª°ri˘
 
__≈å
,

176 **
__ª°ri˘
 
__íd±r
)

177 
__THROW
 
	`__n⁄nuŒ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$°πﬁ
 (c⁄° *
__ª°ri˘
 
__≈å
,

184 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

185 
__THROW
 
	`__n⁄nuŒ
 ((1));

187 
	$°πoul
 (c⁄° *
__ª°ri˘
 
__≈å
,

188 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

189 
__THROW
 
	`__n⁄nuŒ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifde‡
__USE_MISC


194 
__exãnsi⁄__


195 
	$°πoq
 (c⁄° *
__ª°ri˘
 
__≈å
,

196 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

197 
__THROW
 
	`__n⁄nuŒ
 ((1));

199 
__exãnsi⁄__


200 
	$°πouq
 (c⁄° *
__ª°ri˘
 
__≈å
,

201 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

202 
__THROW
 
	`__n⁄nuŒ
 ((1));

205 #ifde‡
__USE_ISOC99


206 
__BEGIN_NAMESPACE_C99


208 
__exãnsi⁄__


209 
	$°πﬁl
 (c⁄° *
__ª°ri˘
 
__≈å
,

210 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

211 
__THROW
 
	`__n⁄nuŒ
 ((1));

213 
__exãnsi⁄__


214 
	$°πouŒ
 (c⁄° *
__ª°ri˘
 
__≈å
,

215 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifde‡
__USE_GNU


235 
	~<xloˇÀ.h
>

239 
	$°πﬁ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

240 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

241 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

243 
	$°πoul_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

244 **
__ª°ri˘
 
__íd±r
,

245 
__ba£
, 
__loˇÀ_t
 
__loc
)

246 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

248 
__exãnsi⁄__


249 
	$°πﬁl_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

250 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

251 
__loˇÀ_t
 
__loc
)

252 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

254 
__exãnsi⁄__


255 
	$°πouŒ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

256 **
__ª°ri˘
 
__íd±r
,

257 
__ba£
, 
__loˇÀ_t
 
__loc
)

258 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

260 
	$°πod_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

261 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

262 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

264 
	$°πof_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

265 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

266 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

268 
	$°πﬁd_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

269 **
__ª°ri˘
 
__íd±r
,

270 
__loˇÀ_t
 
__loc
)

271 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

275 #ifde‡
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__exã∫_ölöe
 

278 
	`__NTH
 (
	$©oi
 (c⁄° *
__≈å
))

280  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

281 
	}
}

282 
__exã∫_ölöe
 

283 
__NTH
 (
	$©ﬁ
 (c⁄° *
__≈å
))

285  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ifde‡
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__exãnsi⁄__
 
__exã∫_ölöe
 

292 
__NTH
 (
	$©ﬁl
 (c⁄° *
__≈å
))

294  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

308 
	$a64l
 (c⁄° *
__s
)

309 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

313 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


314 
	~<sys/ty≥s.h
>

321 
	$øndom
 (Ë
__THROW
;

324 
	$§™dom
 (
__£ed
Ë
__THROW
;

330 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

331 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

335 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_MISC


343 
	søndom_d©a


345 
öt32_t
 *
Âå
;

346 
öt32_t
 *
Ωå
;

347 
öt32_t
 *
°©e
;

348 
ønd_ty≥
;

349 
ønd_deg
;

350 
ønd_£p
;

351 
öt32_t
 *
íd_±r
;

354 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

355 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

357 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

358 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

361 
size_t
 
__°©ñí
,

362 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

363 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

365 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

366 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

367 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$ønd
 (Ë
__THROW
;

376 
	$§™d
 (
__£ed
Ë
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifde‡
__USE_POSIX


381 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

385 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


389 
	$dønd48
 (Ë
__THROW
;

390 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 
	$Ã™d48
 (Ë
__THROW
;

394 
	$ƒ™d48
 (
__xsubi
[3])

395 
__THROW
 
	`__n⁄nuŒ
 ((1));

398 
	$mønd48
 (Ë
__THROW
;

399 
	$jønd48
 (
__xsubi
[3])

400 
__THROW
 
	`__n⁄nuŒ
 ((1));

403 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__n⁄nuŒ
 ((1));

406 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

408 #ifde‡
__USE_MISC


412 
	sdønd48_d©a


414 
__x
[3];

415 
__ﬁd_x
[3];

416 
__c
;

417 
__öô
;

418 
__exãnsi⁄__
 
__a
;

423 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

424 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

425 
	$î™d48_r
 (
__xsubi
[3],

426 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

427 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

430 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

431 *
__ª°ri˘
 
__ªsu…
)

432 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

433 
	$ƒ™d48_r
 (
__xsubi
[3],

434 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

435 *
__ª°ri˘
 
__ªsu…
)

436 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

439 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

440 *
__ª°ri˘
 
__ªsu…
)

441 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

442 
	$jønd48_r
 (
__xsubi
[3],

443 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

444 *
__ª°ri˘
 
__ªsu…
)

445 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

448 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

449 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

454 
	$lc⁄g48_r
 (
__∑øm
[7],

455 
dønd48_d©a
 *
__buf„r
)

456 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

462 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


463 
	#__mÆloc_™d_ˇŒoc_deföed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

468 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

469 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

483 
	$‰ì
 (*
__±r
Ë
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$c‰ì
 (*
__±r
Ë
__THROW
;

491 #ifde‡
__USE_MISC


492 
	~<Æloˇ.h
>

495 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

496 || 
deföed
 
__USE_MISC


498 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

501 #ifde‡
__USE_XOPEN2K


503 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

504 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

507 #ifde‡
__USE_ISOC11


509 *
	$Æig√d_Æloc
 (
size_t
 
__Æignmít
, size_à
__size
)

510 
__THROW
 
__©åibuã_mÆloc__
 
	`__©åibuã_Æloc_size__
 ((2)Ë
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

519 
	$©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

521 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


523 #ifde‡
__˝lu•lus


524 "C++" 
	$©_quick_exô
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

527 
	$©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	$⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

536 
__THROW
 
	`__n⁄nuŒ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

545 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


549 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

551 
__END_NAMESPACE_STD


553 #ifde‡
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$gëív
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

565 
__END_NAMESPACE_STD


567 #ifde‡
__USE_GNU


570 *
	$£cuª_gëív
 (c⁄° *
__«me
)

571 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

574 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


578 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

581 #ifde‡
__USE_XOPEN2K


584 
	$£ãnv
 (c⁄° *
__«me
, c⁄° *
__vÆue
, 
__ª∂a˚
)

585 
__THROW
 
	`__n⁄nuŒ
 ((2));

588 
	$un£ãnv
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$˛óªnv
 (Ë
__THROW
;

599 #i‡
deföed
 
__USE_MISC
 \

600 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
)

606 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

609 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


618 #i‚de‡
__USE_FILE_OFFSET64


619 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

621 #ifde‡
__REDIRECT


622 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

623 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

625 
	#mk°emp
 
mk°emp64


	)

628 #ifde‡
__USE_LARGEFILE64


629 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

633 #ifde‡
__USE_MISC


640 #i‚de‡
__USE_FILE_OFFSET64


641 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

643 #ifde‡
__REDIRECT


644 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

645 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

647 
	#mk°emps
 
mk°emps64


	)

650 #ifde‡
__USE_LARGEFILE64


651 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

652 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

656 #ifde‡
__USE_XOPEN2K8


662 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

665 #ifde‡
__USE_GNU


672 #i‚de‡
__USE_FILE_OFFSET64


673 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

675 #ifde‡
__REDIRECT


676 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

677 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

679 
	#mko°emp
 
mko°emp64


	)

682 #ifde‡
__USE_LARGEFILE64


683 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

692 #i‚de‡
__USE_FILE_OFFSET64


693 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

694 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

696 #ifde‡
__REDIRECT


697 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

698 
__Êags
), 
mko°emps64
)

699 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

701 
	#mko°emps
 
mko°emps64


	)

704 #ifde‡
__USE_LARGEFILE64


705 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

706 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy°em
 (c⁄° *
__comm™d
Ë
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ˇn⁄iˇlize_fûe_«me
 (c⁄° *
__«me
)

724 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

727 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


733 *
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
,

734 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

739 #i‚de‡
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com∑r_‚_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

747 #ifde‡
__USE_GNU


748 (*
	t__com∑r_d_‚_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
,

755 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

756 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

758 #ifde‡
__USE_EXTERN_INLINES


759 
	~<bôs/°dlib-b£¨ch.h
>

764 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

765 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

766 #ifde‡
__USE_GNU


767 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

768 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

769 
	`__n⁄nuŒ
 ((1, 4));

774 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

775 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

776 
__END_NAMESPACE_STD


778 #ifde‡
__USE_ISOC99


779 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

780 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

784 
__BEGIN_NAMESPACE_STD


788 
div_t
 
	$div
 (
__numî
, 
__díom
)

789 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

790 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

791 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

792 
__END_NAMESPACE_STD


794 #ifde‡
__USE_ISOC99


795 
__BEGIN_NAMESPACE_C99


796 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

797 
__díom
)

798 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

799 
__END_NAMESPACE_C99


803 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

804 || 
deföed
 
__USE_MISC


811 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

812 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

817 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

818 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

823 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

824 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

827 #ifde‡
__USE_MISC


829 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

830 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

831 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

832 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

833 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

834 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

835 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

836 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

841 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

842 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

843 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

844 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

845 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

846 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

848 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

849 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

850 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

851 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

852 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

853 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

854 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

855 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

859 
__BEGIN_NAMESPACE_STD


862 
	$mbÀn
 (c⁄° *
__s
, 
size_t
 
__n
Ë
__THROW
;

865 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

866 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

869 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
;

873 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

874 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

876 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

877 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

878 
__THROW
;

879 
__END_NAMESPACE_STD


882 #ifde‡
__USE_MISC


887 
	$Ωm©ch
 (c⁄° *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

891 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


898 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

899 *c⁄° *
__ª°ri˘
 
__tokís
,

900 **
__ª°ri˘
 
__vÆuï
)

901 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

905 #ifde‡
__USE_XOPEN


907 
	$£tkey
 (c⁄° *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

913 #ifde‡
__USE_XOPEN2KXSI


915 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

918 #ifde‡
__USE_XOPEN


923 
	$gø¡±
 (
__fd
Ë
__THROW
;

927 
	$u∆ock±
 (
__fd
Ë
__THROW
;

932 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

935 #ifde‡
__USE_GNU


939 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

940 
__THROW
 
	`__n⁄nuŒ
 ((2));

943 
	`gë±
 ();

946 #ifde‡
__USE_MISC


950 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

951 
__THROW
 
	`__n⁄nuŒ
 ((1));

954 
	~<bôs/°dlib-Êﬂt.h
>

957 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


958 
	~<bôs/°dlib.h
>

960 #ifde‡
__LDBL_COMPAT


961 
	~<bôs/°dlib-ldbl.h
>

965 #unde‡
__√ed_mÆloc_™d_ˇŒoc


967 
__END_DECLS


	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ifde‡
__USE_POSIX


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_MISC


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #ifde‡
__USE_POSIX


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #ifde‡
__USE_POSIX


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_MISC


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #i‚def 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


32 #ifde‡
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #ñi‡
deföed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #ñi‡
deföed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #ñi‡
deföed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifde‡
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #ñi‡
deföed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #ñi‡
deföed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifde‡
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #ñi‡
deföed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #ñi‡
deföed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

111 
	#_XOPEN_CRYPT
 1

	)

115 
	#_XOPEN_ENH_I18N
 1

	)

118 
	#_XOPEN_LEGACY
 1

	)

205 
	~<bôs/posix_›t.h
>

208 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


209 
	~<bôs/ívú⁄míts.h
>

213 
	#STDIN_FILENO
 0

	)

214 
	#STDOUT_FILENO
 1

	)

215 
	#STDERR_FILENO
 2

	)

220 
	~<bôs/ty≥s.h
>

222 #i‚def 
__ssize_t_deföed


223 
__ssize_t
 
	tssize_t
;

224 
	#__ssize_t_deföed


	)

227 
	#__√ed_size_t


	)

228 
	#__√ed_NULL


	)

229 
	~<°ddef.h
>

231 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


234 #i‚de‡
__gid_t_deföed


235 
__gid_t
 
	tgid_t
;

236 
	#__gid_t_deföed


	)

239 #i‚de‡
__uid_t_deföed


240 
__uid_t
 
	tuid_t
;

241 
	#__uid_t_deföed


	)

244 #i‚de‡
__off_t_deföed


245 #i‚de‡
__USE_FILE_OFFSET64


246 
__off_t
 
	toff_t
;

248 
__off64_t
 
	toff_t
;

250 
	#__off_t_deföed


	)

252 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


253 
__off64_t
 
	toff64_t
;

254 
	#__off64_t_deföed


	)

257 #i‚de‡
__u£c⁄ds_t_deföed


258 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

259 
	#__u£c⁄ds_t_deföed


	)

262 #i‚de‡
__pid_t_deföed


263 
__pid_t
 
	tpid_t
;

264 
	#__pid_t_deföed


	)

268 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


269 #i‚de‡
__öçå_t_deföed


270 
__öçå_t
 
	töçå_t
;

271 
	#__öçå_t_deföed


	)

275 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


276 #i‚de‡
__sockÀn_t_deföed


277 
__sockÀn_t
 
	tsockÀn_t
;

278 
	#__sockÀn_t_deföed


	)

284 
	#R_OK
 4

	)

285 
	#W_OK
 2

	)

286 
	#X_OK
 1

	)

287 
	#F_OK
 0

	)

290 
	$ac˚ss
 (c⁄° *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

292 #ifde‡
__USE_GNU


295 
	$euidac˚ss
 (c⁄° *
__«me
, 
__ty≥
)

296 
__THROW
 
	`__n⁄nuŒ
 ((1));

299 
	$óc˚ss
 (c⁄° *
__«me
, 
__ty≥
)

300 
__THROW
 
	`__n⁄nuŒ
 ((1));

303 #ifde‡
__USE_ATFILE


307 
	$Ác˚sßt
 (
__fd
, c⁄° *
__fûe
, 
__ty≥
, 
__Êag
)

308 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

313 #i‚def 
_STDIO_H


314 
	#SEEK_SET
 0

	)

315 
	#SEEK_CUR
 1

	)

316 
	#SEEK_END
 2

	)

317 #ifde‡
__USE_GNU


318 
	#SEEK_DATA
 3

	)

319 
	#SEEK_HOLE
 4

	)

323 #i‡
deföed
 
__USE_MISC
 && !deföed 
L_SET


325 
	#L_SET
 
SEEK_SET


	)

326 
	#L_INCR
 
SEEK_CUR


	)

327 
	#L_XTND
 
SEEK_END


	)

336 #i‚de‡
__USE_FILE_OFFSET64


337 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

339 #ifde‡
__REDIRECT_NTH


340 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

341 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

342 
l£ek64
);

344 
	#l£ek
 
l£ek64


	)

347 #ifde‡
__USE_LARGEFILE64


348 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

349 
__THROW
;

356 
	`˛o£
 (
__fd
);

363 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

369 
ssize_t
 
	$wrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
Ë
__wur
;

371 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


372 #i‚de‡
__USE_FILE_OFFSET64


379 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

380 
__off_t
 
__off£t
Ë
__wur
;

387 
ssize_t
 
	$pwrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

388 
__off_t
 
__off£t
Ë
__wur
;

390 #ifde‡
__REDIRECT


391 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

392 
__off64_t
 
__off£t
),

393 
¥ód64
Ë
__wur
;

394 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, c⁄° *
__buf
,

395 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

396 
pwrôe64
Ë
__wur
;

398 
	#¥ód
 
¥ód64


	)

399 
	#pwrôe
 
pwrôe64


	)

403 #ifde‡
__USE_LARGEFILE64


407 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

408 
__off64_t
 
__off£t
Ë
__wur
;

411 
ssize_t
 
	$pwrôe64
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

412 
__off64_t
 
__off£t
Ë
__wur
;

420 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

422 #ifde‡
__USE_GNU


425 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

435 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

447 
	`¶ìp
 (
__£c⁄ds
);

449 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

450 || 
deföed
 
__USE_MISC


455 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

456 
__THROW
;

463 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

472 
	`∑u£
 ();

476 
	$chown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

477 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

479 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


481 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

486 
	$lchown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

487 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

491 #ifde‡
__USE_ATFILE


494 
	$fchow«t
 (
__fd
, c⁄° *
__fûe
, 
__uid_t
 
__ow√r
,

495 
__gid_t
 
__group
, 
__Êag
)

496 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

500 
	$chdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

502 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


504 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

514 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

516 #ifdef 
__USE_GNU


520 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

523 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

524 || 
deföed
 
__USE_MISC


528 *
	$gëwd
 (*
__buf
)

529 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

534 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

537 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

539 #ifde‡
__USE_GNU


542 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

546 **
__ívú⁄
;

547 #ifde‡
__USE_GNU


548 **
ívú⁄
;

554 
	$execve
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[],

555 *c⁄° 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

557 #ifde‡
__USE_XOPEN2K8


560 
	$„xecve
 (
__fd
, *c⁄° 
__¨gv
[], *c⁄° 
__ívp
[])

561 
__THROW
 
	`__n⁄nuŒ
 ((2));

566 
	$execv
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[])

567 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

571 
	$exe˛e
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

572 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

576 
	$exe˛
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

577 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

581 
	$execvp
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[])

582 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

587 
	$exe˛p
 (c⁄° *
__fûe
, c⁄° *
__¨g
, ...)

588 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

590 #ifde‡
__USE_GNU


593 
	$execv≥
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[],

594 *c⁄° 
__ívp
[])

595 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

599 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


601 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

606 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

612 
	~<bôs/c⁄‚ame.h
>

615 
	$∑thc⁄f
 (c⁄° *
__∑th
, 
__«me
)

616 
__THROW
 
	`__n⁄nuŒ
 ((1));

619 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

622 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

624 #ifdef 
__USE_POSIX2


626 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

631 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

634 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

637 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

640 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

641 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


642 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

649 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

651 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


663 
	$£çgΩ
 (Ë
__THROW
;

670 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

672 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


674 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

678 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

681 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

684 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

687 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

692 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

694 #ifdef 
__USE_GNU


696 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

703 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

705 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


708 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
 
__wur
;

711 #ifde‡
__USE_XOPEN2K


713 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

720 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

722 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


725 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
 
__wur
;

728 #ifde‡
__USE_XOPEN2K


730 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

733 #ifde‡
__USE_GNU


736 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

737 
__THROW
;

741 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

742 
__THROW
;

746 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

747 
__THROW
 
__wur
;

751 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

752 
__THROW
 
__wur
;

759 
__pid_t
 
	$f‹k
 (Ë
__THROWNL
;

761 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

762 || 
deföed
 
__USE_MISC


767 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

773 *
	$ây«me
 (
__fd
Ë
__THROW
;

777 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

778 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

782 
	$ißây
 (
__fd
Ë
__THROW
;

784 #i‡
deföed
 
__USE_MISC
 \

785 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

788 
	$ây¶Ÿ
 (Ë
__THROW
;

793 
	$lök
 (c⁄° *
__‰om
, c⁄° *
__to
)

794 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

796 #ifde‡
__USE_ATFILE


799 
	$lök©
 (
__‰omfd
, c⁄° *
__‰om
, 
__tofd
,

800 c⁄° *
__to
, 
__Êags
)

801 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

804 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


806 
	$symlök
 (c⁄° *
__‰om
, c⁄° *
__to
)

807 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

812 
ssize_t
 
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
,

813 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

814 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

817 #ifde‡
__USE_ATFILE


819 
	$symlök©
 (c⁄° *
__‰om
, 
__tofd
,

820 c⁄° *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

823 
ssize_t
 
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

824 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

825 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

829 
	$u∆ök
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

831 #ifde‡
__USE_ATFILE


833 
	$u∆ök©
 (
__fd
, c⁄° *
__«me
, 
__Êag
)

834 
__THROW
 
	`__n⁄nuŒ
 ((2));

838 
	$rmdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

842 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

845 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

852 *
	`gëlogö
 ();

853 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


860 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

863 #ifdef 
__USE_MISC


865 
	$£éogö
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

869 #ifdef 
__USE_POSIX2


873 
	#__√ed_gë›t


	)

874 
	~<gë›t.h
>

878 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


882 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

886 #i‡
deföed
 
__USE_MISC


889 
	$£tho°«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

890 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

894 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

900 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

901 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

902 
	$£tdomaö«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

903 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

909 
	$vh™gup
 (Ë
__THROW
;

912 
	$ªvoke
 (c⁄° *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

920 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

921 
size_t
 
__off£t
, 
__sˇÀ
)

922 
__THROW
 
	`__n⁄nuŒ
 ((1));

928 
	$ac˘
 (c⁄° *
__«me
Ë
__THROW
;

932 *
	$gëu£rshñl
 (Ë
__THROW
;

933 
	$ídu£rshñl
 (Ë
__THROW
;

934 
	$£tu£rshñl
 (Ë
__THROW
;

940 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

944 #i‡
deföed
 
__USE_MISC
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

947 
	$chroŸ
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

951 *
	$gë∑ss
 (c⁄° *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

959 
	`fsync
 (
__fd
);

962 #ifde‡
__USE_GNU


965 
	$syncfs
 (
__fd
Ë
__THROW
;

969 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


972 
	`gëho°id
 ();

975 
	$sync
 (Ë
__THROW
;

978 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K


981 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

986 
	$gëdèbÀsize
 (Ë
__THROW
;

992 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


995 #i‚de‡
__USE_FILE_OFFSET64


996 
	$åunˇã
 (c⁄° *
__fûe
, 
__off_t
 
__Àngth
)

997 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

999 #ifde‡
__REDIRECT_NTH


1000 
	`__REDIRECT_NTH
 (
åunˇã
,

1001 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
),

1002 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1004 
	#åunˇã
 
åunˇã64


	)

1007 #ifde‡
__USE_LARGEFILE64


1008 
	$åunˇã64
 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
)

1009 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1014 #i‡
deföed
 
__USE_POSIX199309
 \

1015 || 
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1018 #i‚de‡
__USE_FILE_OFFSET64


1019 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1021 #ifde‡
__REDIRECT_NTH


1022 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1023 
·runˇã64
Ë
__wur
;

1025 
	#·runˇã
 
·runˇã64


	)

1028 #ifde‡
__USE_LARGEFILE64


1029 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1035 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1036 || 
deföed
 
__USE_MISC


1040 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1046 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1050 #ifde‡
__USE_MISC


1061 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1066 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1078 
	#F_ULOCK
 0

	)

1079 
	#F_LOCK
 1

	)

1080 
	#F_TLOCK
 2

	)

1081 
	#F_TEST
 3

	)

1083 #i‚de‡
__USE_FILE_OFFSET64


1084 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1086 #ifde‡
__REDIRECT


1087 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1088 
lockf64
Ë
__wur
;

1090 
	#lockf
 
lockf64


	)

1093 #ifde‡
__USE_LARGEFILE64


1094 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1099 #ifde‡
__USE_GNU


1104 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1105 (
__exãnsi⁄__
 \

1106 ({ 
__ªsu…
; \

1107 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1108 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1109 
__ªsu…
; 
	}
}))

	)

1112 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1115 
fd©async
 (
__fûdes
);

1121 #ifdef 
__USE_XOPEN


1123 *
	$¸y±
 (c⁄° *
__key
, c⁄° *
__ß…
)

1124 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1128 
	$í¸y±
 (*
__glibc_block
, 
__edÊag
)

1129 
__THROW
 
	`__n⁄nuŒ
 ((1));

1136 
	$swab
 (c⁄° *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1137 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1143 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K


1145 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1150 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


1151 
	~<bôs/uni°d.h
>

1154 
__END_DECLS


	@/usr/include/alloca.h

18 #i‚def 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

26 
	g__BEGIN_DECLS


29 #unde‡
Æloˇ


32 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

34 #ifdef 
__GNUC__


35 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

38 
__END_DECLS


	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_MISC


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_MISC
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

74 
	#htﬁe64
(
x
Ë(x)

	)

75 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

76 
	#À64toh
(
x
Ë(x)

	)

79 
	#htobe16
(
x
Ë(x)

	)

80 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

81 
	#be16toh
(
x
Ë(x)

	)

82 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

84 
	#htobe32
(
x
Ë(x)

	)

85 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

86 
	#be32toh
(
x
Ë(x)

	)

87 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

89 
	#htobe64
(
x
Ë(x)

	)

90 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

91 
	#be64toh
(
x
Ë(x)

	)

92 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #unde‡
__USE_ISOC11


98 #unde‡
__USE_ISOC99


99 #unde‡
__USE_ISOC95


100 #unde‡
__USE_ISOCXX11


101 #unde‡
__USE_POSIX


102 #unde‡
__USE_POSIX2


103 #unde‡
__USE_POSIX199309


104 #unde‡
__USE_POSIX199506


105 #unde‡
__USE_XOPEN


106 #unde‡
__USE_XOPEN_EXTENDED


107 #unde‡
__USE_UNIX98


108 #unde‡
__USE_XOPEN2K


109 #unde‡
__USE_XOPEN2KXSI


110 #unde‡
__USE_XOPEN2K8


111 #unde‡
__USE_XOPEN2K8XSI


112 #unde‡
__USE_LARGEFILE


113 #unde‡
__USE_LARGEFILE64


114 #unde‡
__USE_FILE_OFFSET64


115 #unde‡
__USE_MISC


116 #unde‡
__USE_ATFILE


117 #unde‡
__USE_GNU


118 #unde‡
__USE_REENTRANT


119 #unde‡
__USE_FORTIFY_LEVEL


120 #unde‡
__KERNEL_STRICT_NAMES


124 #i‚de‡
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

137 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

146 #i‡(
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE
) \

147 && !
deföed
 
	g_DEFAULT_SOURCE


152 #unde‡
_DEFAULT_SOURCE


153 
	#_DEFAULT_SOURCE
 1

	)

157 #ifde‡
_GNU_SOURCE


158 #unde‡
_ISOC95_SOURCE


159 
	#_ISOC95_SOURCE
 1

	)

160 #unde‡
_ISOC99_SOURCE


161 
	#_ISOC99_SOURCE
 1

	)

162 #unde‡
_ISOC11_SOURCE


163 
	#_ISOC11_SOURCE
 1

	)

164 #unde‡
_POSIX_SOURCE


165 
	#_POSIX_SOURCE
 1

	)

166 #unde‡
_POSIX_C_SOURCE


167 
	#_POSIX_C_SOURCE
 200809L

	)

168 #unde‡
_XOPEN_SOURCE


169 
	#_XOPEN_SOURCE
 700

	)

170 #unde‡
_XOPEN_SOURCE_EXTENDED


171 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

172 #unde‡
_LARGEFILE64_SOURCE


173 
	#_LARGEFILE64_SOURCE
 1

	)

174 #unde‡
_DEFAULT_SOURCE


175 
	#_DEFAULT_SOURCE
 1

	)

176 #unde‡
_ATFILE_SOURCE


177 
	#_ATFILE_SOURCE
 1

	)

182 #i‡(
deföed
 
_DEFAULT_SOURCE
 \

183 || (!
deföed
 
	g__STRICT_ANSI__
 \

184 && !
deföed
 
	g_ISOC99_SOURCE
 \

185 && !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 \

186 && !
deföed
 
	g_XOPEN_SOURCE
))

187 #unde‡
_DEFAULT_SOURCE


188 
	#_DEFAULT_SOURCE
 1

	)

192 #i‡(
deföed
 
_ISOC11_SOURCE
 \

193 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

194 
	#__USE_ISOC11
 1

	)

198 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

199 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

200 
	#__USE_ISOC99
 1

	)

204 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

205 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

206 
	#__USE_ISOC95
 1

	)

213 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

214 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

215 
	#__USE_ISOCXX11
 1

	)

221 #ifde‡
_DEFAULT_SOURCE


222 #i‡!
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE


223 
	#__USE_POSIX_IMPLICITLY
 1

	)

225 #unde‡
_POSIX_SOURCE


226 
	#_POSIX_SOURCE
 1

	)

227 #unde‡
_POSIX_C_SOURCE


228 
	#_POSIX_C_SOURCE
 200809L

	)

230 #i‡((!
deföed
 
__STRICT_ANSI__
 \

231 || (
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

232 && !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

233 
	#_POSIX_SOURCE
 1

	)

234 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

235 
	#_POSIX_C_SOURCE
 2

	)

236 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

237 
	#_POSIX_C_SOURCE
 199506L

	)

238 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

239 
	#_POSIX_C_SOURCE
 200112L

	)

241 
	#_POSIX_C_SOURCE
 200809L

	)

243 
	#__USE_POSIX_IMPLICITLY
 1

	)

246 #i‡(
deföed
 
_POSIX_SOURCE
 \

247 || (
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

248 || 
deföed
 
_XOPEN_SOURCE
)

249 
	#__USE_POSIX
 1

	)

252 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


253 
	#__USE_POSIX2
 1

	)

256 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

257 
	#__USE_POSIX199309
 1

	)

260 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

261 
	#__USE_POSIX199506
 1

	)

264 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

265 
	#__USE_XOPEN2K
 1

	)

266 #unde‡
__USE_ISOC95


267 
	#__USE_ISOC95
 1

	)

268 #unde‡
__USE_ISOC99


269 
	#__USE_ISOC99
 1

	)

272 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

273 
	#__USE_XOPEN2K8
 1

	)

274 #unde‡
_ATFILE_SOURCE


275 
	#_ATFILE_SOURCE
 1

	)

278 #ifdef 
_XOPEN_SOURCE


279 
	#__USE_XOPEN
 1

	)

280 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

281 
	#__USE_XOPEN_EXTENDED
 1

	)

282 
	#__USE_UNIX98
 1

	)

283 #unde‡
_LARGEFILE_SOURCE


284 
	#_LARGEFILE_SOURCE
 1

	)

285 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

286 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

287 
	#__USE_XOPEN2K8
 1

	)

288 
	#__USE_XOPEN2K8XSI
 1

	)

290 
	#__USE_XOPEN2K
 1

	)

291 
	#__USE_XOPEN2KXSI
 1

	)

292 #unde‡
__USE_ISOC95


293 
	#__USE_ISOC95
 1

	)

294 #unde‡
__USE_ISOC99


295 
	#__USE_ISOC99
 1

	)

298 #ifde‡
_XOPEN_SOURCE_EXTENDED


299 
	#__USE_XOPEN_EXTENDED
 1

	)

304 #ifde‡
_LARGEFILE_SOURCE


305 
	#__USE_LARGEFILE
 1

	)

308 #ifde‡
_LARGEFILE64_SOURCE


309 
	#__USE_LARGEFILE64
 1

	)

312 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

313 
	#__USE_FILE_OFFSET64
 1

	)

316 #i‡
deföed
 
_DEFAULT_SOURCE


317 
	#__USE_MISC
 1

	)

320 #ifdef 
_ATFILE_SOURCE


321 
	#__USE_ATFILE
 1

	)

324 #ifdef 
_GNU_SOURCE


325 
	#__USE_GNU
 1

	)

328 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


329 
	#__USE_REENTRANT
 1

	)

332 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

333 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

334 #i‡
_FORTIFY_SOURCE
 > 1

335 
	#__USE_FORTIFY_LEVEL
 2

	)

337 
	#__USE_FORTIFY_LEVEL
 1

	)

340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<°dc-¥edef.h
>

353 #unde‡
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 23

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

362 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

365 #i‚de‡
__ASSEMBLER__


366 #i‚de‡
_SYS_CDEFS_H


367 
	~<sys/cdefs.h
>

372 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


373 
	#__USE_LARGEFILE
 1

	)

374 
	#__USE_LARGEFILE64
 1

	)

380 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

381 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

382 && 
deföed
 
	g__exã∫_ölöe


383 
	#__USE_EXTERN_INLINES
 1

	)

391 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

19 #i‚de‡
_GETOPT_H


21 #i‚de‡
__√ed_gë›t


22 
	#_GETOPT_H
 1

	)

32 #i‡!
deföed
 
__GNU_LIBRARY__


33 
	~<˘y≥.h
>

36 #i‚de‡
__THROW


37 #i‚de‡
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

40 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__˝lu•lus


57 *
›èrg
;

71 
›töd
;

76 
›ãº
;

80 
›t›t
;

82 #i‚de‡
__√ed_gë›t


104 
	s›ti⁄


106 c⁄° *
	g«me
;

109 
	ghas_¨g
;

110 *
	gÊag
;

111 
	gvÆ
;

116 
	#no_¨gumít
 0

	)

117 
	#ªquúed_¨gumít
 1

	)

118 
	#›ti⁄Æ_¨gumít
 2

	)

146 #ifde‡
__GNU_LIBRARY__


150 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

151 
__THROW
;

153 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

154 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


158 #ifde‡
__REDIRECT


159 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

160 c⁄° *
__sh‹t›ts
),

161 
__posix_gë›t
);

163 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

164 c⁄° *
__sh‹t›ts
Ë
__THROW
;

165 
	#gë›t
 
__posix_gë›t


	)

169 
gë›t
 ();

172 #i‚de‡
__√ed_gë›t


173 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

174 c⁄° *
__sh‹t›ts
,

175 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

176 
__THROW
;

177 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

178 c⁄° *
__sh‹t›ts
,

179 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

180 
__THROW
;

184 #ifdef 
__˝lu•lus


189 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

28 #i‚de‡
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_c⁄fig.h
>

33 
	#_IO_Âos_t
 
_G_Âos_t


	)

34 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li°
 
_G_va_li°


	)

45 
	#_IO_wöt_t
 
wöt_t


	)

48 
	#__√ed___va_li°


	)

49 
	~<°d¨g.h
>

50 #ifde‡
__GNUC_VA_LIST


51 #unde‡
_IO_va_li°


52 
	#_IO_va_li°
 
__gnuc_va_li°


	)

55 #i‚de‡
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #i‚de‡
EOF


62 
	#EOF
 (-1)

	)

64 #i‚de‡
NULL


65 #i‡
deföed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuŒ
)

	)

69 #i‡!
deföed
(
__˝lu•lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifde‡
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifde‡
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifde‡
_IO_MTSAFE_IO


150 
	t_IO_lock_t
;

156 
	s_IO_m¨kî
 {

157 
_IO_m¨kî
 *
	m_√xt
;

158 
_IO_FILE
 *
	m_sbuf
;

162 
	m_pos
;

164 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

165 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

166 
	mpublic
:

167 
°ªamm¨kî
(
°ªambuf
 *
sb
);

168 ~
°ªamm¨kî
();

169 
ßvög
(Ë{  
	m_•os
 == -2; }

170 
dñè
(
°ªamm¨kî
&);

171 
dñè
();

176 
	e__codecvt_ªsu…


178 
	m__codecvt_ok
,

179 
	m__codecvt_∑πül
,

180 
	m__codecvt_îr‹
,

181 
	m__codecvt_noc⁄v


184 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


187 
	s_IO_codecvt


189 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

190 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

191 
	m__mb°©e_t
 *,

192 c⁄° 
	mwch¨_t
 *,

193 c⁄° 
	mwch¨_t
 *,

194 c⁄° 
	mwch¨_t
 **, *,

196 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

197 
	m__mb°©e_t
 *, *,

199 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

200 
	m__mb°©e_t
 *,

202 c⁄° **, 
	mwch¨_t
 *,

203 
	mwch¨_t
 *, wchar_t **);

204 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

205 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

206 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

207 c⁄° *, c⁄° *, 
	m_IO_size_t
);

208 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

210 
_IO_ic⁄v_t
 
	m__cd_ö
;

211 
_IO_ic⁄v_t
 
	m__cd_out
;

215 
	s_IO_wide_d©a


217 
wch¨_t
 *
	m_IO_ªad_±r
;

218 
wch¨_t
 *
	m_IO_ªad_íd
;

219 
wch¨_t
 *
	m_IO_ªad_ba£
;

220 
wch¨_t
 *
	m_IO_wrôe_ba£
;

221 
wch¨_t
 *
	m_IO_wrôe_±r
;

222 
wch¨_t
 *
	m_IO_wrôe_íd
;

223 
wch¨_t
 *
	m_IO_buf_ba£
;

224 
wch¨_t
 *
	m_IO_buf_íd
;

226 
wch¨_t
 *
	m_IO_ßve_ba£
;

227 
wch¨_t
 *
	m_IO_backup_ba£
;

229 
wch¨_t
 *
	m_IO_ßve_íd
;

231 
__mb°©e_t
 
	m_IO_°©e
;

232 
__mb°©e_t
 
	m_IO_œ°_°©e
;

233 
_IO_codecvt
 
	m_codecvt
;

235 
wch¨_t
 
	m_sh‹tbuf
[1];

237 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

241 
	s_IO_FILE
 {

242 
	m_Êags
;

243 
	#_IO_fûe_Êags
 
_Êags


	)

247 * 
	m_IO_ªad_±r
;

248 * 
	m_IO_ªad_íd
;

249 * 
	m_IO_ªad_ba£
;

250 * 
	m_IO_wrôe_ba£
;

251 * 
	m_IO_wrôe_±r
;

252 * 
	m_IO_wrôe_íd
;

253 * 
	m_IO_buf_ba£
;

254 * 
	m_IO_buf_íd
;

256 *
	m_IO_ßve_ba£
;

257 *
	m_IO_backup_ba£
;

258 *
	m_IO_ßve_íd
;

260 
_IO_m¨kî
 *
	m_m¨kîs
;

262 
_IO_FILE
 *
	m_chaö
;

264 
	m_fûío
;

266 
	m_blksize
;

268 
	m_Êags2
;

270 
_IO_off_t
 
	m_ﬁd_off£t
;

272 
	#__HAVE_COLUMN


	)

274 
	m_cur_cﬁumn
;

275 sig√d 
	m_vèbÀ_off£t
;

276 
	m_sh‹tbuf
[1];

280 
_IO_lock_t
 *
	m_lock
;

281 #ifde‡
_IO_USE_OLD_IO_FILE


284 
	s_IO_FILE_com∂ëe


286 
_IO_FILE
 
	m_fûe
;

288 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

289 
_IO_off64_t
 
	m_off£t
;

290 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


292 
_IO_codecvt
 *
	m_codecvt
;

293 
_IO_wide_d©a
 *
	m_wide_d©a
;

294 
_IO_FILE
 *
	m_‰ìªs_li°
;

295 *
	m_‰ìªs_buf
;

297 *
	m__∑d1
;

298 *
	m__∑d2
;

299 *
	m__∑d3
;

300 *
	m__∑d4
;

302 
size_t
 
	m__∑d5
;

303 
	m_mode
;

305 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

309 #i‚de‡
__˝lu•lus


310 
_IO_FILE
 
	t_IO_FILE
;

313 
	g_IO_FILE_∂us
;

315 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

316 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

317 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

318 #i‚de‡
_LIBC


319 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

320 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

321 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

323 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

324 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

325 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

333 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

341 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, c⁄° *
	t__buf
,

342 
	tsize_t
 
	t__n
);

350 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

353 
	t__io_˛o£_‚
 (*
	t__cookõ
);

356 #ifde‡
_GNU_SOURCE


358 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

359 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

360 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

361 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

366 
__io_ªad_‚
 *
	mªad
;

367 
__io_wrôe_‚
 *
	mwrôe
;

368 
__io_£ek_‚
 *
	m£ek
;

369 
__io_˛o£_‚
 *
	m˛o£
;

370 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

371 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

373 
	g_IO_cookõ_fûe
;

376 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

377 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

381 #ifde‡
__˝lu•lus


385 
__undîÊow
 (
_IO_FILE
 *);

386 
__uÊow
 (
_IO_FILE
 *);

387 
__ovîÊow
 (
_IO_FILE
 *, );

388 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


389 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

390 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

391 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

394 #i‡ 
__GNUC__
 >= 3

395 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

397 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

400 
	#_IO_gëc_u∆ocked
(
_Â
) \

401 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

402 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

403 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

404 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

405 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

406 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

407 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

408 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

409 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

410 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

412 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


413 
	#_IO_gëwc_u∆ocked
(
_Â
) \

414 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

415 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

416 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

417 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

418 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

419 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

420 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

421 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

422 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

423 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

426 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

427 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

429 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

430 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

431 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

432 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

434 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

437 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

438 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

440 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

441 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

442 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

444 #ifde‡
_IO_MTSAFE_IO


445 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

446 
	#_IO_Êockfûe
(
_Â
) \

447 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

448 
	#_IO_fu∆ockfûe
(
_Â
) \

449 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

451 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

452 
	#_IO_Êockfûe
(
_Â
Ë

	)

453 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

454 
	#_IO_·rylockfûe
(
_Â
Ë

	)

455 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

456 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

459 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

460 
_IO_va_li°
, *
__ª°ri˘
);

461 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

462 
_IO_va_li°
);

463 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

464 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

466 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

467 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

469 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

471 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


472 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

473 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

474 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

475 #i‡
__GNUC__
 >= 2

478 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


479 
	~<shlib-com∑t.h
>

480 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

481 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

482 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

483 c⁄° 
_IO_°dö_u£d
;

484 
wók_exã∫
 (
_IO_°dö_u£d
);

487 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


488 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

492 
	#_IO_fwide
(
__Â
, 
__mode
) \

493 ({ 
__ªsu…
 = (
__mode
); \

494 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

496 i‡((
__Â
)->
_mode
 == 0) \

498 (
__Â
)->
_mode
 = -1; \

499 
__ªsu…
 = (
__Â
)->
_mode
; \

501 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

502 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

504 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

505 
__ªsu…
; })

	)

508 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

509 
_IO_va_li°
, *
__ª°ri˘
);

510 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

511 
_IO_va_li°
);

512 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

513 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

516 #ifde‡
__LDBL_COMPAT


517 
	~<bôs/libio-ldbl.h
>

520 #ifde‡
__˝lu•lus


	@/usr/include/numacompat1.h

1 
	#numa_£t_öãæóve_mask
(
m
Ë
	`numa_£t_öãæóve_mask_com∑t
(m)

	)

2 
	#numa_gë_öãæóve_mask
(Ë
	`numa_gë_öãæóve_mask_com∑t
()

	)

3 
	#numa_böd
(
m
Ë
	`numa_böd_com∑t
(m)

	)

4 
	#numa_gë_memböd
(
m
Ë
	`numa_gë_memböd_com∑t
(m)

	)

5 
	#numa_£t_memböd
(
m
Ë
	`numa_£t_memböd_com∑t
(m)

	)

6 
	#numa_Æloc_öãæóved_sub£t
(
s
,
m
Ë
	`numa_Æloc_öãæóved_sub£t_com∑t
(s,m)

	)

7 
	#numa_run_⁄_node_mask
(
m
Ë
	`numa_run_⁄_node_mask_com∑t
(m)

	)

8 
	#numa_gë_run_node_mask
(Ë
	`numa_gë_run_node_mask_com∑t
()

	)

9 
	#numa_öãæóve_mem‹y
(
°
,
si
,
m
Ë
	`numa_öãæóve_mem‹y_com∑t
(°,si,m)

	)

10 
	#numa_t⁄odemask_mem‹y
(
°
,
si
,
m
Ë
	`numa_t⁄odemask_mem‹y_com∑t
(°,si,m)

	)

11 
	#numa_sched_gëafföôy
(
p
,
l
,
m
Ë
	`numa_sched_gëafföôy_com∑t
’,l,m)

	)

12 
	#numa_sched_£èfföôy
(
p
,
l
,
m
Ë
	`numa_sched_£èfföôy_com∑t
’,l,m)

	)

13 
	#numa_node_to_˝us
(
n
,
b
,
bl
Ë
	`numa_node_to_˝us_com∑t
“,b,bl)

	)

14 
	#nodemask_zîo
(
m
Ë
	`nodemask_zîo_com∑t
(m)

	)

15 
	#nodemask_£t
(
m
, 
n
Ë
	`nodemask_£t_com∑t
(m,Ç)

	)

16 
	#nodemask_˛r
(
m
, 
n
Ë
	`nodemask_˛r_com∑t
(m,Ç)

	)

17 
	#nodemask_is£t
(
m
, 
n
Ë
	`nodemask_is£t_com∑t
(m,Ç)

	)

18 
	#nodemask_equÆ
(
a
, 
b
Ë
	`nodemask_equÆ_com∑t
◊, b)

	)

	@/usr/include/string.h

22 #i‚def 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


30 
	#__√ed_size_t


	)

31 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

35 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

43 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

46 *
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

47 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


54 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

65 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

69 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

74 c⁄° *
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 #ifde‡
__OPTIMIZE__


78 
__exã∫_Æways_ölöe
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


81  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

84 
__exã∫_Æways_ölöe
 const *

85 
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


87  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifde‡
__USE_GNU


100 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

103 "C++" c⁄° *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

106 *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

107 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

111 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

114 "C++" c⁄° *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

117 *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

126 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

128 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

129 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

130 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

133 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

134 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

136 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

137 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

140 
	$°rcmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

141 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

143 
	$°∫cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

147 
	$°rcﬁl
 (c⁄° *
__s1
, c⁄° *
__s2
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

150 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

151 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
 
	`__n⁄nuŒ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifde‡
__USE_XOPEN2K8


159 
	~<xloˇÀ.h
>

162 
	$°rcﬁl_l
 (c⁄° *
__s1
, c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

163 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

165 
size_t
 
	$°rx‰m_l
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

166 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

169 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


171 *
	$°rdup
 (c⁄° *
__s
)

172 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

178 #i‡
deföed
 
__USE_XOPEN2K8


179 *
	$°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

180 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

183 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


185 
	#°rdu∑
(
s
) \

186 (
__exãnsi⁄__
 \

188 c⁄° *
__ﬁd
 = (
s
); \

189 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

190 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

191 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

192 
	}
}))

	)

195 
	#°∫du∑
(
s
, 
n
) \

196 (
__exãnsi⁄__
 \

198 c⁄° *
__ﬁd
 = (
s
); \

199 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

200 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

201 
__√w
[
__Àn
] = '\0'; \

202 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

203 }))

	)

206 
	g__BEGIN_NAMESPACE_STD


208 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


211 *
°rchr
 (*
__s
, 
__c
)

212 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

213 c⁄° *
°rchr
 (c⁄° *
__s
, 
__c
)

214 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

216 #ifde‡
__OPTIMIZE__


217 
__exã∫_Æways_ölöe
 *

218 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


220  
__buûtö_°rchr
 (
__s
, 
__c
);

223 
__exã∫_Æways_ölöe
 const *

224 
°rchr
 (c⁄° *
__s
, 
__c
Ë
	g__THROW


226  
__buûtö_°rchr
 (
__s
, 
__c
);

231 *
	$°rchr
 (c⁄° *
__s
, 
__c
)

232 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

235 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


238 *
	`°ºchr
 (*
__s
, 
__c
)

239 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

240 c⁄° *
	`°ºchr
 (c⁄° *
__s
, 
__c
)

241 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

243 #ifde‡
__OPTIMIZE__


244 
__exã∫_Æways_ölöe
 *

245 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


247  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

250 
__exã∫_Æways_ölöe
 const *

251 
	`°ºchr
 (c⁄° *
__s
, 
__c
Ë
__THROW


253  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

256 
	}
}

258 *
	$°ºchr
 (c⁄° *
__s
, 
__c
)

259 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

261 
__END_NAMESPACE_STD


263 #ifde‡
__USE_GNU


266 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


267 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

268 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

269 "C++" c⁄° *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

270 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

272 *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

273 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

277 
__BEGIN_NAMESPACE_STD


280 
size_t
 
	$°rc•n
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

281 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

284 
size_t
 
	$°r•n
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

285 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

287 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


290 *
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
)

291 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

292 c⁄° *
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

293 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

295 #ifde‡
__OPTIMIZE__


296 
__exã∫_Æways_ölöe
 *

297 
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
Ë
__THROW


299  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

302 
__exã∫_Æways_ölöe
 const *

303 
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
Ë
__THROW


305  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

308 
	}
}

310 *
	$°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

311 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

314 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


317 *
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

318 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

319 c⁄° *
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

320 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

322 #ifde‡
__OPTIMIZE__


323 
__exã∫_Æways_ölöe
 *

324 
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


326  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

329 
__exã∫_Æways_ölöe
 const *

330 
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


332  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

335 
	}
}

337 *
	$°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

338 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

343 *
	$°πok
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
)

344 
__THROW
 
	`__n⁄nuŒ
 ((2));

345 
__END_NAMESPACE_STD


349 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

350 c⁄° *
__ª°ri˘
 
__dñim
,

351 **
__ª°ri˘
 
__ßve_±r
)

352 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

353 #ifde‡
__USE_POSIX


354 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
,

355 **
__ª°ri˘
 
__ßve_±r
)

356 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

359 #ifde‡
__USE_GNU


361 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


362 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

363 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

364 "C++" c⁄° *
	$°rˇ£°r
 (c⁄° *
__hay°ack
,

365 c⁄° *
__√edÀ
)

366 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

368 *
	$°rˇ£°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

369 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

373 #ifde‡
__USE_GNU


377 *
	$memmem
 (c⁄° *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

378 c⁄° *
__√edÀ
, 
size_t
 
__√edÀÀn
)

379 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

383 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

384 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

385 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

386 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

387 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

388 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

392 
__BEGIN_NAMESPACE_STD


394 
size_t
 
	$°æí
 (c⁄° *
__s
)

395 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

396 
__END_NAMESPACE_STD


398 #ifdef 
__USE_XOPEN2K8


401 
size_t
 
	$°∫Àn
 (c⁄° *
__°rög
, 
size_t
 
__maxÀn
)

402 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

406 
__BEGIN_NAMESPACE_STD


408 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

409 
__END_NAMESPACE_STD


410 #ifde‡
__USE_XOPEN2K


418 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


421 #ifde‡
__REDIRECT_NTH


422 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

423 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

424 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

426 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

427 
__THROW
 
	`__n⁄nuŒ
 ((2));

428 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

433 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

434 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

438 #ifde‡
__USE_XOPEN2K8


440 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

446 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

448 #ifde‡
__USE_MISC


450 
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__n
)

451 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

454 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

457 
	$bcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

458 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

461 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


464 *
	`ödex
 (*
__s
, 
__c
)

465 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

466 c⁄° *
	`ödex
 (c⁄° *
__s
, 
__c
)

467 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

469 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


470 
__exã∫_Æways_ölöe
 *

471 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


473  
	`__buûtö_ödex
 (
__s
, 
__c
);

476 
__exã∫_Æways_ölöe
 const *

477 
	`ödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


479  
	`__buûtö_ödex
 (
__s
, 
__c
);

482 
	}
}

484 *
	$ödex
 (c⁄° *
__s
, 
__c
)

485 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

489 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


492 *
	`rödex
 (*
__s
, 
__c
)

493 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

494 c⁄° *
	`rödex
 (c⁄° *
__s
, 
__c
)

495 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

497 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


498 
__exã∫_Æways_ölöe
 *

499 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


501  
	`__buûtö_rödex
 (
__s
, 
__c
);

504 
__exã∫_Æways_ölöe
 const *

505 
	`rödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


507  
	`__buûtö_rödex
 (
__s
, 
__c
);

510 
	}
}

512 *
	$rödex
 (c⁄° *
__s
, 
__c
)

513 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

518 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

522 #ifdef 
__USE_GNU


523 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

524 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

525 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

529 
	$°rˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

530 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

533 
	$°∫ˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

534 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

537 #ifdef 
__USE_GNU


540 
	$°rˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

541 
__loˇÀ_t
 
__loc
)

542 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

544 
	$°∫ˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

545 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

546 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

549 #ifdef 
__USE_MISC


552 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

553 c⁄° *
__ª°ri˘
 
__dñim
)

554 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

557 #ifdef 
__USE_XOPEN2K8


559 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

562 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

563 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

564 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

565 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

569 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

570 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

571 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

572 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

573 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

577 #ifdef 
__USE_GNU


579 
	$°rvîscmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

580 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

583 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

586 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

588 #i‚de‡
ba£«me


593 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


594 "C++" *
	$ba£«me
 (*
__fûíame
)

595 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

596 "C++" c⁄° *
	$ba£«me
 (c⁄° *
__fûíame
)

597 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

599 *
	$ba£«me
 (c⁄° *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

605 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

606 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

607 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


627 
	~<bôs/°rög.h
>

630 
	~<bôs/°rög2.h
>

633 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


635 
	~<bôs/°rög3.h
>

639 #i‡
deföed
 
__USE_GNU
 && deföed 
__OPTIMIZE__
 \

640 && 
deföed
 
__exã∫_Æways_ölöe
 && 
	$__GNUC_PREREQ
 (3,2)

641 #i‡!
deföed
 
_FORCE_INLINES
 && !deföed 
_HAVE_STRING_ARCH_memp˝y


643 #unde‡
memp˝y


644 #unde‡
__memp˝y


645 
	#memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y_ölöe
 (de°, src,Ç)

	)

646 
	#__memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y_ölöe
 (de°, src,Ç)

	)

648 
__exã∫_Æways_ölöe
 *

649 
	$__memp˝y_ölöe
 (*
__ª°ri˘
 
__de°
,

650 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

652  (*Ë
	`mem˝y
 (
__de°
, 
__§c
, 
__n
) + __n;

653 
	}
}

658 
	g__END_DECLS


	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

23 
__off_t
 
	m__pos
;

24 
__mb°©e_t
 
	m__°©e
;

25 } 
	t_G_Âos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos64_t
;

31 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gc⁄v.h
>

35 
__gc⁄v_öfo
 
	m__cd
;

38 
__gc⁄v_öfo
 
	m__cd
;

39 
__gc⁄v_°ï_d©a
 
	m__d©a
;

40 } 
	m__comböed
;

41 } 
	t_G_ic⁄v_t
;

46 
	#_G_va_li°
 
__gnuc_va_li°


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifde‡
__GCC_IEC_559


37 #i‡
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifde‡
__GCC_IEC_559_COMPLEX


45 #i‡
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

55 
	#__STDC_ISO_10646__
 201505L

	)

58 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #i‚de‡
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<„©uªs.h
>

26 
	#__√ed_mb°©e_t


	)

27 
	#__√ed_wöt_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004,

60 
	m__GCONV_TRANSLIT
 = 0x0008

65 
	g__gc⁄v_°ï
;

66 
	g__gc⁄v_°ï_d©a
;

67 
	g__gc⁄v_lﬂded_obje˘
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 
	s__gc⁄v_°ï


86 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

87 c⁄° *
__mod«me
;

89 
__cou¡î
;

91 *
__‰om_«me
;

92 *
__to_«me
;

94 
__gc⁄v_f˘
 
__f˘
;

95 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

96 
__gc⁄v_öô_f˘
 
__öô_f˘
;

97 
__gc⁄v_íd_f˘
 
__íd_f˘
;

101 
__mö_√eded_‰om
;

102 
__max_√eded_‰om
;

103 
__mö_√eded_to
;

104 
__max_√eded_to
;

107 
__°©eful
;

109 *
__d©a
;

114 
	s__gc⁄v_°ï_d©a


116 *
__outbuf
;

117 *
__outbu„nd
;

121 
__Êags
;

125 
__övoˇti⁄_cou¡î
;

129 
__öã∫Æ_u£
;

131 
__mb°©e_t
 *
__°©ï
;

132 
__mb°©e_t
 
__°©e
;

138 
	s__gc⁄v_öfo


140 
size_t
 
__n°ïs
;

141 
__gc⁄v_°ï
 *
__°ïs
;

142 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

143 } *
	t__gc⁄v_t
;

146 
	`__gc⁄v_å™¶ôî©e
 (
__gc⁄v_°ï
 *
°ï
,

147 
__gc⁄v_°ï_d©a
 *
°ï_d©a
,

148 c⁄° *
öbuf°¨t
,

149 c⁄° **
öbuÂ
,

150 c⁄° *
öbu„nd
,

151 **
outbuf°¨t
,

152 
size_t
 *
úªvîsibÀ
);

	@/usr/include/wchar.h

23 #i‚de‡
_WCHAR_H


25 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<„©uªs.h
>

30 #ifde‡
_WCHAR_H


32 
	#__√ed___FILE


	)

33 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_FILE


	)

36 
	~<°dio.h
>

38 
	#__√ed___va_li°


	)

39 
	~<°d¨g.h
>

41 
	~<bôs/wch¨.h
>

44 
	#__√ed_size_t


	)

45 
	#__√ed_wch¨_t


	)

46 
	#__√ed_NULL


	)

48 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


49 #unde‡
__√ed_wöt_t


50 
	#__√ed_wöt_t


	)

51 
	~<°ddef.h
>

55 #i‚de‡
_WINT_T


60 
	#_WINT_T


	)

61 
	twöt_t
;

65 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
deföed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twöt_t
;

69 
	g__END_NAMESPACE_STD


74 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
____mb°©e_t_deföed


80 
	#____mb°©e_t_deföed
 1

	)

84 
	m__cou¡
;

87 #ifde‡
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wöt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__vÆue
;

94 } 
	t__mb°©e_t
;

96 #unde‡
__√ed_mb°©e_t


101 #ifde‡
_WCHAR_H


103 #i‚de‡
__mb°©e_t_deföed


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb°©e_t_deföed
 1

	)

111 #ifde‡
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

115 #i‚de‡
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #i‚de‡
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


128 
	~<w˘y≥.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
)

149 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

152 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

153 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

154 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

157 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

158 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
)

159 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

161 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

162 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

163 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

166 
	$wcscmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
)

167 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

169 
	$wc¢cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

170 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

171 
__END_NAMESPACE_STD


173 #ifde‡
__USE_XOPEN2K8


175 
	$wcsˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

178 
	$wc¢ˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

179 
size_t
 
__n
Ë
__THROW
;

183 
	~<xloˇÀ.h
>

185 
	$wcsˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

186 
__loˇÀ_t
 
__loc
Ë
__THROW
;

188 
	$wc¢ˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

189 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

192 
__BEGIN_NAMESPACE_STD


195 
	$wcscﬁl
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

199 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

200 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

201 
__END_NAMESPACE_STD


203 #ifde‡
__USE_XOPEN2K8


209 
	$wcscﬁl_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

210 
__loˇÀ_t
 
__loc
Ë
__THROW
;

215 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

216 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

219 
wch¨_t
 *
	$wcsdup
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

222 
__BEGIN_NAMESPACE_STD


224 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


225 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

226 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

227 "C++" c⁄° 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

228 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

230 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

231 
__THROW
 
__©åibuã_puª__
;

234 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


235 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

236 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

237 "C++" c⁄° 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

238 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

240 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

241 
__THROW
 
__©åibuã_puª__
;

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_GNU


248 
wch¨_t
 *
	$wcsch∫ul
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__wc
)

249 
__THROW
 
__©åibuã_puª__
;

252 
__BEGIN_NAMESPACE_STD


255 
size_t
 
	$wcsc•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ªje˘
)

256 
__THROW
 
__©åibuã_puª__
;

259 
size_t
 
	$wcs•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

260 
__THROW
 
__©åibuã_puª__
;

262 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


263 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

264 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

265 "C++" c⁄° 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
,

266 c⁄° 
wch¨_t
 *
__ac˚±
)

267 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

269 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

270 
__THROW
 
__©åibuã_puª__
;

273 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


274 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

275 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

276 "C++" c⁄° 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
,

277 c⁄° 
wch¨_t
 *
__√edÀ
)

278 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

280 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

281 
__THROW
 
__©åibuã_puª__
;

285 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

286 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

287 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

290 
size_t
 
	$wc¶í
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

291 
__END_NAMESPACE_STD


293 #ifde‡
__USE_XOPEN


295 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


296 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

297 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

298 "C++" c⁄° 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
,

299 c⁄° 
wch¨_t
 *
__√edÀ
)

300 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

302 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

303 
__THROW
 
__©åibuã_puª__
;

307 #ifde‡
__USE_XOPEN2K8


309 
size_t
 
	$wc¢Àn
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

310 
__THROW
 
__©åibuã_puª__
;

314 
__BEGIN_NAMESPACE_STD


316 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


317 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

319 "C++" c⁄° 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
,

320 
size_t
 
__n
)

321 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

323 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

324 
__THROW
 
__©åibuã_puª__
;

328 
	$wmemcmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

329 
__THROW
 
__©åibuã_puª__
;

332 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

333 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

337 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

338 
__THROW
;

341 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

342 
__END_NAMESPACE_STD


344 #ifde‡
__USE_GNU


347 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

348 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

349 
__THROW
;

353 
__BEGIN_NAMESPACE_STD


356 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

360 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

364 
	$mbsöô
 (c⁄° 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

368 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

369 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

370 
mb°©e_t
 *
__ª°ri˘
 
__p
Ë
__THROW
;

373 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

374 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

377 
size_t
 
	$__mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

378 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

379 
size_t
 
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

380 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

381 
__END_NAMESPACE_STD


383 #ifde‡
__USE_EXTERN_INLINES


389 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

390 
__exã∫_ölöe
 
wöt_t


391 
	`__NTH
 (
	$btowc
 (
__c
))

392 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

393 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

395 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

396 
__exã∫_ölöe
 

397 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

398 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

399 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

401 
__exã∫_ölöe
 
size_t


402 
__NTH
 (
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

403 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

404 {  (
__ps
 !
NULL


405 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

408 
__BEGIN_NAMESPACE_STD


411 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

412 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

413 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

417 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

418 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

419 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

420 
__END_NAMESPACE_STD


423 #ifdef 
__USE_XOPEN2K8


426 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

427 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

428 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

432 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

433 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

434 
size_t
 
__nwc
, size_à
__Àn
,

435 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

440 #ifde‡
__USE_XOPEN


442 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

446 
	$wcswidth
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

450 
__BEGIN_NAMESPACE_STD


453 
	$wc°od
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

454 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

455 
__END_NAMESPACE_STD


457 #ifde‡
__USE_ISOC99


458 
__BEGIN_NAMESPACE_C99


460 
	$wc°of
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

461 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

462 
	$wc°ﬁd
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

463 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

464 
__END_NAMESPACE_C99


468 
__BEGIN_NAMESPACE_STD


471 
	$wc°ﬁ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

472 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

476 
	$wc°oul
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

477 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

478 
__THROW
;

479 
__END_NAMESPACE_STD


481 #ifde‡
__USE_ISOC99


482 
__BEGIN_NAMESPACE_C99


485 
__exãnsi⁄__


486 
	$wc°ﬁl
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

487 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

488 
__THROW
;

492 
__exãnsi⁄__


493 
	$wc°ouŒ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

494 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

495 
__ba£
Ë
__THROW
;

496 
__END_NAMESPACE_C99


499 #ifde‡
__USE_GNU


502 
__exãnsi⁄__


503 
	$wc°oq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

504 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

505 
__THROW
;

509 
__exãnsi⁄__


510 
	$wc°ouq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

511 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

512 
__ba£
Ë
__THROW
;

515 #ifde‡
__USE_GNU


529 
	~<xloˇÀ.h
>

533 
	$wc°ﬁ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

534 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

535 
__loˇÀ_t
 
__loc
Ë
__THROW
;

537 
	$wc°oul_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

538 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

539 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

541 
__exãnsi⁄__


542 
	$wc°ﬁl_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

543 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

544 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

546 
__exãnsi⁄__


547 
	$wc°ouŒ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

548 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

549 
__ba£
, 
__loˇÀ_t
 
__loc
)

550 
__THROW
;

552 
	$wc°od_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

553 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

554 
__THROW
;

556 
	$wc°of_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

557 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

558 
__THROW
;

560 
	$wc°ﬁd_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

561 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

562 
__loˇÀ_t
 
__loc
Ë
__THROW
;

566 #ifde‡
__USE_XOPEN2K8


569 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

570 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

574 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

575 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

576 
__THROW
;

583 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

586 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


587 
__BEGIN_NAMESPACE_STD


590 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

597 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

598 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
	`w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

607 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

608 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

609 
__THROW
 ;

615 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

616 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

617 
__gnuc_va_li°
 
__¨g
)

623 
	`vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

624 
__gnuc_va_li°
 
__¨g
)

628 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

629 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

630 
__gnuc_va_li°
 
__¨g
)

631 
__THROW
 ;

638 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

639 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
	`wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

648 
	$swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

649 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

650 
__THROW
 ;

652 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

653 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

654 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

655 #ifde‡
__REDIRECT


659 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

660 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

661 
__isoc99_fwsˇnf
)

663 
	`__REDIRECT
 (
wsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

664 
__isoc99_wsˇnf
)

666 
	`__REDIRECT_NTH
 (
swsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

667 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

668 ...), 
__isoc99_swsˇnf
)

671 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

672 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

673 
	`__isoc99_wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

674 
	$__isoc99_swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

675 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

676 
__THROW
;

677 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

678 
	#wsˇnf
 
__isoc99_wsˇnf


	)

679 
	#swsˇnf
 
__isoc99_swsˇnf


	)

683 
__END_NAMESPACE_STD


686 #ifde‡
__USE_ISOC99


687 
__BEGIN_NAMESPACE_C99


692 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

693 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

694 
__gnuc_va_li°
 
__¨g
)

700 
	`vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

701 
__gnuc_va_li°
 
__¨g
)

704 
	$vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

705 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

706 
__gnuc_va_li°
 
__¨g
)

707 
__THROW
 ;

709 #i‡!
deföed
 
__USE_GNU
 \

710 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

711 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

712 #ifde‡
__REDIRECT


713 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

714 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

715 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

717 
	`__REDIRECT
 (
vwsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

718 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

720 
	`__REDIRECT_NTH
 (
vswsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

721 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

722 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

725 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

726 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

727 
__gnuc_va_li°
 
__¨g
);

728 
	`__isoc99_vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

729 
__gnuc_va_li°
 
__¨g
);

730 
	$__isoc99_vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

731 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

732 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

733 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

734 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

735 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

739 
__END_NAMESPACE_C99


743 
__BEGIN_NAMESPACE_STD


748 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

749 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

755 
wöt_t
 
	`gëwch¨
 ();

762 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

763 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

769 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

777 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

778 
__FILE
 *
__ª°ri˘
 
__°ªam
);

784 
	`Âutws
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

785 
__FILE
 *
__ª°ri˘
 
__°ªam
);

792 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

793 
__END_NAMESPACE_STD


796 #ifde‡
__USE_GNU


804 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

805 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

813 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

821 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

830 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

831 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

840 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

841 
__FILE
 *
__ª°ri˘
 
__°ªam
);

849 
	`Âutws_u∆ocked
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

850 
__FILE
 *
__ª°ri˘
 
__°ªam
);

854 
__BEGIN_NAMESPACE_C99


858 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

859 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

860 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

861 
__END_NAMESPACE_C99


863 #ifde‡
__USE_GNU


864 
	~<xloˇÀ.h
>

868 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

869 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

870 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

871 
__loˇÀ_t
 
__loc
Ë
__THROW
;

880 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


881 
	#__√ed_iswxxx


	)

882 
	~<w˘y≥.h
>

886 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


887 
	~<bôs/wch¨2.h
>

890 #ifde‡
__LDBL_COMPAT


891 
	~<bôs/wch¨-ldbl.h
>

894 
__END_DECLS


902 #unde‡
__√ed_mb°©e_t


903 #unde‡
__√ed_wöt_t


	@/usr/include/wctype.h

23 #i‚de‡
_WCTYPE_H


25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 #i‚de‡
__√ed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__√ed_wöt_t


	)

33 
	~<wch¨.h
>

37 #i‚de‡
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #unde‡
__√ed_iswxxx


46 #i‚de‡
__iswxxx_deföed


47 
	#__iswxxx_deföed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	tw˘y≥_t
;

53 
	g__END_NAMESPACE_C99


55 #i‚de‡
_ISwbô


60 
	~<ídün.h
>

61 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


62 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

64 
	#_ISwbô
(
bô
) \

65 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

73 
	m__ISwuµî
 = 0,

74 
	m__ISwlowî
 = 1,

75 
	m__ISwÆpha
 = 2,

76 
	m__ISwdigô
 = 3,

77 
	m__ISwxdigô
 = 4,

78 
	m__ISw•a˚
 = 5,

79 
	m__ISw¥öt
 = 6,

80 
	m__ISwgøph
 = 7,

81 
	m__ISwbœnk
 = 8,

82 
	m__ISw˙ål
 = 9,

83 
	m__ISwpun˘
 = 10,

84 
	m__ISwÆnum
 = 11,

86 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

87 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

88 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

89 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

90 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

91 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

92 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

93 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

94 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

95 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

96 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

97 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

117 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

120 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

124 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

128 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

133 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

136 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

141 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

146 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

151 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

156 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

161 #ifde‡
__USE_ISOC99


162 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

171 
w˘y≥_t
 
	$w˘y≥
 (c⁄° *
__¥›îty
Ë
__THROW
;

175 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 c⁄° 
	t__öt32_t
 *
	tw˘øns_t
;

187 
__END_NAMESPACE_C99


188 #ifde‡
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

197 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifde‡
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
w˘øns_t
 
	$w˘øns
 (c⁄° *
__¥›îty
Ë
__THROW
;

221 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifde‡
__USE_XOPEN2K8


226 
	~<xloˇÀ.h
>

230 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

236 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

239 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

243 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

247 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

252 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

255 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

260 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

265 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

270 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

275 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

280 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
w˘y≥_t
 
	$w˘y≥_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

285 
__THROW
;

289 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

290 
__THROW
;

298 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

301 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

305 
w˘øns_t
 
	$w˘øns_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

306 
__THROW
;

309 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

310 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
411
38216
liblfds711/build/wdk_7.1/driver_entry_renamed_to_avoid_compiler_warning.c
liblfds711/inc/liblfds711.h
liblfds711/inc/liblfds711/lfds711_btree_addonly_unbalanced.h
liblfds711/inc/liblfds711/lfds711_freelist.h
liblfds711/inc/liblfds711/lfds711_hash_addonly.h
liblfds711/inc/liblfds711/lfds711_list_addonly_singlylinked_ordered.h
liblfds711/inc/liblfds711/lfds711_list_addonly_singlylinked_unordered.h
liblfds711/inc/liblfds711/lfds711_misc.h
liblfds711/inc/liblfds711/lfds711_porting_abstraction_layer_compiler.h
liblfds711/inc/liblfds711/lfds711_porting_abstraction_layer_operating_system.h
liblfds711/inc/liblfds711/lfds711_porting_abstraction_layer_processor.h
liblfds711/inc/liblfds711/lfds711_prng.h
liblfds711/inc/liblfds711/lfds711_queue_bounded_manyproducer_manyconsumer.h
liblfds711/inc/liblfds711/lfds711_queue_bounded_singleproducer_singleconsumer.h
liblfds711/inc/liblfds711/lfds711_queue_unbounded_manyproducer_manyconsumer.h
liblfds711/inc/liblfds711/lfds711_ringbuffer.h
liblfds711/inc/liblfds711/lfds711_stack.h
liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_cleanup.c
liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_get.c
liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_init.c
liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_insert.c
liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_internal.h
liblfds711/src/lfds711_btree_addonly_unbalanced/lfds711_btree_addonly_unbalanced_query.c
liblfds711/src/lfds711_freelist/lfds711_freelist_cleanup.c
liblfds711/src/lfds711_freelist/lfds711_freelist_init.c
liblfds711/src/lfds711_freelist/lfds711_freelist_internal.h
liblfds711/src/lfds711_freelist/lfds711_freelist_pop.c
liblfds711/src/lfds711_freelist/lfds711_freelist_push.c
liblfds711/src/lfds711_freelist/lfds711_freelist_query.c
liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_cleanup.c
liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_get.c
liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_init.c
liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_insert.c
liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_internal.h
liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_iterate.c
liblfds711/src/lfds711_hash_addonly/lfds711_hash_addonly_query.c
liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_cleanup.c
liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_get.c
liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_init.c
liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_insert.c
liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_internal.h
liblfds711/src/lfds711_list_addonly_singlylinked_ordered/lfds711_list_addonly_singlylinked_ordered_query.c
liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_cleanup.c
liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_get.c
liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_init.c
liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_insert.c
liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_internal.h
liblfds711/src/lfds711_list_addonly_singlylinked_unordered/lfds711_list_addonly_singlylinked_unordered_query.c
liblfds711/src/lfds711_misc/lfds711_misc_globals.c
liblfds711/src/lfds711_misc/lfds711_misc_internal.h
liblfds711/src/lfds711_misc/lfds711_misc_internal_backoff_init.c
liblfds711/src/lfds711_misc/lfds711_misc_query.c
liblfds711/src/lfds711_prng/lfds711_prng_init.c
liblfds711/src/lfds711_prng/lfds711_prng_internal.h
liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_cleanup.c
liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_dequeue.c
liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_enqueue.c
liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_init.c
liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_internal.h
liblfds711/src/lfds711_queue_bounded_manyproducer_manyconsumer/lfds711_queue_bounded_manyproducer_manyconsumer_query.c
liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_cleanup.c
liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_dequeue.c
liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_enqueue.c
liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_init.c
liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_internal.h
liblfds711/src/lfds711_queue_bounded_singleproducer_singleconsumer/lfds711_queue_bounded_singleproducer_singleconsumer_query.c
liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_cleanup.c
liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_dequeue.c
liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_enqueue.c
liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_init.c
liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_internal.h
liblfds711/src/lfds711_queue_unbounded_manyproducer_manyconsumer/lfds711_queue_unbounded_manyproducer_manyconsumer_query.c
liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_cleanup.c
liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_init.c
liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_internal.h
liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_query.c
liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_read.c
liblfds711/src/lfds711_ringbuffer/lfds711_ringbuffer_write.c
liblfds711/src/lfds711_stack/lfds711_stack_cleanup.c
liblfds711/src/lfds711_stack/lfds711_stack_init.c
liblfds711/src/lfds711_stack/lfds711_stack_internal.h
liblfds711/src/lfds711_stack/lfds711_stack_pop.c
liblfds711/src/lfds711_stack/lfds711_stack_push.c
liblfds711/src/lfds711_stack/lfds711_stack_query.c
liblfds711/src/liblfds711_internal.h
test_and_benchmark/benchmark/src/internal.h
test_and_benchmark/benchmark/src/main.c
test_and_benchmark/benchmark/src/misc.c
test_and_benchmark/benchmark/src/porting_abstraction_layer.h
test_and_benchmark/benchmark/src/porting_abstraction_layer_numa_free.c
test_and_benchmark/benchmark/src/porting_abstraction_layer_numa_malloc.c
test_and_benchmark/benchmark/src/porting_abstraction_layer_operating_system.h
test_and_benchmark/benchmark/src/util_cmdline.c
test_and_benchmark/benchmark/src/util_cmdline.h
test_and_benchmark/libbenchmark/build/wdk_7.1/driver_entry_renamed_to_avoid_compiler_warning.c
test_and_benchmark/libbenchmark/inc/libbenchmark.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarkinstance.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarks_btree_au_readn_writen.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarks_freelist_push1_then_pop1.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarkset.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_benchmarksuite.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_gcc_spinlock_atomic.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_gcc_spinlock_sync.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_msvc_spinlock.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_pthread_mutex.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_pthread_rwlock.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_pthread_spinlock_process_private.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_pthread_spinlock_process_shared.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_windows_critical_section.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_btree_au_windows_mutex.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_gcc_spinlock_atomic.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_gcc_spinlock_sync.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_msvc_spinlock.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_pthread_mutex.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_pthread_rwlock.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_pthread_spinlock_process_private.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_pthread_spinlock_process_shared.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_windows_critical_section.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_freelist_windows_mutex.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_gcc_spinlock_atomic.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_gcc_spinlock_sync.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_msvc_spinlock.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_pthread_mutex.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_pthread_rwlock.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_pthread_spinlock_process_private.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_pthread_spinlock_process_shared.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_windows_critical_section.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_datastructure_queue_umm_windows_mutex.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_enums.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_gnuplot.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_misc.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_gcc_spinlock_atomic.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_gcc_spinlock_sync.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_msvc_spinlock.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_pthread_mutex.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_pthread_rwlock.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_pthread_spinlock_process_private.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_pthread_spinlock_process_shared.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_windows_critical_section.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_lock_windows_mutex.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_porting_abstraction_layer_operating_system.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_prng.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_results.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_threadset.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_topology.h
test_and_benchmark/libbenchmark/inc/libbenchmark/libbenchmark_topology_node.h
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkinstance/libbenchmark_benchmarkinstance_cleanup.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkinstance/libbenchmark_benchmarkinstance_init.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkinstance/libbenchmark_benchmarkinstance_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkinstance/libbenchmark_benchmarkinstance_run.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_gcc_spinlock_atomic_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_gcc_spinlock_sync_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_liblfds700_lockfree_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_liblfds711_lockfree_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_msvc_spinlock_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_pthread_mutex_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_pthread_rwlock_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_pthread_spinlock_process_private_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_pthread_spinlock_process_shared_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_windows_critical_section_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_btree_au_readn_writen/libbenchmark_benchmarks_btree_au_windows_mutex_readn_writen.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_gcc_spinlock_atomic_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_gcc_spinlock_sync_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_liblfds700_lockfree_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_liblfds711_lockfree_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_msvc_spinlock_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_pthread_mutex_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_pthread_rwlock_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_pthread_spinlock_process_private_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_pthread_spinlock_process_shared_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_windows_critical_section_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_freelist_push1_then_pop1/libbenchmark_benchmarks_freelist_windows_mutex_push1_then_pop1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_gcc_spinlock_atomic_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_gcc_spinlock_sync_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_liblfds700_lockfree_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_liblfds711_lockfree_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_msvc_spinlock_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_pthread_mutex_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_pthread_rwlock_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_pthread_spinlock_process_private_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_pthread_spinlock_process_shared_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_windows_critical_section_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarks_queue_umm_enqueue1_then_dequeue1/libbenchmark_benchmarks_queue_umm_windows_mutex_enqueue1_dequeue1.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_add.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_cleanup.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_gnuplot.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_init.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarkset/libbenchmark_benchmarkset_run.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_add.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_cleanup.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_gnuplot.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_init.c
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_benchmarksuite/libbenchmark_benchmarksuite_run.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_gcc_spinlock_atomic.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_gcc_spinlock_sync.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_msvc_spinlock.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_pthread_mutex.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_pthread_rwlock.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_pthread_spinlock_process_private.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_pthread_spinlock_process_shared.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_windows_critical_section.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_btree_au/libbenchmark_datastructure_btree_au_windows_mutex.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_gcc_spinlock_atomic.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_gcc_spinlock_sync.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_msvc_spinlock.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_pthread_mutex.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_pthread_rwlock.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_pthread_spinlock_process_private.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_pthread_spinlock_process_shared.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_windows_critical_section.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_freelist/libbenchmark_datastructure_freelist_windows_mutex.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_gcc_spinlock_atomic.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_gcc_spinlock_sync.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_msvc_spinlock.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_pthread_mutex.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_pthread_rwlock.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_pthread_spinlock_process_private.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_pthread_spinlock_process_shared.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_windows_critical_section.c
test_and_benchmark/libbenchmark/src/libbenchmark_datastructures_queue_umm/libbenchmark_datastructure_queue_umm_windows_mutex.c
test_and_benchmark/libbenchmark/src/libbenchmark_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_misc/libbenchmark_misc_globals.c
test_and_benchmark/libbenchmark/src/libbenchmark_misc/libbenchmark_misc_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_misc/libbenchmark_misc_pal_helpers.c
test_and_benchmark/libbenchmark/src/libbenchmark_misc/libbenchmark_misc_query.c
test_and_benchmark/libbenchmark/src/libbenchmark_porting_abstraction_layer/libbenchmark_porting_abstraction_layer_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_porting_abstraction_layer/libbenchmark_porting_abstraction_layer_populate_topology.c
test_and_benchmark/libbenchmark/src/libbenchmark_porting_abstraction_layer/libbenchmark_porting_abstraction_layer_print_string.c
test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_cleanup.c
test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_compare.c
test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_get_result.c
test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_init.c
test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_results/libbenchmark_results_put_result.c
test_and_benchmark/libbenchmark/src/libbenchmark_threadset/libbenchmark_threadset_cleanup.c
test_and_benchmark/libbenchmark/src/libbenchmark_threadset/libbenchmark_threadset_init.c
test_and_benchmark/libbenchmark/src/libbenchmark_threadset/libbenchmark_threadset_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_threadset/libbenchmark_threadset_operations.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_cleanup.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_compare.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_init.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_insert.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_internal.h
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_iterate.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_lpsets.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_numa.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_query.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology/libbenchmark_topology_string.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology_node/libbenchmark_topology_node_cleanup.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology_node/libbenchmark_topology_node_compare.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology_node/libbenchmark_topology_node_init.c
test_and_benchmark/libbenchmark/src/libbenchmark_topology_node/libbenchmark_topology_node_internal.h
test_and_benchmark/libshared/build/wdk_7.1/driver_entry_renamed_to_avoid_compiler_warning.c
test_and_benchmark/libshared/inc/libshared.h
test_and_benchmark/libshared/inc/libshared/libshared_ansi.h
test_and_benchmark/libshared/inc/libshared/libshared_memory.h
test_and_benchmark/libshared/inc/libshared/libshared_misc.h
test_and_benchmark/libshared/inc/libshared/libshared_porting_abstraction_layer.h
test_and_benchmark/libshared/inc/libshared/libshared_porting_abstraction_layer_operating_system.h
test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_internal.h
test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strcat.c
test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strcat_char.c
test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strcat_number.c
test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strcpy.c
test_and_benchmark/libshared/src/libshared_ansi/libshared_ansi_strlen.c
test_and_benchmark/libshared/src/libshared_internal.h
test_and_benchmark/libshared/src/libshared_memory/libshared_memory_add.c
test_and_benchmark/libshared/src/libshared_memory/libshared_memory_alloc.c
test_and_benchmark/libshared/src/libshared_memory/libshared_memory_cleanup.c
test_and_benchmark/libshared/src/libshared_memory/libshared_memory_init.c
test_and_benchmark/libshared/src/libshared_memory/libshared_memory_internal.h
test_and_benchmark/libshared/src/libshared_memory/libshared_memory_query.c
test_and_benchmark/libshared/src/libshared_memory/libshared_memory_rollback.c
test_and_benchmark/libshared/src/libshared_misc/libshared_misc_internal.h
test_and_benchmark/libshared/src/libshared_misc/libshared_misc_query.c
test_and_benchmark/libshared/src/libshared_porting_abstraction_layer/libshared_porting_abstraction_layer_internal.h
test_and_benchmark/libshared/src/libshared_porting_abstraction_layer/libshared_porting_abstraction_layer_thread_start.c
test_and_benchmark/libshared/src/libshared_porting_abstraction_layer/libshared_porting_abstraction_layer_thread_wait.c
test_and_benchmark/libtest/build/wdk_7.1/driver_entry_renamed_to_avoid_compiler_warning.c
test_and_benchmark/libtest/inc/libtest.h
test_and_benchmark/libtest/inc/libtest/libtest_misc.h
test_and_benchmark/libtest/inc/libtest/libtest_porting_abstraction_layer.h
test_and_benchmark/libtest/inc/libtest/libtest_porting_abstraction_layer_compiler.h
test_and_benchmark/libtest/inc/libtest/libtest_porting_abstraction_layer_operating_system.h
test_and_benchmark/libtest/inc/libtest/libtest_results.h
test_and_benchmark/libtest/inc/libtest/libtest_test.h
test_and_benchmark/libtest/inc/libtest/libtest_tests.h
test_and_benchmark/libtest/inc/libtest/libtest_testsuite.h
test_and_benchmark/libtest/inc/libtest/libtest_threadset.h
test_and_benchmark/libtest/src/libtest_internal.h
test_and_benchmark/libtest/src/libtest_misc/libtest_misc_determine_erg.c
test_and_benchmark/libtest/src/libtest_misc/libtest_misc_globals.c
test_and_benchmark/libtest/src/libtest_misc/libtest_misc_internal.h
test_and_benchmark/libtest/src/libtest_misc/libtest_misc_memory_helpers.c
test_and_benchmark/libtest/src/libtest_misc/libtest_misc_pal_helpers.c
test_and_benchmark/libtest/src/libtest_misc/libtest_misc_query.c
test_and_benchmark/libtest/src/libtest_porting_abstraction_layer/libtest_porting_abstraction_layer_free.c
test_and_benchmark/libtest/src/libtest_porting_abstraction_layer/libtest_porting_abstraction_layer_get_full_logical_processor_set.c
test_and_benchmark/libtest/src/libtest_porting_abstraction_layer/libtest_porting_abstraction_layer_internal.h
test_and_benchmark/libtest/src/libtest_porting_abstraction_layer/libtest_porting_abstraction_layer_malloc.c
test_and_benchmark/libtest/src/libtest_results/libtest_results_cleanup.c
test_and_benchmark/libtest/src/libtest_results/libtest_results_get_result.c
test_and_benchmark/libtest/src/libtest_results/libtest_results_init.c
test_and_benchmark/libtest/src/libtest_results/libtest_results_internal.h
test_and_benchmark/libtest/src/libtest_results/libtest_results_put_result.c
test_and_benchmark/libtest/src/libtest_test/libtest_test_cleanup.c
test_and_benchmark/libtest/src/libtest_test/libtest_test_init.c
test_and_benchmark/libtest/src/libtest_test/libtest_test_internal.h
test_and_benchmark/libtest/src/libtest_test/libtest_test_run.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_btree_addonly_unbalanced_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_btree_addonly_unbalanced_random_adds_fail.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_btree_addonly_unbalanced_random_adds_fail_and_overwrite.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_btree_addonly_unbalanced_random_adds_overwrite.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_ea_popping.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_ea_popping_and_pushing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_ea_pushing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_ea_rapid_popping_and_pushing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_without_ea_popping.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_without_ea_popping_and_pushing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_without_ea_pushing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_freelist_without_ea_rapid_popping_and_pushing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_fail_and_overwrite.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_iterate.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_random_adds_fail.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_hash_addonly_random_adds_overwrite.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_internal.h
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_ordered_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_ordered_new_ordered.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_ordered_new_ordered_with_cursor.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_unordered_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_unordered_new_after.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_unordered_new_end.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_list_addonly_singlylinked_unordered_new_start.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_porting_abstraction_layer_atomic_add.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_porting_abstraction_layer_atomic_cas.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_porting_abstraction_layer_atomic_dwcas.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_porting_abstraction_layer_atomic_exchange.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_prng_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_prng_generate.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_count.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_dequeuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_enqueuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_enqueuing_and_dequeuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_manyproducer_manyconsumer_rapid_enqueuing_and_dequeuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_singleproducer_singleconsumer_dequeuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_singleproducer_singleconsumer_enqueuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_bounded_singleproducer_singleconsumer_enqueuing_and_dequeuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_dequeuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_enqueuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_enqueuing_and_dequeuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_enqueuing_and_dequeuing_one_element.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_queue_unbounded_manyproducer_manyconsumer_rapid_enqueuing_and_dequeuing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_ringbuffer_reading.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_ringbuffer_reading_and_writing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_ringbuffer_writing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_alignment.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_popping.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_popping_and_pushing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_pushing.c
test_and_benchmark/libtest/src/libtest_tests/libtest_tests_stack_rapid_popping_and_pushing.c
test_and_benchmark/libtest/src/libtest_testsuite/libtest_testsuite_cleanup.c
test_and_benchmark/libtest/src/libtest_testsuite/libtest_testsuite_init.c
test_and_benchmark/libtest/src/libtest_testsuite/libtest_testsuite_internal.h
test_and_benchmark/libtest/src/libtest_testsuite/libtest_testsuite_run.c
test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_add.c
test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_cleanup.c
test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_init.c
test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_internal.h
test_and_benchmark/libtest/src/libtest_threadset/libtest_threadset_operations.c
test_and_benchmark/test/src/callbacks.c
test_and_benchmark/test/src/internal.h
test_and_benchmark/test/src/main.c
test_and_benchmark/test/src/misc.c
test_and_benchmark/test/src/util_cmdline.c
test_and_benchmark/test/src/util_cmdline.h
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/numa.h
/usr/include/pthread.h
/usr/include/sched.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/numacompat1.h
/usr/include/string.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
